<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="csrf-token" content="XyMoBec0vexU3Uc6FRmgCq1T9viaXxZJLP7cxHcI">
<meta name="api-token" content="3ulTlAsihPkNSk8iaXDDW9UPKadvSZmV2hWqbRvDxYyOExJgEXriCDEQRnKm" />
<meta name="api-character-information-endpoint" content="https://web.idle-mmo.com/api/character/information?expires=1769114238&amp;signature=cb16dc0bda43390c7d3e89df1cc3f12300ac97fc77d191c859cd501039f67634">
<meta name="api-active-action-endpoint" content="https://web.idle-mmo.com/api/action/active?expires=1769114238&amp;signature=0cd5c31fb94f446f3ad6af9a7fb9aaa677ef83a15c5be7717c37d9a8589c461b">
<meta name="api-process-active-action-endpoint" content="https://web.idle-mmo.com/api/action/process?expires=1769114238&amp;signature=17340e8c35f62457c8d495c7730faaffd77845665233c7aeffd3a2c4c3e02c12">
<meta name="api-process-cancel-action-endpoint" content="https://web.idle-mmo.com/api/action/cancel?expires=1769114238&amp;signature=8555be5d283d5b922276bea99ab45aa5240ef7727e69c9d2a7a9e1e93887501f">
<meta name="inactivity-action-refresh-ms" content="60000">
<meta name="character-id" content="659085" />
<meta name="58723325487" content="ts2mic5ytx">
<meta name="35687898542" content="qty6bx4peh">
<meta name="4125b17842e8f0821df3c0b39e2028e6" content="gawain_lancelot">  
<meta name="97bb8f49b95994a54a3834a6d71f1b1b" content="gawain_arthur">  
<meta name="acd997a3fd8a0ff68e31eaa469f12803" content="mordred_excalibur">  
<meta name="aa63850cda378d1ca3714c2d15970ae2" content="91190924839">  
    <meta data-runtime name="c86edfdffa53f5d8f39fbd188d5c5613" content="eyJmaWVsZCI6Ijg3MmVhY2VmMDg4ZGYwMTg0Zjk3MDg5MCIsInZhbHVlIjoiYTA0NDRmY2Y0MTI2NzgyZGQ1Mjc0MTI3MjU0MDY4NzcxZTRjZGJjN2U0MmE5ODQ3YWFkNGFhNzQ4Y2IzZTYwNyJ9">
<meta name="98b10c24a4c41f9e834c612cd4ff513c" content="https://web.idle-mmo.com/api/34523452/235453253245/2134519874231203"> 
<meta name="01e8e40a2362418bf26fd0e5203dffd0" content="fair-maiden"> 
<meta name="description" content="Go on an epic adventure, hunt diverse enemies, embark on dungeons expeditions and defeat world bosses even while taking a nap!" />
<meta property="og:title" content="IdleMMO">
<meta property="og:description" content="Go on an epic adventure, hunt diverse enemies, embark on dungeons expeditions and defeat world bosses even while taking a nap!">
<meta property="og:url" content="https://www.idle-mmo.com">
<meta property="og:image" content="https://cdn.idle-mmo.com/global/og-image.jpg">
<meta name="color-scheme" content="dark">
<title>SVNCRY | IdleMMO </title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#111722">
<meta name="theme-color" content="#111722">

<!-- UI Scale -->
<script data-cfasync="false">
    // Apply UI scale immediately - this needs to run before any rendering
    (function() {
        const scale = localStorage.getItem('ui-scale');
        
        // Only apply if there's a saved scale AND it's not 100%
        if (scale && scale !== '100') {
            document.write('<style id="ui-scale-style">');
            document.write('html { font-size: ' + scale + '%; }');
            document.write('@media (max-width: 640px) { html { font-size: ' + Math.max(80, scale * 0.9) + '%; } }');
            document.write('</style>');
        } else {
            document.write('<style id="ui-scale-style"></style>');
        }
    })();
</script>
<script type="28379d9fb3f8c28bafd7d866-text/javascript">
    // Make the updateUIDisplay function globally available
    window.updateUIDisplay = function(newScale) {
        const style = document.getElementById('ui-scale-style');
        
        if (style) {
            // If scale is 100, clear the styles
            if (newScale === 100 || newScale === '100') {
                style.textContent = '';
            } else {
                style.textContent = 'html { font-size: ' + newScale + '%; }' +
                    '@media (max-width: 640px) { html { font-size: ' + Math.max(80, newScale * 0.9) + '%; } }';
            }
        }
    };
</script>

<!-- Display Adjustments (Brightness & Contrast) -->
<script data-cfasync="false">
    // Apply display adjustments immediately - this needs to run before any rendering
    (function() {
        const brightness = localStorage.getItem('display-brightness') || '100';
        const contrast = localStorage.getItem('display-contrast') || '100';

        // Apply if either brightness or contrast is not 100%
        if (brightness !== '100' || contrast !== '100') {
            document.write('<style id="display-adjustments-style">');
            document.write('html { filter: brightness(' + brightness + '%) contrast(' + contrast + '%); }');
            document.write('</style>');
        } else {
            document.write('<style id="display-adjustments-style"></style>');
        }
    })();
</script>
<script type="28379d9fb3f8c28bafd7d866-text/javascript">
    // Make the display adjustment functions globally available
    window.updateDisplayBrightness = function(newBrightness) {
        const style = document.getElementById('display-adjustments-style');
        const contrast = localStorage.getItem('display-contrast') || '100';

        if (style) {
            // If both are 100%, clear the styles
            if ((newBrightness === 100 || newBrightness === '100') && contrast === '100') {
                style.textContent = '';
            } else {
                style.textContent = 'html { filter: brightness(' + newBrightness + '%) contrast(' + contrast + '%); }';
            }
        }
    };

    window.updateDisplayContrast = function(newContrast) {
        const style = document.getElementById('display-adjustments-style');
        const brightness = localStorage.getItem('display-brightness') || '100';

        if (style) {
            // If both are 100%, clear the styles
            if ((newContrast === 100 || newContrast === '100') && brightness === '100') {
                style.textContent = '';
            } else {
                style.textContent = 'html { filter: brightness(' + brightness + '%) contrast(' + newContrast + '%); }';
            }
        }
    };
</script>

<!-- Scripts -->
<link rel="preload" as="style" href="https://web.idle-mmo.com/build/assets/app-ZlRPTkqK.css" nonce="vCEDiMVdoe7chAaNuYU9tyX37wrlIlFRGhVwqS4H" /><link rel="preload" as="style" href="https://web.idle-mmo.com/build/assets/app-DZovhLPo.css" nonce="vCEDiMVdoe7chAaNuYU9tyX37wrlIlFRGhVwqS4H" /><link rel="modulepreload" as="script" href="https://web.idle-mmo.com/build/assets/game-zNkGp9QX.js" nonce="vCEDiMVdoe7chAaNuYU9tyX37wrlIlFRGhVwqS4H" /><link rel="modulepreload" as="script" href="https://web.idle-mmo.com/build/assets/wiki-DMY6mZxz.js" nonce="vCEDiMVdoe7chAaNuYU9tyX37wrlIlFRGhVwqS4H" /><link rel="modulepreload" as="script" href="https://web.idle-mmo.com/build/assets/app-C6jhZWuk.js" nonce="vCEDiMVdoe7chAaNuYU9tyX37wrlIlFRGhVwqS4H" /><link rel="stylesheet" href="https://web.idle-mmo.com/build/assets/app-ZlRPTkqK.css" nonce="vCEDiMVdoe7chAaNuYU9tyX37wrlIlFRGhVwqS4H" data-navigate-track="reload" /><link rel="stylesheet" href="https://web.idle-mmo.com/build/assets/app-DZovhLPo.css" nonce="vCEDiMVdoe7chAaNuYU9tyX37wrlIlFRGhVwqS4H" data-navigate-track="reload" /><script type="28379d9fb3f8c28bafd7d866-module" src="https://web.idle-mmo.com/build/assets/game-zNkGp9QX.js" nonce="vCEDiMVdoe7chAaNuYU9tyX37wrlIlFRGhVwqS4H" data-navigate-track="reload"></script><script type="28379d9fb3f8c28bafd7d866-module" src="https://web.idle-mmo.com/build/assets/app-C6jhZWuk.js" nonce="vCEDiMVdoe7chAaNuYU9tyX37wrlIlFRGhVwqS4H" data-navigate-track="reload"></script>
<script type="28379d9fb3f8c28bafd7d866-text/javascript">
    /*to prevent Firefox FOUC, this must be here*/
    let FF_FOUC_FIX;
</script>

    <style>
        .background-pattern { opacity: 0; transition: opacity .35s ease-out; }
        .background-pattern.background-pattern--visible { opacity: 1; }
    </style>
</head>
<body class="font-sans antialiased text-gray-200 bg-[#111722] diagonal-line-pattern min-h-screen">


<div id="background-pattern-root"></div>
<template id="background-pattern-template">
    <svg class="hidden md:block background-pattern absolute inset-0 -z-10 h-full w-full stroke-white/10 [mask-image:radial-gradient(100%_100%_at_top_left,white,transparent)]" aria-hidden="true">
        <defs>
            <pattern id="983e3e4c-de6d-4c3f-8d64-b9761d1534cc" width="200" height="200" x="50%" y="-1" patternUnits="userSpaceOnUse">
                <path d="M.5 200V.5H200" fill="none"></path>
            </pattern>
        </defs>
        <svg x="50%" y="-1" class="overflow-visible fill-gray-800/20">
            <path d="M-200 0h201v201h-201Z M600 0h201v201h-201Z M-400 600h201v201h-201Z M200 800h201v201h-201Z" stroke-width="0"></path>
        </svg>
        <rect width="100%" height="100%" stroke-width="0" fill="url(#983e3e4c-de6d-4c3f-8d64-b9761d1534cc)"></rect>
    </svg>
</template>

<div x-data="{
        mobile_pullout: false,
        profile_dropdown: false,
        }">
    
    

    
    

    
    <script type="28379d9fb3f8c28bafd7d866-text/javascript">(function() { var STORAGE_KEY = 'menu:closed-sections'; var ORDER_KEY = 'menu:section-order'; var SECTIONS = ['character', 'party', 'skills', 'play', 'combat', 'trade', 'nearby', 'more']; function sanitizeClosed(list) { if (!Array.isArray(list)) return []; var unique = []; for (var i = 0; i < list.length; i++) { var value = list[i]; if (typeof value === 'string' && SECTIONS.indexOf(value) !== -1 && unique.indexOf(value) === -1) { unique.push(value); } } return unique; } function sanitizeOrder(list) { var sanitized = sanitizeClosed(list); for (var i = 0; i < SECTIONS.length; i++) { if (sanitized.indexOf(SECTIONS[i]) === -1) sanitized.push(SECTIONS[i]); } return sanitized; } function loadClosedSections() { try { var stored = localStorage.getItem(STORAGE_KEY); if (stored) { var parsed = sanitizeClosed(JSON.parse(stored)); if (parsed.length) return parsed; } } catch (error) {} return []; } function loadSectionOrder() { try { var stored = localStorage.getItem(ORDER_KEY); if (stored) return sanitizeOrder(JSON.parse(stored)); } catch (error) {} return sanitizeOrder([]); } function setMenuSectionOrder(order) { window.menuSectionOrder = sanitizeOrder(order); localStorage.setItem(ORDER_KEY, JSON.stringify(window.menuSectionOrder)); } function injectInitialStyles(closedSections, order) { if (!closedSections.length && !order.length) return null; var css = ''; for (var i = 0; i < closedSections.length; i++) { css += '#section-' + closedSections[i] + '{display:none!important}'; css += '#arrow-' + closedSections[i] + '{transform:rotate(180deg)!important}'; } for (var j = 0; j < order.length; j++) { css += '[data-menu-section="' + order[j] + '"]{order:' + j + '}'; } var style = document.createElement('style'); style.id = 'menu-initial-styles'; style.textContent = css; document.head.appendChild(style); return style; } var closedSections = loadClosedSections(); window.closedMenuSections = closedSections; window.menuSectionOrder = loadSectionOrder(); var initialStyles = injectInitialStyles(closedSections, window.menuSectionOrder); function applyMenuSectionOrder(container) { var order = window.menuSectionOrder; var children = container.querySelectorAll('[data-menu-section]'); var map = {}; for (var i = 0; i < children.length; i++) { var key = children[i].getAttribute('data-menu-section'); map[key] = children[i]; } for (var j = 0; j < order.length; j++) { if (map[order[j]]) container.appendChild(map[order[j]]); } } function cleanupTransition(element, shouldHide) { element.classList.remove('menu-animating'); element.style.height = ''; element.style.opacity = ''; element.style.overflow = ''; if (shouldHide) element.classList.add('menu-hidden'); delete element.dataset.menuState; if (element._handler) { element.removeEventListener('transitionend', element._handler); element._handler = null; } } function animateMenuOpen(element) { if (element._handler) element.removeEventListener('transitionend', element._handler); element.classList.remove('menu-hidden'); element.classList.add('menu-animating'); element.dataset.menuState = 'opening'; element.style.height = '0px'; element.style.opacity = '0'; element.style.overflow = 'hidden'; element.getBoundingClientRect(); element._handler = function(e) { if (e.propertyName === 'height') cleanupTransition(element, false); }; element.addEventListener('transitionend', element._handler); requestAnimationFrame(function() { element.style.height = element.scrollHeight + 'px'; element.style.opacity = '1'; }); } function animateMenuClose(element) { if (element._handler) element.removeEventListener('transitionend', element._handler); element.classList.add('menu-animating'); element.dataset.menuState = 'closing'; element.style.height = element.scrollHeight + 'px'; element.style.opacity = '1'; element.style.overflow = 'hidden'; element.getBoundingClientRect(); element._handler = function(e) { if (e.propertyName === 'height') cleanupTransition(element, true); }; element.addEventListener('transitionend', element._handler); requestAnimationFrame(function() { element.style.height = '0px'; element.style.opacity = '0'; }); } window.initializeMenuSection = function(section) { var element = document.getElementById('section-' + section); var arrow = document.getElementById('arrow-' + section); if (!element || !arrow) return; element.classList.add('menu-collapsible'); arrow.classList.remove('arrow-open', 'arrow-closed'); if (window.closedMenuSections.indexOf(section) !== -1) { element.classList.add('menu-hidden'); arrow.classList.add('arrow-closed'); } else { element.classList.remove('menu-hidden'); arrow.classList.add('arrow-open'); } }; window.persistClosedMenuSections = function() { localStorage.setItem(STORAGE_KEY, JSON.stringify(window.closedMenuSections)); }; window.setMenuSectionOrder = setMenuSectionOrder; window.menuSortConfig = { animation: 150, store: { get: function() { return window.menuSectionOrder.slice(); }, set: function(sortable) { setMenuSectionOrder(sortable.toArray()); } } }; window.toggleMenuSection = function(section) { var element = document.getElementById('section-' + section); var arrow = document.getElementById('arrow-' + section); if (!element) return; var isHidden = element.classList.contains('menu-hidden'); var currentState = element.dataset.menuState; var shouldOpen = isHidden || currentState === 'closing'; if (currentState === 'closing' && shouldOpen) cleanupTransition(element, false); if (currentState === 'opening' && !shouldOpen) cleanupTransition(element, false); if (shouldOpen) { animateMenuOpen(element); } else { animateMenuClose(element); } if (arrow) { arrow.classList.remove('arrow-open', 'arrow-closed'); arrow.classList.add(shouldOpen ? 'arrow-open' : 'arrow-closed'); } if (shouldOpen) { window.closedMenuSections = window.closedMenuSections.filter(function(item) { return item !== section; }); } else if (window.closedMenuSections.indexOf(section) === -1) { window.closedMenuSections.push(section); } window.persistClosedMenuSections(); }; var container = document.querySelector('[data-menu-sections]'); if (container) { applyMenuSectionOrder(container); for (var i = 0; i < SECTIONS.length; i++) { window.initializeMenuSection(SECTIONS[i]); } if (initialStyles) initialStyles.remove(); } else { document.addEventListener('DOMContentLoaded', function() { container = document.querySelector('[data-menu-sections]'); if (container) { applyMenuSectionOrder(container); for (var i = 0; i < SECTIONS.length; i++) { window.initializeMenuSection(SECTIONS[i]); } if (initialStyles) initialStyles.remove(); } }); }})();</script>
<style>
    .menu-hidden { display: none; }
    .arrow-closed { transform: rotate(180deg); }
    .arrow-open { transform: rotate(0deg); }
    .menu-collapsible { transition: height 0.2s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.18s linear; }
    .menu-animating { overflow: hidden; }
</style>


<div x-data="{
    menuOpen: false,
    formatLevelDisplay(level) {
        let template = 'Lv. :number';
        return template.replace(':number', level);
    }
}">

    
    <div x-show="menuOpen"
         x-cloak
         @click="menuOpen = false"
         x-transition:enter="transition-opacity ease-linear duration-300"
         x-transition:enter-start="opacity-0"
         x-transition:enter-end="opacity-100"
         x-transition:leave="transition-opacity ease-linear duration-300"
         x-transition:leave-start="opacity-100"
         x-transition:leave-end="opacity-0"
         style="display:none;"
         class="fixed inset-0 bg-gray-900/80 z-40 lg:hidden">
    </div>

    
    
    <aside
        class="fixed inset-y-0 z-50 w-72 bg-immo transition-transform duration-300 ease-in-out left-0 lg:left-0 -translate-x-full lg:translate-x-0"
        :class="{ '!translate-x-0': menuOpen }"
        x-data="{ showFade: true }">

        
        <div class="flex flex-col h-full overflow-y-auto scrollbar-hide relative"
             @scroll="showFade = ($el.scrollHeight - $el.scrollTop - $el.clientHeight) > 96"
                          x-init="setTimeout(() => {
                 const activeItem = $el.querySelector('.bg-gray-800.text-white');
                 if (activeItem) {
                     activeItem.scrollIntoView({ behavior: 'smooth', block: 'center' });
                 }
             }, 100)"
                     >
            <div class="flex justify-end gap-1 items-center top-0 right-0 z-30 mt-2 mx-4">
                <a href="https://discord.gg/nDGbr7AKkk" target="_blank" rel="noopener nofollow">
                    <button type="button" class="flex items-center gap-1 rounded-md bg-indigo-900 border border-indigo-600 px-2 text-xs font-semibold text-white shadow-sm hover:bg-indigo-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-500">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="inline-block h-6 w-6">
                            <path d="M5.9143 7.38378L4.93679 14.6174C4.82454 15.448 5.24219 16.2606 5.983 16.6528L8.99995 18.25L9.99995 15.75C9.99995 15.75 10.6562 16.25 11.9999 16.25C13.3437 16.25 13.9999 15.75 13.9999 15.75L14.9999 18.25L18.0169 16.6528C18.7577 16.2606 19.1754 15.448 19.0631 14.6174L18.0856 7.38378C18.0334 6.99739 17.7613 6.67658 17.3887 6.56192L14.7499 5.75003V6.25003C14.7499 6.80232 14.3022 7.25003 13.7499 7.25003H10.2499C9.69766 7.25003 9.24995 6.80232 9.24995 6.25003V5.75003L6.61122 6.56192C6.23855 6.67658 5.96652 6.99739 5.9143 7.38378Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                            <path d="M10.5 12C10.5 12.2761 10.2761 12.5 10 12.5C9.72386 12.5 9.5 12.2761 9.5 12C9.5 11.7239 9.72386 11.5 10 11.5C10.2761 11.5 10.5 11.7239 10.5 12Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                            <path d="M14.5 12C14.5 12.2761 14.2761 12.5 14 12.5C13.7239 12.5 13.5 12.2761 13.5 12C13.5 11.7239 13.7239 11.5 14 11.5C14.2761 11.5 14.5 11.7239 14.5 12Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                        Discord
                    </button>
                </a>
                <span class="inline-flex items-center px-2 py-1 text-xs font-medium text-gray-300 h-full rounded-md bg-gray-800 border border-gray-600">
                    <span class="relative flex h-2 w-2 mr-2">
                      <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                      <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
                    </span>
                     9,111 Playing
                </span>
            </div>
            
            
            <button x-on:click="menuOpen = false"
                    class="lg:hidden z-40 p-1.5 text-gray-400 hover:text-white rounded-md hover:bg-gray-800/50 transition-colors absolute top-0 left-0 mt-2 ml-2">
                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>

            
            <div class="px-4 relative" x-data="{ characterDropdown: false }" @click.away="characterDropdown = false">
                <div x-data="character_selector">

                    
                    <div class="p-[1px] rounded-lg bg-gradient-to-br  from-gray-900 via-gray-700/40 to-gray-500/40   mt-4">
                        <button @click="characterDropdown = !characterDropdown; if(characterDropdown) getCharactersData()" class="w-full flex items-center justify-between  bg-[#191f2c] rounded-lg hover:bg-gray-800 transition-colors group relative z-10 bg-cover overflow-hidden"

                                style="background-image: url('https://cdn.idle-mmo.com/cdn-cgi/image/width=300,format=auto/skins/backgrounds/default.jpg');">
                            <div class="w-full h-full bg-gradient-to-r from-black/50 via-black/40 to-black/5 rounded-lg flex items-center justify-between px-2 py-3 overflow-hidden relative">
                                <div class="flex items-center gap-3">
                                    <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=120,height=120,format=auto/uploaded/skins/V19VbFlUBjD4NKqMe1ycSjEmMggIMr-metaVmFlbGxhIChyZXBsYWNlIHRoZSBvbGQgb25lKS5wbmc=-.png" class="absolute top-0 left-0 size-20 -ml-3 mt-1 max-w-none  z-0" alt="">

                                    <div class="text-white text-sm font-bold text-left ml-12 z-10">
                                        <span x-html="$store.current_character?.formatted_name"><div class='inline-block inline-flex gap-1 items-center'>
                    <span class='' >SVNCRY</span>
                    
                    
                </div></span>
                                        <div class="text-gray-400 font-medium">
                                            <span class="inline-flex items-center rounded-md px-2 py-1 text-xs font-medium  bg-black/25 text-gray-100">
                                                Total Lv. 40
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="size-6 flex items-center justify-end  bg-gradient-to-l from-black/80 via-black/30 to-transparent  h-full absolute right-0 w-24 pr-4">
                                    <svg class="w-4 h-4 flex-shrink-0 text-gray-100 group-hover:text-gray-300 transition-transform duration-200" :class="{ 'rotate-180': characterDropdown }" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                    </svg>
                                </div>
                            </div>
                        </button>
                    </div>

                    
                    <div x-show="characterDropdown"
                         x-cloak
                         x-transition:enter="transition ease-out duration-100"
                         x-transition:enter-start="opacity-0 scale-95"
                         x-transition:enter-end="opacity-100 scale-100"
                         x-transition:leave="transition ease-in duration-75"
                         x-transition:leave-start="opacity-100 scale-100"
                         x-transition:leave-end="opacity-0 scale-95"
                         class="absolute left-4 right-4 top-full mt-2 z-50 bg-[#151b2b] rounded-lg shadow-lg border border-gray-700/50 p-2 space-y-1"
                    >
                        
                        <template x-if="characters_data === null || characters_data?.characters === null">
                            <div class="text-center flex items-center justify-center">
                                <svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
</svg>                            </div>
                        </template>
                        
                        <template x-for="(character, index) in characters_data?.characters">
                            <form :action="character.change_url" method="POST" x-on:submit="is_processing = true">
                                <input type="hidden" name="_token" value="XyMoBec0vexU3Uc6FRmgCq1T9viaXxZJLP7cxHcI" autocomplete="off">
                                <button type="submit"
                                        x-bind:disabled="character.id === 659085 || is_processing"
                                        class="w-full flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-gray-800/60 transition-colors group disabled:opacity-40 relative">
                                    <div class="size-10 bg-gray-500 rounded-lg flex items-center justify-center text-white font-semibold text-sm relative overflow-hidden relative"
                                         :style="'background-image: url(\''+character.background_url+'\');'">
                                        <img :src="character.skin_url" class="absolute top-0 left-0 size-20 -ml-5 mt-0.5 max-w-none" alt="">
                                        <template  x-if="character.current_action !== null">
                                            <div class="absolute bottom-0 left-0 ml-0.5 mb-0.5">
                                                <svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
</svg>                                            </div>
                                        </template>
                                    </div>
                                    <div class="text-white text-sm font-medium text-left">
                                        <span class="font-bold" x-text="character.name"></span>
                                        <div class="text-gray-400 text-xs font-semibold">
                                            Total Lv. <span x-text='character.level'></span>
                                        </div>
                                    </div>
                                    <div class="absolute top-0 right-0 mt-1 mr-1 group-hover:block hidden">
                                        <kbd class="inline-flex items-center rounded bg-gray-800 px-1 font-sans text-xs text-gray-400"  x-cloak  x-show="navigator.userAgent.toUpperCase().indexOf('MAC')>=0">âŒ˜+<span x-text="index + 1"></span></kbd>
                                        <kbd class="inline-flex items-center rounded bg-gray-800 px-1 font-sans text-xs text-gray-400"  x-show="navigator.userAgent.toUpperCase().indexOf('WINDOWS')>=0">ALT+<span x-text="index + 1"></span></kbd>
                                    </div>
                                </button>
                                <input name="return_to_current_page" type="hidden" x-model="return_to_current_page">
                            </form>
                        </template>

                        
                        <template x-for="i in characters_data?.free_slots">
                            
                            <a href="https://web.idle-mmo.com/user/character/create">
                                <button class="w-full flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-gray-800/60 transition-colors group">
                                    <div class="size-10 bg-gray-700/50 rounded-lg flex items-center justify-center text-gray-400">
                                        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4"/>
                                        </svg>
                                    </div>
                                    <div class="text-white text-sm font-medium text-left">
                                        <span class="font-bold">Empty Slot</span>
                                        <div class="text-gray-400 text-xs font-semibold">
                                            Press to create
                                        </div>
                                    </div>
                                </button>
                            </a>
                        </template>

                        
                        <template x-for="i in characters_data?.level_locked_slot">
                            
                            <button class="w-full flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-gray-800/60 transition-colors group">
                                <div class="size-10 bg-gray-700/50 rounded-lg flex items-center justify-center text-gray-400">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z" />
                                    </svg>
                                </div>
                                <div class="text-white text-sm font-medium text-left">
                                    <span class="font-bold">Locked Slot</span>
                                    <div class="text-gray-400 text-xs font-semibold">
                                        Unlock at Combat Lv. <span class='text-gray-100'>45</span>
                                    </div>
                                </div>
                            </button>
                        </template>

                        
                        <template x-for="i in characters_data?.purchase_slots">
                            
                            <a href="https://web.idle-mmo.com/merchants?highlight%5B%5D=character-slot&amp;tab=SLOTS&amp;category=SATCHEL_AND_CO&amp;same_window=true">
                                <button class="w-full flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-gray-800/60 transition-colors group">
                                    <div class="size-10 bg-gray-700/50 rounded-lg flex items-center justify-center text-gray-400">
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z" />
                                        </svg>
                                    </div>
                                    <div class="text-white text-sm font-medium text-left">
                                        <span class="font-bold">Locked Slot</span>
                                        <div class="text-gray-400 text-xs font-semibold">
                                            Purchase for <img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/token.png' class='h-4 w-4 inline-block'> <span class='text-gray-100 font-bold'><span x-text='characters_data.slot_token_cost'></span></span>
                                        </div>
                                    </div>
                                </button>
                            </a>
                        </template>

                        
                        <template x-if="characters_data !== null">
                            <div>
                                <div class="text-left border-gray-700/80 border-t mt-4">
                                    <div class="flex items-center justify-between my-3 mx-3">
                                        <span class="flex flex-col flex-grow mr-3 text-left">
                                            <div>
                                                <span class="text-xs font-bold leading-6 text-gray-100 block" id="availability-label">Stay on Page
                                                <svg x-tooltip="{
    content: () => 'When changing character, the game will return you to the page you are currently on.',
    allowHTML: false,
    touch: ['click'],
    hideOnClick: false,
    appendTo: $root,
    placement: 'top',
}"
xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="inline-block w-4 h-4 ml-2 text-gray-500">
    <path fill-rule="evenodd" d="M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0ZM8.94 6.94a.75.75 0 1 1-1.061-1.061 3 3 0 1 1 2.871 5.026v.345a.75.75 0 0 1-1.5 0v-.5c0-.72.57-1.172 1.081-1.287A1.5 1.5 0 1 0 8.94 6.94ZM10 15a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z" clip-rule="evenodd" />
  </svg>
  
                                                </span>
                                            </div>
                                        </span>
                                        <button type="button" x-on:click="updateCurrentPageOption();" :class="{'bg-yellow-500':return_to_current_page, 'bg-gray-200':!return_to_current_page}" class="relative inline-flex flex-shrink-0 h-6 transition-colors duration-200 ease-in-out bg-gray-700 border-2 border-transparent rounded-full cursor-pointer w-11 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2" role="switch" aria-checked="false" aria-labelledby="availability-label" aria-describedby="availability-description">
                                            <span aria-hidden="true" :class="{'translate-x-5':return_to_current_page, 'translate-x-0':!return_to_current_page}" class="inline-block w-5 h-5 transition duration-200 ease-in-out transform translate-x-0 bg-gray-800 rounded-full shadow pointer-events-none ring-0"></span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>
            </div>

            
            <div class="mx-4 mt-2 flex items-center gap-2">
                
                <div class="relative flex-1">
                    <button type="button" 
                 
                class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block !bg-gray-800/60  hover:!bg-gray-900 flex items-center justify-center gap-2 !text-gray-400 h-full w-full" x-tooltip.raw="Notifications" x-on:click="$dispatch('communication-hub', 'notifications')">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                            <path fill-rule="evenodd" d="M12 5a4 4 0 0 0-8 0v2.379a1.5 1.5 0 0 1-.44 1.06L2.294 9.707a1 1 0 0 0-.293.707V11a1 1 0 0 0 1 1h2a3 3 0 1 0 6 0h2a1 1 0 0 0 1-1v-.586a1 1 0 0 0-.293-.707L12.44 8.44A1.5 1.5 0 0 1 12 7.38V5Zm-5.5 7a1.5 1.5 0 0 0 3 0h-3Z" clip-rule="evenodd"></path>
                        </svg>
        </button>
                    <span class="absolute top-0 right-0 -mt-0.5 -mr-0.5" x-show="$store.current_character.unread_notification_count >= 1" x-cloak>
                        <span class="relative flex size-2.5">
                          <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-yellow-400 opacity-75"></span>
                          <span class="relative inline-flex rounded-full size-2.5 bg-yellow-500"></span>
                        </span>
                    </span>
                </div>

                
                <div class="relative flex-1">
                    <button type="button" 
                 
                class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block !bg-gray-800/60  hover:!bg-gray-900 flex items-center justify-center gap-2 !text-gray-400 h-full w-full" x-tooltip.raw="Mail" x-on:click="$dispatch('communication-hub', 'messages')">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                            <path fill-rule="evenodd" d="M8 2C4.262 2 1 4.57 1 8c0 1.86.98 3.486 2.455 4.566a3.472 3.472 0 0 1-.469 1.26.75.75 0 0 0 .713 1.14 6.961 6.961 0 0 0 3.06-1.06c.403.062.818.094 1.241.094 3.738 0 7-2.57 7-6s-3.262-6-7-6ZM5 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm7-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM8 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z" clip-rule="evenodd"></path>
                        </svg>
        </button>
                    <span class="absolute top-0 right-0 -mt-0.5 -mr-0.5" x-show="$store.current_character.unread_mail_count >= 1" x-cloak>
                        <span class="relative flex size-2.5">
                          <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-yellow-400 opacity-75"></span>
                          <span class="relative inline-flex rounded-full size-2.5 bg-yellow-500"></span>
                        </span>
                    </span>
                </div>

                
                <div class="flex-1">
                    <button type="button" 
                 
                class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block !bg-gray-800/60  hover:!bg-gray-900 flex items-center justify-center gap-2 !text-gray-400 h-full w-full" x-tooltip.raw="Search" x-on:click="$dispatch('open-modal', 'global-search')">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                            <path fill-rule="evenodd" d="M9.965 11.026a5 5 0 1 1 1.06-1.06l2.755 2.754a.75.75 0 1 1-1.06 1.06l-2.755-2.754ZM10.5 7a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Z" clip-rule="evenodd" />
                        </svg>
        </button>
                </div>

                
                <a x-preload href="https://web.idle-mmo.com/friends" class="flex-1">
                    <button type="button" 
                 
                class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block !bg-gray-800/60  hover:!bg-gray-900 flex items-center justify-center gap-2 !text-gray-400 h-full w-full" x-tooltip.raw="Friends">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                            <path d="M8.5 4.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0ZM10.9 12.006c.11.542-.348.994-.9.994H2c-.553 0-1.01-.452-.902-.994a5.002 5.002 0 0 1 9.803 0ZM14.002 12h-1.59a2.556 2.556 0 0 0-.04-.29 6.476 6.476 0 0 0-1.167-2.603 3.002 3.002 0 0 1 3.633 1.911c.18.522-.283.982-.836.982ZM12 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" />
                        </svg>
        </button>
                </a>

                
                <a x-preload href="https://web.idle-mmo.com/settings/account" class="flex-1">
                    <button type="button" 
                 
                class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block !bg-gray-800/60  hover:!bg-gray-900 flex items-center justify-center gap-2 !text-gray-400 h-full w-full" x-tooltip.raw="Settings">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                            <path fill-rule="evenodd" d="M6.455 1.45A.5.5 0 0 1 6.952 1h2.096a.5.5 0 0 1 .497.45l.186 1.858a4.996 4.996 0 0 1 1.466.848l1.703-.769a.5.5 0 0 1 .639.206l1.047 1.814a.5.5 0 0 1-.14.656l-1.517 1.09a5.026 5.026 0 0 1 0 1.694l1.516 1.09a.5.5 0 0 1 .141.656l-1.047 1.814a.5.5 0 0 1-.639.206l-1.703-.768c-.433.36-.928.649-1.466.847l-.186 1.858a.5.5 0 0 1-.497.45H6.952a.5.5 0 0 1-.497-.45l-.186-1.858a4.993 4.993 0 0 1-1.466-.848l-1.703.769a.5.5 0 0 1-.639-.206l-1.047-1.814a.5.5 0 0 1 .14-.656l1.517-1.09a5.033 5.033 0 0 1 0-1.694l-1.516-1.09a.5.5 0 0 1-.141-.656L2.46 3.593a.5.5 0 0 1 .639-.206l1.703.769c.433-.36.928-.65 1.466-.848l.186-1.858Zm-.177 7.567-.022-.037a2 2 0 0 1 3.466-1.997l.022.037a2 2 0 0 1-3.466 1.997Z" clip-rule="evenodd" />
                        </svg>
        </button>
                </a>

                
                <div class="flex-1">
                    <button type="button" 
                 
                class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block !bg-gray-800/60  hover:!bg-gray-900 flex items-center justify-center gap-2 !text-gray-400 h-full w-full" x-tooltip.raw="Logout" x-on:click="$dispatch('open-modal', 'logout')">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                            <path d="M4.75 2A2.75 2.75 0 0 0 2 4.75v6.5A2.75 2.75 0 0 0 4.75 14h3a2.75 2.75 0 0 0 2.75-2.75v-.5a.75.75 0 0 0-1.5 0v.5c0 .69-.56 1.25-1.25 1.25h-3c-.69 0-1.25-.56-1.25-1.25v-6.5c0-.69.56-1.25 1.25-1.25h3C8.44 3.5 9 4.06 9 4.75v.5a.75.75 0 0 0 1.5 0v-.5A2.75 2.75 0 0 0 7.75 2h-3Z" />
                            <path d="M8.03 6.28a.75.75 0 0 0-1.06-1.06L4.72 7.47a.75.75 0 0 0 0 1.06l2.25 2.25a.75.75 0 1 0 1.06-1.06l-.97-.97h7.19a.75.75 0 0 0 0-1.5H7.06l.97-.97Z" />
                        </svg>
        </button>
                </div>
            </div>

            
            <div class="mx-4 mt-2">
                            </div>

            
            <nav class="flex-1 px-4">
                <div x-sort
                     x-sort:config="window.menuSortConfig"
                     class="flex flex-col"
                     data-menu-sections>

                    
                    <div x-sort:item data-id="party" data-menu-section="party">
                        
                        <div class="border-t border-dashed border-gray-700/50 my-4"></div>

                        <div>
                            <button onclick="if (!window.__cfRLUnblockHandlers) return false; toggleMenuSection('party')" class="w-full flex items-center justify-between text-xs font-semibold leading-6 text-gray-400 hover:text-gray-300 transition-colors" data-cf-modified-28379d9fb3f8c28bafd7d866-="">
                                <div class="flex items-center gap-x-2">
                                    <svg x-sort:handle class="w-3 h-3 text-gray-600 cursor-grab active:cursor-grabbing hover:text-gray-500 transition-colors" fill="currentColor" viewBox="0 0 16 16">
                                        <circle cx="3" cy="3" r="1.5"/>
                                        <circle cx="3" cy="8" r="1.5"/>
                                        <circle cx="3" cy="13" r="1.5"/>
                                        <circle cx="8" cy="3" r="1.5"/>
                                        <circle cx="8" cy="8" r="1.5"/>
                                        <circle cx="8" cy="13" r="1.5"/>
                                    </svg>
                                    <span>Party</span>
                                </div>
                                <svg id="arrow-party" class="w-4 h-4 transition-transform duration-200 arrow-open" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                </svg>
                            </button>
                            <div id="section-party"
                                 class="menu-collapsible mt-2">
                                
                                <div class="min-h-[80px] flex flex-col items-center justify-center">
                                    
                                    <div x-show="$store.current_character?.party === undefined">
                                        <div class="text-center">
                                            <svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
</svg>                                        </div>
                                    </div>

                                    <div class="isolate flex -space-x-2 justify-center flex-wrap">
                                        
                                        <div x-show="$store.current_character?.party && $store.current_character?.party?.members">
                                            <template x-for="member in $store.current_character?.party?.members" :key="member.id">
                                                <a class="inline-flex hover:-translate-y-1 transition-all duration-300 ease-out" :href="member.profile_url" x-tooltip="member.name">
                                                    <button class="relative inline-block h-10 w-10 rounded-full ring-4 ring-immo bg-gray-700/60 overflow-hidden bg-cover" :style="`background-image: url('${member.background_url}');`">
                                                        <img class="h-16 -ml-3 mt-0.5 max-w-none" :src="member.image_url" alt="">
                                                    </button>
                                                </a>
                                            </template>
                                        </div>
                                        
                                        <div x-cloak x-show="$store.current_character?.party === null" class="inline-flex">
                                            <div class="relative inline-block h-10 w-10 rounded-full ring-4 ring-immo bg-grayNoBackdrop"></div>
                                        </div>
                                        <div x-cloak x-show="$store.current_character?.party === null" class="inline-flex">
                                            <div class="relative inline-block h-10 w-10 rounded-full ring-4 ring-immo bg-grayNoBackdrop"></div>
                                        </div>
                                        <div x-cloak x-show="$store.current_character?.party === null" class="inline-flex">
                                            <div class="relative inline-block h-10 w-10 rounded-full ring-4 ring-immo bg-grayNoBackdrop"></div>
                                        </div>
                                        <div x-cloak x-show="$store.current_character?.party === null" class="inline-flex">
                                            <div class="relative inline-block h-10 w-10 rounded-full ring-4 ring-immo bg-grayNoBackdrop"></div>
                                        </div>
                                    </div>
                                    <div x-cloak x-show="$store.current_character?.party !== null  && $store.current_character?.party?.members" class="text-center mt-2 flex gap-2 items-center flex-wrap justify-center">
                                        <button class="bg-gray-800/40 hover:bg-gray-700/30 font-medium text-gray-200 text-sm px-2 rounded py-1 ring-1 ring-gray-700/40 flex items-center gap-2 justify-center" x-on:click="$dispatch('party-overview', 'your-party');">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4 text-gray-600 inline-block">
                                                <path d="M8.5 4.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0ZM10.9 12.006c.11.542-.348.994-.9.994H2c-.553 0-1.01-.452-.902-.994a5.002 5.002 0 0 1 9.803 0ZM14.002 12h-1.59a2.556 2.556 0 0 0-.04-.29 6.476 6.476 0 0 0-1.167-2.603 3.002 3.002 0 0 1 3.633 1.911c.18.522-.283.982-.836.982ZM12 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" />
                                            </svg>
                                            Party
                                        </button>
                                    </div>
                                    <div x-cloak x-show="$store.current_character?.party === null" class="text-center mt-2 flex gap-2 items-center flex-wrap justify-center">
                                        <button class="bg-gray-800/40 hover:bg-gray-700/30 font-medium text-gray-200 text-sm px-2 rounded py-1 ring-1 ring-gray-700/40 flex items-center gap-2 justify-center" x-on:click="$dispatch('party-overview', 'your-party');">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4 text-gray-600 inline-block">
                                                <path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z" />
                                            </svg>
                                            Create
                                        </button>
                                        <button class="bg-gray-800/40 hover:bg-gray-700/30 font-medium text-gray-200 text-sm px-2 rounded py-1 ring-1 ring-gray-700/40 flex items-center gap-2 justify-center relative" x-on:click="$dispatch('party-overview', 'invites');">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4 text-gray-600 inline-block">
                                                <path d="M8.5 4.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0ZM10.9 12.006c.11.542-.348.994-.9.994H2c-.553 0-1.01-.452-.902-.994a5.002 5.002 0 0 1 9.803 0ZM14.002 12h-1.59a2.556 2.556 0 0 0-.04-.29 6.476 6.476 0 0 0-1.167-2.603 3.002 3.002 0 0 1 3.633 1.911c.18.522-.283.982-.836.982ZM12 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" />
                                            </svg>
                                            Invites
                                            <template x-if="$store.current_character?.is_pending_party_invite">
                                                <span class="absolute top-0 right-0 -mr-1 -mt-1 flex size-2.5">
                                                    <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-yellow-400 opacity-75"></span>
                                                    <span class="relative inline-flex rounded-full size-2.5 bg-yellow-500"></span>
                                                </span>
                                            </template>
                                        </button>
                                        <button x-tooltip.raw="What are parties?" class="bg-gray-800/40 hover:bg-gray-700/30 font-medium h-7 flex-1 text-gray-400 text-sm px-2 rounded py-1 ring-1 ring-gray-700/40 flex items-center gap-2 justify-center relative" x-on:click="$dispatch('open-wiki', '/community/parties#parties');">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="size-3" viewBox="0 0 24 24"><path fill="currentColor" d="M14.6 8.075q0-1.075-.712-1.725T12 5.7q-.725 0-1.312.313t-1.013.912q-.4.575-1.088.663T7.4 7.225q-.35-.325-.387-.8t.237-.9q.8-1.2 2.038-1.862T12 3q2.425 0 3.938 1.375t1.512 3.6q0 1.125-.475 2.025t-1.75 2.125q-.925.875-1.25 1.363T13.55 14.6q-.1.6-.513 1t-.987.4t-.987-.387t-.413-.963q0-.975.425-1.787T12.5 11.15q1.275-1.125 1.688-1.737t.412-1.338M12 22q-.825 0-1.412-.587T10 20t.588-1.412T12 18t1.413.588T14 20t-.587 1.413T12 22" stroke-width="0.5" stroke="currentColor"/></svg>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    
                    <div x-sort:item data-id="character" data-menu-section="character">
                        
                        <div class="border-t border-dashed border-gray-700/50 my-4"></div>

                        <button onclick="if (!window.__cfRLUnblockHandlers) return false; toggleMenuSection('character')" class="w-full flex items-center justify-between text-xs font-semibold leading-6 text-gray-400 hover:text-gray-300 transition-colors" data-cf-modified-28379d9fb3f8c28bafd7d866-="">
                            <div class="flex items-center gap-x-2">
                                <svg x-sort:handle class="w-3 h-3 text-gray-600 cursor-grab active:cursor-grabbing hover:text-gray-500 transition-colors" fill="currentColor" viewBox="0 0 16 16">
                                    <circle cx="3" cy="3" r="1.5"/>
                                    <circle cx="3" cy="8" r="1.5"/>
                                    <circle cx="3" cy="13" r="1.5"/>
                                    <circle cx="8" cy="3" r="1.5"/>
                                    <circle cx="8" cy="8" r="1.5"/>
                                    <circle cx="8" cy="13" r="1.5"/>
                                </svg>
                                <span>Character</span>
                            </div>
                            <svg id="arrow-character" class="w-4 h-4 transition-transform duration-200 arrow-open" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                            </svg>
                        </button>
                        <ul id="section-character" class="space-y-1 menu-collapsible mt-2">
                            <li class="relative">
                                <a x-preload href="https://web.idle-mmo.com/profile"
                                   class="group flex items-center gap-x-3 rounded-md px-2 py-2 text-sm font-semibold bg-gray-800 text-white">
                                    <svg class="w-5 h-5 shrink-0 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                                        <circle cx="12" cy="8" r="3.25" stroke-linecap="round" stroke-linejoin="round"></circle>
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6.8475 19.25H17.1525C18.2944 19.25 19.174 18.2681 18.6408 17.2584C17.8563 15.7731 16.068 14 12 14C7.93201 14 6.14367 15.7731 5.35924 17.2584C4.82597 18.2681 5.70558 19.25 6.8475 19.25Z"></path>
                                    </svg>
                                    Profile
                                    <span class="ml-auto mr-1">
                                                                            </span>
                                </a>
                            </li>
                            <li>
                                <a x-preload href="https://web.idle-mmo.com/inventory"
                                   class="group flex items-center gap-x-3 rounded-md px-2 py-2 text-sm font-semibold text-gray-400 hover:text-white hover:bg-gray-800">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 shrink-0  text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M10 8s.5.25 2 .25S14 8 14 8s1.75-2.25 4-2.25M4.75 15c0 3 3.25 4.25 7.25 4.25S19.25 18 19.25 15c0-1.565-1.7-4.13-3.328-5.27-1.6-1.12-2.497-3.112-1.922-4.98h-4c.575 1.868-.321 3.86-1.922 4.981C6.45 10.871 4.75 13.435 4.75 15Z"></path>
                                    </svg>
                                    Inventory
                                </a>
                            </li>
                            <li>
                                <button
                                    x-on:click="$dispatch('open-modal', 'show-map');"
                                   class="group flex items-center gap-x-3 w-full text-left rounded-md px-2 py-2 text-sm font-semibold text-gray-400 hover:text-white hover:bg-gray-800">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 shrink-0  text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 6.75V15m6-6v8.25m.503 3.498l4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 00-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0z" />
                                    </svg>
                                    Map
                                </button>
                            </li>
                        </ul>
                    </div>

                    
                    <div x-sort:item data-id="skills" data-menu-section="skills">

                        
                        <div class="border-t border-dashed border-gray-700/50 my-4"></div>

                        <div>
                            <button onclick="if (!window.__cfRLUnblockHandlers) return false; toggleMenuSection('skills')" class="w-full flex items-center justify-between text-xs font-semibold leading-6 text-gray-400 hover:text-gray-300 transition-colors" data-cf-modified-28379d9fb3f8c28bafd7d866-="">
                                <div class="flex items-center gap-x-2">
                                    <svg x-sort:handle class="w-3 h-3 text-gray-600 cursor-grab active:cursor-grabbing hover:text-gray-500 transition-colors" fill="currentColor" viewBox="0 0 16 16">
                                        <circle cx="3" cy="3" r="1.5"/>
                                        <circle cx="3" cy="8" r="1.5"/>
                                        <circle cx="3" cy="13" r="1.5"/>
                                        <circle cx="8" cy="3" r="1.5"/>
                                        <circle cx="8" cy="8" r="1.5"/>
                                        <circle cx="8" cy="13" r="1.5"/>
                                    </svg>
                                    <span>Skills</span>
                                </div>
                                <svg id="arrow-skills" class="w-4 h-4 transition-transform duration-200 arrow-open" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                </svg>
                            </button>
                            <ul id="section-skills"
                                class="space-y-1 menu-collapsible mt-2">
                                
                                <li x-data="{ level: 1 }"
                                    x-on:level-up.window="if($event.detail.type === 'woodcutting') level = $event.detail.level">
                                    <a x-preload href="https://web.idle-mmo.com/skills/view/woodcutting"
                                       class="group relative flex items-center gap-x-3 rounded-md px-2 py-2 text-sm font-semibold text-gray-400 hover:text-white hover:bg-gray-800">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 shrink-0 text-gray-600" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="m14 12l-8.381 8.38a1 1 0 0 1-3.001-3L11 9"/><path d="M15 15.5a.5.5 0 0 0 .5.5A6.5 6.5 0 0 0 22 9.5a.5.5 0 0 0-.5-.5h-1.672a2 2 0 0 1-1.414-.586l-5.062-5.062a1.205 1.205 0 0 0-1.704 0L9.352 5.648a1.205 1.205 0 0 0 0 1.704l5.062 5.062A2 2 0 0 1 15 13.828z"/></g></svg>
                                        <span class="flex-1">Woodcutting</span>
                                        <span x-text="formatLevelDisplay(level)" class="absolute right-2 top-1/2 -translate-y-1/2 inline-flex items-center whitespace-nowrap rounded-md bg-gray-600/40 px-2 py-1 text-xs font-bold text-gray-200">
                                            <svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
</svg>                                        </span>
                                    </a>
                                </li>

                                
                                <li x-data="{ level: 11 }"
                                    x-on:level-up.window="if($event.detail.type === 'mining') level = $event.detail.level">
                                    <a x-preload href="https://web.idle-mmo.com/skills/view/mining"
                                       class="group relative flex items-center gap-x-3 rounded-md px-2 py-2 text-sm font-semibold text-gray-400 hover:text-white hover:bg-gray-800">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="size-5 shrink-0 text-gray-600" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="m14 13l-8.381 8.38a1 1 0 0 1-3.001-3L11 9.999m4.973-5.972A13 13 0 0 0 5.902 2.373c-1.398.342-1.092 2.158.277 2.601a19.9 19.9 0 0 1 5.822 3.024m4 4.001a19.9 19.9 0 0 1 3.024 5.824c.444 1.369 2.26 1.676 2.603.278A13 13 0 0 0 20 8.069"/><path d="M18.352 3.352a1.205 1.205 0 0 0-1.704 0l-5.296 5.296a1.205 1.205 0 0 0 0 1.704l2.296 2.296a1.205 1.205 0 0 0 1.704 0l5.296-5.296a1.205 1.205 0 0 0 0-1.704z"/></g></svg>
                                        <span class="flex-1">Mining</span>
                                        <span x-text="formatLevelDisplay(level)" class="absolute right-2 top-1/2 -translate-y-1/2 inline-flex items-center whitespace-nowrap rounded-md bg-gray-600/40 px-2 py-1 text-xs font-bold text-gray-200">
                                            <svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
</svg>                                        </span>
                                    </a>
                                </li>

                                
                                <li x-data="{ level: 1 }"
                                    x-on:level-up.window="if($event.detail.type === 'fishing') level = $event.detail.level">
                                    <a x-preload href="https://web.idle-mmo.com/skills/view/fishing"
                                       class="group relative flex items-center gap-x-3 rounded-md px-2 py-2 text-sm font-semibold text-gray-400 hover:text-white hover:bg-gray-800">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="size-5 shrink-0 text-gray-600" viewBox="0 0 24 24"><g fill="none" fill-rule="evenodd"><path d="m12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.018-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"/><path fill="currentColor" d="M20.485 3.515c-.33-.33-.935-.657-1.61-.905a9 9 0 0 0-2.673-.536c-1.79-.085-3.928.345-5.97 1.92a1 1 0 0 0-.093.04L7.31 5.45a1 1 0 0 0 .169 1.855a11.7 11.7 0 0 0-1.178 4.14c-.075.782-.129 1.93-.185 3.122c-.023.502-.047 1.013-.073 1.507c-.617.05-1.188.109-1.654.184c-.49.08-1.042.177-1.438.503c-.169.14-.436.437-.436.897c0 .923.832 1.777 1.442 2.386c.609.61 1.463 1.442 2.386 1.442c.46 0 .758-.267.897-.436c.326-.396.423-.947.503-1.438a21 21 0 0 0 .184-1.654c.494-.026 1.004-.05 1.507-.073c1.192-.056 2.34-.11 3.122-.185a11.7 11.7 0 0 0 4.14-1.178a1 1 0 0 0 1.855.169l1.414-2.829a1 1 0 0 0 .042-.094c1.574-2.041 2.004-4.179 1.919-5.969a9 9 0 0 0-.536-2.673c-.248-.675-.574-1.28-.905-1.61ZM9.435 15.88c-.452.021-.917.043-1.383.067c.024-.466.046-.931.067-1.382c.053-1.137.101-2.184.173-2.932c.2-2.108 1.054-4.051 2.294-5.29c1.9-1.9 3.912-2.349 5.52-2.272a7 7 0 0 1 2.078.414c.301.111.63.239.885.442l.002.001l.001.002c.203.254.33.584.442.885c.2.544.375 1.261.414 2.077c.077 1.609-.372 3.622-2.271 5.521c-1.24 1.24-3.182 2.094-5.29 2.294c-.75.072-1.796.12-2.933.173Zm-4.469 2.312c.276-.037.594-.07.942-.102c-.03.35-.064.667-.101.942a8 8 0 0 1-.84-.84Zm9.862-9.021A1.5 1.5 0 1 0 16.95 7.05a1.5 1.5 0 0 0-2.122 2.122Z"/></g></svg>
                                        <span class="flex-1">Fishing</span>
                                        <span x-text="formatLevelDisplay(level)" class="absolute right-2 top-1/2 -translate-y-1/2 inline-flex items-center whitespace-nowrap rounded-md bg-gray-600/40 px-2 py-1 text-xs font-bold text-gray-200">
                                            <svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
</svg>                                        </span>
                                    </a>
                                </li>

                                
                                <li x-data="{ level: 1 }"
                                    x-on:level-up.window="if($event.detail.type === 'alchemy') level = $event.detail.level">
                                    <a x-preload href="https://web.idle-mmo.com/skills/view/alchemy"
                                       class="group relative flex items-center gap-x-3 rounded-md px-2 py-2 text-sm font-semibold text-gray-400 hover:text-white hover:bg-gray-800">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="size-5 shrink-0 text-gray-600" viewBox="0 0 24 24"><path fill="currentColor" d="M18.93 11.67a.4.4 0 0 0 0-.1A7.4 7.4 0 0 0 15 7.62V4h1a1 1 0 0 0 0-2H8a1 1 0 0 0 0 2h1v3.62a7.4 7.4 0 0 0-3.89 4a.4.4 0 0 0 0 .1a7.5 7.5 0 1 0 13.86 0Zm-8.62-2.41a1 1 0 0 0 .69-.95V4h2v4.31a1 1 0 0 0 .69.95A5.43 5.43 0 0 1 16.23 11H7.77a5.43 5.43 0 0 1 2.54-1.74M12 20a5.51 5.51 0 0 1-5.5-5.5a5.3 5.3 0 0 1 .22-1.5h10.56a5.3 5.3 0 0 1 .22 1.5A5.51 5.51 0 0 1 12 20m2-4a1 1 0 1 0 1 1a1 1 0 0 0-1-1m-4-1a1 1 0 1 0 1 1a1 1 0 0 0-1-1" stroke-width="0.5" stroke="currentColor"/></svg>
                                        <span class="flex-1">Alchemy</span>
                                        <span x-text="formatLevelDisplay(level)" class="absolute right-2 top-1/2 -translate-y-1/2 inline-flex items-center whitespace-nowrap rounded-md bg-gray-600/40 px-2 py-1 text-xs font-bold text-gray-200">
                                            <svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
</svg>                                        </span>
                                    </a>
                                </li>

                                
                                <li x-data="{ level: 1 }"
                                    x-on:level-up.window="if($event.detail.type === 'smelting') level = $event.detail.level">
                                    <a x-preload href="https://web.idle-mmo.com/skills/view/smelting"
                                       class="group relative flex items-center gap-x-3 rounded-md px-2 py-2 text-sm font-semibold text-gray-400 hover:text-white hover:bg-gray-800">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="size-5 shrink-0 text-gray-600" viewBox="0 0 24 24"><g fill="none" fill-rule="evenodd"><path d="m12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.018-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"/><path fill="currentColor" d="m10.255 1.387l1.26.756a8.15 8.15 0 0 1 3.48 4.144c.222-.5.486-.985.731-1.475l.981.981C18.909 7.995 21 11.295 21 14.5c0 4.298-2.65 7.023-6.89 7.494l-1.39.154l.304-1.365c.237-1.068.28-1.766.23-2.255c-.06-.615-.352-1.098-.716-1.578c-.348-.46-.693-.921-.969-1.43c-1.135.897-1.575 1.707-1.716 2.374c-.18.854.075 1.727.541 2.659l.822 1.644l-1.826-.203c-2.576-.286-5.114-2.007-6.114-4.518c-1.045-2.627-.306-5.806 3.07-8.732c2.24-1.941 3.426-4.458 3.909-7.357m1.332 3.3c-.762 2.14-2.225 4.09-3.932 5.569c-2.911 2.523-3.172 4.844-2.52 6.48c.485 1.22 1.532 2.223 2.773 2.792a5 5 0 0 1-.012-2.046c.326-1.546 1.438-2.995 3.574-4.33l1.077-.673l.402 1.205c.352 1.056 1.082 1.803 1.653 2.73c.628 1.02.748 2.19.62 3.358C17.842 19.117 19 17.13 19 14.5c0-2.222-1.34-4.402-2.67-6.106c-.548 1.228-1.703 1.66-2.83 2.224V9c0-1.369-.557-3.038-1.913-4.312Z" stroke-width="0.5" stroke="currentColor"/></g></svg>
                                        <span class="flex-1">Smelting</span>
                                        <span x-text="formatLevelDisplay(level)" class="absolute right-2 top-1/2 -translate-y-1/2 inline-flex items-center whitespace-nowrap rounded-md bg-gray-600/40 px-2 py-1 text-xs font-bold text-gray-200">
                                            <svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
</svg>                                        </span>
                                    </a>
                                </li>

                                
                                <li x-data="{ level: 1 }"
                                    x-on:level-up.window="if($event.detail.type === 'cooking') level = $event.detail.level">
                                    <a x-preload href="https://web.idle-mmo.com/skills/view/cooking"
                                       class="group relative flex items-center gap-x-3 rounded-md px-2 py-2 text-sm font-semibold text-gray-400 hover:text-white hover:bg-gray-800">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="size-5 shrink-0 text-gray-600" viewBox="0 0 256 256"><path fill="currentColor" d="M253.76 93A12 12 0 0 0 237 90.24l-9 6.44V80a12 12 0 0 0-12-12H40a12 12 0 0 0-12 12v16.68l-9-6.44a12 12 0 1 0-14 19.52l23 16.42V184a36 36 0 0 0 36 36h128a36 36 0 0 0 36-36v-57.82l23-16.42A12 12 0 0 0 253.76 93M204 184a12 12 0 0 1-12 12H64a12 12 0 0 1-12-12V92h152ZM76 40V16a12 12 0 0 1 24 0v24a12 12 0 0 1-24 0m40 0V16a12 12 0 0 1 24 0v24a12 12 0 0 1-24 0m40 0V16a12 12 0 0 1 24 0v24a12 12 0 0 1-24 0" stroke-width="6.5" stroke="currentColor"/></svg>
                                        <span class="flex-1">Cooking</span>
                                        <span x-text="formatLevelDisplay(level)" class="absolute right-2 top-1/2 -translate-y-1/2 inline-flex items-center whitespace-nowrap rounded-md bg-gray-600/40 px-2 py-1 text-xs font-bold text-gray-200">
                                            <svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
</svg>                                        </span>
                                    </a>
                                </li>

                                
                                <li x-data="{ level: 1 }"
                                    x-on:level-up.window="if($event.detail.type === 'forge') level = $event.detail.level">
                                    <a x-preload href="https://web.idle-mmo.com/skills/view/forge"
                                       class="group relative flex items-center gap-x-3 rounded-md px-2 py-2 text-sm font-semibold text-gray-400 hover:text-white hover:bg-gray-800">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="size-5 shrink-0 text-gray-600" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 10H6a4 4 0 0 1-4-4a1 1 0 0 1 1-1h4m0 0a1 1 0 0 1 1-1h13a1 1 0 0 1 1 1a7 7 0 0 1-7 7H8a1 1 0 0 1-1-1zm2 7v5m6-5v5M5 20a3 3 0 0 1 3-3h8a3 3 0 0 1 3 3a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1"/></svg>
                                        <span class="flex-1">Forge</span>
                                        <span x-text="formatLevelDisplay(level)" class="absolute right-2 top-1/2 -translate-y-1/2 inline-flex items-center whitespace-nowrap rounded-md bg-gray-600/40 px-2 py-1 text-xs font-bold text-gray-200">
                                            <svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
</svg>                                        </span>
                                    </a>
                                </li>

                                
                                <li x-data="{ level: 1 }"
                                    x-on:level-up.window="if($event.detail.type === 'meditation') level = $event.detail.level">
                                    <a x-preload href="https://web.idle-mmo.com/skills/view/meditation"
                                       class="group relative flex items-center gap-x-3 rounded-md px-2 py-2 text-sm font-semibold text-gray-400 hover:text-white hover:bg-gray-800 opacity-40">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="size-5 shrink-0 text-gray-600" viewBox="0 0 48 48"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4"><path d="M19 16c.196-2.143 1.235-7.143 5-10c1.372 1.667 4.53 6 5 10"/><path d="M23.752 42C15.282 40.545-.3 31.31 5.12 6c7.152 1.636 20.892 11.127 18.633 36"/><path d="M24.248 42C32.718 40.545 48.3 31.31 42.88 6c-7.152 1.636-20.892 11.127-18.633 36"/></g></svg>
                                        <div class="flex-1">
                                            <span class="block">Meditation</span>
                                                                                            <span class="text-gray-600 font-semibold text-xs">Unlocks at Total Lv. 50</span>
                                                                                    </div>
                                                                                    <div class="ml-auto text-gray-600">
                                                <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                                                    <path fill-rule="evenodd" d="M8 1a3.5 3.5 0 0 0-3.5 3.5V7A1.5 1.5 0 0 0 3 8.5v5A1.5 1.5 0 0 0 4.5 15h7a1.5 1.5 0 0 0 1.5-1.5v-5A1.5 1.5 0 0 0 11.5 7V4.5A3.5 3.5 0 0 0 8 1Zm2 6V4.5a2 2 0 1 0-4 0V7h4Z" clip-rule="evenodd" />
                                                </svg>
                                            </div>
                                                                            </a>
                                </li>

                                
                                
                                
                                
                                
                                
                                
                                                            </ul>
                        </div>
                    </div>

                    
                    <div x-sort:item data-id="play" data-menu-section="play">
                        
                        <div class="border-t border-dashed border-gray-700/50 my-4"></div>

                        <div>
                            <button onclick="if (!window.__cfRLUnblockHandlers) return false; toggleMenuSection('play')" class="w-full flex items-center justify-between text-xs font-semibold leading-6 text-gray-400 hover:text-gray-300 transition-colors" data-cf-modified-28379d9fb3f8c28bafd7d866-="">
                                <div class="flex items-center gap-x-2">
                                    <svg x-sort:handle class="w-3 h-3 text-gray-600 cursor-grab active:cursor-grabbing hover:text-gray-500 transition-colors" fill="currentColor" viewBox="0 0 16 16">
                                        <circle cx="3" cy="3" r="1.5"/>
                                        <circle cx="3" cy="8" r="1.5"/>
                                        <circle cx="3" cy="13" r="1.5"/>
                                        <circle cx="8" cy="3" r="1.5"/>
                                        <circle cx="8" cy="8" r="1.5"/>
                                        <circle cx="8" cy="13" r="1.5"/>
                                    </svg>
                                    <span>Play</span>
                                </div>
                                <svg id="arrow-play" class="w-4 h-4 transition-transform duration-200 arrow-open" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                </svg>
                            </button>
                            <ul id="section-play"
                                class="space-y-1 menu-collapsible mt-2">
                                <li>
                                    <a x-preload href="https://web.idle-mmo.com/pets" class="group flex items-center gap-x-3 rounded-md p-2 text-sm font-semibold text-gray-400 hover:text-white hover:bg-gray-800">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 shrink-0  text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M14.625 13.33v-.03c0-1.408-1.175-2.55-2.625-2.55s-2.625 1.142-2.625 2.55v.03c-1.484.206-2.625 1.446-2.625 2.945 0 1.643 1.371 2.975 3.063 2.975.856 0 1.631-.342 2.187-.893.556.551 1.33.893 2.188.893 1.69 0 3.062-1.332 3.062-2.975 0-1.499-1.141-2.739-2.625-2.945Z"></path>
                                            <circle cx="6" cy="10" r="1.25" stroke-linecap="round" stroke-linejoin="round"></circle>
                                            <circle cx="12" cy="6" r="1.25" stroke-linecap="round" stroke-linejoin="round"></circle>
                                            <circle cx="18" cy="10" r="1.25" stroke-linecap="round" stroke-linejoin="round"></circle>
                                        </svg>
                                        Pets
                                    </a>
                                </li>
                                <li>
                                    <a x-preload href="https://web.idle-mmo.com/museum" class="group flex items-center gap-x-3 rounded-md p-2 text-sm font-semibold text-gray-400 hover:text-white hover:bg-gray-800">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 shrink-0  text-gray-600" viewBox="0 0 16 16" fill="currentColor">
                                            <path d="M8 5a.75.75 0 1 0 0-1.5A.75.75 0 0 0 8 5m.736-3.545a1.17 1.17 0 0 0-1.472 0L2.262 5.52C1.654 6.016 2.004 7 2.788 7H3v4.2c-.594.303-1 .92-1 1.633v.667a.5.5 0 0 0 .5.5h11a.5.5 0 0 0 .5-.5v-.667c0-.712-.406-1.33-1-1.633V7h.212c.784 0 1.134-.985.525-1.48zm-.84.776a.17.17 0 0 1 .21 0L12.742 6H3.256zM12 11h-1V7h1zm-2 0H8.5V7H10zm-2.5 0H6V7h1.5zm4.667 1c.46 0 .833.373.833.833V13H3v-.167c0-.46.373-.833.833-.833zM5 11H4V7h1z"/>
                                        </svg>
                                        Museum
                                    </a>
                                </li>
                                <li>
                                    <a x-preload href="https://web.idle-mmo.com/quests" class="group flex items-center gap-x-3 rounded-md p-2 text-sm font-semibold text-gray-400 hover:text-white hover:bg-gray-800">
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 shrink-0  text-gray-600 ">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z" />
                                        </svg>
                                        Quests
                                    </a>
                                </li>
                                <li>
                                    <a x-preload href="https://web.idle-mmo.com/guilds"
                                        class="group flex items-center gap-x-3 rounded-md p-2 text-sm font-semibold text-gray-400 hover:text-white hover:bg-gray-800 opacity-40">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5 shrink-0  text-gray-600">
                                            <path d="M21,11C21,16.55 17.16,21.74 12,23C6.84,21.74 3,16.55 3,11V5L12,1L21,5V11M12,21C15.75,20 19,15.54 19,11.22V6.3L12,3.18L5,6.3V11.22C5,15.54 8.25,20 12,21Z" />
                                        </svg>
                                        <div class="flex-1">
                                            <span class="block">Guild</span>
                                                                                            <span class="text-gray-600 font-semibold text-xs">Unlocks at Total Lv. 120</span>
                                                                                    </div>
                                                                                    <div class="ml-auto text-gray-600">
                                                <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                                                    <path fill-rule="evenodd" d="M8 1a3.5 3.5 0 0 0-3.5 3.5V7A1.5 1.5 0 0 0 3 8.5v5A1.5 1.5 0 0 0 4.5 15h7a1.5 1.5 0 0 0 1.5-1.5v-5A1.5 1.5 0 0 0 11.5 7V4.5A3.5 3.5 0 0 0 8 1Zm2 6V4.5a2 2 0 1 0-4 0V7h4Z" clip-rule="evenodd" />
                                                </svg>
                                            </div>
                                                                            </a>
                                </li>
                                <li>
                                    <a x-preload href="https://web.idle-mmo.com/leagues"
                                       class="group flex items-center gap-x-3 rounded-md p-2 text-sm font-semibold text-gray-400 hover:text-white hover:bg-gray-800 opacity-40">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="w-5 h-5 shrink-0  text-gray-600">
                                            <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v4l3-2l3 2v-4M13.957 4.275l-.323-.444a2.022 2.022 0 0 0-3.268 0l-.323.444L9.5 4.19A2.02 2.02 0 0 0 7.19 6.5l.085.543l-.444.323a2.02 2.02 0 0 0 0 3.268l.444.323l-.085.542A2.02 2.02 0 0 0 9.5 13.81l.543-.085l.323.444a2.022 2.022 0 0 0 3.268 0l.323-.444l.542.085a2.02 2.02 0 0 0 2.311-2.31l-.085-.543l.444-.323a2.022 2.022 0 0 0 0-3.268l-.444-.323l.085-.542A2.02 2.02 0 0 0 14.5 4.19z" />
                                        </svg>
                                        <div class="flex-1">
                                            <span class="block">Leagues</span>
                                                                                            <span class="text-gray-600 font-semibold text-xs">Unlocks at Total Lv. 150</span>
                                                                                    </div>
                                                                                    <div class="ml-auto text-gray-600">
                                                <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                                                    <path fill-rule="evenodd" d="M8 1a3.5 3.5 0 0 0-3.5 3.5V7A1.5 1.5 0 0 0 3 8.5v5A1.5 1.5 0 0 0 4.5 15h7a1.5 1.5 0 0 0 1.5-1.5v-5A1.5 1.5 0 0 0 11.5 7V4.5A3.5 3.5 0 0 0 8 1Zm2 6V4.5a2 2 0 1 0-4 0V7h4Z" clip-rule="evenodd" />
                                                </svg>
                                            </div>
                                                                            </a>
                                </li>
                            </ul>
                        </div>
                    </div>

                    
                    <div x-sort:item data-id="combat" data-menu-section="combat">
                        
                        <div class="border-t border-dashed border-gray-700/50 my-4"></div>

                        <div>
                            <button onclick="if (!window.__cfRLUnblockHandlers) return false; toggleMenuSection('combat')" class="w-full flex items-center justify-between text-xs font-semibold leading-6 text-gray-400 hover:text-gray-300 transition-colors" data-cf-modified-28379d9fb3f8c28bafd7d866-="">
                                <div class="flex items-center gap-x-2">
                                    <svg x-sort:handle class="w-3 h-3 text-gray-600 cursor-grab active:cursor-grabbing hover:text-gray-500 transition-colors" fill="currentColor" viewBox="0 0 16 16">
                                        <circle cx="3" cy="3" r="1.5"/>
                                        <circle cx="3" cy="8" r="1.5"/>
                                        <circle cx="3" cy="13" r="1.5"/>
                                        <circle cx="8" cy="3" r="1.5"/>
                                        <circle cx="8" cy="8" r="1.5"/>
                                        <circle cx="8" cy="13" r="1.5"/>
                                    </svg>
                                    <span>Combat</span>
                                </div>
                                <svg id="arrow-combat" class="w-4 h-4 transition-transform duration-200 arrow-open" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                </svg>
                            </button>
                            <ul id="section-combat"
                                class="space-y-1 menu-collapsible mt-2">
                                <li x-data="{ level: 1 }"
                                    x-on:level-up.window="if($event.detail.type === 'combat') level = $event.detail.level">
                                    <a x-preload href="https://web.idle-mmo.com/combat/battle" class="relative group flex items-center gap-x-3 rounded-md p-2 text-sm font-semibold text-gray-400 hover:text-white hover:bg-gray-800">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 shrink-0  text-gray-600" viewBox="0 0 256 256" fill="currentColor">
                                            <path d="M216 32h-64a8 8 0 0 0-6.34 3.12l-64 83.21l-9.66-9.64a16 16 0 0 0-22.64 0l-12.69 12.7a16 16 0 0 0 0 22.63l20 20l-28 28a16 16 0 0 0 0 22.63l12.69 12.68a16 16 0 0 0 22.62 0l28-28l20 20a16 16 0 0 0 22.64 0l12.69-12.7a16 16 0 0 0 0-22.63l-9.64-9.64l83.21-64A8 8 0 0 0 224 104V40a8 8 0 0 0-8-8M52.69 216L40 203.32l28-28L80.68 188Zm70.61-8L48 132.71L60.7 120l75.3 75.31ZM208 100.06l-81.74 62.88L115.32 152l50.34-50.34a8 8 0 0 0-11.32-11.31L104 140.68l-10.93-10.94L155.94 48H208Z"/>
                                        </svg>
                                        Battle
                                        <span x-text="formatLevelDisplay(level)" class="absolute right-2 top-1/2 -translate-y-1/2 inline-flex items-center whitespace-nowrap rounded-md bg-gray-600/40 px-2 py-1 text-xs font-bold text-gray-200">
                                            <svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
</svg>                                        </span>
                                    </a>
                                </li>
                                <li x-data="{ level: 1 }"
                                    x-on:level-up.window="if($event.detail.type === 'dungeoneering') level = $event.detail.level">
                                    <a x-preload href="https://web.idle-mmo.com/combat/dungeon"
                                       class="relative group flex items-center gap-x-3 rounded-md p-2 text-sm font-semibold text-gray-400 hover:text-white hover:bg-gray-800 opacity-40">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 shrink-0  text-gray-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M3 21h7v-3a2 2 0 0 1 4 0v3h7M6 21v-9m12 9v-9M6 12h12a3 3 0 0 0 3-3a9 8 0 0 1-9-6a9 8 0 0 1-9 6a3 3 0 0 0 3 3"/>
                                        </svg>
                                        <div class="flex-1">
                                            <span class="block">Dungeons</span>
                                                                                            <span class="text-gray-600 font-semibold text-xs">Unlocks at Total Lv. 80</span>
                                                                                    </div>
                                                                                    <div class="ml-auto text-gray-600">
                                                <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                                                    <path fill-rule="evenodd" d="M8 1a3.5 3.5 0 0 0-3.5 3.5V7A1.5 1.5 0 0 0 3 8.5v5A1.5 1.5 0 0 0 4.5 15h7a1.5 1.5 0 0 0 1.5-1.5v-5A1.5 1.5 0 0 0 11.5 7V4.5A3.5 3.5 0 0 0 8 1Zm2 6V4.5a2 2 0 1 0-4 0V7h4Z" clip-rule="evenodd" />
                                                </svg>
                                            </div>
                                                                            </a>
                                </li>
                                <li>
                                    <a x-preload href="https://web.idle-mmo.com/combat/world-boss"
                                       class="group flex items-center gap-x-3 rounded-md p-2 text-sm font-semibold text-gray-400 hover:text-white hover:bg-gray-800 opacity-40">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 shrink-0  text-gray-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M14.5 17.5L3 6V3h3l11.5 11.5M13 19l6-6m-3 3l4 4m-1 1l2-2M14.5 6.5L18 3h3v3l-3.5 3.5M5 14l4 4m-2-1l-3 3m-1-1l2 2"/>
                                        </svg>
                                        <div class="flex-1">
                                            <span class="block">World Bosses</span>
                                                                                            <span class="text-gray-600 font-semibold text-xs">Unlocks at Total Lv. 100</span>
                                                                                    </div>
                                                                                    <div class="ml-auto text-gray-600">
                                                <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                                                    <path fill-rule="evenodd" d="M8 1a3.5 3.5 0 0 0-3.5 3.5V7A1.5 1.5 0 0 0 3 8.5v5A1.5 1.5 0 0 0 4.5 15h7a1.5 1.5 0 0 0 1.5-1.5v-5A1.5 1.5 0 0 0 11.5 7V4.5A3.5 3.5 0 0 0 8 1Zm2 6V4.5a2 2 0 1 0-4 0V7h4Z" clip-rule="evenodd" />
                                                </svg>
                                            </div>
                                                                            </a>
                                </li>
                            </ul>
                        </div>
                    </div>

                    
                    <div x-sort:item data-id="trade" data-menu-section="trade">
                        
                        <div class="border-t border-dashed border-gray-700/50 my-4"></div>

                        <div>
                            <button onclick="if (!window.__cfRLUnblockHandlers) return false; toggleMenuSection('trade')" class="w-full flex items-center justify-between text-xs font-semibold leading-6 text-gray-400 hover:text-gray-300 transition-colors" data-cf-modified-28379d9fb3f8c28bafd7d866-="">
                                <div class="flex items-center gap-x-2">
                                    <svg x-sort:handle class="w-3 h-3 text-gray-600 cursor-grab active:cursor-grabbing hover:text-gray-500 transition-colors" fill="currentColor" viewBox="0 0 16 16">
                                        <circle cx="3" cy="3" r="1.5"/>
                                        <circle cx="3" cy="8" r="1.5"/>
                                        <circle cx="3" cy="13" r="1.5"/>
                                        <circle cx="8" cy="3" r="1.5"/>
                                        <circle cx="8" cy="8" r="1.5"/>
                                        <circle cx="8" cy="13" r="1.5"/>
                                    </svg>
                                    <span>Trade</span>
                                </div>
                                <svg id="arrow-trade" class="w-4 h-4 transition-transform duration-200 arrow-open" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                </svg>
                            </button>
                            <ul id="section-trade"
                                class="space-y-1 menu-collapsible mt-2">
                                <li>
                                    <a x-preload href="https://web.idle-mmo.com/merchants" class="group flex items-center gap-x-3 rounded-md p-2 text-sm font-semibold text-gray-400 hover:text-white hover:bg-gray-800">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 shrink-0  text-gray-600" stroke="currentColor" stroke-width="1.5">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M8.75 9.25V6.5M19.25 6.5V10.5C19.25 10.9324 18.7796 11.3281 18 11.6335M19.25 6.5C19.25 7.4665 16.8995 8.25 14 8.25C11.1005 8.25 8.75 7.4665 8.75 6.5M19.25 6.5C19.25 5.5335 16.8995 4.75 14 4.75C11.1005 4.75 8.75 5.5335 8.75 6.5"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.25 13.5V17.5C15.25 18.4665 12.8995 19.25 10 19.25C7.10051 19.25 4.75 18.4665 4.75 17.5V13.5M15.25 13.5C15.25 14.4665 12.8995 15.25 10 15.25C7.10051 15.25 4.75 14.4665 4.75 13.5M15.25 13.5C15.25 12.5335 12.8995 11.75 10 11.75C7.10051 11.75 4.75 12.5335 4.75 13.5"></path>
                                        </svg>
                                        Merchants
                                    </a>
                                </li>
                                <li>
                                    <a x-preload href="https://web.idle-mmo.com/market/listings"
                                       class="group flex items-center gap-x-3 rounded-md p-2 text-sm font-semibold text-gray-400 hover:text-white hover:bg-gray-800">
                                        <svg class="w-5 h-5 shrink-0  text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M6.75024 19.2502H17.2502C18.3548 19.2502 19.2502 18.3548 19.2502 17.2502V8.18322C19.2502 7.89772 19.1891 7.61553 19.071 7.35561L18.5332 6.17239C18.2086 5.45841 17.4967 5 16.7124 5H7.28807C6.50378 5 5.79188 5.45841 5.46734 6.1724L4.92951 7.35561C4.81137 7.61553 4.75024 7.89772 4.75024 8.18322V17.2502C4.75024 18.3548 5.64568 19.2502 6.75024 19.2502Z"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M9.5 7.75C9.5 8.99264 8.5 10.25 7 10.25C5.5 10.25 4.75 8.99264 4.75 7.75"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M19.25 7.75C19.25 8.99264 18.5 10.25 17 10.25C15.5 10.25 14.5 8.99264 14.5 7.75"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M14.5 7.75C14.5 8.99264 13.5 10.25 12 10.25C10.5 10.25 9.5 8.99264 9.5 7.75"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M9.74963 15.7493C9.74963 14.6447 10.6451 13.7493 11.7496 13.7493H12.2496C13.3542 13.7493 14.2496 14.6447 14.2496 15.7493V19.2493H9.74963V15.7493Z"></path>
                                        </svg>
                                        <div class="flex-1">
                                            <span class="block">Market</span>
                                                                                    </div>
                                                                            </a>
                                </li>
                            </ul>
                        </div>
                    </div>

                    
                    <div x-sort:item data-id="nearby" data-menu-section="nearby">
                        
                        <div class="border-t border-dashed border-gray-700/50 my-4"></div>

                        <div>
                            <button onclick="if (!window.__cfRLUnblockHandlers) return false; toggleMenuSection('nearby')" class="w-full flex items-center justify-between text-xs font-semibold leading-6 text-gray-400 hover:text-gray-300 transition-colors" data-cf-modified-28379d9fb3f8c28bafd7d866-="">
                                <div class="flex items-center gap-x-2">
                                    <svg x-sort:handle class="w-3 h-3 text-gray-600 cursor-grab active:cursor-grabbing hover:text-gray-500 transition-colors" fill="currentColor" viewBox="0 0 16 16">
                                        <circle cx="3" cy="3" r="1.5"/>
                                        <circle cx="3" cy="8" r="1.5"/>
                                        <circle cx="3" cy="13" r="1.5"/>
                                        <circle cx="8" cy="3" r="1.5"/>
                                        <circle cx="8" cy="8" r="1.5"/>
                                        <circle cx="8" cy="13" r="1.5"/>
                                    </svg>
                                    <span>Nearby</span>
                                </div>
                                <svg id="arrow-nearby" class="w-4 h-4 transition-transform duration-200 arrow-open" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                </svg>
                            </button>
                            <ul id="section-nearby"
                                class="space-y-1 menu-collapsible mt-2">
                                <li>
                                    <button x-on:click="$dispatch('open-modal', 'contribute-to-shrine');"  class="w-full  text-left group flex items-center gap-x-3 rounded-md p-2 text-sm font-semibold disabled:opacity-40 text-gray-400 hover:text-white hover:bg-gray-800">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 shrink-0  text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0012 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75z" />
                                        </svg>
                                        <div>
                                            <span class="block">Shrine</span>
                                                                                    </div>
                                                                            </button>
                                </li>
                                <li>
                                    <button x-on:click="$dispatch('open-modal', 'shooting-star');"  disabled  class="w-full text-left group flex items-center gap-x-3 rounded-md p-2 text-sm font-semibold disabled:opacity-40 text-gray-400 hover:text-white hover:bg-gray-800">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 shrink-0  text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.456-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z" />
                                        </svg>
                                        <div>
                                            <span class="block">Shooting Star</span>
                                                                                        <span class="text-gray-600 font-semibold text-xs">No star at this location</span>
                                                                                    </div>
                                                                                <div class="ml-auto text-gray-600">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                                                <path fill-rule="evenodd" d="M8 1a3.5 3.5 0 0 0-3.5 3.5V7A1.5 1.5 0 0 0 3 8.5v5A1.5 1.5 0 0 0 4.5 15h7a1.5 1.5 0 0 0 1.5-1.5v-5A1.5 1.5 0 0 0 11.5 7V4.5A3.5 3.5 0 0 0 8 1Zm2 6V4.5a2 2 0 1 0-4 0V7h4Z" clip-rule="evenodd" />
                                            </svg>
                                        </div>
                                                                            </button>
                                </li>
                            </ul>
                        </div>
                    </div>

                    
                    <div x-sort:item data-id="more" data-menu-section="more">
                        
                        <div class="border-t border-dashed border-gray-700/50 my-4"></div>

                        <div>
                            <button onclick="if (!window.__cfRLUnblockHandlers) return false; toggleMenuSection('more')" class="w-full flex items-center justify-between text-xs font-semibold leading-6 text-gray-400 hover:text-gray-300 transition-colors" data-cf-modified-28379d9fb3f8c28bafd7d866-="">
                                <div class="flex items-center gap-x-2">
                                    <svg x-sort:handle class="w-3 h-3 text-gray-600 cursor-grab active:cursor-grabbing hover:text-gray-500 transition-colors" fill="currentColor" viewBox="0 0 16 16">
                                        <circle cx="3" cy="3" r="1.5"/>
                                        <circle cx="3" cy="8" r="1.5"/>
                                        <circle cx="3" cy="13" r="1.5"/>
                                        <circle cx="8" cy="3" r="1.5"/>
                                        <circle cx="8" cy="8" r="1.5"/>
                                        <circle cx="8" cy="13" r="1.5"/>
                                    </svg>
                                    <span>More</span>
                                </div>
                                <svg id="arrow-more" class="w-4 h-4 transition-transform duration-200 arrow-open" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                </svg>
                            </button>
                            <ul id="section-more"
                                class="space-y-1 menu-collapsible mt-2">
                                <li>
                                    <a x-preload href="https://web.idle-mmo.com/campaign" class="group flex items-center gap-x-3 rounded-md p-2 text-sm font-semibold text-gray-400 hover:text-white hover:bg-gray-800">
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 shrink-0  text-gray-600">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25" />
                                        </svg>
                                        Campaign
                                    </a>
                                </li>
                                <li>
                                    <a x-preload href="https://web.idle-mmo.com/tavern"
                                       class="group flex items-center gap-x-3 rounded-md p-2 text-sm font-semibold text-gray-400 hover:text-white hover:bg-gray-800">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 shrink-0  text-gray-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M17 11h1a3 3 0 0 1 0 6h-1m-8-5v6m4-6v6m1-10.5c-1 0-1.44.5-3 .5s-2-.5-3-.5s-1.72.5-2.5.5a2.5 2.5 0 0 1 0-5c.78 0 1.57.5 2.5.5S9.44 2 11 2s2 1.5 3 1.5s1.72-.5 2.5-.5a2.5 2.5 0 0 1 0 5c-.78 0-1.5-.5-2.5-.5"/>
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M5 8v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V8"/>
                                        </svg>
                                        <div class="flex-1">
                                            <span class="block">Tavern</span>
                                                                                    </div>
                                                                            </a>
                                </li>
                                <li>
                                    <a x-preload href="https://web.idle-mmo.com/leaderboards?category=combat&amp;scope=friends"
                                       class="group flex items-center gap-x-3 rounded-md p-2 text-sm font-semibold text-gray-400 hover:text-white hover:bg-gray-800 opacity-40">
                                        <svg class="w-5 h-5 shrink-0  text-gray-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M7.75 4.75H16.25V11C16.25 13.3472 14.3472 15.25 12 15.25C9.65279 15.25 7.75 13.3472 7.75 11V4.75Z"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 6.75H16.6036C18.0652 6.75 19.25 7.93483 19.25 9.39639C19.25 10.5092 18.5538 11.5032 17.508 11.8835L16.5 12.25"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M7.5 6.75H7.39639C5.93483 6.75 4.75 7.93483 4.75 9.39639C4.75 10.5092 5.44618 11.5032 6.49201 11.8835L7.5 12.25"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 15.5V19"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M8.75 19.25H15.25"></path>
                                        </svg>
                                        <div class="flex-1">
                                            <span class="block">Leaderboard</span>
                                                                                            <span class="text-gray-600 font-semibold text-xs">Unlocks at Total Lv. 70</span>
                                                                                    </div>
                                                                                    <div class="ml-auto text-gray-600">
                                                <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                                                    <path fill-rule="evenodd" d="M8 1a3.5 3.5 0 0 0-3.5 3.5V7A1.5 1.5 0 0 0 3 8.5v5A1.5 1.5 0 0 0 4.5 15h7a1.5 1.5 0 0 0 1.5-1.5v-5A1.5 1.5 0 0 0 11.5 7V4.5A3.5 3.5 0 0 0 8 1Zm2 6V4.5a2 2 0 1 0-4 0V7h4Z" clip-rule="evenodd" />
                                                </svg>
                                            </div>
                                                                            </a>
                                </li>
                                <li>
                                    <a x-preload href="https://web.idle-mmo.com/membership" class="group flex items-center gap-x-3 rounded-md p-2 text-sm font-semibold text-gray-400 hover:text-white hover:bg-gray-800">
                                        <svg class="w-5 h-5 shrink-0" fill="none" viewBox="0 0 24 24" stroke-width="1.5">
                                            <defs>
                                                <linearGradient id="membershipGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                                    <stop offset="0%" style="stop-color:#fbbf24;stop-opacity:1" />
                                                    <stop offset="100%" style="stop-color:#fb923c;stop-opacity:1" />
                                                </linearGradient>
                                            </defs>
                                            <path stroke="url(#membershipGradient)" stroke-linecap="round" stroke-linejoin="round" d="M12 4.75L13.75 10.25H19.25L14.75 13.75L16.25 19.25L12 15.75L7.75 19.25L9.25 13.75L4.75 10.25H10.25L12 4.75Z"></path>
                                        </svg>
                                        <span class="membership-gradient">Membership</span>
                                    </a>
                                </li>
                                <li>
                                    <a x-preload href="https://wiki.idle-mmo.com" target="_blank" class="group flex items-center gap-x-3 rounded-md p-2 text-sm font-semibold text-gray-400 hover:text-white hover:bg-gray-800">
                                        <svg class="h-5 w-5 shrink-0  text-gray-600" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="currentColor" stroke-width="1.5">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.75L4.75 4.75V17.25L12 19.25"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 7V19"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.75L19.25 4.75V17.25L12 19.25"></path>
                                        </svg>
                                        <span class="flex-1">Wiki</span>
                                        <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M9.25 4.75H6.75C5.64543 4.75 4.75 5.64543 4.75 6.75V17.25C4.75 18.3546 5.64543 19.25 6.75 19.25H17.25C18.3546 19.25 19.25 18.3546 19.25 17.25V14.75"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M19.25 9.25V4.75H14.75"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M19 5L11.75 12.25"></path>
                                        </svg>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </nav>

            
            <div class="px-6 py-4 text-center">
                <div class="border-t border-dashed border-gray-700/50 my-4"></div>

                <div>
                    <div>
    <img class="max-w-full w-28 mx-auto" src="https://cdn.idle-mmo.com/cdn-cgi/image/height=250,width=250,format=auto/global/logo.png" alt="IdleMMO">
</div>                </div>
                <div class="text-gray-400 text-xs font-semibold mt-6">
                    Crafted with â™¥ by <a href="https://www.galahadcreative.com?utm_source=idlemmo" class="text-gray-300 hover:text-gray-200" target="_blank">Galahad Creative</a>
                </div>
                <div class="text-gray-500 text-xs font-medium mt-2 flex gap-x-4 gap-y-2 justify-center flex-wrap">
                    <a href="https://web.idle-mmo.com/legal/terms?same_window=true" class="hover:text-gray-400">Terms</a>
                    <a href="https://web.idle-mmo.com/legal/privacy?same_window=true"  class="hover:text-gray-400" target="_blank">Privacy</a>
                    <a href="https://web.idle-mmo.com/legal/code-of-conduct?same_window=true"  class="hover:text-gray-400">Code of Conduct</a>
                    <a href="https://blog.galahadcreative.com/our-monetisation-stretegy/" target="_blank" class="hover:text-gray-400">Monetisation</a>
                    <a href="https://web.idle-mmo.com/legal/cookies?same_window=true" class="hover:text-gray-400">Cookies</a>
                    <a href="https://web.idle-mmo.com/patch-notes?same_window=true"  target="_blank"  class="hover:text-gray-400">Patch Notes</a>
                    <a href="https://wiki.idle-mmo.com/more/credits" target="_blank" class="hover:text-gray-400">Credits</a>
                </div>
                <div class="text-gray-700 text-xs font-medium mt-4">
                    IdleMMO is currently in beta and is subject to change.
                </div>

            </div>

        </div>

        
        <div x-show="showFade"
             x-transition:enter="transition ease-out duration-300"
             x-transition:enter-start="opacity-0"
             x-transition:enter-end="opacity-100"
             x-transition:leave="transition ease-in duration-300"
             x-transition:leave-start="opacity-100"
             x-transition:leave-end="opacity-0"
             class="absolute bottom-0 left-0 right-0 h-40 bg-gradient-to-t from-[#0f101c] to-transparent pointer-events-none z-10"></div>
    </aside>

    
    <button @click="menuOpen = true"
            class="fixed z-30 lg:hidden p-3 bg-[#192231] border border-gray-700/40 rounded-full text-gray-400 hover:text-white hover:bg-gray-800 transition-colors shadow-lg top-4 left-4">
        <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
        <template x-if="$store.current_character.unread_mail_count >= 1 || $store.current_character.unread_notification_count >= 1">
            <span class="absolute top-0 right-0 -mt-0.5 -mr-0.5">
                <span class="relative flex size-2.5">
                  <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-yellow-400 opacity-75"></span>
                  <span class="relative inline-flex rounded-full size-2.5 bg-yellow-500"></span>
                </span>
            </span>
        </template>
    </button>

</div>

    <main class="relative lg:pl-72">
        <div>
            <div class="relative max-w-6xl px-4 mx-auto sm:px-6 lg:px-8">
                <div class="flex block ml-auto py-4 sticky top-0 z-20 bg-gray-[#111722] md:pt-3.5 md:pb-0 md:bg-transparent md:static">
                    <div class="flex items-center w-full flex-wrap justify-end gap-2 ml-12 md:ml-0">
                        
                        <div>
                            <div class="inline-block ml-auto mr-2">
        <template x-if="$store.active_action_659085.state !== null
            && $store.active_action_659085.state.type
            && $store.active_action_659085.state.type !== null">
            <a :href="$store.active_action_659085.state.quick_access.url"
                                class="relative"
            >
                <div class="absolute top-0 right-0 z-20 -mt-4 -mr-1 h-5 w-auto flex items-center justify-center text-xs bg-gray-700 rounded-full py-1 px-2 font-bold " x-show="$store.active_action_659085.state.quick_access.show_quantity">
                    <span ><span x-text="$store.active_action_659085.state.quantity"></span><span x-show="$store.active_action_659085.state.quick_access.show_max_quantity">/<span x-text="$store.active_action_659085.state.max_quantity"></span></span></span>
                </div>
            <button class="bg-gray-800 rounded-full   text-sm relative overflow-hide z-10 overflow-hidden">
                <template x-if="$store.active_action_659085.state
                    && $store.active_action_659085.state.show_progress_bar
                    && $store.active_action_659085.state.current_progress !== null">
                    <div>
                        <div class="h-full absolute rounded-full -z-20 transition-[width]"
                        :class="$store.active_action_659085.state.type === 'battle' ? 'bg-gradient-to-r from-red-700/20 to-red-500/20' : 'bg-green-700/20'"
                        :style="(() => {
                            if($store.active_action_659085 && $store.active_action_659085.state && $store.active_action_659085.state.current_progress) {
                                return 'width:'+$store.active_action_659085.state.current_progress.secondary_percentage+'%';
                            }
                            return $store.active_action_659085.state.type === 'battle' ? 'width:100%;' : 'width:0%;';
                        })()"></div>
                        <div class="h-full absolute rounded-full -z-10 transition-[width]"
                        :class="$store.active_action_659085.state.type === 'battle' ? 'bg-gradient-to-r from-red-700 to-red-500' : 'bg-green-700'"
                        :style="(() => {
                            if($store.active_action_659085 && $store.active_action_659085.state && $store.active_action_659085.state.current_progress) {
                                return 'width:'+$store.active_action_659085.state.current_progress.percentage+'%';
                            }
                            return $store.active_action_659085.state.type === 'battle' ? 'width:100%;' : 'width:0%;';
                        })()"></div>
                    </div>
                </template>
                <template x-if="$store.active_action_659085.state.current_progress !== null 
                    && $store.active_action_659085.state.custom_bar.show
                    && $store.active_action_659085.state.quick_access.show_custom_bar ">
                    <div>
                        <div class="h-full  bg-gradient-to-r from-red-600 to-red-500 absolute rounded-full -z-10 transition-[width]"
                        style='width:0%;'
                        :style="'width:' + $store.active_action_659085.state.custom_bar.current_value / $store.active_action_659085.state.custom_bar.max_value * 100 + '%;'"></div>
                    </div>
                </template>
                <div class="px-4 py-2 z-30 relative">
                    <img :src="$store.active_action_659085.state.image_url" class="h-6 mx-1 top-0 left-0 ml-3 mt-1.5 inline-block absolute" x-show="$store.active_action_659085.state.quick_access.show_image">
                    <span x-text="$store.active_action_659085.state.quick_access.text" class="hidden xs:inline-block pl-7 font-bold"></span>
                    <svg
                    x-show="$store.active_action_659085.state.quick_access.show_spinner" 
                    class="animate-spin ml-8 xs:ml-2 h-3 w-3 inline-block text-gray-100"
                    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10"
                            stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor"
                            d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                        </path>
                    </svg>
                </div>

            </button>
            </a>
        </template>
</div>
                        </div>

                        
                        <div class="hidden sm:block">
                            <button type="button"
                                    x-tooltip.placement.bottom.html="'<img src=\'https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/uploaded/skins/01JVYWCX6QE35GBJQ9TV02G033.png\' class=\'h-4 w-4 inline-block\'> <strong>'+number_format($store.current_character.shards)+'</strong>'"
                                    class="flex items-center px-4 py-2 text-sm font-bold bg-gray-800 rounded-full hover:bg-gray-700/80 whitespace-nowrap ">
                                <span class="flex-shrink-0 mr-2"><img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/uploaded/skins/01JVYWCX6QE35GBJQ9TV02G033.png' class='h-4 w-4 inline-block'></span>
                                <span x-text="numberShorten($store.current_character.shards, 2)">0</span>
                            </button>
                        </div>

                        
                        <div class="hidden xs:block">
                            <button type="button" x-on:click="$dispatch('open-modal', 'tokens-purchase')"
                                    x-tooltip.placement.bottom.html="'<img src=\'https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/token.png\' class=\'h-4 w-4 inline-block\'> <strong>'+number_format($store.current_character.tokens)+'</strong>'"
                                    class="flex items-center px-4 py-2 text-sm font-bold bg-gray-800 rounded-full hover:bg-gray-700/80 whitespace-nowrap ">
                                <span class="flex-shrink-0 mr-2"><img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/token.png' class='h-4 w-4 inline-block'></span>
                                <span x-text="numberShorten($store.current_character.tokens, 2)">15</span>
                            </button>
                        </div>

                        
                        <div class="block">
                            <button type="button"
                                    x-tooltip.placement.bottom.html="'<img src=\'https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/gold_coin.png\' class=\'h-4 w-4 inline-block\'> <strong>'+number_format($store.current_character.gold)+'</strong>'"
                                    class="flex items-center px-4 py-2 text-sm font-bold bg-gray-800 rounded-full hover:bg-gray-700/80 whitespace-nowrap">
                                <span class="flex-shrink-0 mr-2"><img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/gold_coin.png' class='h-4 w-4 inline-block'></span>
                                <span x-text="numberShorten($store.current_character.gold, 2)">100</span>
                            </button>
                        </div>
                    </div>
                </div>

                
                <div class="mt-4 pointer-events-none">
    <div class="pointer-events-auto md:flex items-center justify-between gap-x-6 bg-gradient-to-r from-blue-500 to-cyan-600 px-6 py-2.5 rounded-lg sm:py-3 sm:pl-4 sm:pr-3.5 ring-blue-400/10 ring-2">
        <p class="text-sm leading-6 text-white">
        <a href="https://web.idle-mmo.com/establish?direct=1">
            <span class="block font-semibold md:inline-block">You risk losing all your progress!</span><svg viewBox="0 0 2 2" class="mx-2 inline h-0.5 w-0.5 fill-current hidden" aria-hidden="true"><circle cx="1" cy="1" r="1" /></svg>
            Register an account now and get <img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/gold_coin.png' class='h-4 w-4 inline-block'> 500.
        </a>
        </p>
        <a href="https://web.idle-mmo.com/establish?direct=1">
        <div class="inline-block">
            <button type="button" 
                 
                class="rounded bg-black/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-black/40">
            Register Account
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="inline-block w-3 h-3">
                <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
            </svg>
        </button>
    </div>        </a>
    </div>
    </div>

                
                <div class="mt-4 pb-8">

                    
                    <div>
                                                                                            </div>

                    
                    <div id="game-container" class="relative">
                        <!-- Tabs -->
    <div class="block">
    <nav class="flex border-b border-white/5 py-4">
        <ul role="list" class="flex min-w-full gap-x-6 gap-y-3 px-2 text-sm font-semibold leading-6 text-gray-400 flex-wrap">
                                                <li   
                        class="text-yellow-500"
                                                >
                         <a href="https://web.idle-mmo.com/@SVNCRY">                             <button type="button" >
                                Profile
                            </button>
                         </a> 
                                                                    </li>
                                                                <li   
                        class=""
                                                >
                         <a href="https://web.idle-mmo.com/@SVNCRY/skins">                             <button type="button" >
                                Skins
                            </button>
                         </a> 
                                                                    </li>
                                                                <li   
                        class=""
                                                >
                         <a href="https://web.idle-mmo.com/@SVNCRY/badges">                             <button type="button" >
                                Badges
                            </button>
                         </a> 
                                                                    </li>
                                    </ul>
    </nav>
</div>

    <!-- Hero -->
    <style>
    @keyframes throwSnowball {
        0% { transform: translate(-50vw, 50vh) scale(0.5) rotate(0deg); opacity: 0; }
        20% { opacity: 1; }
        100% { transform: translate(0, 0) scale(1) rotate(720deg); opacity: 1; }
    }
    .animate-throw-snowball {
        animation: throwSnowball 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
    }

    @keyframes particleFade {
        0% { transform: translate(0, 0) scale(1); opacity: 1; }
        100% { transform: translate(var(--tx), var(--ty)) scale(0); opacity: 0; }
    }
    .snow-particle {
        position: absolute;
        width: 8px;
        height: 8px;
        background: white;
        border-radius: 50%;
        box-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
        animation: particleFade 0.8s ease-out forwards;
    }
</style>


<div class="mt-2">
    <div>
        <div class="h-96 rounded-xl bg-gray-800 overflow-hidden relative" id="snow-storm">
            
            <img src="https://cdn.idle-mmo.com/skins/backgrounds/default.jpg" class="object-cover w-full h-full absolute left-0 z-0 opacity-60" fetchpriority="high">

            <div class="grid grid-cols-1 md:grid-cols-9 md:gap-3 h-96" x-data="snowball_effect">
                
                <div class="col-span-3 relative hidden md:block">
                    
                                        
                    <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=400,height=400,format=auto/uploaded/skins/V19VbFlUBjD4NKqMe1ycSjEmMggIMr-metaVmFlbGxhIChyZXBsYWNlIHRoZSBvbGQgb25lKS5wbmc=-.png" 
                         class="hidden md:inline-block h-96 mt-12 absolute -mr-8 xl:mr-0 right-0 bottom-0 -mb-12 flex-shrink-0 max-w-none character-float">

                    
                    <div class="absolute inset-0 pointer-events-none flex items-center justify-center z-10" style="margin-top: 100px; margin-left: 50px;">
                        <img x-show="showSnowball" 
                             src="https://cdn.idle-mmo.com/cdn-cgi/image/height=250,width=250,format=auto/uploaded/skins/W6BTJ1BN9lfRCcDXZAlLsZ06ENTeGe-metac25vd2JhbGwucG5n-.png" 
                             class="w-16 h-16 animate-throw-snowball"
                             style="display: none;">
                        
                        <div x-show="showParticles" style="display: none;" class="relative w-0 h-0">
                            <template x-for="p in particles" :key="p.id">
                                <div class="snow-particle" :style="p.style"></div>
                            </template>
                        </div>
                    </div>
                </div>

                
                <div class="col-span-3 relative block md:hidden">
                    
                                        
                    <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=400,height=400,format=auto/uploaded/skins/V19VbFlUBjD4NKqMe1ycSjEmMggIMr-metaVmFlbGxhIChyZXBsYWNlIHRoZSBvbGQgb25lKS5wbmc=-.png" 
                         class="inline-block h-64 mt-12 absolute ml-auto mr-0 bottom-0 left-0 right-0 mr-auto -mb-44 flex-shrink-0 max-w-none character-float">
                    
                    
                    <div class="absolute inset-0 pointer-events-none flex items-center justify-center z-10" style="margin-top: 50px;">
                        <img x-show="showSnowball" 
                             src="https://cdn.idle-mmo.com/cdn-cgi/image/height=250,width=250,format=auto/uploaded/skins/W6BTJ1BN9lfRCcDXZAlLsZ06ENTeGe-metac25vd2JhbGwucG5n-.png" 
                             class="w-12 h-12 animate-throw-snowball"
                             style="display: none;">
                        
                        <div x-show="showParticles" style="display: none;" class="relative w-0 h-0">
                            <template x-for="p in particles" :key="p.id">
                                <div class="snow-particle" :style="p.style"></div>
                            </template>
                        </div>
                    </div>
                </div>

                <div class="col-span-6 flex items-end md:items-center justify-center md:justify-start relative mb-2 md:mb-0">
                    <div>
                        
                        <div class="backdrop-blur-md py-5 px-4 bg-gray-900/40 rounded-lg inline-block text-center md:text-left mx-2 xs:mx-0 max-w-72 md:max-w-none ">
                            
                            <div class="flex justify-center md:justify-start truncate"> 
                                <h1 class="text-base xs:text-2xl md:text-4xl font-bold truncate"><div class='inline-block inline-flex gap-1 items-center'>
                    <span class='' >SVNCRY</span>
                    
                    
                </div></h1>
                            </div>
    
                            
                            <div class="mt-2 flex items-center justify-center gap-2 flex-wrap">

                                
                                <div class="inline-flex items-center text-sm leading-5 text-gray-400">
    <div class="inline-flex items-center text-xs text-gray-300 font-bold rounded-md bg-gray-700 px-2  py-1 whitespace-nowrap rounded-r-none">
        <span>
            Combat Level
        </span>
    </div>
    <div class="inline-flex items-center text-xs text-gray-400 font-semibold rounded-md rounded-l-none bg-gray-700/60 px-2 py-1 whitespace-nowrap !bg-gray-[#323c4b] !text-gray-200 !font-bold" label="Combat Level" >
        <div>
            1
        </div>
    </div>
</div>
    
                                
                                <div class="inline-flex items-center text-sm leading-5 text-gray-400">
    <div class="inline-flex items-center text-xs text-gray-300 font-bold rounded-md bg-gray-700 px-2  py-1 whitespace-nowrap rounded-r-none">
        <span>
            Total Level
        </span>
    </div>
    <div class="inline-flex items-center text-xs text-gray-400 font-semibold rounded-md rounded-l-none bg-gray-700/60 px-2 py-1 whitespace-nowrap !bg-gray-[#323c4b] !text-gray-200 !font-bold" label="Total Level" >
        <div>
            40
        </div>
    </div>
</div>
                            
                                
                                                             
                                
                                                            </div>
                        </div>
                        
                        
                        <div class="mt-2 flex md:absolute justify-center gap-1">
                                                            <img src="https://cdn.idle-mmo.com/uploaded/skins/01HZS4HWJ7THE2NMYNK2SWXSCV.png" 
                                     class="h-14 xs:h-16 md:h-20 transition hover:scale-105" 
                                     alt="Rising Star" 
                                     x-tooltip="{
                                            content: () => '<strong>Rising Star</strong>',
                                            allowHTML: true,
                                            touch: ['hold', 0],
                                            hideOnClick: true,
                                            appendTo: $root,
                                            placement: window.isMobile().any ? 'top' : 'bottom',
                                     }">
                                                    </div>
                    </div>
                </div>
                
            </div>

        </div>
    </div>
</div>

    
            
    <div class="grid grid-cols-1 md:grid-cols-9 md:gap-3">

        <div class="col-span-3">
            
            
                        
            <!-- Current active action -->
                            <div>


        <div class="rounded-lg bg-gray-800/40 border border-gray-700/40 relative mt-4"
            x-show="$store.active_action_659085?.is_updating ?? true"
        >
            <div class="animate-pulse flex items-center px-4 py-4">
                <div class="flex-shrink-0 pr-4">
                    <div class="rounded-full bg-gray-700 h-12 w-12"></div>
                </div>
                <div class="flex-1 space-y-3 py-1">
                    <div class="h-3 bg-gray-700 rounded w-3/4"></div>
                    <div class="h-2 bg-gray-700 rounded w-1/2"></div>
                    <div class="h-2 bg-gray-700 rounded-md w-full"></div>
                </div>
            </div>
        </div>




    <template x-if="$store.active_action_659085.state !== null
        && $store.active_action_659085.state.type !== null
        && $store.active_action_659085.state.type
    
            ">

    <div class=" rounded-lg bg-gray-800/40 border border-gray-700/40 relative mt-4" x-cloak>

        
        <div>
            <div class="inline-flex items-center absolute top-0 right-0 -mt-3 mr-3 gap-1">

                
                <div class="flex items-center justify-center h-7 rounded-lg bg-gray-800 border border-gray-700/40 px-2 py-1 text-sm font-semibold text-gray-100 tabular-nums"
                    x-cloak
                    x-show="$store.active_action_659085.state && $store.active_action_659085.state.expires_in && $store.active_action_659085.state.show_timer">
                    <template x-if="$store.active_action_659085.state">
                        <span x-text="msToDaysHoursMinutesAndSecondsShort($store.active_action_659085.state ? $store.active_action_659085.state.expires_in : 0)"></span>
                    </template>
                </div>

                
                <template x-if="$store.active_action_659085.state
                    && $store.active_action_659085.state.custom_bar
                    && $store.active_action_659085.state.custom_bar.show
                    && $store.active_action_659085.state.custom_bar.show_percentage">
                    <div x-cloak class="flex items-center justify-center h-7 rounded-lg bg-gray-800 border border-gray-700/40 hover:bg-gray-600 px-2 py-1 text-sm font-semibold text-gray-100">
                        <span x-text="
                        Math.max(0, Math.ceil($store.active_action_659085.state.custom_bar.current_value / $store.active_action_659085.state.custom_bar.max_value * 100)) + '%'"></span>
                    </div>
                </template>

                
                                    <template x-if="$store.active_action_659085.state && $store.active_action_659085.state.refresh.url">
                        <form x-on:submit.prevent="$store.active_action_659085.handleButton($store.active_action_659085.state.refresh.url,$store.active_action_659085.state.refresh.data);refreshing=true;setTimeout(()=>refreshing=false, 1000)" method="post" x-data="{refreshing:false}" class="inline-flex items-center ">
                            <input type="hidden" name="_token" value="XyMoBec0vexU3Uc6FRmgCq1T9viaXxZJLP7cxHcI" autocomplete="off">                            <button
                            type="submit" :disabled="refreshing"
                            x-tooltip.cursor="'Refresh'"
                            class="flex items-center justify-center h-7 rounded-lg bg-gray-800 border border-gray-700/40 hover:bg-gray-700 px-2 py-1 text-sm font-semibold text-gray-100">
                                <svg xmlns="http://www.w3.org/2000/svg" :class="{'opacity-40 animate-spin' : refreshing}" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                                    <path fill-rule="evenodd" d="M13.836 2.477a.75.75 0 0 1 .75.75v3.182a.75.75 0 0 1-.75.75h-3.182a.75.75 0 0 1 0-1.5h1.37l-.84-.841a4.5 4.5 0 0 0-7.08.932.75.75 0 0 1-1.3-.75 6 6 0 0 1 9.44-1.242l.842.84V3.227a.75.75 0 0 1 .75-.75Zm-.911 7.5A.75.75 0 0 1 13.199 11a6 6 0 0 1-9.44 1.241l-.84-.84v1.371a.75.75 0 0 1-1.5 0V9.591a.75.75 0 0 1 .75-.75H5.35a.75.75 0 0 1 0 1.5H3.98l.841.841a4.5 4.5 0 0 0 7.08-.932.75.75 0 0 1 1.025-.273Z" clip-rule="evenodd" />
                                </svg>
                            </button>
                        </form>
                    </template>

                    
                    <template x-if="$store.active_action_659085.state && $store.active_action_659085.state.cancel_url">
                        <form x-cloak
                        x-on:submit.prevent="$store.active_action_659085.handleButton($store.active_action_659085.state && $store.active_action_659085.state.cancel_url);"
                        x-on:submit="button_pressed=true;"
                        x-data="{button_pressed:false}"
                        method="post" class="inline-block">
                        <button class="flex items-center justify-center h-7 rounded-lg bg-gray-800 border border-gray-700/40 hover:bg-gray-700 px-2 py-1 text-sm font-semibold text-gray-100"
                            :disabled="button_pressed"
                            x-tooltip.cursor="'Cancel'">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                                <path d="M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z" />
                            </svg>
                        </button>
                        </form>
                    </template>

                


            </div>

        </div>



        <div class="flex items-center px-4">

            
            <div class="flex-shrink-0 flex flex-col items-center pr-4">
                
                <template x-if="$store.active_action_659085.state && $store.active_action_659085.state.type === 'world_boss'">
                    <div class="overflow-hidden  rounded-full flex items-center justify-center p-0.5 bg-gradient-to-br from-yellow-400 to-yellow-700">
                        <div class="overflow-hidden h-12 w-12 rounded-full bg-gray-800 ">
                            <img class="h-24 max-w-none -ml-6" :src="$store.active_action_659085.state && $store.active_action_659085.state.image_url ? $store.active_action_659085.state.image_url : ''">
                        </div>
                    </div>
                </template>

                
                <template x-if="$store.active_action_659085.state && $store.active_action_659085.state.type !== 'world_boss'">
                    <div class="text-center">
                        <img class="h-12" :src="$store.active_action_659085.state && $store.active_action_659085.state.image_url ? $store.active_action_659085.state.image_url : ''">
                    </div>
                </template>
            </div>
            <div class="flex-grow py-4 flex items-center">
                <div class="w-full">
                    
                    <dt class="text-sm text-gray-200 font-semibold flex items-center">
                        <template x-if="$store.active_action_659085.state && $store.active_action_659085.state.show_spinner">
                            <svg class="animate-spin mr-2 h-4 w-4 inline-block text-gray-100 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                        </template>
                        <span x-text="$store.active_action_659085.state ? $store.active_action_659085.state.title : ''"></span>
                    </dt>

                    
                    <template x-if="$store.active_action_659085.state && $store.active_action_659085.state.text">
                        <div class="text-sm text-gray-400 font-semibold">
                            <span x-text="$store.active_action_659085.state.text"></span>
                        </div>
                    </template>

                    
                    <template x-if="$store.active_action_659085.state
                                && $store.active_action_659085.state.show_progress_bar
                                && $store.active_action_659085.state.current_progress !== null">
                        <div class="bg-gray-700 w-full h-2 mt-2 rounded-md relative">
                            <div :style="(() => {
                                    if($store.active_action_659085 && $store.active_action_659085.state && $store.active_action_659085.state.current_progress) {
                                        return 'width:'+$store.active_action_659085.state.current_progress.secondary_percentage+'%';
                                    }
                                    return $store.active_action_659085.state.type === 'battle' ? 'width:100%;' : 'width:0%;';
                                })()" :class="$store.active_action_659085.state.type === 'battle' ? 'bg-gradient-to-r from-red-600/20 to-red-400/20' : 'bg-gradient-to-r from-yellow-600/20 to-yellow-400/20'" class="transition-[width] absolute h-2 rounded-lg max-w-full"></div>
                            <div :style="(() => {
                                    if($store.active_action_659085 && $store.active_action_659085.state && $store.active_action_659085.state.current_progress) {
                                        return 'width:'+$store.active_action_659085.state.current_progress.percentage+'%';
                                    }
                                    return $store.active_action_659085.state.type === 'battle' ? 'width:100%;' : 'width:0%;';
                                })()" :class="$store.active_action_659085.state.type === 'battle' ? 'bg-gradient-to-r from-red-600 to-red-400' : 'bg-gradient-to-r from-yellow-600 to-yellow-400'" class="transition-[width] absolute h-2 rounded-lg max-w-full"></div>
                        </div>
                    </template>

                    
                    <template x-if="$store.active_action_659085.state && $store.active_action_659085.state.custom_bar && $store.active_action_659085.state.custom_bar.show">
                        <div class="bg-gray-700 w-full h-2 mt-2 rounded-md relative">
                            <div style='width:0%;' :style="'width:' + $store.active_action_659085.state.custom_bar.current_value / $store.active_action_659085.state.custom_bar.max_value * 100 + '%;'" class="transition-[width] absolute bg-gradient-to-r from-red-600 to-red-400 h-2 rounded-lg max-w-full"></div>
                        </div>
                    </template>

                    
                    <template x-if="$store.active_action_659085.state && $store.active_action_659085.custom_bar &&  $store.active_action_659085.state.custom_bar.show">
                        <div class="flex mt-2">
                            <template x-if="$store.active_action_659085.state.custom_bar.show_values">
                                <div>
                                    <span class="inline-flex items-center px-2 py-1 text-xs font-medium text-gray-400 rounded-md bg-gray-400/10 ring-1 ring-inset ring-gray-400/20 whitespace-nowrap">
    <span x-text="Math.ceil($store.active_action_659085.state.custom_bar.current_value)" class='mr-1'></span> of <span x-text="$store.active_action_659085.state.custom_bar.max_value" class='ml-1'>
</span>                                </div>
                            </template>
                            <template x-if="$store.active_action_659085.state.custom_bar.badge">
                                <div>
                                    <span class="inline-flex items-center px-2 py-1 text-xs font-medium text-gray-400 rounded-md bg-gray-400/10 ring-1 ring-inset ring-gray-400/20 whitespace-nowrap">
    <span x-text="$store.active_action_659085.state.custom_bar.badge"></span>
</span>                                </div>
                            </template>
                        </div>
                    </template>

                    
                        <dd class="text-sm font-semibold text-gray-400">
                            <div class="flex items-center justify-between">
                                <template x-if="$store.active_action_659085.state
                                                && $store.active_action_659085.state.item
                                                && $store.active_action_659085.state.current_progress !== null ">
                                    <div :class="{'mt-2' : $store.active_action_659085.state && $store.active_action_659085.state.show_quantity || $store.active_action_659085.state && $store.active_action_659085?.state?.meta_data?.exp_per_second }">
                                            <div class="flex flex-wrap gap-2">
                                                
                                                <template x-if="$store.active_action_659085.state && $store.active_action_659085.state.show_quantity === true">
                                                    <template x-if="$store.active_action_659085.state && $store.active_action_659085.state.quantity !== null">
                                                        <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 tabular-nums">
    +<span x-text="$store.active_action_659085.state ? $store.active_action_659085.state.quantity : 0"></span>
</span>                                                    </template>
                                                </template>

                                                
                                                

                                                
                                                <template x-if="$store.active_action_659085.state && $store.active_action_659085.state.show_quantity === true">
                                                    <template x-if="$store.active_action_659085.state && $store.active_action_659085.state.max_quantity > 1">
                                                        <span class='inline-flex'>
                                                            <template x-if="$store.active_action_659085.state && $store.active_action_659085.state.quantity < ($store.active_action_659085.state.max_quantity - 1)">
                                                                <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 tabular-nums">
    <template x-if="$store.active_action_659085.state.quantity_text">
                                                                            <span x-text="
                                                                                        (() => {
                                                                                            let text = $store.active_action_659085.state.quantity_text;
                                                                                            let time = $store.active_action_659085.state.current_progress.time_remaining_until_next_loop || 0;
                                                                                            return text.replace(':time', msToMinutesAndSeconds(time));
                                                                                        })()
                                                                                    "></span>
                                                                    </template>
                                                                    <template x-if="!$store.active_action_659085.state.quantity_text">
                                                                        <span>Next item in <span x-text="msToMinutesAndSeconds($store.active_action_659085.state ? $store.active_action_659085.state.current_progress.time_remaining_until_next_loop : 0)"></span></span>
                                                                    </template>
</span>                                                            </template>
    
                                                            <template x-if="$store.active_action_659085.state && $store.active_action_659085.state.quantity == ($store.active_action_659085.state.max_quantity - 1)">
                                                                <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60" x-show="">
    Finishes in <span x-text="msToMinutesAndSeconds($store.active_action_659085.state ? $store.active_action_659085.state.current_progress.time_remaining_until_next_loop : 0)"></span>
</span>                                                            </template>
    
                                                            <template x-if="$store.active_action_659085.state && $store.active_action_659085.state.quantity >= $store.active_action_659085.state.max_quantity">
                                                                <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60">
    Processing...
</span>                                                            </template>
                                                        </span>
                                                    </template>
                                                </template>

                                                
                                                <template x-if="$store.active_action_659085.state?.meta_data?.exp_per_second">
                                                    <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60">
    <span x-text="$store.active_action_659085.state?.meta_data?.exp_per_second"></span> EXP/s
</span>                                                </template>
                                            </div>
                                    </div>
                                </template>
                            </div>
                        </dd>
                </div>
            </div>
        </div>

        
        <template x-if="$store.active_action_659085.state && $store.active_action_659085.state.type === 'world_boss'">
            <div class="py-3 bg-gray-900/40 px-2 text-sm">
                <div class="isolate flex -space-x-2 justify-center flex-wrap">
                    <template x-for="participant in $store.active_action_659085.state.meta_data.participants">
                        <a :href='participant.url' class='inline-flex'>
                            <button class="relative inline-block h-10 w-10 rounded-full ring-2 ring-gray-800 bg-gray-700 overflow-hidden" x-tooltip.cursor.html="'<span class=\'font-bold\'>'+participant.name+'</span>'">
                                <img class="h-24 -ml-7 max-w-none" :src="participant.image_url" alt="">
                            </button>
                        </a>
                    </template>
                    <template x-if="$store.active_action_659085.state.meta_data
                                    && $store.active_action_659085.state.meta_data.additional_participants
                                    && $store.active_action_659085.state.meta_data.additional_participants > 0">
                        <button x-on:click="$dispatch('world-boss-participants', true)" class="relative flex items-center justify-center w-10 h-10 text-xs font-bold text-white bg-gray-700 border-2 border-gray-800 rounded-full hover:bg-gray-600 dark:border-gray-800">
                            +<span x-text="$store.active_action_659085.state.meta_data.additional_participants"></span>
                        </button>
                    </template>
                </div>
            </div>
        </template>

        
                <template x-if="$store.active_action_659085.state && $store.active_action_659085.state.buttons && $store.active_action_659085.state.buttons.length">
            <div class="py-3 bg-gray-900/40 text-center w-full space-x-2">
                <template x-for="(button, index) in ($store.active_action_659085.state ? $store.active_action_659085.state.buttons : [])" :key="button.text">
                    <form x-cloak
                    x-on:submit.prevent="$store.active_action_659085.handleButton(button.url);"
                    x-on:submit="button_pressed=true;"
                    x-data="{button_pressed:false}"
                    method="post" class="inline-block">
                        <input type="hidden" name="_token" value="XyMoBec0vexU3Uc6FRmgCq1T9viaXxZJLP7cxHcI" autocomplete="off">
                        
                        <button type="submit" 

                 
                class="inline-block rounded px-4 py-2 bg-gradient-to-b font-bold bg-indigo-600 hover:bg-indigo-500 text-sm" type="submit" x-text="button.text" x-bind:disabled="button_pressed" x-bind:class="{'opacity-40': button_pressed}" x-cloak="x-cloak" x-show="button.type === 'primary'">
            
        </button>

                        
                        <div class="inline-block">
            <button type="submit" 
                 
                class="rounded bg-black/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-black/40" type="submit" x-text="button.text" x-bind:disabled="button_pressed" x-bind:class="{'opacity-40': button_pressed}" x-cloak="x-cloak" x-show="button.type === 'secondary'">
            
        </button>
    </div>
                        
                        <button type="submit" 
                 
                class="rounded px-4 py-2 bg-gradient-to-b font-bold bg-red-600/80 hover:bg-red-600 text-sm" type="submit" x-text="button.text" x-bind:disabled="button_pressed" x-bind:class="{'opacity-40': button_pressed}" x-cloak="x-cloak" x-show="button.type === 'danger'">
            
        </button>
                    </form>
                </template>
            </div>
        </template>
            </div>
    </template>


    <template x-if="!$store.active_action_659085.is_updating
        && $store.active_action_659085.state === null">
        <div class="rounded-lg bg-grayNoBackdrop border border-gray-700/40 relative mt-4">
            <div class="flex flex-col items-center justify-center px-4 py-4 text-center">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-8 text-gray-600 mb-3">
                    <path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z" />
                </svg>
                <h3 class="text-sm font-bold">
                    No Action Assigned
                </h3>
                <p class="text-sm font-medium text-gray-400">
                    This character is not doing an action right now.
                </p>
            </div>
        </div>
    </template>

    </div>
            
            <!-- Update Notice -->
            
            <!-- Actions -->
            <div>    
    <div class="overflow-hidden bg-gray-800/40 border border-gray-700/40 rounded-lg mt-4">

        <div class="flex items-center px-4 py-2 bg-gray-700/20 backdrop-blur-md border-b border-gray-700/40">
            <svg xmlns="http://www.w3.org/2000/svg" class="size-4 text-gray-600" viewBox="0 0 24 24">
                <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"></path>
            </svg>
            <div class="pl-3">
                <h3 class="text-sm font-semibold leading-6 text-gray-100">
                    More
                </h3>
            </div>
        </div>
        <div class="w-full divide-y divide-gray-700/20">

            
            <div x-data="daily_reward" x-init="is_redeemed = true">
        <button type="button"
                class="flex items-center justify-between w-full hover:bg-gray-800/60"
                x-on:click="$dispatch('open-modal', 'daily-reward')">
            <div>
                <div class="flex items-center px-3 py-3 text-sm font-medium text-gray-300 rounded-md group">
                    <svg xmlns="http://www.w3.org/2000/svg"
                         class="w-5 h-5 text-gray-500 transition-colors duration-200 "
                         viewBox="0 0 24 24">
                        <path fill="currentColor"
                              d="M12 11q.825 0 1.413-.587T14 9t-.587-1.412T12 7t-1.412.588T10 9t.588 1.413T12 11m-5-.2V7H5v1q0 .95.55 1.713T7 10.8m10 0q.9-.325 1.45-1.088T19 8V7h-2zM11 19v-3.1q-1.225-.275-2.187-1.037T7.4 12.95q-1.875-.225-3.137-1.637T3 8V7q0-.825.588-1.412T5 5h2q0-.825.588-1.412T9 3h6q.825 0 1.413.588T17 5h2q.825 0 1.413.588T21 7v1q0 1.9-1.263 3.313T16.6 12.95q-.45 1.15-1.412 1.913T13 15.9V19h3q.425 0 .713.288T17 20t-.288.713T16 21H8q-.425 0-.712-.288T7 20t.288-.712T8 19z"/>
                    </svg>
                    <span class="ml-2 truncate">
                        Daily Reward
                    </span>
                </div>
            </div>
            <div class="mr-4 flex items-center space-x-2">
                <template x-if="!is_redeemed">
                    <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-200 bg-green-500/60">
    Pending
</span>
                </template>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                     stroke="currentColor" class="w-4 h-4 transition-transform duration-200 group-hover:translate-x-1">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"></path>
                </svg>
            </div>
        </button>

        <div
     x-on:open-modal.window="if($event.detail !== 'daily-reward') return; getDailyRewardData();"
     x-on:close-modal.window="if($event.detail !== 'daily-reward' && $event.detail !== 'daily-reward-preview') return; if($event.detail === 'daily-reward') cleanupCountdown();">
    
    
    <div
                x-data="modal('daily-reward', false, null, )"
                x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'daily-reward') })"
                x-on:open-modal.window="$event.detail == 'daily-reward' ? show = true : null"
                x-on:close-modal.window="$event.detail == 'daily-reward' ? show = false : null"
                x-on:close.stop="show = false"
                x-on:keydown.escape.window="show = false"
                x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()"
                x-on:keydown.shift.tab.prevent="prevFocusable().focus()"
                x-show="show"
                class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50"
                x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                style="display: none;">
                <div class="flex min-h-full  justify-center md:p-4 text-center items-center sm:p-0">
                    <div
                        x-show="show"
                        class="fixed inset-0 transform transition-all"
                         x-on:click="show = false"                         x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms>
                        <div class="absolute inset-0 bg-immo opacity-70"></div>
                    </div>
                    <div
                        x-show="show"
                        class="md:mb-6  bg-gray-800  border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-sm sm:mx-8 md:mx-auto relative max-h-[90vh]"
                        x-transition:enter.duration.300ms x-transition:leave.duration.200ms>
                                                                                    <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2"
                                        x-on:click="$dispatch('close-modal', 'daily-reward');"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                                    </svg>
                                </button>
                                                                            <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]"
                             x-ref="scrollContainer"
                             x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                             @scroll="handleScroll()">
                            <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible">
                                <template x-if="content_visible">
                                    
                                    <div x-data="{show:false}" x-init="$nextTick(() => show = true)">
                                        <div class="border-b border-white/5 ">
    <div class="py-3 px-3 text-left flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="size-4 text-gray-500" viewBox="0 0 24 24">
                <path fill="currentColor" d="m20 10.35l-5.78-7.41A3.06 3.06 0 0 0 9.75 3L4 10.35A3.05 3.05 0 0 0 3.51 12A3.1 3.1 0 0 0 4 13.58l.06.07l5.74 7.41A3 3 0 0 0 12 22a3.06 3.06 0 0 0 2.26-1L20 13.65a3 3 0 0 0-.06-3.3Zm-1.57 2.14l-5.67 7.22a1.11 1.11 0 0 1-1.42.07l-5.69-7.31a1 1 0 0 1-.14-.47a1.1 1.1 0 0 1 .1-.45l5.67-7.22a1.11 1.11 0 0 1 1.42-.07l5.63 7.28a1 1 0 0 1 .16.54a1.1 1.1 0 0 1-.1.41Z" />
            </svg>
                            <h2 class="text-sm font-semibold text-gray-200 ml-2">
                Daily Reward
            </h2>
                            <div class="text-sm font-semibold text-gray-200 ml-2">
                
            </div>
            </div>
</div>
        
        <div class="mx-4">
            
            <template x-if="current_progress">
                <div class="mb-4 mt-4 text-left">
                    <div>
    <div class="relative -mx-4">
        <div class="absolute inset-0 flex items-center" aria-hidden="true">
        <div class="w-full border-t border-gray-700"></div>
        </div>
        <div class="relative flex justify-center">
        <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">Current Streak</span>
        </div>
    </div>
</div>                    <div class="bg-gray-900/40 rounded-xl p-4 flex items-center gap-4 mt-4">
                        
                        <div class="relative flex-shrink-0">
                            <svg xmlns="http://www.w3.org/2000/svg" 
                                 class="w-12 h-12 transition-colors duration-300"
                                 x-bind:class="current_progress.redeemed ? 'text-yellow-500/20' : 'text-gray-600/20'"
                                 fill="currentColor" 
                                 viewBox="0 0 24 24">
                                <path d="M19.48 12.35c-1.57-4.08-7.16-4.3-5.81-10.23c.1-.44-.37-.78-.75-.55C9.29 3.71 6.68 8 8.87 13.62c.18.46-.36.89-.75.59c-1.81-1.37-2-3.34-1.84-4.75c.06-.52-.62-.77-.91-.34C4.69 10.16 4 11.84 4 14.37c.38 5.6 5.11 7.32 6.81 7.54c2.43.31 5.06-.14 6.95-1.87C19.84 18.11 20.6 15.03 19.48 12.35z"/>
                            </svg>
                            <div class="absolute bottom-0 right-0 ">
                                <div class="text-sm font-black text-white bg-gray-700/60 rounded-full aspect-square h-6 w-6 flex items-center justify-center">
                                    <span x-text="current_progress.streak || 0"></span>
                                </div>
                            </div>
                        </div>
                        
                        
                        <div class="flex-1">
                            
                            
                                <div>
                                    <div class="h-2.5 bg-gray-700/50 rounded-full overflow-hidden mb-2">
                                        <div class="h-full bg-gradient-to-r from-yellow-600 to-yellow-500 rounded-full transition-all duration-700 ease-out relative"
                                             x-bind:style="'width: ' + streak_progress_percentage + '%'">
                                            <div class="absolute inset-0 bg-white/10 animate-pulse"></div>
                                        </div>
                                    </div>
                                    <div class="flex items-center justify-between flex-wrap gap-2">
                                        <div>
                                            <div class="inline-flex items-center text-sm leading-5 text-gray-400">
    <div class="inline-flex items-center text-xs text-gray-300 font-bold rounded-md bg-gray-700 px-2  py-1 whitespace-nowrap rounded-r-none">
        <span>
            Current Bonus
        </span>
    </div>
    <div class="inline-flex items-center text-xs text-gray-400 font-semibold rounded-md rounded-l-none bg-gray-700/60 px-2 py-1 whitespace-nowrap" label="Current Bonus" >
        <div>
            <div class="flex items-center gap-1">
                                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                                                        <path fill-rule="evenodd" d="M8.074.945A4.993 4.993 0 0 0 6 5v.032c.004.6.114 1.176.311 1.709.16.428-.204.91-.61.7a5.023 5.023 0 0 1-1.868-1.677c-.202-.304-.648-.363-.848-.058a6 6 0 1 0 8.017-1.901l-.004-.007a4.98 4.98 0 0 1-2.18-2.574c-.116-.31-.477-.472-.744-.28Zm.78 6.178a3.001 3.001 0 1 1-3.473 4.341c-.205-.365.215-.694.62-.59a4.008 4.008 0 0 0 1.873.03c.288-.065.413-.386.321-.666A3.997 3.997 0 0 1 8 8.999c0-.585.126-1.14.351-1.641a.42.42 0 0 1 .503-.235Z" clip-rule="evenodd" />
                                                    </svg>
                                                    <span><span x-text='current_progress.streak_bonus'></span>% Magic Find</span>
                                                </div>
        </div>
    </div>
</div>
                                        </div>
                                        <template x-if="next_milestone && next_milestone_bonus">
                                            <div>
                                                <div class="inline-flex items-center text-sm leading-5 text-gray-400">
    <div class="inline-flex items-center text-xs text-gray-300 font-bold rounded-md bg-gray-700 px-2  py-1 whitespace-nowrap rounded-r-none">
        <span>
            Next Reward
        </span>
    </div>
    <div class="inline-flex items-center text-xs text-gray-400 font-semibold rounded-md rounded-l-none bg-gray-700/60 px-2 py-1 whitespace-nowrap" label="Next Reward" >
        <div>
            Day <span x-text='next_milestone'></span>
        </div>
    </div>
</div>
                                            </div>
                                        </template>
                                    </div>
                                </div>
                            
                            
                            <template x-if="current_progress.streak >= 100">
                                <div>
                                    <div class="h-2.5 bg-gradient-to-r from-yellow-600 to-yellow-500 rounded-full mb-2"></div>
                                    <div class="text-center">
                                        <span class="text-xs text-yellow-400 flex items-center justify-center gap-1">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                            </svg>
                                            Maximum milestone reached!
                                        </span>
                                    </div>
                                </div>
                            </template>
                        </div>
                    </div>
                    
                    
                    <template x-if="!is_member && current_progress.streak >= 50">
                        <div class="mt-3 p-2 bg-yellow-900/20 border border-yellow-600/30 rounded-lg">
                            <div class="text-xs text-yellow-400 flex items-center gap-1">
                                <svg xmlns="http://www.w3.org/2000/svg" class="w-3 h-3 flex-shrink-0 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/>
                                </svg>
                                <div>
                                    You&#039;ve reached the maximum streak bonus. Upgrade to membership for higher bonuses!
                                    <a href="https://web.idle-mmo.com/membership?same_window=true" class="text-xs text-yellow-300 underline mt-1 block">
                                        Upgrade Now
                                    </a>
                                </div>
                            </div>

                        </div>
                    </template>
                </div>
            </template>
            
            
            <template x-if="recovery && recovery.can_recover">
                <div class="mb-6 text-left">
                    <div class="bg-orange-900/20 border border-orange-600/30 rounded-xl p-4">
                        <div class="flex items-start gap-3">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-orange-500 flex-shrink-0 mt-0.5">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
                            </svg>
                            <div class="flex-1">
                                <p class="text-sm font-semibold text-orange-400">Streak Recovery Available</p>
                                <p class="text-sm text-gray-300 mt-1 font-medium">
                                    Your <span x-text='recovery.lost_streak'></span> day streak was lost. You have <span x-text='recovery_time_remaining'></span> to recover it. 
                                </p>
                                <div class="mt-3">
                                    <div class="inline-flex relative items-stretch">
                                    <button type="button" 
                 
                class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block !rounded-r-none" x-on:click="recoverStreak()" x-bind:disabled="is_recovering">
            <div x-show="!is_recovering">
                                            Recover Streak
                                        </div>
                                        <span x-show="is_recovering" class="flex items-center gap-1">
                                            <svg class="animate-spin h-3 w-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                            </svg>
                                            Recovering...
                                        </span>
        </button>
                                        <div class="bg-gray-700/40 px-2 rounded-r-lg flex items-center gap-1 font-bold text-sm">
                                            <img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/token.png' class='h-4 w-4 inline-block'> 300
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </template>
            
            
            <div class="grid gap-4 text-left">

                
                <div>
                    <div>
    <div class="relative -mx-4">
        <div class="absolute inset-0 flex items-center" aria-hidden="true">
        <div class="w-full border-t border-gray-700"></div>
        </div>
        <div class="relative flex justify-center">
        <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">Next Reward</span>
        </div>
    </div>
</div>                    <div class="bg-gray-900/40 rounded-xl p-5 relative overflow-hidden mt-4">
                        <div class="relative">
                            <template x-if="next_reward">
                                <div>
                                    <div class="flex items-center gap-4">
                                        <div class="w-20 h-20 bg-gray-700/30 rounded-lg p-2 flex items-center justify-center relative">
                                            <img :src="next_reward.image_url" class="w-full h-full object-contain" :alt="next_reward.name">
                                            <template x-if="next_reward.quantity && next_reward.quantity > 1">
                                                <div class="absolute bottom-0 right-0 bg-gray-700 text-white text-xs font-bold px-1.5 py-0.5 rounded-full">
                                                    x<span x-text="next_reward.quantity"></span>
                                                </div>
                                            </template>
                                        </div>
                                        <div class="flex-1">
                                            <span class="text-sm font-bold text-gray-200" x-text="next_reward.name"></span>
                                            <template x-if="!current_progress.redeemed">
                                                <div>
                                                    <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 text-xs bg-green-600/20 text-green-500 border-green-600/30">
    Available Now
</span>                                                </div>
                                            </template>
                                            <template x-if="current_progress.redeemed">
                                                <div>
                                                    <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60">
    Pending
</span>                                                </div>
                                            </template>
                                        </div>
                                    </div>
                                </div>
                            </template>
                        </div>
                    </div>
                    <div>
                        
                        <template x-if="next_reset_time_remaining">
                            <div class="text-center mt-2" x-bind:class="current_progress.redeemed ? 'text-gray-400' : 'text-yellow-400'">
                                <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60">
    Resets in <span x-text='next_reset_time_remaining' class='font-medium'></span>
</span>                            </div>
                        </template>
                    </div>
                </div>
                
            </div>
        </div>
        <template x-if="is_member">
            <div class="mx-4 mt-6">
                <div>
    <div class="relative -mx-4">
        <div class="absolute inset-0 flex items-center" aria-hidden="true">
        <div class="w-full border-t border-gray-700"></div>
        </div>
        <div class="relative flex justify-center">
        <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">Auto Redeem</span>
        </div>
    </div>
</div>                <div class="flex items-center justify-between gap-4 text-left mb-4 mt-2">
                    <span class="flex flex-grow flex-col">
                        <span class="text-sm font-bold leading-6 text-gray-100">
                            Auto Redeem Daily Reward
                        </span>
                        <span class="text-sm text-gray-400">Automatically claim your daily reward when you start an action.</span>
                    </span>
                    <button type="button" x-on:click="toggleAutoRedeem()" :class="{'bg-indigo-600' : auto_redeem_daily_reward, 'bg-gray-700' : !auto_redeem_daily_reward}" class="relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-600 focus:ring-offset-2" role="switch" :aria-checked="auto_redeem_daily_reward" aria-labelledby="auto-redeem-label" aria-describedby="auto-redeem-description">
                        <span aria-hidden="true" :class="{'translate-x-5' : auto_redeem_daily_reward, 'translate-x-0' : !auto_redeem_daily_reward}" class="pointer-events-none inline-block h-5 w-5 transform rounded-full bg-gray-900 shadow ring-0 transition duration-200 ease-in-out"></span>
                    </button>
                </div>
            </div>
        </template>

        
        <div class="mt-4 flex gap-3 justify-center px-4 py-4 bg-gray-900/40">
            <button type="button" 
                 
                class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block flex items-center gap-2" x-on:click="$dispatch('open-modal', 'daily-reward-preview');">
            All Rewards
        </button>

            <button type="button" 

                 
                class="inline-block rounded px-4 py-2 bg-gradient-to-b font-bold bg-indigo-600 hover:bg-indigo-500 text-sm disabled:opacity-40 flex items-center gap-2" x-bind:disabled="is_loading || is_redeemed || !current_progress || current_progress.redeemed" x-on:click="redeemDailyReward()">
            <span x-show="!is_loading" class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M21 11.25v8.25a1.5 1.5 0 01-1.5 1.5H5.25a1.5 1.5 0 01-1.5-1.5v-8.25M12 4.875A2.625 2.625 0 109.375 7.5H12m0-2.625V7.5m0-2.625A2.625 2.625 0 1114.625 7.5H12m0 0V21m-8.625-9.75h18c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125h-18c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z" />
                        </svg>
                        Claim Reward
                    </span>
                <span x-show="is_loading" class="flex items-center gap-2">
                        <svg class="animate-spin h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                        Claiming...
                    </span>
        </button>
        </div>
                                    </div>
                                </template>
                            </div>
                        </div>
                        
                        <div x-show="show_fade"
                             x-transition:enter="transition ease-out"
                             x-transition:enter-start="opacity-0"
                             x-transition:enter-end="opacity-100"
                             x-transition:leave="transition ease-in"
                             x-transition:leave-start="opacity-100"
                             x-transition:leave-end="opacity-0"
                             :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }"
                             class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div>
                    </div>
                </div>
            </div>

                
    
    <div
                x-data="modal('daily-reward-preview', false, null, )"
                x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'daily-reward-preview') })"
                x-on:open-modal.window="$event.detail == 'daily-reward-preview' ? show = true : null"
                x-on:close-modal.window="$event.detail == 'daily-reward-preview' ? show = false : null"
                x-on:close.stop="show = false"
                x-on:keydown.escape.window="show = false"
                x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()"
                x-on:keydown.shift.tab.prevent="prevFocusable().focus()"
                x-show="show"
                class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50"
                x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                style="display: none;">
                <div class="flex min-h-full  justify-center md:p-4 text-center items-center sm:p-0">
                    <div
                        x-show="show"
                        class="fixed inset-0 transform transition-all"
                         x-on:click="show = false"                         x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms>
                        <div class="absolute inset-0 bg-immo opacity-70"></div>
                    </div>
                    <div
                        x-show="show"
                        class="md:mb-6  bg-gray-800  border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-4xl sm:mx-8 md:mx-auto relative max-h-[90vh]"
                        x-transition:enter.duration.300ms x-transition:leave.duration.200ms>
                                                                                    <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2"
                                        x-on:click="$dispatch('close-modal', 'daily-reward-preview');"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                                    </svg>
                                </button>
                                                                            <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]"
                             x-ref="scrollContainer"
                             x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                             @scroll="handleScroll()">
                            <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible">
                                <template x-if="content_visible">
                                    
                                    <div x-data="{show:false}" x-init="$nextTick(() => show = true)">
                                        <div class="border-b border-white/5 ">
    <div class="py-3 px-3 text-left flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="size-4 text-gray-500" viewBox="0 0 24 24">
                <path fill="currentColor" d="m20 10.35l-5.78-7.41A3.06 3.06 0 0 0 9.75 3L4 10.35A3.05 3.05 0 0 0 3.51 12A3.1 3.1 0 0 0 4 13.58l.06.07l5.74 7.41A3 3 0 0 0 12 22a3.06 3.06 0 0 0 2.26-1L20 13.65a3 3 0 0 0-.06-3.3Zm-1.57 2.14l-5.67 7.22a1.11 1.11 0 0 1-1.42.07l-5.69-7.31a1 1 0 0 1-.14-.47a1.1 1.1 0 0 1 .1-.45l5.67-7.22a1.11 1.11 0 0 1 1.42-.07l5.63 7.28a1 1 0 0 1 .16.54a1.1 1.1 0 0 1-.1.41Z" />
            </svg>
                            <h2 class="text-sm font-semibold text-gray-200 ml-2">
                Daily Rewards
            </h2>
                            <div class="text-sm font-semibold text-gray-200 ml-2">
                
            </div>
            </div>
</div>
        
        
        <div>
            <div class="block">
    <nav class="flex border-b border-white/5 py-4">
        <ul role="list" class="flex min-w-full gap-x-6 gap-y-3 px-2 text-sm font-semibold leading-6 text-gray-400 flex-wrap px-4">
                                                <li   
                        class=""
                                                    :class="{
                                    'text-yellow-500': (active_tab == 'free') 
                            }"
                                                >
                                                    <button type="button"  x-on:click="active_tab = 'free'" >
                                Free
                            </button>
                        
                                                                    </li>
                                                                <li   
                        class=""
                                                    :class="{
                                    'text-yellow-500': (active_tab == 'member') 
                            }"
                                                >
                                                    <button type="button"  x-on:click="active_tab = 'member'" >
                                Member
                            </button>
                        
                                                                    </li>
                                    </ul>
    </nav>
</div>
        </div>
        
        
        <div x-show="active_tab === 'free'" x-cloak>
            <template x-if="is_member && !show_preview">
                <div class="p-6 text-center">
                    <div class="bg-gray-900/40 rounded-xl p-8 border border-gray-700/50">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-12 text-gray-600 mx-auto">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z" />
                        </svg>
                        <h3 class="text-lg font-semibold text-gray-100 mb-2">You&#039;re a Member!</h3>
                        <p class="text-sm text-gray-400 mb-4">You&#039;re currently receiving improved member rewards.</p>
                        <button type="button" 
                 
                class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block" x-on:click="show_preview = true">
            Preview Free Rewards
        </button>
                    </div>
                </div>
            </template>
            
            <template x-if="(!is_member || show_preview) && free_rewards && free_rewards.length > 0">
                <div class="p-6 max-h-[60vh] overflow-y-auto" id="daily-rewards-container-new" x-init="scrollToCurrentReward()">
                    <div class="grid grid-cols-2 sm:grid-cols-4 md:grid-cols-5 gap-3">
                        <template x-for="(reward, index) in free_rewards" :key="`free-${index}`">
                            <div 
                                class="relative group"
                                :data-day="reward.day"
                                :class="{
                                    'animate-pulse': !is_member && current_progress && current_progress.current_day + 1 == reward.day && !current_progress.redeemed,
                                }">
                                <div 
                                    class="bg-gray-900/40 rounded-xl p-3 border-2 transition-all duration-300 h-full flex flex-col hover:transform hover:scale-105"
                                    :class="{
                                        'border-gray-700/50': !is_member && current_progress && current_progress.current_day < reward.day || is_member,
                                        'border-yellow-500 shadow-lg shadow-yellow-500/20': !is_member && current_progress && current_progress.current_day + 1 == reward.day && !current_progress.redeemed,
                                        'border-green-600/50 bg-green-900/10': !is_member && current_progress && current_progress.current_day >= reward.day,
                                        'opacity-60': is_member && show_preview,
                                    }">
                                    
                                    <div class="absolute -top-2 -right-2 z-10">
                                        <div 
                                            class="rounded-full w-7 h-7 flex items-center justify-center text-xs font-bold shadow-lg"
                                            :class="{
                                                'bg-gray-700 text-gray-300': !is_member && current_progress && current_progress.current_day < reward.day || is_member,
                                                'bg-yellow-500 text-white animate-bounce': !is_member && current_progress && current_progress.current_day + 1 == reward.day && !current_progress.redeemed,
                                                'bg-green-600 text-white': !is_member && current_progress && current_progress.current_day >= reward.day,
                                            }">
                                            <span x-text="reward.day"></span>
                                        </div>
                                    </div>

                                    <div class="flex justify-center items-center h-16 mb-2 relative">
                                        <img 
                                            :src="reward.image_url" 
                                            class="h-full w-auto object-contain transition-all duration-300"
                                            :class="{
                                                'grayscale opacity-50': (!is_member && current_progress && current_progress.current_day < reward.day) || (is_member && show_preview),
                                                'drop-shadow-lg': !is_member && current_progress && current_progress.current_day + 1 == reward.day && !current_progress.redeemed,
                                            }">
                                        <template x-if="reward.quantity && reward.quantity > 1">
                                            <div class="absolute bottom-0 right-0 bg-gray-700 text-white text-xs font-bold px-1.5 py-0.5 rounded-full">
                                                x<span x-text="reward.quantity"></span>
                                            </div>
                                        </template>
                                    </div>

                                    <div class="text-center mt-auto">
                                        <h3 
                                            class="text-sm font-medium truncate px-1"
                                            :class="{
                                                'text-gray-400': (!is_member && current_progress && current_progress.current_day < reward.day) || is_member,
                                                'text-yellow-400': !is_member && current_progress && current_progress.current_day + 1 == reward.day && !current_progress.redeemed,
                                                'text-gray-300': !is_member && current_progress && current_progress.current_day >= reward.day,
                                            }"
                                            x-text="reward.name">
                                        </h3>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>
            </template>
        </div>
        
        
        <div x-show="active_tab === 'member'" x-cloak>
            <template x-if="!is_member && !show_preview">
                <div class="p-6 text-center">
                    <div class="bg-gray-900/40 rounded-xl p-8 border border-gray-700/50">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-16 h-16 text-gray-400 mx-auto mb-4">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z" />
                        </svg>
                        <h3 class="text-lg font-semibold text-gray-300 mb-2">Member Exclusive</h3>
                        <p class="text-sm text-gray-400 mb-4">Upgrade to membership to unlock improved daily rewards and benefits.</p>
                        <div class="flex gap-3 justify-center">
                            <button type="button" 
                 
                class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block" x-on:click="show_preview = true">
            Preview Rewards
        </button>
                            <a href="https://web.idle-mmo.com/membership?same_window=true">
                                <button type="button" 

                 
                class="inline-block rounded px-4 py-2 bg-gradient-to-b font-bold bg-indigo-600 hover:bg-indigo-500 text-sm">
            Upgrade Now
        </button>
                            </a>
                        </div>
                    </div>
                </div>
            </template>
            
            <template x-if="(is_member || show_preview) && member_rewards && member_rewards.length > 0">
                <div class="p-6 max-h-[60vh] overflow-y-auto" id="daily-rewards-container-member-new" x-init="scrollToCurrentReward()">
                    <div class="grid grid-cols-2 sm:grid-cols-4 md:grid-cols-5 gap-3">
                        <template x-for="(reward, index) in member_rewards" :key="`member-${index}`">
                            <div 
                                class="relative group"
                                :data-day="reward.day"
                                :class="{
                                    'animate-pulse': is_member && current_progress && current_progress.current_day + 1 == reward.day && !current_progress.redeemed,
                                }">
                                <div 
                                    class="bg-gradient-to-br from-gray-800 to-gray-900/50 rounded-xl p-3 border-2 transition-all duration-300 h-full flex flex-col hover:transform hover:scale-105"
                                    :class="{
                                        'border-gray-700/50': is_member && current_progress && current_progress.current_day < reward.day || !is_member,
                                        'border-yellow-500 shadow-lg shadow-yellow-500/20': is_member && current_progress && current_progress.current_day + 1 == reward.day && !current_progress.redeemed,
                                        'border-green-600/50 bg-green-900/10': is_member && current_progress && current_progress.current_day >= reward.day,
                                        'opacity-60': !is_member && show_preview,
                                    }">
                                    
                                    <div class="absolute -top-2 -right-2 z-10">
                                        <div 
                                            class="rounded-full w-7 h-7 flex items-center justify-center text-xs font-bold shadow-lg"
                                            :class="{
                                                'bg-gray-700 text-gray-300': is_member && current_progress && current_progress.current_day < reward.day || !is_member,
                                                'bg-yellow-500 text-gray-900 animate-bounce': is_member && current_progress && current_progress.current_day + 1 == reward.day && !current_progress.redeemed,
                                                'bg-green-600 text-white': is_member && current_progress && current_progress.current_day >= reward.day,
                                            }">
                                            <span x-text="reward.day"></span>
                                        </div>
                                    </div>

                                    <div class="flex justify-center items-center h-16 mb-2 relative">
                                        <img 
                                            :src="reward.image_url" 
                                            class="h-full w-auto object-contain transition-all duration-300"
                                            :class="{
                                                'grayscale opacity-50': (is_member && current_progress && current_progress.current_day < reward.day) || (!is_member && show_preview),
                                                'drop-shadow-lg': is_member && current_progress && current_progress.current_day + 1 == reward.day && !current_progress.redeemed,
                                            }">
                                        <template x-if="reward.quantity && reward.quantity > 1">
                                            <div class="absolute bottom-0 right-0 bg-gray-700 text-white text-xs font-bold px-1.5 py-0.5 rounded-full">
                                                x<span x-text="reward.quantity"></span>
                                            </div>
                                        </template>
                                    </div>

                                    <div class="text-center mt-auto">
                                        <h3 
                                            class="text-sm font-medium truncate px-1"
                                            :class="{
                                                'text-gray-400': (is_member && current_progress && current_progress.current_day < reward.day) || !is_member,
                                                'text-yellow-400': is_member && current_progress && current_progress.current_day + 1 == reward.day && !current_progress.redeemed,
                                                'text-gray-300': is_member && current_progress && current_progress.current_day >= reward.day,
                                            }"
                                            x-text="reward.name">
                                        </h3>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>
            </template>
        </div>
                                    </div>
                                </template>
                            </div>
                        </div>
                        
                        <div x-show="show_fade"
                             x-transition:enter="transition ease-out"
                             x-transition:enter-start="opacity-0"
                             x-transition:enter-end="opacity-100"
                             x-transition:leave="transition ease-in"
                             x-transition:leave-start="opacity-100"
                             x-transition:leave-end="opacity-0"
                             :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }"
                             class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div>
                    </div>
                </div>
            </div>

            </div>
    </div>

            
            <button class="flex items-center justify-between w-full hover:bg-gray-800/60" x-on:click="$dispatch('open-modal', 'character-metrics');">
    <div>
        <div class="flex items-center px-3 py-3 text-sm font-medium text-gray-300 rounded-md group">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5 text-gray-500">
                <path d="M15.5 2A1.5 1.5 0 0 0 14 3.5v13a1.5 1.5 0 0 0 1.5 1.5h1a1.5 1.5 0 0 0 1.5-1.5v-13A1.5 1.5 0 0 0 16.5 2h-1ZM9.5 6A1.5 1.5 0 0 0 8 7.5v9A1.5 1.5 0 0 0 9.5 18h1a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 10.5 6h-1ZM3.5 10A1.5 1.5 0 0 0 2 11.5v5A1.5 1.5 0 0 0 3.5 18h1A1.5 1.5 0 0 0 6 16.5v-5A1.5 1.5 0 0 0 4.5 10h-1Z" />
            </svg>
            <span class="ml-2 truncate">
                Metrics
            </span>
        </div>
    </div>
    <div class="mr-4 text-xs font-semibold text-gray-200 sm:text-sm">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
        </svg>
    </div>
</button>

<div
                x-data="modal('character-metrics', false, null, )"
                x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'character-metrics') })"
                x-on:open-modal.window="$event.detail == 'character-metrics' ? show = true : null"
                x-on:close-modal.window="$event.detail == 'character-metrics' ? show = false : null"
                x-on:close.stop="show = false"
                x-on:keydown.escape.window="show = false"
                x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()"
                x-on:keydown.shift.tab.prevent="prevFocusable().focus()"
                x-show="show"
                class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50"
                x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                style="display: none;">
                <div class="flex min-h-full  justify-center md:p-4 text-center items-center sm:p-0">
                    <div
                        x-show="show"
                        class="fixed inset-0 transform transition-all"
                         x-on:click="show = false"                         x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms>
                        <div class="absolute inset-0 bg-immo opacity-70"></div>
                    </div>
                    <div
                        x-show="show"
                        class="md:mb-6  bg-gray-800  border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-xs sm:mx-8 md:mx-auto relative max-h-[90vh]"
                        x-transition:enter.duration.300ms x-transition:leave.duration.200ms>
                                                                                    <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2"
                                        x-on:click="$dispatch('close-modal', 'character-metrics');"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                                    </svg>
                                </button>
                                                                            <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]"
                             x-ref="scrollContainer"
                             x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                             @scroll="handleScroll()">
                            <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible">
                                <template x-if="content_visible">
                                    
                                    <div x-data="{show:false}" x-init="$nextTick(() => show = true)">
                                        <div x-data="character_metrics" x-init="$watch('show', function(value){ if(value) getMetrics(659085) });">
        <div class="border-b border-white/5">
            <div class="py-3 px-3 text-left flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4 text-gray-600">
                    <path d="M12 2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h1a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1h-1ZM6.5 6a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1V6ZM2 9a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V9Z" />
                </svg>
                <h2 class="text-sm font-semibold text-gray-200 ml-2">
                    Metrics
                </h2>
            </div>
        </div>
                
        <template x-for="(category, categoryKey) in metrics" :key="categoryKey">
            <div>
                
                <template x-if="categoryKey !== 'general'">
                <div>
    <div class="relative">
        <div class="absolute inset-0 flex items-center" aria-hidden="true">
        <div class="w-full border-t border-gray-700"></div>
        </div>
        <div class="relative flex justify-center">
        <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800"><span x-text="category.label"></span></span>
        </div>
    </div>
</div>                </template>
                <div class="mt-4 bg-gray-800 rounded-lg text-gray-300">
                    <template x-for="(metric, metricKey) in category.metrics" :key="metricKey">
                        <div class="flex items-center justify-between gap-2 text-sm px-4 mb-4">
                            <div>
                                <div class="flex flex-wrap items-center text-sm font-medium text-gray-300 rounded-md group">
                                    <span class="truncate font-bold" x-text="metric.label"></span>
                                    
                                    <template x-if="comparison_metrics && comparison_metrics [categoryKey] && comparison_metrics [categoryKey].metrics[metricKey]">
                                    <span class="block w-full text-left text-gray-600 text-xs">
                                        You
                                    </span>
                                    </template>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="font-semibold text-gray-400 text-sm" x-text="metric.formatted_value"></div>
                                
                                <template x-if="comparison_metrics && comparison_metrics [categoryKey] && comparison_metrics [categoryKey].metrics[metricKey]">
                                    <div class="text-gray-600 text-xs text-right">
                                        
                                        <span x-text="comparison_metrics[categoryKey].metrics[metricKey].formatted_value"></span>
                                        
                                        <template x-if="metric.raw_value < comparison_metrics[categoryKey].metrics[metricKey].raw_value  && metricKey !== 'total_times_defeated'">
                                            
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="size-4 text-green-400 inline-block" viewBox="0 0 16 16">
                                                <path fill-rule="evenodd" d="M11.78 9.78a.75.75 0 0 1-1.06 0L8 7.06 5.28 9.78a.75.75 0 0 1-1.06-1.06l3.25-3.25a.75.75 0 0 1 1.06 0l3.25 3.25a.75.75 0 0 1 0 1.06Z" clip-rule="evenodd"/>
                                            </svg>
                                        </template>
                                        <template x-if="metric.raw_value > comparison_metrics[categoryKey].metrics[metricKey].raw_value && metricKey !== 'total_times_defeated'">
                                            
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="size-4 text-red-400 inline-block" viewBox="0 0 16 16">
                                                <path fill-rule="evenodd" d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd"/>
                                            </svg>
                                        </template>
                                    </div>
                                </template>
                            </div>
                        </div>
                    </template>
                </div>
            </div>
        </template>
        
    </div>
                                    </div>
                                </template>
                            </div>
                        </div>
                        
                        <div x-show="show_fade"
                             x-transition:enter="transition ease-out"
                             x-transition:enter-start="opacity-0"
                             x-transition:enter-end="opacity-100"
                             x-transition:leave="transition ease-in"
                             x-transition:leave-start="opacity-100"
                             x-transition:leave-end="opacity-0"
                             :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }"
                             class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div>
                    </div>
                </div>
            </div>

            
            
            <button class="flex items-center justify-between w-full hover:bg-gray-800/60" x-on:click="$dispatch('open-modal', 'character-interactions');">
    <div>
        <div class="flex items-center px-3 py-3 text-sm font-medium text-gray-300 rounded-md group">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5 text-gray-500">
                <path d="M10 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6ZM3.465 14.493a1.23 1.23 0 0 0 .41 1.412A9.957 9.957 0 0 0 10 18c2.31 0 4.438-.784 6.131-2.1.43-.333.604-.903.408-1.41a7.002 7.002 0 0 0-13.074.003Z" />
            </svg>
            <span class="ml-2 truncate">
                Interactions
            </span>
        </div>
    </div>
    <div class="mr-4 text-xs font-semibold text-gray-200 sm:text-sm">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
        </svg>
    </div>
</button>

<div x-data="characterInteractions">
    <div
                x-data="modal('character-interactions', false, null, )"
                x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'character-interactions') })"
                x-on:open-modal.window="$event.detail == 'character-interactions' ? show = true : null"
                x-on:close-modal.window="$event.detail == 'character-interactions' ? show = false : null"
                x-on:close.stop="show = false"
                x-on:keydown.escape.window="show = false"
                x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()"
                x-on:keydown.shift.tab.prevent="prevFocusable().focus()"
                x-show="show"
                class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50"
                x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                style="display: none;">
                <div class="flex min-h-full  justify-center md:p-4 text-center items-center sm:p-0">
                    <div
                        x-show="show"
                        class="fixed inset-0 transform transition-all"
                         x-on:click="show = false"                         x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms>
                        <div class="absolute inset-0 bg-immo opacity-70"></div>
                    </div>
                    <div
                        x-show="show"
                        class="md:mb-6  bg-gray-800  border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-sm sm:mx-8 md:mx-auto relative max-h-[90vh]"
                        x-transition:enter.duration.300ms x-transition:leave.duration.200ms>
                                                                                    <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2"
                                        x-on:click="$dispatch('close-modal', 'character-interactions');"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                                    </svg>
                                </button>
                                                                            <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]"
                             x-ref="scrollContainer"
                             x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                             @scroll="handleScroll()">
                            <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible">
                                <template x-if="content_visible">
                                    
                                    <div x-data="{show:false}" x-init="$nextTick(() => show = true)">
                                        <div x-init="$watch('show', function(value) { if(value && !data) load(); })">
            <div class="border-b border-white/5 ">
    <div class="py-3 px-3 text-left flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="size-4 text-gray-500" viewBox="0 0 24 24">
                <path fill="currentColor" d="m20 10.35l-5.78-7.41A3.06 3.06 0 0 0 9.75 3L4 10.35A3.05 3.05 0 0 0 3.51 12A3.1 3.1 0 0 0 4 13.58l.06.07l5.74 7.41A3 3 0 0 0 12 22a3.06 3.06 0 0 0 2.26-1L20 13.65a3 3 0 0 0-.06-3.3Zm-1.57 2.14l-5.67 7.22a1.11 1.11 0 0 1-1.42.07l-5.69-7.31a1 1 0 0 1-.14-.47a1.1 1.1 0 0 1 .1-.45l5.67-7.22a1.11 1.11 0 0 1 1.42-.07l5.63 7.28a1 1 0 0 1 .16.54a1.1 1.1 0 0 1-.1.41Z" />
            </svg>
                            <h2 class="text-sm font-semibold text-gray-200 ml-2">
                Interactions
            </h2>
                            <div class="text-sm font-semibold text-gray-200 ml-2">
                
            </div>
            </div>
</div>

            
            <div class="block">
                <nav class="flex border-b border-white/5 py-4">
                    <ul class="flex min-w-full gap-x-6 gap-y-3 px-4 text-sm font-semibold leading-6 text-gray-400 flex-wrap">
                        <template x-for="type in types" :key="type.value">
                            <li :class="{'text-yellow-500': selected_type === type.value}">
                                <button type="button" x-on:click="selectType(type.value)" x-text="type.label"></button>
                            </li>
                        </template>
                    </ul>
                </nav>
            </div>

            
            <div x-show="is_loading" class="flex justify-center py-8">
                <svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
</svg>            </div>

            
            <template x-if="!is_loading && (!data?.interactions || data.interactions.length === 0)">
                <div 
    x-data="{show: true }"
    class="rounded-lg mt-2 bg-gray-800 shadow-sm py-3 px-6 relative text-gray-200 mx-4 mt-2 mb-2 bg-gray-900/40 text-left"
    x-cloak 
    x-show="show"
        
>
        <div class="absolute top-0 left-0 -mt-2 -ml-2">
        <svg class="h-6 w-6 text-gray-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
        </svg>
    </div>
        <div>
      <div class="md:flex md:justify-between">
        <div class="text-sm w-full">
          No interactions found.
        </div>
      </div>
    </div>
    </div>
            </template>

            
            <template x-if="!is_loading && data?.interactions && data.interactions.length > 0">
                <div class="w-full divide-y divide-gray-700/30">
                    <template x-for="(item, index) in data.interactions" :key="index">
                        <div class="flex items-center justify-between">
                            <div>
                                <a :href="item.character.url" class="flex items-center px-3 py-3 text-sm font-medium text-gray-300 rounded-md">
                                    <div class="h-8 w-8 rounded-full overflow-hidden bg-gray-900/40 flex items-center justify-center">
                                        <img :src="item.character.image_url" class="h-12 w-12 max-w-none mt-5">
                                    </div>
                                    <div class="ml-2 text-left">
                                        <span class="truncate font-medium" x-html="item.character.formatted_name"></span>
                                        <span class="block text-xs text-gray-500" x-text="item.created_at"></span>
                                    </div>
                                </a>
                            </div>
                            <div class="mr-4 font-semibold text-sm">
                                <template x-if="item.direction === 'SENT'">
                                    <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60">Sent</span>
                                </template>
                                <template x-if="item.direction === 'RECEIVED'">
                                    <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-200 bg-green-500/60">Received</span>
                                </template>
                            </div>
                        </div>
                    </template>
                </div>
            </template>

            <div class="px-4 py-3 bg-gray-900/40 flex justify-end">
                <button type="button" 
                 
                class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block" x-on:click="$dispatch('close')">
            Close
        </button>
            </div>
        </div>
                                    </div>
                                </template>
                            </div>
                        </div>
                        
                        <div x-show="show_fade"
                             x-transition:enter="transition ease-out"
                             x-transition:enter-start="opacity-0"
                             x-transition:enter-end="opacity-100"
                             x-transition:leave="transition ease-in"
                             x-transition:leave-start="opacity-100"
                             x-transition:leave-end="opacity-0"
                             :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }"
                             class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div>
                    </div>
                </div>
            </div>

            </div>

            
            
            
            <div>
            <button type="submit" class="flex items-center justify-between w-full hover:bg-gray-800/60" x-on:click="$dispatch('show-all-trades', null);">
                <div>
                    <div class="flex items-center px-3 py-3 text-sm font-medium text-gray-300 rounded-md group">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"
                             class="size-5 text-gray-500">
                            <path fill-rule="evenodd"
                                  d="M13.2 2.24a.75.75 0 0 0 .04 1.06l2.1 1.95H6.75a.75.75 0 0 0 0 1.5h8.59l-2.1 1.95a.75.75 0 1 0 1.02 1.1l3.5-3.25a.75.75 0 0 0 0-1.1l-3.5-3.25a.75.75 0 0 0-1.06.04Zm-6.4 8a.75.75 0 0 0-1.06-.04l-3.5 3.25a.75.75 0 0 0 0 1.1l3.5 3.25a.75.75 0 1 0 1.02-1.1l-2.1-1.95h8.59a.75.75 0 0 0 0-1.5H4.66l2.1-1.95a.75.75 0 0 0 .04-1.06Z"
                                  clip-rule="evenodd"/>
                        </svg>
                        <span class="ml-2 truncate">
                            Trades
                        </span>
                    </div>
                </div>
                <div class="mr-4 text-xs font-semibold text-gray-200 sm:text-sm">
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                         stroke="currentColor" class="w-4 h-4 inline-block">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"/>
                    </svg>
                </div>
            </button>

    </div>

            
            <div>
        <a href="https://web.idle-mmo.com/market/listings?character_id=v5g4z1dQnVMOlQqy32jp">
            <button type="submit" class="flex items-center justify-between w-full  hover:bg-gray-800/60">
                <div>
                    <div class="flex items-center px-3 py-3 text-sm font-medium text-gray-300 rounded-md group">
                        <svg xmlns="http://www.w3.org/2000/svg" class="size-5 text-gray-500" viewBox="0 0 16 16">
                            <path fill="none" stroke="currentColor" stroke-linejoin="round" d="M3 7.5h2.5m0 0V6m0 1.5H8m0 0V6m0 1.5h2.5m0 0V6m0 1.5H13m-6.5 2h1m1 0h1m-1 1.5h1m-3 0h1m-4 2.5v-6h-1v-2l1.5-3h8l1.5 3v2h-1v6z" stroke-width="1" />
                        </svg>
                        <span class="ml-2 truncate">
                            Market
                        </span>
                    </div>
                </div>
                <div class="mr-4 text-xs font-semibold text-gray-200 sm:text-sm">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                    </svg>
                </div>
            </button>
        </a>
    </div>

            
            <div>
    <a href="https://web.idle-mmo.com/museum?character_id=v5g4z1dQnVMOlQqy32jp&amp;same_window=true">
        <button type="submit" class="flex items-center justify-between w-full hover:bg-gray-800/60">
            <div>
                <div class="flex items-center px-3 py-3 text-sm font-medium text-gray-300 rounded-md group">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-gray-500" viewBox="0 0 16 16">
                        <path fill="currentColor" d="M8 5a.75.75 0 1 0 0-1.5A.75.75 0 0 0 8 5m.736-3.545a1.17 1.17 0 0 0-1.472 0L2.262 5.52C1.654 6.016 2.004 7 2.788 7H3v4.2c-.594.303-1 .92-1 1.633v.667a.5.5 0 0 0 .5.5h11a.5.5 0 0 0 .5-.5v-.667c0-.712-.406-1.33-1-1.633V7h.212c.784 0 1.134-.985.525-1.48zm-.84.776a.17.17 0 0 1 .21 0L12.742 6H3.256zM12 11h-1V7h1zm-2 0H8.5V7H10zm-2.5 0H6V7h1.5zm4.667 1c.46 0 .833.373.833.833V13H3v-.167c0-.46.373-.833.833-.833zM5 11H4V7h1z"></path>
                    </svg>
                    <span class="ml-2 truncate">
                        Museum
                    </span>
                </div>
            </div>
            <div class="mr-4 text-xs font-semibold text-gray-200 sm:text-sm">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                </svg>
            </div>
        </button>
    </a>
</div>

            
            <div>
        <button type="button" class="flex items-center justify-between w-full hover:bg-gray-800/60"
                x-on:click="$dispatch('open-modal', 'active-effects')">
            <div>
                <div class="flex items-center px-3 py-3 text-sm font-medium text-gray-300 rounded-md group">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-gray-500">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z" />
                    </svg>
                    <span class="ml-2 truncate">
                        Active Effects
                    </span>
                </div>
            </div>
            <div class="mr-4 flex items-center space-x-2">
                <span class="bg-gray-700 py-0.5 rounded-lg text-center text-sm font-bold inline-flex justify-center px-2">
                    3
                </span>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"></path>
                </svg>
            </div>
        </button>
    </div>

            
            
            
            <button @click="$dispatch('open-modal', 'refer-a-friend')" class="flex items-center justify-between w-full hover:bg-gray-800/60">
        <div>
            <div class="flex items-center px-3 py-3 text-sm font-medium text-gray-300 rounded-md group">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                     class="w-5 h-5 text-gray-500">
                    <path
                        d="M5.25 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM2.25 19.125a7.125 7.125 0 0 1 14.25 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM18.75 7.5a.75.75 0 0 0-1.5 0v2.25H15a.75.75 0 0 0 0 1.5h2.25v2.25a.75.75 0 0 0 1.5 0v-2.25H21a.75.75 0 0 0 0-1.5h-2.25V7.5Z"/>
                </svg>
                <span class="ml-2 truncate">
                                Referral Code
                            </span>
            </div>
        </div>
        <div class="mr-4 text-xs font-semibold text-gray-200 sm:text-sm">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                 stroke="currentColor" class="w-4 h-4">
                <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"/>
            </svg>
        </div>
    </button>

            
            
            
                    </div>
    </div>
</div>


<div 
    x-on:show-all-trades.window="resetState();getTrades($event.detail);$dispatch('open-modal','show-all-trades');"
    x-on:trade-interaction-closed.window="resetState();getTrades(character_id_filter);$dispatch('open-modal','show-all-trades');"
    x-data="all_trades">
    <div
                x-data="modal('show-all-trades', false, null, )"
                x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'show-all-trades') })"
                x-on:open-modal.window="$event.detail == 'show-all-trades' ? show = true : null"
                x-on:close-modal.window="$event.detail == 'show-all-trades' ? show = false : null"
                x-on:close.stop="show = false"
                x-on:keydown.escape.window="show = false"
                x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()"
                x-on:keydown.shift.tab.prevent="prevFocusable().focus()"
                x-show="show"
                class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50"
                x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                style="display: none;">
                <div class="flex min-h-full  justify-center md:p-4 text-center items-center sm:p-0">
                    <div
                        x-show="show"
                        class="fixed inset-0 transform transition-all"
                         x-on:click="show = false"                         x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms>
                        <div class="absolute inset-0 bg-immo opacity-70"></div>
                    </div>
                    <div
                        x-show="show"
                        class="md:mb-6  bg-gray-900  border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-lg sm:mx-8 md:mx-auto relative max-h-[90vh]"
                        x-transition:enter.duration.300ms x-transition:leave.duration.200ms>
                                                                                    <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-800 border border-gray-700/40 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2.5 mr-2"
                                        x-on:click="$dispatch('close-modal', 'show-all-trades');"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="size-3 font-bold">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                                    </svg>
                                </button>
                                                                            <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]"
                             x-ref="scrollContainer"
                             x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                             @scroll="handleScroll()">
                            <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible">
                                <template x-if="content_visible">
                                    
                                    <div x-data="{show:false}" x-init="$nextTick(() => show = true)">
                                        <div>
                <div class="border-b border-white/5  bg-grayNoBackdrop ">
    <div class="py-3 px-3 text-left flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="size-4 text-gray-500" viewBox="0 0 24 24">
                <path fill="currentColor" d="m20 10.35l-5.78-7.41A3.06 3.06 0 0 0 9.75 3L4 10.35A3.05 3.05 0 0 0 3.51 12A3.1 3.1 0 0 0 4 13.58l.06.07l5.74 7.41A3 3 0 0 0 12 22a3.06 3.06 0 0 0 2.26-1L20 13.65a3 3 0 0 0-.06-3.3Zm-1.57 2.14l-5.67 7.22a1.11 1.11 0 0 1-1.42.07l-5.69-7.31a1 1 0 0 1-.14-.47a1.1 1.1 0 0 1 .1-.45l5.67-7.22a1.11 1.11 0 0 1 1.42-.07l5.63 7.28a1 1 0 0 1 .16.54a1.1 1.1 0 0 1-.1.41Z" />
            </svg>
                                    <div class="text-sm font-semibold text-gray-200 ml-2">
                Trades
            </div>
            </div>
</div>
                                    
                    <div class="py-3 px-3 text-left flex items-center justify-start">
                        <button type="button" 
                 
                class="rounded bg-white/5 border border-gray-700/40 px-2 py-1 text-sm font-semibold text-white shadow-sm hover:bg-white/10 inline-block" x-on:click="$dispatch('open-modal', 'trade-new-trade')">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4 text-gray-400 inline-block">
                                <path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z" />
                            </svg>
                            New Trade
        </button>
                    </div>
                				<div>
					<div class="overflow-hidden bg-grayNoBackdrop mb-2 mx-2 border border-gray-700/40  rounded-lg max-h-96 overflow-y-auto">
                        <template x-if="trades && trades.length">
                            <div>
                                <div class="w-full divide-y divide-gray-700/30">
                                    <template x-for="trade in trades" :key="trade.id" hidden>
                                        <button x-on:click="$dispatch('trade-interaction', trade.id);" class="flex items-center justify-between w-full hover:bg-gray-700/10">
                                            <div class="truncate w-full">
                                                <div class="flex items-center px-3 py-2 text-sm font-medium text-gray-300 rounded-md group truncate w-full">
                                                    <div class="size-10 bg-gray-900 rounded-full overflow-hidden flex-shrink-0">
                                                        <img :src="trade.character.image_url" class="h-16 max-w-none -ml-3 mt-1 ">
                                                    </div>
                                                    <div class="ml-4 flex justify-between w-full flex-wrap gap-1 items-center">
                                                        <div class="text-left">
                                                            <div>
                                                                <span class="truncate" x-html="trade.character.name"></span>
                                                            </div>
                                                            <div class="mt-1">
                                                                <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 mt-1" x-text="trade.updated_at">
    
</span>                                                            </div>
                                                        </div>
                                                        <div>
                                                            <template x-if="trade.status === 'PROCESSED'">
                                                                <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-200 bg-green-500/60">
    Complete
</span>
                                                            </template>
                                                            <template x-if="trade.status === 'PENDING'">
                                                                <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60">
    Pending
</span>                                                            </template>
                                                            <template x-if="trade.status === 'CANCELLED'">
                                                                <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-200 bg-red-500/60">
    Cancelled
</span>
                                                            </template>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="mr-4 text-xs font-semibold text-gray-200 sm:text-sm">
                                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                                    <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                                                </svg>
                                            </div>
                                        </button>
                                    </template>
                                </div>
                                <template x-if="has_no_further_records === false">
                                    <div class="text-center py-4 border-t border-gray-700/30">
                                        <button type="button" 
                 
                class="rounded bg-white/5 border border-gray-700/40 px-2 py-1 text-sm font-semibold text-white shadow-sm hover:bg-white/10 inline-block" @click="handleInfiniteScroll(null)" x-bind:disabled="is_processing">
            <span x-show="!is_processing">Load More</span>
                                            <span x-show="is_processing">Loading...</span>
        </button>
                                    </div>
                                </template>
                            </div>
                        </template>
                        <template x-if="trades === null">
                            <div class="my-4">
                                <svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
</svg>                            </div>
                        </template>
                        <template x-if="trades && trades.length === 0">
                            <div class="my-4 mx-4 text-left flex items-center flex justify-center">
                                <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60">
    No trades here
</span>                            </div>
                        </template>
					</div>
				</div>
            </div>
                                    </div>
                                </template>
                            </div>
                        </div>
                        
                        <div x-show="show_fade"
                             x-transition:enter="transition ease-out"
                             x-transition:enter-start="opacity-0"
                             x-transition:enter-end="opacity-100"
                             x-transition:leave="transition ease-in"
                             x-transition:leave-start="opacity-100"
                             x-transition:leave-end="opacity-0"
                             :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }"
                             class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-900 to-transparent pointer-events-none z-10"></div>
                    </div>
                </div>
            </div>

            </div>
<div
    x-data="trade_new_trade"
    x-on:close-modal.window="if ($event.detail === 'trade-new-trade') reset();"
>
    
    <div
                x-data="modal('trade-new-trade', false, null, 1)"
                x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'trade-new-trade') })"
                x-on:open-modal.window="$event.detail == 'trade-new-trade' ? show = true : null"
                x-on:close-modal.window="$event.detail == 'trade-new-trade' ? show = false : null"
                x-on:close.stop="show = false"
                x-on:keydown.escape.window="show = false"
                x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()"
                x-on:keydown.shift.tab.prevent="prevFocusable().focus()"
                x-show="show"
                class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50"
                x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                style="display: none;">
                <div class="flex min-h-full  justify-center md:p-4 text-center items-center sm:p-0">
                    <div
                        x-show="show"
                        class="fixed inset-0 transform transition-all"
                         x-on:click="show = false"                         x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms>
                        <div class="absolute inset-0 bg-immo opacity-70"></div>
                    </div>
                    <div
                        x-show="show"
                        class="md:mb-6  bg-gray-900  border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-md sm:mx-8 md:mx-auto relative max-h-[90vh]"
                        x-transition:enter.duration.300ms x-transition:leave.duration.200ms>
                                                                                    <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-800 border border-gray-700/40 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2.5 mr-2"
                                        x-on:click="$dispatch('close-modal', 'trade-new-trade');"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="size-3 font-bold">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                                    </svg>
                                </button>
                                                                            <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]"
                             x-ref="scrollContainer"
                             x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                             @scroll="handleScroll()">
                            <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible">
                                <template x-if="content_visible">
                                    
                                    <div x-data="{show:false}" x-init="$nextTick(() => show = true)">
                                        <div class="border-b border-white/5  bg-grayNoBackdrop ">
    <div class="py-3 px-3 text-left flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="size-4 text-gray-500" viewBox="0 0 24 24">
                <path fill="currentColor" d="m20 10.35l-5.78-7.41A3.06 3.06 0 0 0 9.75 3L4 10.35A3.05 3.05 0 0 0 3.51 12A3.1 3.1 0 0 0 4 13.58l.06.07l5.74 7.41A3 3 0 0 0 12 22a3.06 3.06 0 0 0 2.26-1L20 13.65a3 3 0 0 0-.06-3.3Zm-1.57 2.14l-5.67 7.22a1.11 1.11 0 0 1-1.42.07l-5.69-7.31a1 1 0 0 1-.14-.47a1.1 1.1 0 0 1 .1-.45l5.67-7.22a1.11 1.11 0 0 1 1.42-.07l5.63 7.28a1 1 0 0 1 .16.54a1.1 1.1 0 0 1-.1.41Z" />
            </svg>
                            <h2 class="text-sm font-semibold text-gray-200 ml-2">
                New Trade
            </h2>
                            <div class="text-sm font-semibold text-gray-200 ml-2">
                
            </div>
            </div>
</div>

        
        <div class="mx-4 mt-4 text-left">
            <span class="block text-xs font-bold text-gray-100">Character Name</span>
            <div class="mt-2">
                <input
                    id="trade-new-trade-search"
                    type="text"
                    x-model="search_query"
                    x-on:input.debounce.400ms="search()"
                    class="mx-2 block w-full rounded-md border-0 bg-gray-800/40 border border-gray-700/40 font-medium py-1.5 text-sm text-gray-200 placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-yellow-600 md:mx-0 sm:leading-6"
                    placeholder="Enter at least three characters to search."
                    autocomplete="off"
                >
            </div>
        </div>

        
        <div class="mx-4 my-4">
            
            <template x-if="is_searching">
                <div class="rounded-md bg-gray-900/60 px-4 py-3 text-center text-sm text-gray-400">
                    <svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
</svg>                </div>
            </template>

            
            <template x-if="results?.length && !is_searching">
                <div class="space-y-2">
                    <template x-for="character in results" :key="character?.id">
                        <button
                            type="button"
                            class="w-full rounded-md px-3 py-3 text-left text-sm transition bg-grayNoBackdrop border border-gray-700/40 hover:bg-gray-700/20"
                            x-on:click="selectCharacter(character); openConfirmModal();"
                        >
                            <div class="flex items-center">
                                <div class="relative flex-shrink-0">
                                    <div class="relative overflow-hidden w-12 h-12 rounded-full ring-2 ring-gray-700 bg-gray-800 group-hover:bg-gray-700/80 bg-cover" x-bind:style="character?.background_url ? 'background-image: url(\''+character?.background_url+'\');' : ''">
                                        <img x-bind:src="character.image_url" class="absolute top-0 left-0 h-16 w-16 -ml-2 mt-1 max-w-none">
                                    </div>
                                </div>
                                <div class="ml-3">
                                    <div class="font-semibold text-gray-100" x-text="character?.title"></div>
                                    <div class="text-sm text-gray-400 font-medium" x-text="character?.subtitle"></div>
                                </div>
                            </div>
                        </button>
                    </template>
                </div>
            </template>

            
            <template x-if="!is_searching && results && search_query?.length >= 1 && Object.keys(results).length <= 0">
                <div class="rounded-md bg-gray-900/40 px-4 py-3 text-center text-sm text-gray-400 font-medium">
                    No characters were found with that name.
                </div>
            </template>
        </div>
                                    </div>
                                </template>
                            </div>
                        </div>
                        
                        <div x-show="show_fade"
                             x-transition:enter="transition ease-out"
                             x-transition:enter-start="opacity-0"
                             x-transition:enter-end="opacity-100"
                             x-transition:leave="transition ease-in"
                             x-transition:leave-start="opacity-100"
                             x-transition:leave-end="opacity-0"
                             :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }"
                             class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-900 to-transparent pointer-events-none z-10"></div>
                    </div>
                </div>
            </div>

            
    
    <div
                x-data="modal('trade-new-trade-confirm', false, null, 1)"
                x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'trade-new-trade-confirm') })"
                x-on:open-modal.window="$event.detail == 'trade-new-trade-confirm' ? show = true : null"
                x-on:close-modal.window="$event.detail == 'trade-new-trade-confirm' ? show = false : null"
                x-on:close.stop="show = false"
                x-on:keydown.escape.window="show = false"
                x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()"
                x-on:keydown.shift.tab.prevent="prevFocusable().focus()"
                x-show="show"
                class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50"
                x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                style="display: none;">
                <div class="flex min-h-full  justify-center md:p-4 text-center items-center sm:p-0">
                    <div
                        x-show="show"
                        class="fixed inset-0 transform transition-all"
                         x-on:click="show = false"                         x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms>
                        <div class="absolute inset-0 bg-immo opacity-70"></div>
                    </div>
                    <div
                        x-show="show"
                        class="md:mb-6  bg-gray-900  border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-sm sm:mx-8 md:mx-auto relative max-h-[90vh]"
                        x-transition:enter.duration.300ms x-transition:leave.duration.200ms>
                                                                                    <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-800 border border-gray-700/40 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2.5 mr-2"
                                        x-on:click="$dispatch('close-modal', 'trade-new-trade-confirm');"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="size-3 font-bold">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                                    </svg>
                                </button>
                                                                            <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]"
                             x-ref="scrollContainer"
                             x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                             @scroll="handleScroll()">
                            <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible">
                                <template x-if="content_visible">
                                    
                                    <div x-data="{show:false}" x-init="$nextTick(() => show = true)">
                                        <div class="border-b border-white/5  bg-grayNoBackdrop ">
    <div class="py-3 px-3 text-left flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="size-4 text-gray-500" viewBox="0 0 24 24">
                <path fill="currentColor" d="m20 10.35l-5.78-7.41A3.06 3.06 0 0 0 9.75 3L4 10.35A3.05 3.05 0 0 0 3.51 12A3.1 3.1 0 0 0 4 13.58l.06.07l5.74 7.41A3 3 0 0 0 12 22a3.06 3.06 0 0 0 2.26-1L20 13.65a3 3 0 0 0-.06-3.3Zm-1.57 2.14l-5.67 7.22a1.11 1.11 0 0 1-1.42.07l-5.69-7.31a1 1 0 0 1-.14-.47a1.1 1.1 0 0 1 .1-.45l5.67-7.22a1.11 1.11 0 0 1 1.42-.07l5.63 7.28a1 1 0 0 1 .16.54a1.1 1.1 0 0 1-.1.41Z" />
            </svg>
                            <h2 class="text-sm font-semibold text-gray-200 ml-2">
                Confirm Trade
            </h2>
                            <div class="text-sm font-semibold text-gray-200 ml-2">
                
            </div>
            </div>
</div>

        
        <div class="mx-4 mt-4 text-left">
            <template x-if="selected">
                <div>
                    
                    <div class="flex items-center">
                        <div class="relative flex-shrink-0">
                            <div class="relative overflow-hidden w-16 h-16 rounded-full ring-2 ring-gray-700 bg-gray-800 group-hover:bg-gray-700/80 bg-cover" x-bind:style="selected?.background_url ? 'background-image: url(\''+selected?.background_url+'\');' : ''">
                                <img x-bind:src="selected.image_url" class="absolute top-0 left-0 h-24 w-24 -ml-4 mt-1 max-w-none">
                            </div>
                        </div>
                        <div class="ml-3">
                            <div class="text-sm font-semibold text-gray-100" x-text="selected?.title"></div>
                            <div class="text-sm text-gray-400 font-medium" x-text="selected?.subtitle"></div>
                        </div>
                    </div>
                </div>
            </template>
        </div>

        
        <div class="mt-4 rounded-b-lg bg-grayNoBackdrop py-2 text-center">
            <button type="button" 
                 
                class="rounded bg-white/5 border border-gray-700/40 px-2 py-1 text-sm font-semibold text-white shadow-sm hover:bg-white/10 inline-block mr-2" type="button" x-on:click="closeConfirmModal()">
            Close
        </button>
            <button type="button"

                    class="inline-block rounded px-2 py-1 font-bold  text-sm border border-indigo-700/40 bg-indigoNoBackdrop hover:bg-indigo-700/40" type="button" x-on:click="handleConfirm()">
        Create Trade
    </button>
            </div>
                                    </div>
                                </template>
                            </div>
                        </div>
                        
                        <div x-show="show_fade"
                             x-transition:enter="transition ease-out"
                             x-transition:enter-start="opacity-0"
                             x-transition:enter-end="opacity-100"
                             x-transition:leave="transition ease-in"
                             x-transition:leave-start="opacity-100"
                             x-transition:leave-end="opacity-0"
                             :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }"
                             class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-900 to-transparent pointer-events-none z-10"></div>
                    </div>
                </div>
            </div>

            </div>
<div x-on:trade-interaction.window="$dispatch('open-modal', 'trade-interaction');getTrade($event.detail);" x-data="trade_interaction">
    <div
                x-data="modal('trade-interaction', false, null, )"
                x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'trade-interaction') })"
                x-on:open-modal.window="$event.detail == 'trade-interaction' ? show = true : null"
                x-on:close-modal.window="$event.detail == 'trade-interaction' ? show = false : null"
                x-on:close.stop="show = false"
                x-on:keydown.escape.window="show = false"
                x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()"
                x-on:keydown.shift.tab.prevent="prevFocusable().focus()"
                x-show="show"
                class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50"
                x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                style="display: none;">
                <div class="flex min-h-full  justify-center md:p-4 text-center items-center sm:p-0">
                    <div
                        x-show="show"
                        class="fixed inset-0 transform transition-all"
                         x-on:click="show = false"                         x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms>
                        <div class="absolute inset-0 bg-immo opacity-70"></div>
                    </div>
                    <div
                        x-show="show"
                        class="md:mb-6  bg-gray-900  border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-lg sm:mx-8 md:mx-auto relative max-h-[90vh]"
                        x-transition:enter.duration.300ms x-transition:leave.duration.200ms>
                                                                                    <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-800 border border-gray-700/40 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2.5 mr-2"
                                        x-on:click="$dispatch('close-modal', 'trade-interaction');"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="size-3 font-bold">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                                    </svg>
                                </button>
                                                                            <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]"
                             x-ref="scrollContainer"
                             x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                             @scroll="handleScroll()">
                            <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible">
                                <template x-if="content_visible">
                                    
                                    <div x-data="{show:false}" x-init="$nextTick(() => show = true)">
                                        <div 
            x-init="$watch('show', (val) => { if(!val) {setTimeout(() => { resetState() }, 300); $dispatch('trade-interaction-closed', true);}});"
            x-on:trade-cancelled.window="getTrade(trade.id)"
            x-on:gold-added-to-trade.window="getTrade(trade.id)"
            x-on:gold-removed-from-trade.window="getTrade(trade.id)"
            x-on:accepted-trade.window="getTrade(trade.id)"
            x-on:unaccepted-trade.window="getTrade(trade.id)"
            x-on:item-added-to-trade.window="getTrade(trade.id)"
            x-on:item-removed-from-trade.window="getTrade(trade.id)"
            x-on:pet-added-to-trade.window="getTrade(trade.id)"
            x-on:pet-removed-from-trade.window="getTrade(trade.id)"
        ></div>
        <template x-if="trade !== null">
            <div>
                <div class="border-b border-white/5  bg-grayNoBackdrop ">
    <div class="py-3 px-3 text-left flex items-center">
                    <svg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke-width='1.5' stroke='currentColor' class='w-5 h-5 text-gray-600'>
                                            <path stroke-linecap='round' stroke-linejoin='round' d='M7.5 21 3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5'/>
                                        </svg>
                                    <div class="text-sm font-semibold text-gray-200 ml-2">
                Trade Offer
            </div>
            </div>
</div>
                <div>
                    <div>
                        <div class="mx-2 mt-4 py-2 px-2 bg-grayNoBackdrop border border-gray-700/40 rounded-lg">
                            <div class="flex items-center">
                                <div
                                    :style="'background-image: url(' + trade.offers.them.character.background_url + ')'"
                                    class="relative overflow-hidden w-14 h-14 rounded-full ring-1 ring-gray-700/40 bg-gray-800 group-hover:bg-gray-700/80 bg-cover flex items-center justify-center">
                                    <img :src="trade.offers.them.character.avatar_url" alt="" class="absolute top-0 left-0 w-24 -ml-5 mt-0.5 max-w-none mt-2"/>
                                </div>
                                <div class="ml-4 text-left">
                                    <h2 class="text-left font-bold" x-html="trade.offers.them.character.formatted_name">
                                    </h2>
                                    <div class="text-sm text-gray-400">
                                        <span class="inline-flex items-center rounded-md bg-grayNoBackdrop px-2 py-1 text-xs font-medium text-gray-400 border border-gray-400/20">
    Total Level <span x-text='trade.offers.them.character.total_level' class='pl-1'></span>
</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        
                        <div class="my-4">
                            <div>
    <div class="relative">
        <div class="absolute inset-0 flex items-center" aria-hidden="true">
            <div class="w-full border-t border-gray-700/40"></div>
        </div>
        <div class="relative flex justify-center">
            <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-900">Their Offer</span>
        </div>
    </div>
</div>
                        </div>
                        <div class="mb-4 bg-grayNoBackdrop border border-gray-700/40 mx-2 py-4 rounded-lg">
                            
                            
                            <template x-if="trade.offers.them.items.length <= 0 && trade.offers.them.gold.amount <= 0 && (trade.offers.them.pets?.length ?? 0) <= 0">
                                <span class="inline-flex items-center rounded-md bg-grayNoBackdrop px-2 py-1 text-xs font-medium text-gray-400 border border-gray-400/20">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4 text-gray-600 inline-flex mr-1">
                                        <path fill-rule="evenodd" d="M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0ZM9 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM6.75 8a.75.75 0 0 0 0 1.5h.75v1.75a.75.75 0 0 0 1.5 0v-2.5A.75.75 0 0 0 8.25 8h-1.5Z" clip-rule="evenodd" />
                                    </svg>
                                    Nothing has been added
</span>
                            </template>
                            
                            
                            <div class="flex gap-2 mx-4 justify-center flex-wrap">
                                <template x-if="trade.offers.them.items !== null && trade.offers.them.items.length">
                                    <template x-for="trade_item in trade.offers.them.items">
                                        <a :href="trade_item.inspect_url"
                                                :class="{
                                                    ['quality:'+trade_item.quality+':background'] : true,
                                                    ['quality:'+trade_item.quality+':border'] : true,
                                                    ['!border !border-red-400']: trade_item.has_enough.them === false && trade.status === 'PENDING',
                                                }"
                                                x-on:contextMenu.prevent
                                                class="rounded-lg bg-gray-900/40 text-center py-2 px-3 relative border h-16 select-none inline-block"
                                                x-tooltip.cursor.html="'<div class=\'text-center\'><span class=\'font-bold\'>'+trade_item.name+'</span><br/>Level '+trade_item.level+'</div>'">
                                            <div class="absolute top-0 left-0 -mt-2 -ml-2 " >
                                                <span class="inline-flex items-center px-2 py-1 text-xs font-medium text-gray-400 bg-gray-900 rounded-md" :class="{'!bg-red-800 !text-gray-100':trade_item.has_enough.them === false && trade.status === 'PENDING'}"><span x-text="trade_item.quantity"></span>x</span>
                                            </div>
                                            <template x-if="trade_item.tier">
                                                <div class="absolute bottom-0 right-0 -mt-1 mr-0.5">
                                                    <span class="inline-flex items-center gap-x-1.5 rounded-md px-2 py-1 text-xs font-bold text-gray-200 bg-gray-900/90" x-text="'T'+trade_item.tier">
                                                    </span>
                                                </div>
                                            </template>
                                            <img :src="trade_item.image_url" class="inline-block w-12 h-12">
                                        </a>
                                    </template>
                                </template>
    
                                <template x-if="trade.offers.them.gold.amount">
                                    <button type="button"
                                            x-on:contextMenu.prevent
                                            class="rounded-lg bg-gray-900/40 text-center py-2 px-3 relative border h-16 select-none quality:standard:background quality:standard:border"
                                            x-tooltip.cursor.html="'<div class=\'text-center\'><span class=\'font-bold\'>'+trade.offers.them.gold.amount+' Gold</span></div>'"
                                            :class="{['!border !border-red-600']: trade.offers.them.gold.has_enough === false && trade.status === 'PENDING'}"
                                    >
                                            <div class="absolute top-0 left-0 -mt-2 -ml-2 " >
                                                <span class="inline-flex items-center px-2 py-1 text-xs font-medium text-gray-400 bg-gray-900 rounded-md ring-1 ring-inset ring-gray-400/20" :class="{'!bg-red-800 !text-gray-100':trade.offers.them.gold.has_enough === false && trade.status === 'PENDING'}"><span x-text="trade.offers.them.gold.amount"></span></span>
                                            </div>
                                        <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=100,height=100/global/gold_coin.png" class="inline-block w-12 h-12">
                                    </button>
                                </template>
    
                                
                                <template x-if="trade.offers.them.pets !== null && trade.offers.them.pets.length">
                                    <template x-for="trade_pet in trade.offers.them.pets">
                                        <button type="button"
                                                :class="{
                                                    ['quality:'+trade_pet.quality+':background'] : true,
                                                    ['quality:'+trade_pet.quality+':border'] : true,
                                                    ['!border !border-red-400']: trade_pet.has_enough?.them === false && trade.status === 'PENDING',
                                                }"
                                                x-on:contextMenu.prevent
                                                class="rounded-lg bg-gray-900/40 text-center py-2 px-3 relative border h-16 select-none"
                                                x-tooltip.cursor.html="'<div class=\'text-center\'><span class=\'font-bold\'>'+trade_pet.name+'</span><br/>Level '+trade_pet.level+(trade_pet.evolution_state > 0 ? ' / Evolution '+trade_pet.evolution_state : '')+'</div>'"
                                        >
                                            <div class="absolute top-0 left-0 -mt-2 -ml-2 flex gap-1 flex-wrap">
                                                <template x-if="trade_pet.evolution_state <= 0">
                                                    <span class="inline-flex items-center rounded-md bg-grayNoBackdrop px-2 py-1 text-xs font-medium text-gray-400 border border-gray-400/20 flex gap-1 items-center !py-0.5 !px-1">
    Lv. <span x-text='trade_pet.level'></span>
</span>
                                                </template>
                                                <template x-if="trade_pet.evolution_state > 0">
                                                    <div class="inline-flex items-center rounded-md bg-[#282923] px-2 py-1 text-xs font-medium text-yellow-400 ring-1 ring-inset ring-yellow-400/20 flex gap-1 items-center  !py-0.5 !px-1">
    <svg x-cloak xmlns="http://www.w3.org/2000/svg" class="inline-block size-3"
                                                             viewBox="0 0 24 24">
                                                            <path fill="currentColor"
                                                                  d="M21.738 16.13a1 1 0 0 1-.19.61a1 1 0 0 1-.52.38l-1.71.57a3.6 3.6 0 0 0-1.4.86a3.5 3.5 0 0 0-.86 1.4l-.6 1.7a1 1 0 0 1-.36.51a1.1 1.1 0 0 1-.62.19a1 1 0 0 1-1-.71l-.57-1.71a3.5 3.5 0 0 0-.86-1.4a3.8 3.8 0 0 0-1.4-.87l-1.71-.56a1.1 1.1 0 0 1-.51-.37a1.1 1.1 0 0 1-.21-.62a1 1 0 0 1 .71-1l1.72-.57a3.54 3.54 0 0 0 2.28-2.28l.57-1.69a1 1 0 0 1 .95-.73c.215 0 .426.059.61.17c.182.125.322.303.4.51l.58 1.74a3.54 3.54 0 0 0 2.28 2.28l1.7.6a1 1 0 0 1 .51.38a1 1 0 0 1 .21.61m-9.999-6.36a1 1 0 0 1-.17.55a1 1 0 0 1-.47.35l-1.26.42c-.353.122-.673.32-.94.58a2.5 2.5 0 0 0-.58.94l-.43 1.24a.9.9 0 0 1-.35.47a1 1 0 0 1-.56.18a1 1 0 0 1-.57-.19a1 1 0 0 1-.34-.47l-.41-1.25a2.44 2.44 0 0 0-.58-.93a2.2 2.2 0 0 0-.93-.58l-1.25-.42a.93.93 0 0 1-.48-.35a1 1 0 0 1 .48-1.47l1.25-.41a2.49 2.49 0 0 0 1.53-1.53l.41-1.23a1 1 0 0 1 .32-.47a1 1 0 0 1 .55-.2a1 1 0 0 1 .57.16a1 1 0 0 1 .37.46l.42 1.28a2.49 2.49 0 0 0 1.53 1.53l1.25.43a.92.92 0 0 1 .46.35a.94.94 0 0 1 .18.56m5.789-5.36a1 1 0 0 1-.17.51a.82.82 0 0 1-.42.3l-.62.21a.84.84 0 0 0-.52.52l-.22.63a.93.93 0 0 1-.29.39a.82.82 0 0 1-.52.18a1.1 1.1 0 0 1-.49-.15a.9.9 0 0 1-.32-.44l-.21-.62a.7.7 0 0 0-.2-.32a.76.76 0 0 0-.32-.2l-.62-.2a1 1 0 0 1-.42-.31a.9.9 0 0 1-.16-.51a.94.94 0 0 1 .17-.51a.9.9 0 0 1 .42-.3l.61-.2a.9.9 0 0 0 .33-.2a.9.9 0 0 0 .2-.33l.21-.62c.06-.155.155-.292.28-.4a1 1 0 0 1 .49-.19a.94.94 0 0 1 .53.16a1 1 0 0 1 .32.41l.21.64a.9.9 0 0 0 .2.33a1 1 0 0 0 .32.2l.63.21a1 1 0 0 1 .41.3a.87.87 0 0 1 .17.51"></path>
                                                        </svg>
                                                        <span>Lv. <span x-text='trade_pet.level'></span></span>
</div>
                                                </template>
                                            </div>
                                            <img :src="trade_pet.image_url" class="inline-block w-12 h-12">
                                        </button>
                                    </template>
                                </template>
                            </div>
    
                            
                            <div class="flex gap-2 items-center justify-center mx-2 mt-2 flex-wrap">
                                <div class="inline-flex items-center text-sm leading-5 text-gray-400 rounded-md">
    <div class="inline-flex items-center text-xs text-gray-300 font-bold rounded-md border border-gray-700/40 bg-gray-700/30  px-2  py-1 whitespace-nowrap rounded-r-none">
        <span>
            Total Value
        </span>
    </div>
    <div class="inline-flex items-center text-xs text-gray-400 font-semibold rounded-md rounded-l-none border border-gray-700/40 !bg-gray-700/50 px-2 py-1 whitespace-nowrap" label="Total Value" >
        <div>
            <div>
                                        <img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/gold_coin.png' class='h-4 w-4 inline-block'> <span x-text="trade.offers.them.value ?? 0"></span>
                                    </div>
        </div>
    </div>
</div>
    
                                <div class="inline-flex items-center text-sm leading-5 text-gray-400 rounded-md">
    <div class="inline-flex items-center text-xs text-gray-300 font-bold rounded-md border border-gray-700/40 bg-gray-700/30  px-2  py-1 whitespace-nowrap rounded-r-none">
        <span>
            Effective Profit
        </span>
    </div>
    <div class="inline-flex items-center text-xs text-gray-400 font-semibold rounded-md rounded-l-none border border-gray-700/40 !bg-gray-700/50 px-2 py-1 whitespace-nowrap" label="Effective Profit" >
        <div>
            <div :class="{'text-green-400': trade.effective_profit < 0, 'text-red-400': trade.effective_profit > 0, 'text-gray-400': trade.effective_profit === 0}">
                                        <img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/gold_coin.png' class='h-4 w-4 inline-block'> <span x-text="trade.effective_profit === 0 ? '0' : (trade.effective_profit < 0 ? '+' : '') + (-(trade.effective_profit)).toLocaleString()"></span>
                                    </div>
        </div>
    </div>
</div>
    
                                <div class="inline-flex items-center text-sm leading-5 text-gray-400 rounded-md">
    <div class="inline-flex items-center text-xs text-gray-300 font-bold rounded-md border border-gray-700/40 bg-gray-700/30  px-2  py-1 whitespace-nowrap rounded-r-none">
        <span>
            Status
        </span>
    </div>
    <div class="inline-flex items-center text-xs text-gray-400 font-semibold rounded-md rounded-l-none border border-gray-700/40 !bg-gray-700/50 px-2 py-1 whitespace-nowrap" label="Status" >
        <div>
            <template x-if="trade.offers.them.has_accepted === false && trade.status === 'PENDING'">
                                        <div>
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4 inline-block mr-1">
                                                <path fill-rule="evenodd" d="M8 3.5c-.771 0-1.537.022-2.297.066a1.124 1.124 0 0 0-1.058 1.028l-.018.214a.75.75 0 1 1-1.495-.12l.018-.221a2.624 2.624 0 0 1 2.467-2.399 41.628 41.628 0 0 1 4.766 0 2.624 2.624 0 0 1 2.467 2.399c.056.662.097 1.329.122 2l.748-.748a.75.75 0 1 1 1.06 1.06l-2 2.001a.75.75 0 0 1-1.061 0l-2-1.999a.75.75 0 0 1 1.061-1.06l.689.688a39.89 39.89 0 0 0-.114-1.815 1.124 1.124 0 0 0-1.058-1.028A40.138 40.138 0 0 0 8 3.5ZM3.22 7.22a.75.75 0 0 1 1.061 0l2 2a.75.75 0 1 1-1.06 1.06l-.69-.69c.025.61.062 1.214.114 1.816.048.56.496.996 1.058 1.028a40.112 40.112 0 0 0 4.594 0 1.124 1.124 0 0 0 1.058-1.028 39.2 39.2 0 0 0 .018-.219.75.75 0 1 1 1.495.12l-.018.226a2.624 2.624 0 0 1-2.467 2.399 41.648 41.648 0 0 1-4.766 0 2.624 2.624 0 0 1-2.467-2.399 41.395 41.395 0 0 1-.122-2l-.748.748A.75.75 0 1 1 1.22 9.22l2-2Z" clip-rule="evenodd" />
                                            </svg>
                                            Pending
                                        </div>
                                    </template>
                                    <template x-if="trade.offers.them.has_accepted === true && trade.status === 'PENDING'">
                                        <div class="font-bold">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4 inline-block mr-1 text-green-400 ">
                                                <path fill-rule="evenodd" d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Zm3.844-8.791a.75.75 0 0 0-1.188-.918l-3.7 4.79-1.649-1.833a.75.75 0 1 0-1.114 1.004l2.25 2.5a.75.75 0 0 0 1.15-.043l4.25-5.5Z" clip-rule="evenodd" />
                                            </svg>
                                            Accepted
                                        </div>
                                    </template>
                                    <template x-if="trade.status === 'PROCESSED'">
                                        <div class="font-bold">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4 inline-block mr-1 text-green-400">
                                                <path fill-rule="evenodd" d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Zm3.844-8.791a.75.75 0 0 0-1.188-.918l-3.7 4.79-1.649-1.833a.75.75 0 1 0-1.114 1.004l2.25 2.5a.75.75 0 0 0 1.15-.043l4.25-5.5Z" clip-rule="evenodd" />
                                            </svg>
                                            Processed
                                        </div>
                                    </template>
                                    <template x-if="trade.status === 'CANCELLED'">
                                        <div class="font-bold">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4 inline-block text-red-400">
                                                <path d="M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z" />
                                            </svg>
                                            Cancelled
                                        </div>
                                    </template>
        </div>
    </div>
</div>
                            </div>
                        </div>
                    </div>

                    
                    <div class="my-4">
                        <div>
    <div class="relative">
        <div class="absolute inset-0 flex items-center" aria-hidden="true">
            <div class="w-full border-t border-gray-700/40"></div>
        </div>
        <div class="relative flex justify-center">
            <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-900">Your Offer</span>
        </div>
    </div>
</div>
                    </div>
                    <div class="mb-4 bg-grayNoBackdrop border border-gray-700/40 mx-2 py-4 rounded-lg">
                        <div class="flex gap-2 mx-4 justify-center flex-wrap">
                            <template x-if="trade.offers.you.items !== null && trade.offers.you.items.length">
                                <template x-for="trade_item in trade.offers.you.items">
                                    <button type="button"
                                            :class="{
                                                ['quality:'+trade_item.quality+':background'] : true,
                                                ['quality:'+trade_item.quality+':border'] : true,
                                                ['!border !border-red-600']: trade_item.has_enough.you === false && trade.status === 'PENDING',
                                            }"
                                            x-on:contextMenu.prevent
                                            class="rounded-lg bg-gray-900/40 text-center py-2 px-3 relative border h-16 select-none"
                                            x-tooltip.cursor.html="'<div class=\'text-center\'><span class=\'font-bold\'>'+trade_item.name+'</span><br/>Level '+trade_item.level+'</div>'"
                                            x-on:click="$dispatch('remove-item-from-trade', {trade: trade, trade_item: trade_item})">
                                        <div class="absolute top-0 left-0 h-full w-full bg-gray-900/40 rounded-md opacity-0 hover:opacity-100 transition-opacity">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-8 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 opacity-60">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                                            </svg>
                                        </div>
                                        <div class="absolute top-0 left-0 -mt-2 -ml-2 ">
                                            <span class="inline-flex items-center px-2 py-1 text-xs font-medium text-gray-400 bg-gray-900 rounded-md"  :class="{'!bg-red-800 !text-gray-100':trade_item.has_enough.you === false && trade.status === 'PENDING'}"><span x-text="trade_item.quantity"></span>x</span>
                                        </div>
                                        <template x-if="trade_item.tier">
                                            <div class="absolute bottom-0 right-0 -mt-1 mr-0.5">
                                                <span class="inline-flex items-center gap-x-1.5 rounded-md px-2 py-1 text-xs font-bold text-gray-200 bg-gray-900/90" x-text="'T'+trade_item.tier">
                                                </span>
                                            </div>
                                        </template>
                                        <img :src="trade_item.image_url" class="inline-block w-12 h-12">
                                    </button>
                                </template>
                            </template>
                            
                            <template x-if="trade.offers.you.gold.amount">
                                <button type="button"
                                        x-on:contextMenu.prevent
                                        class="rounded-lg bg-gray-900/40 text-center py-2 px-3 relative border h-16 select-none quality:standard:background quality:standard:border"
                                        x-tooltip.cursor.html="'<div class=\'text-center\'><span class=\'font-bold\'>'+trade.offers.you.gold.amount+' Gold</span></div>'"
                                        x-on:click="$dispatch('remove-gold-from-trade', trade)"
                                        :class="{['!border !border-red-600']: trade.offers.you.gold.has_enough === false && trade.status === 'PENDING'}"
                                >
                                    <div class="absolute top-0 left-0 h-full w-full bg-gray-900/40 rounded-md opacity-0 hover:opacity-100 transition-opacity">
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-8 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 opacity-60">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                                        </svg>
                                    </div>
                                    <div class="absolute top-0 left-0 -mt-2 -ml-2 " >
                                        <span class="inline-flex items-center px-2 py-1 text-xs font-medium text-gray-400 bg-gray-900 rounded-md ring-1 ring-inset ring-gray-400/20" :class="{'!bg-red-800 !text-gray-100':trade.offers.you.gold.has_enough === false && trade.status === 'PENDING'}"><span x-text="trade.offers.you.gold.amount"></span></span>
                                    </div>
                                    <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=100,height=100/global/gold_coin.png" class="inline-block w-12 h-12">
                                </button>
                            </template>

                            
                            <template x-if="trade.offers.you.pets !== null && trade.offers.you.pets.length">
                                <template x-for="trade_pet in trade.offers.you.pets">
                                    <button type="button"
                                            :class="{
                                                ['quality:'+trade_pet.quality+':background'] : true,
                                                ['quality:'+trade_pet.quality+':border'] : true,
                                                ['!border !border-red-600']: trade_pet.has_enough?.you === false && trade.status === 'PENDING',
                                            }"
                                            x-on:contextMenu.prevent
                                            class="rounded-lg bg-gray-900/40 text-center py-2 px-3 relative border h-16 select-none"
                                            x-tooltip.cursor.html="'<div class=\'text-center\'><span class=\'font-bold\'>'+trade_pet.name+'</span><br/>Level '+trade_pet.level+(trade_pet.evolution_state > 0 ? ' / Evolution '+trade_pet.evolution_state : '')+'</div>'"
                                            x-on:click="$dispatch('remove-pet-from-trade', {trade: trade, trade_pet: trade_pet})"
                                    >
                                        <div class="absolute top-0 left-0 h-full w-full bg-gray-900/40 rounded-md opacity-0 hover:opacity-100 transition-opacity z-10">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-8 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 opacity-60">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                                            </svg>
                                        </div>
                                        <div class="absolute top-0 left-0 -mt-2 -ml-2 flex gap-1 flex-wrap">
                                            <template x-if="trade_pet.evolution_state <= 0">
                                                <span class="inline-flex items-center rounded-md bg-grayNoBackdrop px-2 py-1 text-xs font-medium text-gray-400 border border-gray-400/20 flex gap-1 items-center !py-0.5 !px-1">
    Lv. <span x-text='trade_pet.level'></span>
</span>
                                            </template>
                                            <template x-if="trade_pet.evolution_state > 0">
                                                <div class="inline-flex items-center rounded-md bg-[#282923] px-2 py-1 text-xs font-medium text-yellow-400 ring-1 ring-inset ring-yellow-400/20 flex gap-1 items-center  !py-0.5 !px-1">
    <svg x-cloak xmlns="http://www.w3.org/2000/svg" class="inline-block size-3"
                                                         viewBox="0 0 24 24">
                                                        <path fill="currentColor"
                                                              d="M21.738 16.13a1 1 0 0 1-.19.61a1 1 0 0 1-.52.38l-1.71.57a3.6 3.6 0 0 0-1.4.86a3.5 3.5 0 0 0-.86 1.4l-.6 1.7a1 1 0 0 1-.36.51a1.1 1.1 0 0 1-.62.19a1 1 0 0 1-1-.71l-.57-1.71a3.5 3.5 0 0 0-.86-1.4a3.8 3.8 0 0 0-1.4-.87l-1.71-.56a1.1 1.1 0 0 1-.51-.37a1.1 1.1 0 0 1-.21-.62a1 1 0 0 1 .71-1l1.72-.57a3.54 3.54 0 0 0 2.28-2.28l.57-1.69a1 1 0 0 1 .95-.73c.215 0 .426.059.61.17c.182.125.322.303.4.51l.58 1.74a3.54 3.54 0 0 0 2.28 2.28l1.7.6a1 1 0 0 1 .51.38a1 1 0 0 1 .21.61m-9.999-6.36a1 1 0 0 1-.17.55a1 1 0 0 1-.47.35l-1.26.42c-.353.122-.673.32-.94.58a2.5 2.5 0 0 0-.58.94l-.43 1.24a.9.9 0 0 1-.35.47a1 1 0 0 1-.56.18a1 1 0 0 1-.57-.19a1 1 0 0 1-.34-.47l-.41-1.25a2.44 2.44 0 0 0-.58-.93a2.2 2.2 0 0 0-.93-.58l-1.25-.42a.93.93 0 0 1-.48-.35a1 1 0 0 1 .48-1.47l1.25-.41a2.49 2.49 0 0 0 1.53-1.53l.41-1.23a1 1 0 0 1 .32-.47a1 1 0 0 1 .55-.2a1 1 0 0 1 .57.16a1 1 0 0 1 .37.46l.42 1.28a2.49 2.49 0 0 0 1.53 1.53l1.25.43a.92.92 0 0 1 .46.35a.94.94 0 0 1 .18.56m5.789-5.36a1 1 0 0 1-.17.51a.82.82 0 0 1-.42.3l-.62.21a.84.84 0 0 0-.52.52l-.22.63a.93.93 0 0 1-.29.39a.82.82 0 0 1-.52.18a1.1 1.1 0 0 1-.49-.15a.9.9 0 0 1-.32-.44l-.21-.62a.7.7 0 0 0-.2-.32a.76.76 0 0 0-.32-.2l-.62-.2a1 1 0 0 1-.42-.31a.9.9 0 0 1-.16-.51a.94.94 0 0 1 .17-.51a.9.9 0 0 1 .42-.3l.61-.2a.9.9 0 0 0 .33-.2a.9.9 0 0 0 .2-.33l.21-.62c.06-.155.155-.292.28-.4a1 1 0 0 1 .49-.19a.94.94 0 0 1 .53.16a1 1 0 0 1 .32.41l.21.64a.9.9 0 0 0 .2.33a1 1 0 0 0 .32.2l.63.21a1 1 0 0 1 .41.3a.87.87 0 0 1 .17.51"></path>
                                                    </svg>
                                                    <span>Lv. <span x-text='trade_pet.level'></span></span>
</div>
                                            </template>
                                        </div>
                                        <img :src="trade_pet.image_url" class="inline-block w-12 h-12">
                                    </button>
                                </template>
                            </template>
                        </div>

                        
                        <template x-if="trade.offers.you.items.length <= 0 && trade.offers.you.gold.amount <= 0 && (trade.offers.you.pets?.length ?? 0) <= 0">
                            <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4 text-gray-600 inline-flex">
                                    <path fill-rule="evenodd" d="M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0ZM9 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM6.75 8a.75.75 0 0 0 0 1.5h.75v1.75a.75.75 0 0 0 1.5 0v-2.5A.75.75 0 0 0 8.25 8h-1.5Z" clip-rule="evenodd" />
                                </svg>
                                Nothing has been added
</span>                        </template>

                        
                        <template x-if="trade.offers.you.items.length >= 1 || trade.offers.you.gold.amount > 0 || (trade.offers.you.pets?.length ?? 0) > 0">
                            <div class="text-center text-xs text-gray-400 mt-2 font-medium flex items-center gap-1 justify-center px-2 flex-wrap">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4 inline-block text-gray-700">
                                    <path fill-rule="evenodd" d="M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0ZM9 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM6.75 8a.75.75 0 0 0 0 1.5h.75v1.75a.75.75 0 0 0 1.5 0v-2.5A.75.75 0 0 0 8.25 8h-1.5Z" clip-rule="evenodd" />
                                </svg>
                                Press on an item to remove it
                            </div>
                        </template>

                        
                        <template x-if="trade.status === 'PENDING'">
                            <div class="mt-2 flex flex-wrap gap-2 mx-4 justify-center">
                                <button type="button" 
                 
                class="rounded bg-white/5 border border-gray-700/40 px-2 py-1 text-sm font-semibold text-white shadow-sm hover:bg-white/10 inline-block" x-on:click="$dispatch('add-item-to-trade', trade)">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4 inline-block">
                                        <path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z" />
                                    </svg>
                                    Item
        </button>
                                <button type="button" 
                 
                class="rounded bg-white/5 border border-gray-700/40 px-2 py-1 text-sm font-semibold text-white shadow-sm hover:bg-white/10 inline-block" x-on:click="$dispatch('add-gold-to-trade', trade);">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4 inline-block">
                                        <path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z" />
                                    </svg>
                                    Gold
        </button>
                                <button type="button" 
                 
                class="rounded bg-white/5 border border-gray-700/40 px-2 py-1 text-sm font-semibold text-white shadow-sm hover:bg-white/10 inline-block disabled:opacity-40" x-on:click="$dispatch('add-pet-to-trade', trade)" x-bind:disabled="trade.offers.them.pets?.length > 0">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4 inline-block">
                                        <path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z" />
                                    </svg>
                                    Pet
        </button>
                            </div>
                        </template>

                        
                        <div class="flex gap-2 items-center justify-center mx-2 mt-2 flex-wrap">
                            <div class="inline-flex items-center text-sm leading-5 text-gray-400 rounded-md">
    <div class="inline-flex items-center text-xs text-gray-300 font-bold rounded-md border border-gray-700/40 bg-gray-700/30  px-2  py-1 whitespace-nowrap rounded-r-none">
        <span>
            Total Value
        </span>
    </div>
    <div class="inline-flex items-center text-xs text-gray-400 font-semibold rounded-md rounded-l-none border border-gray-700/40 !bg-gray-700/50 px-2 py-1 whitespace-nowrap" label="Total Value" >
        <div>
            <div>
                                    <img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/gold_coin.png' class='h-4 w-4 inline-block'> <span x-text="trade.offers.you.value ?? 0"></span>
                                </div>
        </div>
    </div>
</div>
                            
                            <div class="inline-flex items-center text-sm leading-5 text-gray-400 rounded-md">
    <div class="inline-flex items-center text-xs text-gray-300 font-bold rounded-md border border-gray-700/40 bg-gray-700/30  px-2  py-1 whitespace-nowrap rounded-r-none">
        <span>
            Effective Profit
        </span>
    </div>
    <div class="inline-flex items-center text-xs text-gray-400 font-semibold rounded-md rounded-l-none border border-gray-700/40 !bg-gray-700/50 px-2 py-1 whitespace-nowrap" label="Effective Profit" >
        <div>
            <div :class="{'text-green-400': trade.effective_profit > 0, 'text-red-400': trade.effective_profit < 0, 'text-gray-400': trade.effective_profit === 0}">
                                    <div>
                                        <img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/gold_coin.png' class='h-4 w-4 inline-block'> <span x-text="(trade.effective_profit > 0 ? '+' : '') + (trade.effective_profit ?? 0).toLocaleString()"></span>
                                    </div>
                                </div>
        </div>
    </div>
</div>

                            <div class="inline-flex items-center text-sm leading-5 text-gray-400 rounded-md">
    <div class="inline-flex items-center text-xs text-gray-300 font-bold rounded-md border border-gray-700/40 bg-gray-700/30  px-2  py-1 whitespace-nowrap rounded-r-none">
        <span>
            Status
        </span>
    </div>
    <div class="inline-flex items-center text-xs text-gray-400 font-semibold rounded-md rounded-l-none border border-gray-700/40 !bg-gray-700/50 px-2 py-1 whitespace-nowrap" label="Status" >
        <div>
            <template x-if="trade.offers.you.has_accepted === false && trade.status === 'PENDING'">
                                    <div>
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4 inline-block mr-1">
                                            <path fill-rule="evenodd" d="M8 3.5c-.771 0-1.537.022-2.297.066a1.124 1.124 0 0 0-1.058 1.028l-.018.214a.75.75 0 1 1-1.495-.12l.018-.221a2.624 2.624 0 0 1 2.467-2.399 41.628 41.628 0 0 1 4.766 0 2.624 2.624 0 0 1 2.467 2.399c.056.662.097 1.329.122 2l.748-.748a.75.75 0 1 1 1.06 1.06l-2 2.001a.75.75 0 0 1-1.061 0l-2-1.999a.75.75 0 0 1 1.061-1.06l.689.688a39.89 39.89 0 0 0-.114-1.815 1.124 1.124 0 0 0-1.058-1.028A40.138 40.138 0 0 0 8 3.5ZM3.22 7.22a.75.75 0 0 1 1.061 0l2 2a.75.75 0 1 1-1.06 1.06l-.69-.69c.025.61.062 1.214.114 1.816.048.56.496.996 1.058 1.028a40.112 40.112 0 0 0 4.594 0 1.124 1.124 0 0 0 1.058-1.028 39.2 39.2 0 0 0 .018-.219.75.75 0 1 1 1.495.12l-.018.226a2.624 2.624 0 0 1-2.467 2.399 41.648 41.648 0 0 1-4.766 0 2.624 2.624 0 0 1-2.467-2.399 41.395 41.395 0 0 1-.122-2l-.748.748A.75.75 0 1 1 1.22 9.22l2-2Z" clip-rule="evenodd" />
                                        </svg>
                                        Pending
                                    </div>
                                </template>
                                <template x-if="trade.offers.you.has_accepted === true && trade.status === 'PENDING'">
                                    <div class="font-bold">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-3 inline-block mr-1 text-green-400 ">
                                            <path fill-rule="evenodd" d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Zm3.844-8.791a.75.75 0 0 0-1.188-.918l-3.7 4.79-1.649-1.833a.75.75 0 1 0-1.114 1.004l2.25 2.5a.75.75 0 0 0 1.15-.043l4.25-5.5Z" clip-rule="evenodd" />
                                        </svg>
                                        Accepted
                                    </div>
                                </template>
                                <template x-if="trade.status === 'PROCESSED'">
                                    <div class="font-bold">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-3 inline-block mr-1 text-green-400">
                                            <path fill-rule="evenodd" d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Zm3.844-8.791a.75.75 0 0 0-1.188-.918l-3.7 4.79-1.649-1.833a.75.75 0 1 0-1.114 1.004l2.25 2.5a.75.75 0 0 0 1.15-.043l4.25-5.5Z" clip-rule="evenodd" />
                                        </svg>
                                        Processed
                                    </div>
                                </template>
                                <template x-if="trade.status === 'CANCELLED'">
                                    <div class="font-bold">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-3 inline-block text-red-400">
                                            <path d="M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z" />
                                        </svg>
                                        Cancelled
                                    </div>
                                </template>
        </div>
    </div>
</div>
                        </div>
                    
                        
                        <template x-if="trade.status === 'PENDING' && trade?.offers?.you?.cost !== '0'">
                            <div class="mx-4 text-left mt-4">
                                <div 
    x-data="{show: true }"
    class="rounded-lg mt-2 bg-grayNoBackdrop border border-gray-700/40 shadow-sm py-3 px-6 relative text-gray-200 bg-gray-900/40"
    x-cloak 
    x-show="show"
        
>
        <div class="absolute top-0 left-0 -mt-2 -ml-2">
        <svg class="h-6 w-6 text-gray-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
        </svg>
    </div>
        <div>
      <div class="md:flex md:justify-between">
        <div class="text-sm w-full">
          This trade will cost you <img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/gold_coin.png' class='h-4 w-4 inline-block'> <span class='font-bold' x-text='trade?.offers?.you?.cost'></span>
        </div>
      </div>
    </div>
    </div>
    
                            </div>
                        </template>
                        <template x-if="trade.offers.them.has_accepted === true && trade.offers.you.has_accepted === false && trade.status === 'PENDING'">
                            <div class="mx-4 text-left mt-4">
                                <div 
    x-data="{show: true }"
    class="rounded-lg mt-2 bg-grayNoBackdrop border border-gray-700/40 shadow-sm py-3 px-6 relative text-gray-200 bg-gray-900/40"
    x-cloak 
    x-show="show"
        
>
        <div class="absolute top-0 left-0 -mt-2 -ml-2">
        <svg class="h-6 w-6 text-gray-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
        </svg>
    </div>
        <div>
      <div class="md:flex md:justify-between">
        <div class="text-sm w-full">
          <strong><span x-html='trade.offers.them.character.formatted_name'></span> has accepted the trade.</strong> If you make any further changes to this trade, both parties will need to re-accept it.
        </div>
      </div>
    </div>
    </div>
                            </div>
                        </template>
                        <template x-if="trade.offers.you.has_accepted === true && trade.offers.them.has_accepted === false && trade.status ==='PENDING'">
                            <div class="mx-4 text-left mt-4">
                                <div 
    x-data="{show: true }"
    class="rounded-lg mt-2 bg-grayNoBackdrop border border-gray-700/40 shadow-sm py-3 px-6 relative text-gray-200 bg-gray-900/40"
    x-cloak 
    x-show="show"
        
>
        <div class="absolute top-0 left-0 -mt-2 -ml-2">
        <svg class="h-6 w-6 text-gray-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
        </svg>
    </div>
        <div>
      <div class="md:flex md:justify-between">
        <div class="text-sm w-full">
          <strong>You have accepted the trade.</strong> If you or <span x-html='trade.offers.them.character.formatted_name' class='font-bold'></span> make any further changes to this trade, both parties will need to re-accept it.
        </div>
      </div>
    </div>
    </div>
                            </div>
                        </template>
                        
                        
                        <template x-if="trade.status === 'PENDING' && trade.offers.you.pet_validation?.deficit > 0">
                            <div class="mx-4 text-left mt-4">
                                <div 
    x-data="{show: true }"
    class="rounded-lg mt-2 bg-gray-800 shadow-sm py-3 px-6 relative text-gray-200 bg-red-900/40 border border-red-600/40 !text-red-300 font-medium"
    x-cloak 
    x-show="show"
        
>
        <div>
      <div class="md:flex md:justify-between">
        <div class="text-sm w-full">
          You need to have an effective profit of at least <img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/gold_coin.png' class='h-4 w-4 inline-block'> <span class='font-bold' x-text='trade.offers.you.pet_validation.minimum_required.toLocaleString()'></span> to cover the pets.
        </div>
      </div>
    </div>
    </div>
                            </div>
                        </template>
                        
                        <template x-if="trade.status === 'PENDING' && trade.offers.them.pet_validation?.deficit > 0">
                            <div class="mx-4 text-left mt-4">
                                <div 
    x-data="{show: true }"
    class="rounded-lg mt-2 bg-gray-800 shadow-sm py-3 px-6 relative text-gray-200 bg-red-900/40 border border-red-600/40 !text-red-300 font-medium"
    x-cloak 
    x-show="show"
        
>
        <div>
      <div class="md:flex md:justify-between">
        <div class="text-sm w-full">
          They need to have an effective profit of at least <img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/gold_coin.png' class='h-4 w-4 inline-block'> <span class='font-bold' x-text='trade.offers.them.pet_validation.minimum_required.toLocaleString()'></span> to cover the pets.
        </div>
      </div>
    </div>
    </div>
                            </div>
                        </template>
                    </div>

                    
                    <template x-if="trade.status === 'PENDING'">
                        <div class="bg-grayNoBackdrop border-t border-gray-700/40">
                            <div class="flex flex-wrap gap-2 justify-between mx-4 py-3 items-center">
                                <div>
                                    <button type="button" 
                 
                class="rounded bg-white/5 border border-gray-700/40 px-2 py-1 text-sm font-semibold text-white shadow-sm hover:bg-white/10 inline-block disabled:opacity-40 flex items-center justify-center" x-on:click="getTrade(trade.id)" x-bind:disabled="is_processing">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-5 inline-block" :class="{'animate-spin':is_processing}">
                                            <path fill-rule="evenodd" d="M13.836 2.477a.75.75 0 0 1 .75.75v3.182a.75.75 0 0 1-.75.75h-3.182a.75.75 0 0 1 0-1.5h1.37l-.84-.841a4.5 4.5 0 0 0-7.08.932.75.75 0 0 1-1.3-.75 6 6 0 0 1 9.44-1.242l.842.84V3.227a.75.75 0 0 1 .75-.75Zm-.911 7.5A.75.75 0 0 1 13.199 11a6 6 0 0 1-9.44 1.241l-.84-.84v1.371a.75.75 0 0 1-1.5 0V9.591a.75.75 0 0 1 .75-.75H5.35a.75.75 0 0 1 0 1.5H3.98l.841.841a4.5 4.5 0 0 0 7.08-.932.75.75 0 0 1 1.025-.273Z" clip-rule="evenodd" />
                                        </svg>
        </button>
                                </div>
                                <div>
                                    <button type="button"
                    class="rounded bg-red-900 border border-red-700/40 px-2 py-1 text-sm font-semibold text-white shadow-sm hover:bg-red-900/70 inline-block disabled:opacity-40" x-bind:disabled="is_processing" x-on:click="$dispatch('cancel-trade', trade)">
        Cancel
    </button>
                                        <template x-if="trade?.offers?.you?.has_accepted === false">
                                        <button type="button" 
                 
                class="rounded bg-white/5 border border-gray-700/40 px-2 py-1 text-sm font-semibold text-white shadow-sm hover:bg-white/10 inline-block disabled:opacity-40" x-bind:disabled="is_processing" x-on:click="$dispatch('accept-trade', trade)">
            Accept
        </button>
                                    </template>
                                    <template x-if="trade?.offers?.you?.has_accepted === true">
                                        <button type="button" 
                 
                class="rounded bg-white/5 border border-gray-700/40 px-2 py-1 text-sm font-semibold text-white shadow-sm hover:bg-white/10 inline-block disabled:opacity-40" x-bind:disabled="is_processing" x-on:click="unacceptTrade(trade.id)">
            Unaccept
        </button>
                                    </template>
                                </div>
                            </div>
                        </div>
                    </template>
                </div>
                <template x-if="trade?.status !== 'PENDING'">
                    <div>
                        <template x-if="trade.status === 'PROCESSED'">
                            <div>
    <div class="relative">
        <div class="absolute inset-0 flex items-center" aria-hidden="true">
            <div class="w-full border-t border-gray-700/40"></div>
        </div>
        <div class="relative flex justify-center">
            <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-900">Processed</span>
        </div>
    </div>
</div>
                        </template>
                        <template x-if="trade.status === 'CANCELLED'">
                            <div>
    <div class="relative">
        <div class="absolute inset-0 flex items-center" aria-hidden="true">
            <div class="w-full border-t border-gray-700/40"></div>
        </div>
        <div class="relative flex justify-center">
            <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-900">Cancelled</span>
        </div>
    </div>
</div>
                        </template>
                        <div class="my-4">
                            <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60" x-text="trade.updated_at">
    
</span>                        </div>
                    </div>
                </template> 
            </div>
        </template>
        <template x-if="trade=== null && is_processing === true">
            <div class="mx-4 my-6">
                <svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
</svg>            </div>
        </template>
                                    </div>
                                </template>
                            </div>
                        </div>
                        
                        <div x-show="show_fade"
                             x-transition:enter="transition ease-out"
                             x-transition:enter-start="opacity-0"
                             x-transition:enter-end="opacity-100"
                             x-transition:leave="transition ease-in"
                             x-transition:leave-start="opacity-100"
                             x-transition:leave-end="opacity-0"
                             :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }"
                             class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-900 to-transparent pointer-events-none z-10"></div>
                    </div>
                </div>
            </div>

            </div>


<div x-on:cancel-trade.window="$dispatch('open-modal', 'cancel-trade');trade=$event.detail;" x-data="cancel_trade">
    <div
                x-data="modal('cancel-trade', false, null, )"
                x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'cancel-trade') })"
                x-on:open-modal.window="$event.detail == 'cancel-trade' ? show = true : null"
                x-on:close-modal.window="$event.detail == 'cancel-trade' ? show = false : null"
                x-on:close.stop="show = false"
                x-on:keydown.escape.window="show = false"
                x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()"
                x-on:keydown.shift.tab.prevent="prevFocusable().focus()"
                x-show="show"
                class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50"
                x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                style="display: none;">
                <div class="flex min-h-full  justify-center md:p-4 text-center items-center sm:p-0">
                    <div
                        x-show="show"
                        class="fixed inset-0 transform transition-all"
                         x-on:click="show = false"                         x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms>
                        <div class="absolute inset-0 bg-immo opacity-70"></div>
                    </div>
                    <div
                        x-show="show"
                        class="md:mb-6  bg-gray-800  border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-sm sm:mx-8 md:mx-auto relative max-h-[90vh]"
                        x-transition:enter.duration.300ms x-transition:leave.duration.200ms>
                                                                                    <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2"
                                        x-on:click="$dispatch('close-modal', 'cancel-trade');"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                                    </svg>
                                </button>
                                                                            <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]"
                             x-ref="scrollContainer"
                             x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                             @scroll="handleScroll()">
                            <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible">
                                <template x-if="content_visible">
                                    
                                    <div x-data="{show:false}" x-init="$nextTick(() => show = true)">
                                        <div>
            <div class="border-b border-white/5  bg-grayNoBackdrop ">
    <div class="py-3 px-3 text-left flex items-center">
                    <svg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke-width='1.5' stroke='currentColor' class='w-5 h-5 text-gray-600'>
                                            <path stroke-linecap='round' stroke-linejoin='round' d='M7.5 21 3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5'/>
                                        </svg>
                                    <div class="text-sm font-semibold text-gray-200 ml-2">
                Cancel Trade
            </div>
            </div>
</div>
            <div class="mx-4 my-4 text-sm text-left">
                <h2 class="text-gray-400 font-medium">Are you sure that you want to cancel this trade?</h2>
                
                <div 
    x-data="{show: true }"
    class="rounded-lg mt-2 bg-grayNoBackdrop border border-gray-700/40 shadow-sm py-3 px-6 relative text-gray-200"
    x-cloak 
    x-show="show"
        
>
        <div class="absolute top-0 left-0 -mt-2 -ml-2">
        <svg class="h-6 w-6 text-gray-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
        </svg>
    </div>
        <div>
      <div class="md:flex md:justify-between">
        <div class="text-sm w-full">
          <strong>Please note:</strong> This will end the trade.
        </div>
      </div>
    </div>
    </div>
            </div>
            <div class="bg-grayNoBackdrop border-t border-gray-700/40 px-4 py-3 ">
                <button type="button" 
                 
                class="rounded bg-white/5 border border-gray-700/40 px-2 py-1 text-sm font-semibold text-white shadow-sm hover:bg-white/10 inline-block" x-on:click="$dispatch('close-modal', 'cancel-trade');">
            Close
        </button>
                <button type="button"
                    class="rounded bg-red-900 border border-red-700/40 px-2 py-1 text-sm font-semibold text-white shadow-sm hover:bg-red-900/70 inline-block" x-on:click="cancelTrade(trade.id)">
        Yes, cancel it
    </button>
                </div>
        </div>
                                    </div>
                                </template>
                            </div>
                        </div>
                        
                        <div x-show="show_fade"
                             x-transition:enter="transition ease-out"
                             x-transition:enter-start="opacity-0"
                             x-transition:enter-end="opacity-100"
                             x-transition:leave="transition ease-in"
                             x-transition:leave-start="opacity-100"
                             x-transition:leave-end="opacity-0"
                             :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }"
                             class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div>
                    </div>
                </div>
            </div>

            </div>
<div x-on:accept-trade.window="$dispatch('open-modal', 'accept-trade');trade=$event.detail;" x-data="accept_trade">
    <div
                x-data="modal('accept-trade', false, null, )"
                x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'accept-trade') })"
                x-on:open-modal.window="$event.detail == 'accept-trade' ? show = true : null"
                x-on:close-modal.window="$event.detail == 'accept-trade' ? show = false : null"
                x-on:close.stop="show = false"
                x-on:keydown.escape.window="show = false"
                x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()"
                x-on:keydown.shift.tab.prevent="prevFocusable().focus()"
                x-show="show"
                class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50"
                x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                style="display: none;">
                <div class="flex min-h-full  justify-center md:p-4 text-center items-center sm:p-0">
                    <div
                        x-show="show"
                        class="fixed inset-0 transform transition-all"
                         x-on:click="show = false"                         x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms>
                        <div class="absolute inset-0 bg-immo opacity-70"></div>
                    </div>
                    <div
                        x-show="show"
                        class="md:mb-6  bg-gray-900  border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-sm sm:mx-8 md:mx-auto relative max-h-[90vh]"
                        x-transition:enter.duration.300ms x-transition:leave.duration.200ms>
                                                                                    <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-800 border border-gray-700/40 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2.5 mr-2"
                                        x-on:click="$dispatch('close-modal', 'accept-trade');"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="size-3 font-bold">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                                    </svg>
                                </button>
                                                                            <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]"
                             x-ref="scrollContainer"
                             x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                             @scroll="handleScroll()">
                            <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible">
                                <template x-if="content_visible">
                                    
                                    <div x-data="{show:false}" x-init="$nextTick(() => show = true)">
                                        <template x-if="trade !== null">
            <div>
                <div class="border-b border-white/5  bg-grayNoBackdrop ">
    <div class="py-3 px-3 text-left flex items-center">
                    <svg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke-width='1.5' stroke='currentColor' class='w-5 h-5 text-gray-600'>
                                            <path stroke-linecap='round' stroke-linejoin='round' d='M7.5 21 3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5'/>
                                        </svg>
                                    <div class="text-sm font-semibold text-gray-200 ml-2">
                Overview
            </div>
            </div>
</div>
                <div class="mx-4 my-4 text-sm">
                    <h2 class="text-gray-400 font-medium">Are you sure that you want to accept this trade?</h2>
                </div>
                <div>
    <div class="relative">
        <div class="absolute inset-0 flex items-center" aria-hidden="true">
            <div class="w-full border-t border-gray-700/40"></div>
        </div>
        <div class="relative flex justify-center">
            <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-900">You will receive</span>
        </div>
    </div>
</div>
                <div class="px-4 py-2 text-left">
                    <template x-if="trade.offers.them.items.length <= 0 && trade.offers.them.gold.amount <= 0 && (!trade.offers.them.pets || trade.offers.them.pets.length <= 0)">
                        <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-200 bg-red-500/60">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4 text-red-400 inline-flex mr-1">
                                <path fill-rule="evenodd" d="M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0ZM9 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM6.75 8a.75.75 0 0 0 0 1.5h.75v1.75a.75.75 0 0 0 1.5 0v-2.5A.75.75 0 0 0 8.25 8h-1.5Z" clip-rule="evenodd" />
                            </svg>
                            Nothing has been added
</span>
                    </template>
                    <ul class="text-sm text-gray-400 text-left">
                        <template x-for="trade_item in trade.offers.them.items" hidden>
                            <li class="font-medium"><img :src="trade_item.image_url" class="h-4 w-4 inline-block"> x<span x-text="trade_item.quantity" class='font-bold'></span> <span x-html="trade_item.formatted_name"></span></li>
                        </template>
                        <template x-for="trade_pet in trade.offers.them.pets ?? []" hidden>
                            <li class="font-medium">
                                <span :class="'quality:'+trade_pet.quality+':text'" x-text="trade_pet.original_name"></span>
                                <template x-if="trade_pet.custom_name">
                                    <span class="text-gray-500">(Renamed to: <span x-text='trade_pet.custom_name'></span>)</span>
                                </template>
                                <span class="text-gray-500">(Lv. <span x-text="trade_pet.level"></span><template x-if="trade_pet.evolution_state > 0">, Evo. <span x-text="trade_pet.evolution_state"></span></template>)</span>
                            </li>
                        </template>
                        <template x-if="trade.offers.them.gold.amount">
                            <li class="font-medium quality:standard:text"> <img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/gold_coin.png' class='h-4 w-4 inline-block'> <span><span x-text='trade.offers.them.gold.amount' class='font-bold'></span> Gold</span></li>
                        </template>
                    </ul>
                    <div class="flex justify-start mt-2">
                        <div class="inline-flex items-center text-sm leading-5 text-gray-400 justify-center">
                            <div class="hidden min-[300px]:inline-flex items-center text-xs text-gray-300 font-semibold rounded-md bg-gray-700 px-2  py-1 whitespace-nowrap min-[300px]:rounded-r-none truncate">
                                <div class="truncate">
                                    <span class="truncate">Total Value</span>
                                </div>
                            </div>
                            <div class="inline-flex items-center text-xs text-gray-400 font-semibold rounded-md min-[300px]:rounded-l-none bg-gray-700/60 px-2 py-1 whitespace-nowrap">
                                <div>
                                    <img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/gold_coin.png' class='h-4 w-4 inline-block'> <span x-text="trade.offers.them.value ?? 0"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
    <div class="relative">
        <div class="absolute inset-0 flex items-center" aria-hidden="true">
            <div class="w-full border-t border-gray-700/40"></div>
        </div>
        <div class="relative flex justify-center">
            <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-900">You will give</span>
        </div>
    </div>
</div>
                <div class="px-4 py-2 text-left">
                    <template x-if="trade.offers.you.items.length <= 0 && trade.offers.you.gold.amount <= 0 && (!trade.offers.you.pets || trade.offers.you.pets.length <= 0)">
                        <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-200 bg-red-500/60">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4 text-red-400 inline-flex mr-1">
                                <path fill-rule="evenodd" d="M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0ZM9 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM6.75 8a.75.75 0 0 0 0 1.5h.75v1.75a.75.75 0 0 0 1.5 0v-2.5A.75.75 0 0 0 8.25 8h-1.5Z" clip-rule="evenodd" />
                            </svg>
                            Nothing has been added
</span>
                    </template>
                    <ul class="text-sm text-gray-400 text-left">
                        <template x-for="trade_item in trade.offers.you.items" hidden>
                            <li class="font-medium">x<span x-text="trade_item.quantity" class='font-bold'></span> <span x-html="trade_item.formatted_name"></span></li>
                        </template>
                        <template x-for="trade_pet in trade.offers.you.pets ?? []" hidden>
                            <li class="font-medium">
                                <span :class="'quality:'+trade_pet.quality+':text'" x-text="trade_pet.original_name"></span>
                                <template x-if="trade_pet.custom_name">
                                    <span class="text-gray-500">(Renamed to: <span x-text='trade_pet.custom_name'></span>)</span>
                                </template>
                                <span class="text-gray-500">(Lv. <span x-text="trade_pet.level"></span><template x-if="trade_pet.evolution_state > 0">, Evo. <span x-text="trade_pet.evolution_state"></span></template>)</span>
                            </li>
                        </template>
                        <template x-if="trade.offers.you.gold.amount">
                            <li class="font-medium quality:standard:text"> <img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/gold_coin.png' class='h-4 w-4 inline-block'> <span><span x-text='trade.offers.you.gold.amount' class='font-bold'></span> Gold</span></li>
                        </template>
                    </ul>
                    <div class="flex justify-start mt-2">
                        <div class="inline-flex items-center text-sm leading-5 text-gray-400 justify-center">
                            <div class="hidden min-[300px]:inline-flex items-center text-xs text-gray-300 font-semibold rounded-md bg-gray-700 px-2  py-1 whitespace-nowrap min-[300px]:rounded-r-none truncate">
                                <div class="truncate">
                                    <span class="truncate">Total Value</span>
                                </div>
                            </div>
                            <div class="inline-flex items-center text-xs text-gray-400 font-semibold rounded-md min-[300px]:rounded-l-none bg-gray-700/60 px-2 py-1 whitespace-nowrap">
                                <div>
                                    <img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/gold_coin.png' class='h-4 w-4 inline-block'> <span x-text="trade.offers.you.value ?? 0"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
    <div class="relative">
        <div class="absolute inset-0 flex items-center" aria-hidden="true">
            <div class="w-full border-t border-gray-700/40"></div>
        </div>
        <div class="relative flex justify-center">
            <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-900">Fee</span>
        </div>
    </div>
</div>
                <div class="px-4 py-2">
                    <ul class="text-sm text-gray-400 text-left">
                        <li class="font-medium quality:standard:text"> <img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/gold_coin.png' class='h-4 w-4 inline-block'> <span><span x-text='trade.offers.you.cost' class='font-bold'></span> Gold</span></li>
                    </ul>
                </div>
                <template x-if="trade.offers.you.gold.amount">
                    <div>
                        <div>
    <div class="relative">
        <div class="absolute inset-0 flex items-center" aria-hidden="true">
        <div class="w-full border-t border-gray-700"></div>
        </div>
        <div class="relative flex justify-center">
        <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">Total Gold Required</span>
        </div>
    </div>
</div>                        <div class="px-4 py-2" x-data="{
                            totalGoldRequired(){
                                let fee = trade.offers.you.cost.replace(',','');
                                let gold = trade.offers.you.gold.amount.replace(',','');
                                
                                return number_format(parseInt(fee) + parseInt(gold));
                            },
                        }">
                            <span class="text-gray-400 text-xs">You will need a total of <img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/gold_coin.png' class='h-4 w-4 inline-block'> <strong><span x-text='totalGoldRequired()'></span></strong> gold to complete this trade.</span>
                        </div>
                    </div>
                </template>
                <div class="bg-grayNoBackdrop  px-4 py-3 ">
                    <button type="button" 
                 
                class="rounded bg-white/5 border border-gray-700/40 px-2 py-1 text-sm font-semibold text-white shadow-sm hover:bg-white/10 inline-block" x-on:click="$dispatch('close-modal', 'accept-trade');">
            Close
        </button>
                    <button type="button"
                    class="rounded bg-green-900 border border-green-700/40 px-2 py-1 text-sm font-semibold text-white shadow-sm hover:bg-green-900/70 inline-block disabled:opacity-40" x-on:click="acceptTrade(trade.id)" x-bind:disabled="is_processing">
        Yes, I accept
    </button>
                    </div>
            </div>
        </template>
                                    </div>
                                </template>
                            </div>
                        </div>
                        
                        <div x-show="show_fade"
                             x-transition:enter="transition ease-out"
                             x-transition:enter-start="opacity-0"
                             x-transition:enter-end="opacity-100"
                             x-transition:leave="transition ease-in"
                             x-transition:leave-start="opacity-100"
                             x-transition:leave-end="opacity-0"
                             :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }"
                             class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-900 to-transparent pointer-events-none z-10"></div>
                    </div>
                </div>
            </div>

            </div>
<div x-on:add-item-to-trade.window="$dispatch('open-modal', 'add-item-to-trade');trade=$event.detail;getInventory();" x-data="add_item_to_trade">
    <div
                x-data="modal('add-item-to-trade', false, null, )"
                x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'add-item-to-trade') })"
                x-on:open-modal.window="$event.detail == 'add-item-to-trade' ? show = true : null"
                x-on:close-modal.window="$event.detail == 'add-item-to-trade' ? show = false : null"
                x-on:close.stop="show = false"
                x-on:keydown.escape.window="show = false"
                x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()"
                x-on:keydown.shift.tab.prevent="prevFocusable().focus()"
                x-show="show"
                class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50"
                x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                style="display: none;">
                <div class="flex min-h-full  justify-center md:p-4 text-center items-center sm:p-0">
                    <div
                        x-show="show"
                        class="fixed inset-0 transform transition-all"
                         x-on:click="show = false"                         x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms>
                        <div class="absolute inset-0 bg-immo opacity-70"></div>
                    </div>
                    <div
                        x-show="show"
                        class="md:mb-6  bg-gray-900  border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-lg sm:mx-8 md:mx-auto relative max-h-[90vh]"
                        x-transition:enter.duration.300ms x-transition:leave.duration.200ms>
                                                                                    <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-800 border border-gray-700/40 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2.5 mr-2"
                                        x-on:click="$dispatch('close-modal', 'add-item-to-trade');"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="size-3 font-bold">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                                    </svg>
                                </button>
                                                                            <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]"
                             x-ref="scrollContainer"
                             x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                             @scroll="handleScroll()">
                            <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible">
                                <template x-if="content_visible">
                                    
                                    <div x-data="{show:false}" x-init="$nextTick(() => show = true)">
                                        <div>
            <div class="border-b border-white/5  bg-grayNoBackdrop ">
    <div class="py-3 px-3 text-left flex items-center">
                    <svg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke-width='1.5' stroke='currentColor' class='w-5 h-5 text-gray-600'>
                                            <path stroke-linecap='round' stroke-linejoin='round' d='M7.5 21 3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5'/>
                                        </svg>
                                    <div class="text-sm font-semibold text-gray-200 ml-2">
                Add Item
            </div>
            </div>
</div>
            <div class="mx-4 my-4 text-sm">
                <div class="flex gap-2 mx-4 justify-center flex-wrap my-4">
                    <template x-if="inventory_items !== null && inventory_items.length">
                        <template x-for="item in inventory_items">
                            <button type="button"
                                    :class="{
                                                ['quality:'+item.quality+':background'] : true,
                                                ['quality:'+item.quality+':border'] : true,
                                            }"
                                    x-on:contextMenu.prevent
                                    class="rounded-lg bg-gray-900/40 text-center py-2 px-3 relative border h-16 select-none"
                                    x-tooltip.cursor.html="'<div class=\'text-center\'><span class=\'font-bold\'>'+item.name+'</span><br/>Level '+item.level+'</div>'"
                                    x-on:click="selected_inventory_item = item; $dispatch('open-modal', 'input-item-quantity-for-trade');"
                            >
                                <template x-if="item.tier && item.upgrade_requirements">
                                    <div class="absolute bottom-0 right-0 -mt-1 mr-0.5">
                                                    <span class="inline-flex items-center gap-x-1.5 rounded-md px-2 py-1 text-xs font-bold text-gray-200 bg-gray-900/90" x-text="'T'+item.tier">
                                                    </span>
                                    </div>
                                </template>
                                <div class="absolute top-0 left-0 h-full w-full bg-gray-900/40 rounded-md opacity-0 hover:opacity-100 transition-opacity">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"  class="size-6 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                                    </svg>
                                </div>
                                <div class="absolute top-0 left-0 -mt-2 -ml-2 " >
                                    <span class="inline-flex items-center px-2 py-1 text-xs font-medium text-gray-400 bg-gray-900 rounded-md ring-1 ring-inset ring-gray-400/20"><span x-text="item.quantity"></span>x</span>
                                </div>
                                <img :src="item.image_url" class="inline-block w-12 h-12">
                            </button>
                        </template>
                    </template>
                </div>
                <template x-if="inventory_items === null || inventory_items !== null && inventory_items.length <= 0">
                    <svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
</svg>  
                </template>
            </div>
            <div class="bg-grayNoBackdrop  px-4 py-3 ">
                <button type="button" 
                 
                class="rounded bg-white/5 border border-gray-700/40 px-2 py-1 text-sm font-semibold text-white shadow-sm hover:bg-white/10 inline-block" x-on:click="$dispatch('close-modal', 'add-item-to-trade');">
            Close
        </button>
            </div>
        </div>
                                    </div>
                                </template>
                            </div>
                        </div>
                        
                        <div x-show="show_fade"
                             x-transition:enter="transition ease-out"
                             x-transition:enter-start="opacity-0"
                             x-transition:enter-end="opacity-100"
                             x-transition:leave="transition ease-in"
                             x-transition:leave-start="opacity-100"
                             x-transition:leave-end="opacity-0"
                             :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }"
                             class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-900 to-transparent pointer-events-none z-10"></div>
                    </div>
                </div>
            </div>

                
    <div
                x-data="modal('input-item-quantity-for-trade', false, null, )"
                x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'input-item-quantity-for-trade') })"
                x-on:open-modal.window="$event.detail == 'input-item-quantity-for-trade' ? show = true : null"
                x-on:close-modal.window="$event.detail == 'input-item-quantity-for-trade' ? show = false : null"
                x-on:close.stop="show = false"
                x-on:keydown.escape.window="show = false"
                x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()"
                x-on:keydown.shift.tab.prevent="prevFocusable().focus()"
                x-show="show"
                class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50"
                x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                style="display: none;">
                <div class="flex min-h-full  justify-center md:p-4 text-center items-center sm:p-0">
                    <div
                        x-show="show"
                        class="fixed inset-0 transform transition-all"
                         x-on:click="show = false"                         x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms>
                        <div class="absolute inset-0 bg-immo opacity-70"></div>
                    </div>
                    <div
                        x-show="show"
                        class="md:mb-6  bg-gray-900  border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-xs sm:mx-8 md:mx-auto relative max-h-[90vh]"
                        x-transition:enter.duration.300ms x-transition:leave.duration.200ms>
                                                                                    <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-800 border border-gray-700/40 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2.5 mr-2"
                                        x-on:click="$dispatch('close-modal', 'input-item-quantity-for-trade');"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="size-3 font-bold">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                                    </svg>
                                </button>
                                                                            <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]"
                             x-ref="scrollContainer"
                             x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                             @scroll="handleScroll()">
                            <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible">
                                <template x-if="content_visible">
                                    
                                    <div x-data="{show:false}" x-init="$nextTick(() => show = true)">
                                        <template x-if="selected_inventory_item !== null">
            <div x-init="$watch('show', (val) => { if(val) quantity = 1; });">
                <div class="border-b border-white/5  bg-grayNoBackdrop ">
    <div class="py-3 px-3 text-left flex items-center">
                    <svg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke-width='1.5' stroke='currentColor' class='w-5 h-5 text-gray-600'>
                                            <path stroke-linecap='round' stroke-linejoin='round' d='M7.5 21 3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5'/>
                                        </svg>
                                    <div class="text-sm font-semibold text-gray-200 ml-2">
                Add Item
            </div>
            </div>
</div>
                <div class="mt-8">
                    <img :src="selected_inventory_item.image_url" class="mx-auto w-24 h-24">
                    <div>
                        <h3 class="my-2 text-sm font-bold" x-html="selected_inventory_item.formatted_name"></h3>
                    </div>
                </div>
                <div class="flex flex-row items-center justify-center gap-2 mt-2">

                    
                    <template x-if="selected_inventory_item.stats">
                        <div>
                            <template x-for="(stat, key) in (selected_inventory_item ? selected_inventory_item.stats : [])">
                                <span class="inline-flex items-center rounded-md bg-gray-400/10 px-2 py-1 text-xs font-medium text-gray-400 border border-gray-400/20">
    <svg :class="stat.comparison.colour" class="h-1.5 w-1.5" viewBox="0 0 6 6" aria-hidden="true">
                                        <circle cx="3" cy="3" r="3" />
                                    </svg>
                                    <span x-text="stat.text"></span>
</span>
                            </template>
                        </div>
                    </template>

                    
                    <template x-if="selected_inventory_item && selected_inventory_item.effects">
                        <div>
                            <template x-for="(effect, key) in (selected_inventory_item ? selected_inventory_item.effects : [])">
                                <span class="inline-flex items-center rounded-md bg-gray-400/10 px-2 py-1 text-xs font-medium text-gray-400 border border-gray-400/20">
    <svg :class="effect.comparison.colour" class="h-1.5 w-1.5" viewBox="0 0 6 6" aria-hidden="true">
                                    <circle cx="3" cy="3" r="3" />
                                    </svg>
                                    <span x-text="effect.text"></span>
</span>
                            </template>
                        </div>
                    </template>

                    
                    <template x-if="selected_inventory_item.meta_data?.health">
                        <span class="inline-flex items-center rounded-md bg-gray-400/10 px-2 py-1 text-xs font-medium text-gray-400 border border-gray-400/20">
    <svg  class="h-1.5 w-1.5 comparison-higher" viewBox="0 0 6 6" aria-hidden="true">
                                    <circle cx="3" cy="3" r="3" />
                                    </svg>
                                    +<span x-text="selected_inventory_item.meta_data?.health" class="-ml-1.5"></span> Health
</span>
                    </template>
                </div>
                <div class="mt-4">
                    <form
                        x-on:submit.prevent="addItem(trade.id, selected_inventory_item.item_id, selected_inventory_item.tier, quantity);">
                        <input type="hidden" name="_token" value="XyMoBec0vexU3Uc6FRmgCq1T9viaXxZJLP7cxHcI" autocomplete="off">                        <div class="mt-4">
                            <div class="flex mt-2 rounded-md shadow-sm mx-4">
                                <div class="relative flex items-stretch flex-grow focus-within:z-10">
                                    <input type="number" name="quantity" x-on:keyup="checkQuantity();"
                                           x-on:change="checkQuantity()" x-model="quantity" id="quantity"
                                           class="bg-gray-800/40 block w-full rounded-none rounded-l-md border-gray-700/40 py-1.5 text-gray-100  placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
                                           placeholder="0">
                                </div>
                                <button type="button"
                                        x-on:click="quantity = selected_inventory_item.quantity; checkQuantity();"
                                        class="relative -ml-px inline-flex items-center gap-x-1.5 px-3 py-2 text-sm font-semibold text-gray-100 bg-gray-700/40 hover:bg-gray-700/60">
                                    Max
                                </button>
                                <button type="button" x-on:click="quantity--;checkQuantity();"
                                        class="relative -ml-px inline-flex items-center border-l border-gray-700/40 gap-x-1.5 px-3 py-2 text-sm font-semibold text-gray-100 bg-gray-700/40 hover:bg-gray-700/60">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                         stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                              d="M19.5 12h-15"></path>
                                    </svg>
                                </button>
                                <button type="button" x-on:click="quantity++;checkQuantity();"
                                        class="relative -ml-px inline-flex items-center gap-x-1.5 border-l border-gray-700/40 rounded-r-md px-3 py-2 text-sm font-semibold text-gray-100 bg-gray-700/40 hover:bg-gray-700/60">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                         stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                              d="M12 4.5v15m7.5-7.5h-15"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="text-center bg-grayNoBackdrop py-2 mt-4">
                            <a :href="selected_inventory_item.routes.inspect">
                                <button type="button" 
                 
                class="rounded bg-white/5 border border-gray-700/40 px-2 py-1 text-sm font-semibold text-white shadow-sm hover:bg-white/10 inline-block" type="button">
            Inspect
        </button>
                            </a>
                            <button type="submit"

                    class="inline-block rounded px-2 py-1 font-bold  text-sm border border-indigo-700/40 bg-indigoNoBackdrop hover:bg-indigo-700/40" type="submit" x-bind:class="{'opacity-40' : quantity <= 0, 'opacity-40' : is_processing}" x-bind:diabled="quantity || is_processing">
        Add
    </button>
                            </div>
                    </form>    
                </div>
            </div>
        </template>
                                    </div>
                                </template>
                            </div>
                        </div>
                        
                        <div x-show="show_fade"
                             x-transition:enter="transition ease-out"
                             x-transition:enter-start="opacity-0"
                             x-transition:enter-end="opacity-100"
                             x-transition:leave="transition ease-in"
                             x-transition:leave-start="opacity-100"
                             x-transition:leave-end="opacity-0"
                             :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }"
                             class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-900 to-transparent pointer-events-none z-10"></div>
                    </div>
                </div>
            </div>

            </div>
<div x-on:remove-item-from-trade.window="$dispatch('open-modal', 'remove-item-from-trade');trade=$event.detail.trade;selected_item=$event.detail.trade_item;quantity=1;" x-data="remove_item_from_trade">
    <div
                x-data="modal('remove-item-from-trade', false, null, )"
                x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'remove-item-from-trade') })"
                x-on:open-modal.window="$event.detail == 'remove-item-from-trade' ? show = true : null"
                x-on:close-modal.window="$event.detail == 'remove-item-from-trade' ? show = false : null"
                x-on:close.stop="show = false"
                x-on:keydown.escape.window="show = false"
                x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()"
                x-on:keydown.shift.tab.prevent="prevFocusable().focus()"
                x-show="show"
                class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50"
                x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                style="display: none;">
                <div class="flex min-h-full  justify-center md:p-4 text-center items-center sm:p-0">
                    <div
                        x-show="show"
                        class="fixed inset-0 transform transition-all"
                         x-on:click="show = false"                         x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms>
                        <div class="absolute inset-0 bg-immo opacity-70"></div>
                    </div>
                    <div
                        x-show="show"
                        class="md:mb-6  bg-gray-900  border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-sm sm:mx-8 md:mx-auto relative max-h-[90vh]"
                        x-transition:enter.duration.300ms x-transition:leave.duration.200ms>
                                                                                    <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-800 border border-gray-700/40 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2.5 mr-2"
                                        x-on:click="$dispatch('close-modal', 'remove-item-from-trade');"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="size-3 font-bold">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                                    </svg>
                                </button>
                                                                            <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]"
                             x-ref="scrollContainer"
                             x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                             @scroll="handleScroll()">
                            <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible">
                                <template x-if="content_visible">
                                    
                                    <div x-data="{show:false}" x-init="$nextTick(() => show = true)">
                                        <template x-if="selected_item">
        <div>
            <div class="border-b border-white/5  bg-grayNoBackdrop ">
    <div class="py-3 px-3 text-left flex items-center">
                    <svg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke-width='1.5' stroke='currentColor' class='w-5 h-5 text-gray-600'>
                                            <path stroke-linecap='round' stroke-linejoin='round' d='M7.5 21 3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5'/>
                                        </svg>
                                    <div class="text-sm font-semibold text-gray-200 ml-2">
                Remove Item
            </div>
            </div>
</div>
            <div class="mt-8">
                <img :src="selected_item.image_url" class="mx-auto w-24 h-24">
                <div>
                    <h3 class="my-2 text-sm font-bold" x-html="selected_item.formatted_name"></h3>
                </div>
            </div>
            <template x-if="selected_item.stats.length || selected_item.effects.length || selected_item.meta_data.health.length">
                <div class="flex flex-row items-center justify-center gap-2 mt-2">
    
                    
                    <template x-if="selected_item && selected_item.stats.length">
                        <div>
                            <template x-for="(stat, key) in (selected_item ? selected_item.stats : [])">
                                    <span class="inline-flex items-center gap-x-1.5 rounded-md px-2 py-1 text-xs font-medium text-white bg-gray-900/60">
                                        <svg :class="stat.comparison.colour" class="h-1.5 w-1.5" viewBox="0 0 6 6" aria-hidden="true">
                                        <circle cx="3" cy="3" r="3" />
                                        </svg>
                                        <span x-text="stat.text"></span>
                                    </span>
                            </template>
                        </div>
                    </template>
    
                    
                    <template x-if="selected_item && selected_item.effects.length">
                        <div>
                            <template x-for="(effect, key) in (selected_item ? selected_item.effects : [])">
                                    <span class="inline-flex items-center gap-x-1.5 rounded-md px-2 py-1 text-xs font-medium text-white bg-gray-900/60">
                                        <svg :class="effect.comparison.colour" class="h-1.5 w-1.5" viewBox="0 0 6 6" aria-hidden="true">
                                        <circle cx="3" cy="3" r="3" />
                                        </svg>
                                        <span x-text="effect.text"></span>
                                    </span>
                            </template>
                        </div>
                    </template>
    
                    
                    <template x-if="selected_item.meta_data?.health.length">
                                    <span class="inline-flex items-center gap-x-1.5 rounded-md px-2 py-1 text-xs font-medium text-white bg-gray-900/60">
                                        <svg  class="h-1.5 w-1.5 comparison-higher" viewBox="0 0 6 6" aria-hidden="true">
                                        <circle cx="3" cy="3" r="3" />
                                        </svg>
                                        +<span x-text="selected_item.meta_data?.health" class="-ml-1.5"></span> Health
                                    </span>
                    </template>
                </div>
            </template>
            <div class="text-sm">
                <form
                    x-on:submit.prevent="removeItem(trade.id, selected_item.id, quantity, selected_item.tier);">
                    <input type="hidden" name="_token" value="XyMoBec0vexU3Uc6FRmgCq1T9viaXxZJLP7cxHcI" autocomplete="off">                    <div class="mt-4">
                        <div>
    <div class="relative">
        <div class="absolute inset-0 flex items-center" aria-hidden="true">
            <div class="w-full border-t border-gray-700/40"></div>
        </div>
        <div class="relative flex justify-center">
            <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-900">How many to remove?</span>
        </div>
    </div>
</div>
                        <div class="flex mt-4 rounded-md shadow-sm mx-4 border border-gray-700/40">
                            <div class="relative flex items-stretch flex-grow focus-within:z-10">
                                <input type="number" name="quantity" x-on:keyup="checkQuantity();"
                                       x-on:change="checkQuantity()" x-model="quantity" id="quantity"
                                       class="bg-gray-800/40 block w-full rounded-none rounded-l-md border-0 py-1.5 text-gray-100  placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
                                       placeholder="0">
                            </div>
                            <button type="button"
                                    x-on:click="quantity = selected_item.quantity; checkQuantity();"
                                    class="relative -ml-px inline-flex items-center gap-x-1.5 px-3 py-2 text-sm font-semibold text-gray-100 bg-gray-700/40 hover:bg-gray-700/80">
                                All
                            </button>
                            <button type="button" x-on:click="quantity--;checkQuantity();"
                                    class="relative -ml-px inline-flex items-center border-l border-gray-800/30 gap-x-1.5 px-3 py-2 text-sm font-semibold text-gray-100 bg-gray-700/40 hover:bg-gray-700/80">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                     stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                          d="M19.5 12h-15"></path>
                                </svg>
                            </button>
                            <button type="button" x-on:click="quantity++;checkQuantity();"
                                    class="relative -ml-px inline-flex items-center gap-x-1.5 border-l border-gray-800/30 rounded-r-md px-3 py-2 text-sm font-semibold text-gray-100 bg-gray-700/40 hover:bg-gray-700/80">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                     stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                          d="M12 4.5v15m7.5-7.5h-15"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="text-center bg-grayNoBackdrop border-t border-gray-700/40 py-2 mt-4">
                        <button type="submit" 

                 
                class="inline-block rounded px-4 py-2 bg-gradient-to-b font-bold bg-indigo-600 hover:bg-indigo-500 text-sm" type="submit" x-bind:class="{'opacity-40' : quantity <= 0, 'opacity-40' : is_processing}" x-bind:diabled="quantity || is_processing">
            Remove
        </button>
                    </div>
                </form>
            </div>
        </div>
        </template>
                                    </div>
                                </template>
                            </div>
                        </div>
                        
                        <div x-show="show_fade"
                             x-transition:enter="transition ease-out"
                             x-transition:enter-start="opacity-0"
                             x-transition:enter-end="opacity-100"
                             x-transition:leave="transition ease-in"
                             x-transition:leave-start="opacity-100"
                             x-transition:leave-end="opacity-0"
                             :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }"
                             class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-900 to-transparent pointer-events-none z-10"></div>
                    </div>
                </div>
            </div>

            </div>
<div x-on:add-gold-to-trade.window="$dispatch('open-modal', 'add-gold-to-trade');trade=$event.detail;quantity=null;" x-data="add_gold_to_trade">
    <div
                x-data="modal('add-gold-to-trade', false, null, )"
                x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'add-gold-to-trade') })"
                x-on:open-modal.window="$event.detail == 'add-gold-to-trade' ? show = true : null"
                x-on:close-modal.window="$event.detail == 'add-gold-to-trade' ? show = false : null"
                x-on:close.stop="show = false"
                x-on:keydown.escape.window="show = false"
                x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()"
                x-on:keydown.shift.tab.prevent="prevFocusable().focus()"
                x-show="show"
                class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50"
                x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                style="display: none;">
                <div class="flex min-h-full  justify-center md:p-4 text-center items-center sm:p-0">
                    <div
                        x-show="show"
                        class="fixed inset-0 transform transition-all"
                         x-on:click="show = false"                         x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms>
                        <div class="absolute inset-0 bg-immo opacity-70"></div>
                    </div>
                    <div
                        x-show="show"
                        class="md:mb-6  bg-gray-900  border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-sm sm:mx-8 md:mx-auto relative max-h-[90vh]"
                        x-transition:enter.duration.300ms x-transition:leave.duration.200ms>
                                                                                    <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-800 border border-gray-700/40 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2.5 mr-2"
                                        x-on:click="$dispatch('close-modal', 'add-gold-to-trade');"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="size-3 font-bold">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                                    </svg>
                                </button>
                                                                            <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]"
                             x-ref="scrollContainer"
                             x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                             @scroll="handleScroll()">
                            <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible">
                                <template x-if="content_visible">
                                    
                                    <div x-data="{show:false}" x-init="$nextTick(() => show = true)">
                                        <div>
            <div class="border-b border-white/5  bg-grayNoBackdrop ">
    <div class="py-3 px-3 text-left flex items-center">
                    <svg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke-width='1.5' stroke='currentColor' class='w-5 h-5 text-gray-600'>
                                            <path stroke-linecap='round' stroke-linejoin='round' d='M7.5 21 3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5'/>
                                        </svg>
                                    <div class="text-sm font-semibold text-gray-200 ml-2">
                Gold
            </div>
            </div>
</div>
            <form
                x-on:submit.prevent="addGold(trade.id, parseInt(quantity));">
                <input type="hidden" name="_token" value="XyMoBec0vexU3Uc6FRmgCq1T9viaXxZJLP7cxHcI" autocomplete="off">                <div class="mt-4">
                    <div class="flex mt-2 rounded-md shadow-sm mx-4">
                        <div class="relative flex items-stretch flex-grow focus-within:z-10">
                            <input type="number" name="quantity" x-on:keyup="checkQuantity();"
                                   x-on:change="checkQuantity()" x-model="quantity" id="quantity"
                                   class="bg-gray-800/40 block w-full rounded-none rounded-l-md border-gray-700/40 py-1.5 text-gray-100  placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
                                   placeholder="Enter an amount here...">
                        </div>
                        <button type="button"
                                x-on:click="quantity = $store.current_character.gold; checkQuantity();"
                                class="relative -ml-px inline-flex items-center gap-x-1.5 px-3 py-2 text-sm font-semibold text-gray-100 bg-gray-700/40 hover:bg-gray-700/80">
                            Max
                        </button>
                        <button type="button" x-on:click="quantity--;checkQuantity();"
                                class="relative -ml-px inline-flex items-center border-l border-gray-800/30 gap-x-1.5 px-3 py-2 text-sm font-semibold text-gray-100 bg-gray-700/40 hover:bg-gray-700/80">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                 stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                      d="M19.5 12h-15"></path>
                            </svg>
                        </button>
                        <button type="button" x-on:click="quantity++;checkQuantity();"
                                class="relative -ml-px inline-flex items-center gap-x-1.5 border-l border-gray-800/30 rounded-r-md px-3 py-2 text-sm font-semibold text-gray-100 bg-gray-700/40 hover:bg-gray-700/80">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                 stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                      d="M12 4.5v15m7.5-7.5h-15"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="text-center bg-grayNoBackdrop py-2 mt-4">
                    <button type="button" 
                 
                class="rounded bg-white/5 border border-gray-700/40 px-2 py-1 text-sm font-semibold text-white shadow-sm hover:bg-white/10 inline-block" x-on:click="$dispatch('close-modal', 'add-gold-to-trade')">
            Close
        </button>
                    <button type="submit"

                    class="inline-block rounded px-2 py-1 font-bold  text-sm border border-indigo-700/40 bg-indigoNoBackdrop hover:bg-indigo-700/40" type="submit" x-bind:class="{'opacity-40' : quantity <= 0, 'opacity-40' : is_processing}" x-bind:diabled="quantity || is_processing">
        Add
    </button>
                    </div>
            </form>
        </div>
                                    </div>
                                </template>
                            </div>
                        </div>
                        
                        <div x-show="show_fade"
                             x-transition:enter="transition ease-out"
                             x-transition:enter-start="opacity-0"
                             x-transition:enter-end="opacity-100"
                             x-transition:leave="transition ease-in"
                             x-transition:leave-start="opacity-100"
                             x-transition:leave-end="opacity-0"
                             :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }"
                             class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-900 to-transparent pointer-events-none z-10"></div>
                    </div>
                </div>
            </div>

            </div>
<div x-on:remove-gold-from-trade.window="$dispatch('open-modal', 'remove-gold-from-trade');trade=$event.detail;quantity=null;" x-data="remove_gold_from_trade">
    <div
                x-data="modal('remove-gold-from-trade', false, null, )"
                x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'remove-gold-from-trade') })"
                x-on:open-modal.window="$event.detail == 'remove-gold-from-trade' ? show = true : null"
                x-on:close-modal.window="$event.detail == 'remove-gold-from-trade' ? show = false : null"
                x-on:close.stop="show = false"
                x-on:keydown.escape.window="show = false"
                x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()"
                x-on:keydown.shift.tab.prevent="prevFocusable().focus()"
                x-show="show"
                class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50"
                x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                style="display: none;">
                <div class="flex min-h-full  justify-center md:p-4 text-center items-center sm:p-0">
                    <div
                        x-show="show"
                        class="fixed inset-0 transform transition-all"
                         x-on:click="show = false"                         x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms>
                        <div class="absolute inset-0 bg-immo opacity-70"></div>
                    </div>
                    <div
                        x-show="show"
                        class="md:mb-6  bg-gray-900  border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-sm sm:mx-8 md:mx-auto relative max-h-[90vh]"
                        x-transition:enter.duration.300ms x-transition:leave.duration.200ms>
                                                                                    <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-800 border border-gray-700/40 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2.5 mr-2"
                                        x-on:click="$dispatch('close-modal', 'remove-gold-from-trade');"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="size-3 font-bold">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                                    </svg>
                                </button>
                                                                            <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]"
                             x-ref="scrollContainer"
                             x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                             @scroll="handleScroll()">
                            <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible">
                                <template x-if="content_visible">
                                    
                                    <div x-data="{show:false}" x-init="$nextTick(() => show = true)">
                                        <div>
            <div class="border-b border-white/5  bg-grayNoBackdrop ">
    <div class="py-3 px-3 text-left flex items-center">
                    <svg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke-width='1.5' stroke='currentColor' class='w-5 h-5 text-gray-600'>
                                            <path stroke-linecap='round' stroke-linejoin='round' d='M7.5 21 3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5'/>
                                        </svg>
                                    <div class="text-sm font-semibold text-gray-200 ml-2">
                Remove Gold
            </div>
            </div>
</div>
            <form
                x-on:submit.prevent="removeGold(trade.id, parseInt(quantity));">
                <input type="hidden" name="_token" value="XyMoBec0vexU3Uc6FRmgCq1T9viaXxZJLP7cxHcI" autocomplete="off">                <div class="mt-4">
                    <div class="flex mt-2 rounded-md shadow-sm mx-4 border border-gray-700/40">
                        <div class="relative flex items-stretch flex-grow focus-within:z-10">
                            <input type="number" name="quantity" x-on:keyup="checkQuantity();"
                                   x-on:change="checkQuantity()" x-model="quantity" id="quantity"
                                   class="bg-gray-800/40 block w-full rounded-none rounded-l-md border-0 py-1.5 text-gray-100  placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
                                   placeholder="Enter an amount here...">
                        </div>
                        <button type="button"
                                x-on:click="quantity = parseInt(trade.offers.you.gold.amount.replace(/,/g, '')); checkQuantity();"
                                class="relative -ml-px inline-flex items-center gap-x-1.5 px-3 py-2 text-sm font-semibold text-gray-100 bg-gray-700/40 hover:bg-gray-700/80">
                            Max
                        </button>
                        <button type="button" x-on:click="quantity--;checkQuantity();"
                                class="relative -ml-px inline-flex items-center border-l border-gray-800/30 gap-x-1.5 px-3 py-2 text-sm font-semibold text-gray-100 bg-gray-700/40 hover:bg-gray-700/80">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                 stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                      d="M19.5 12h-15"></path>
                            </svg>
                        </button>
                        <button type="button" x-on:click="quantity++;checkQuantity();"
                                class="relative -ml-px inline-flex items-center gap-x-1.5 border-l border-gray-800/30 rounded-r-md px-3 py-2 text-sm font-semibold text-gray-100 bg-gray-700/40 hover:bg-gray-700/80">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                 stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                      d="M12 4.5v15m7.5-7.5h-15"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="text-center bg-grayNoBackdrop py-2 mt-4">
                    <button type="submit"

                    class="inline-block rounded px-2 py-1 font-bold  text-sm border border-indigo-700/40 bg-indigoNoBackdrop hover:bg-indigo-700/40 disabled:opacity-40" type="submit" x-bind:disabled="!quantity || is_processing">
        Remove
    </button>
                    </div>
            </form>
        </div>
                                    </div>
                                </template>
                            </div>
                        </div>
                        
                        <div x-show="show_fade"
                             x-transition:enter="transition ease-out"
                             x-transition:enter-start="opacity-0"
                             x-transition:enter-end="opacity-100"
                             x-transition:leave="transition ease-in"
                             x-transition:leave-start="opacity-100"
                             x-transition:leave-end="opacity-0"
                             :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }"
                             class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-900 to-transparent pointer-events-none z-10"></div>
                    </div>
                </div>
            </div>

            </div>
<div x-on:add-pet-to-trade.window="$dispatch('open-modal', 'add-pet-to-trade');trade=$event.detail;getPets();" x-data="add_pet_to_trade">
    <div
                x-data="modal('add-pet-to-trade', false, null, )"
                x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'add-pet-to-trade') })"
                x-on:open-modal.window="$event.detail == 'add-pet-to-trade' ? show = true : null"
                x-on:close-modal.window="$event.detail == 'add-pet-to-trade' ? show = false : null"
                x-on:close.stop="show = false"
                x-on:keydown.escape.window="show = false"
                x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()"
                x-on:keydown.shift.tab.prevent="prevFocusable().focus()"
                x-show="show"
                class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50"
                x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                style="display: none;">
                <div class="flex min-h-full  justify-center md:p-4 text-center items-center sm:p-0">
                    <div
                        x-show="show"
                        class="fixed inset-0 transform transition-all"
                         x-on:click="show = false"                         x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms>
                        <div class="absolute inset-0 bg-immo opacity-70"></div>
                    </div>
                    <div
                        x-show="show"
                        class="md:mb-6  bg-gray-900  border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-lg sm:mx-8 md:mx-auto relative max-h-[90vh]"
                        x-transition:enter.duration.300ms x-transition:leave.duration.200ms>
                                                                                    <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-800 border border-gray-700/40 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2.5 mr-2"
                                        x-on:click="$dispatch('close-modal', 'add-pet-to-trade');"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="size-3 font-bold">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                                    </svg>
                                </button>
                                                                            <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]"
                             x-ref="scrollContainer"
                             x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                             @scroll="handleScroll()">
                            <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible">
                                <template x-if="content_visible">
                                    
                                    <div x-data="{show:false}" x-init="$nextTick(() => show = true)">
                                        <div>
            <div class="border-b border-white/5  bg-grayNoBackdrop ">
    <div class="py-3 px-3 text-left flex items-center">
                    <svg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke-width='1.5' stroke='currentColor' class='w-5 h-5 text-gray-600'>
                                            <path stroke-linecap='round' stroke-linejoin='round' d='M7.5 21 3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5'/>
                                        </svg>
                                    <div class="text-sm font-semibold text-gray-200 ml-2">
                Add Pet
            </div>
            </div>
</div>
            <div class="mx-4 my-4 text-sm">
                <div class="flex gap-2 mx-4 justify-center flex-wrap my-4">
                    <template x-if="pets !== null && pets.length">
                        <template x-for="pet in pets">
                            <button type="button"
                                    :class="{
                                        ['quality:'+pet.quality+':background'] : true,
                                        ['quality:'+pet.quality+':border'] : true,
                                    }"
                                    x-on:contextMenu.prevent
                                    class="rounded-lg bg-gray-900/40 text-center py-2 px-3 relative border h-16 select-none"
                                    x-tooltip.cursor.html="'<div class=\'text-center\'><span class=\'font-bold\'>'+pet.name+'</span><br/>Level '+pet.level+((pet.evolution?.state ?? 0) > 0 ? ' / Evolution '+pet.evolution.state : '')+'</div>'"
                                    x-on:click="addPet(trade.id, pet.id)"
                                    :disabled="is_processing"
                            >
                                <div class="absolute top-0 left-0 h-full w-full bg-gray-900/40 rounded-md opacity-0 hover:opacity-100 transition-opacity z-10">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"  class="size-6 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                                    </svg>
                                </div>
                                <div class="absolute top-0 left-0 -mt-2 -ml-2 flex gap-1 flex-wrap">
                                    <template x-if="pet.evolution?.state <= 0">
                                        <span class="inline-flex items-center rounded-md bg-grayNoBackdrop px-2 py-1 text-xs font-medium text-gray-400 border border-gray-400/20 flex gap-1 items-center !py-0.5 !px-1">
    Lv. <span x-text='pet.level'></span>
</span>
                                    </template>
                                    <template x-if="pet.evolution?.state > 0">
                                        <div class="inline-flex items-center rounded-md bg-[#282923] px-2 py-1 text-xs font-medium text-yellow-400 ring-1 ring-inset ring-yellow-400/20 flex gap-1 items-center  !py-0.5 !px-1">
    <svg x-cloak xmlns="http://www.w3.org/2000/svg" class="inline-block size-3"
                                                 viewBox="0 0 24 24">
                                                <path fill="currentColor"
                                                      d="M21.738 16.13a1 1 0 0 1-.19.61a1 1 0 0 1-.52.38l-1.71.57a3.6 3.6 0 0 0-1.4.86a3.5 3.5 0 0 0-.86 1.4l-.6 1.7a1 1 0 0 1-.36.51a1.1 1.1 0 0 1-.62.19a1 1 0 0 1-1-.71l-.57-1.71a3.5 3.5 0 0 0-.86-1.4a3.8 3.8 0 0 0-1.4-.87l-1.71-.56a1.1 1.1 0 0 1-.51-.37a1.1 1.1 0 0 1-.21-.62a1 1 0 0 1 .71-1l1.72-.57a3.54 3.54 0 0 0 2.28-2.28l.57-1.69a1 1 0 0 1 .95-.73c.215 0 .426.059.61.17c.182.125.322.303.4.51l.58 1.74a3.54 3.54 0 0 0 2.28 2.28l1.7.6a1 1 0 0 1 .51.38a1 1 0 0 1 .21.61m-9.999-6.36a1 1 0 0 1-.17.55a1 1 0 0 1-.47.35l-1.26.42c-.353.122-.673.32-.94.58a2.5 2.5 0 0 0-.58.94l-.43 1.24a.9.9 0 0 1-.35.47a1 1 0 0 1-.56.18a1 1 0 0 1-.57-.19a1 1 0 0 1-.34-.47l-.41-1.25a2.44 2.44 0 0 0-.58-.93a2.2 2.2 0 0 0-.93-.58l-1.25-.42a.93.93 0 0 1-.48-.35a1 1 0 0 1 .48-1.47l1.25-.41a2.49 2.49 0 0 0 1.53-1.53l.41-1.23a1 1 0 0 1 .32-.47a1 1 0 0 1 .55-.2a1 1 0 0 1 .57.16a1 1 0 0 1 .37.46l.42 1.28a2.49 2.49 0 0 0 1.53 1.53l1.25.43a.92.92 0 0 1 .46.35a.94.94 0 0 1 .18.56m5.789-5.36a1 1 0 0 1-.17.51a.82.82 0 0 1-.42.3l-.62.21a.84.84 0 0 0-.52.52l-.22.63a.93.93 0 0 1-.29.39a.82.82 0 0 1-.52.18a1.1 1.1 0 0 1-.49-.15a.9.9 0 0 1-.32-.44l-.21-.62a.7.7 0 0 0-.2-.32a.76.76 0 0 0-.32-.2l-.62-.2a1 1 0 0 1-.42-.31a.9.9 0 0 1-.16-.51a.94.94 0 0 1 .17-.51a.9.9 0 0 1 .42-.3l.61-.2a.9.9 0 0 0 .33-.2a.9.9 0 0 0 .2-.33l.21-.62c.06-.155.155-.292.28-.4a1 1 0 0 1 .49-.19a.94.94 0 0 1 .53.16a1 1 0 0 1 .32.41l.21.64a.9.9 0 0 0 .2.33a1 1 0 0 0 .32.2l.63.21a1 1 0 0 1 .41.3a.87.87 0 0 1 .17.51"></path>
                                            </svg>
                                            <span>Lv. <span x-text='pet.level'></span></span>
</div>
                                    </template>
                                </div>
                                <img :src="pet.image_url" class="inline-block w-12 h-12">
                            </button>
                        </template>
                    </template>
                </div>
                <template x-if="pets !== null && pets.length === 0">
                    <p class="text-gray-400 text-center">You don&#039;t have any tradeable pets.</p>
                </template>
                <template x-if="pets === null">
                    <svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
</svg>                </template>
            </div>
            <div class="bg-grayNoBackdrop px-4 py-2 border-t border-gray-700/40">
                <button type="button" 
                 
                class="rounded bg-white/5 border border-gray-700/40 px-2 py-1 text-sm font-semibold text-white shadow-sm hover:bg-white/10 inline-block" x-on:click="$dispatch('close-modal', 'add-pet-to-trade');">
            Close
        </button>
            </div>
        </div>
                                    </div>
                                </template>
                            </div>
                        </div>
                        
                        <div x-show="show_fade"
                             x-transition:enter="transition ease-out"
                             x-transition:enter-start="opacity-0"
                             x-transition:enter-end="opacity-100"
                             x-transition:leave="transition ease-in"
                             x-transition:leave-start="opacity-100"
                             x-transition:leave-end="opacity-0"
                             :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }"
                             class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-900 to-transparent pointer-events-none z-10"></div>
                    </div>
                </div>
            </div>

            </div>
<div x-on:remove-pet-from-trade.window="$dispatch('open-modal', 'remove-pet-from-trade');trade=$event.detail.trade;selected_pet=$event.detail.trade_pet;" x-data="remove_pet_from_trade">
    <div
                x-data="modal('remove-pet-from-trade', false, null, )"
                x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'remove-pet-from-trade') })"
                x-on:open-modal.window="$event.detail == 'remove-pet-from-trade' ? show = true : null"
                x-on:close-modal.window="$event.detail == 'remove-pet-from-trade' ? show = false : null"
                x-on:close.stop="show = false"
                x-on:keydown.escape.window="show = false"
                x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()"
                x-on:keydown.shift.tab.prevent="prevFocusable().focus()"
                x-show="show"
                class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50"
                x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                style="display: none;">
                <div class="flex min-h-full  justify-center md:p-4 text-center items-center sm:p-0">
                    <div
                        x-show="show"
                        class="fixed inset-0 transform transition-all"
                         x-on:click="show = false"                         x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms>
                        <div class="absolute inset-0 bg-immo opacity-70"></div>
                    </div>
                    <div
                        x-show="show"
                        class="md:mb-6  bg-gray-900  border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-sm sm:mx-8 md:mx-auto relative max-h-[90vh]"
                        x-transition:enter.duration.300ms x-transition:leave.duration.200ms>
                                                                                    <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-800 border border-gray-700/40 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2.5 mr-2"
                                        x-on:click="$dispatch('close-modal', 'remove-pet-from-trade');"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="size-3 font-bold">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                                    </svg>
                                </button>
                                                                            <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]"
                             x-ref="scrollContainer"
                             x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                             @scroll="handleScroll()">
                            <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible">
                                <template x-if="content_visible">
                                    
                                    <div x-data="{show:false}" x-init="$nextTick(() => show = true)">
                                        <template x-if="selected_pet">
            <div>
                <div class="border-b border-white/5  bg-grayNoBackdrop ">
    <div class="py-3 px-3 text-left flex items-center">
                    <svg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke-width='1.5' stroke='currentColor' class='w-5 h-5 text-gray-600'>
                                            <path stroke-linecap='round' stroke-linejoin='round' d='M7.5 21 3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5'/>
                                        </svg>
                                    <div class="text-sm font-semibold text-gray-200 ml-2">
                Remove Pet
            </div>
            </div>
</div>
                <div class="mt-8">
                    <img :src="selected_pet.image_url" class="mx-auto w-24 h-24">
                    <div>
                        <h3 class="text-sm font-bold text-center" x-text="selected_pet.name"></h3>
                        <p class="text-gray-400 text-sm text-center">Level <span x-text="selected_pet.level"></span></p>
                        <p class="text-gray-400 text-sm text-center">Evolution <span x-text="selected_pet.evolution_state"></span></p>
                    </div>
                </div>
                <div class="text-sm mt-4">
                    <div class="text-center bg-grayNoBackdrop border-t border-gray-700/40 py-2 mt-4">
                        <button type="button"

                    class="inline-block rounded px-2 py-1 font-bold  text-sm border border-indigo-700/40 bg-indigoNoBackdrop hover:bg-indigo-700/40" type="button" x-on:click="removePet(trade.id, selected_pet.id)" x-bind:class="{'opacity-40' : is_processing}" x-bind:disabled="is_processing">
        Remove
    </button>
                        </div>
                </div>
            </div>
        </template>
                                    </div>
                                </template>
                            </div>
                        </div>
                        
                        <div x-show="show_fade"
                             x-transition:enter="transition ease-out"
                             x-transition:enter-start="opacity-0"
                             x-transition:enter-end="opacity-100"
                             x-transition:leave="transition ease-in"
                             x-transition:leave-start="opacity-100"
                             x-transition:leave-end="opacity-0"
                             :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }"
                             class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-900 to-transparent pointer-events-none z-10"></div>
                    </div>
                </div>
            </div>

            </div>

            <!-- Moderator Actions -->
            
            <!-- Health -->
            <div class="mt-4">
                <div class="overflow-hidden bg-gray-800/40 rounded-lg border border-gray-700/40"
     x-data="{
        is_collapsible: true,
        is_collapsed: true,
        toggle_card(event) {
            if(!this.is_collapsible)
                return;

            if(event.target.closest('[data-level-block-ignore-toggle]'))
                return;

            this.is_collapsed = !this.is_collapsed;
        },
    }"
     x-on:click="toggle_card($event)"
     x-bind:class="{'cursor-pointer': is_collapsible}"
>
    <div class="flex items-center gap-3 px-4  py-3  bg-gray-700/20  hover:bg-gray-700/40 ">
        <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=120,height=120/stats/health.png" class="h-10 w-10 flex-shrink-0 object-contain">
        <div class="flex flex-1 items-center gap-3">
            <div class="flex flex-1 flex-col justify-center gap-1">
                <h3 class="text-sm font-semibold leading-6 text-gray-100">
                    Health
                </h3>
                                                            <div class="w-full" x-cloak x-show="is_collapsed && $store.active_action_659085?.state?.type !== 'battle' && $store.active_action_659085?.state?.type !== 'dungeon'" x-transition.opacity.duration.150ms>
                            <div class="h-2 bg-gray-700 rounded-lg">
                                <div class="h-2 w-full font-bold rounded-lg bg-gradient-to-r from-red-600 to-red-400 transition-[width]"
                                     :style="'width: '+$store.current_character.health_percentage+'%'"
                                ></div>
                            </div>
                        </div>
                                                </div>
                            <div class="flex h-10 w-10 items-center justify-center text-gray-400" aria-hidden="true">
                    <svg xmlns="http://www.w3.org/2000/svg"
                         viewBox="0 0 16 16"
                         fill="currentColor"
                         class="size-5 transition-transform duration-150"
                         :class="{'rotate-180': !is_collapsed}">
                        <path fill-rule="evenodd" d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
                    </svg>
                </div>
                    </div>
    </div>
    <div x-cloak x-show="!is_collapsed" x-collapse>
        <ul role="list" class="divide-y divide-white/5 border-t border-gray-700/40">
            <li class="relative flex items-center px-4 py-3 space-x-4">
                <div class="flex-auto min-w-0">
                    <div>
                        <div class="h-2 mt-2 bg-gray-600 rounded-lg"
                                                              x-show="$store.active_action_659085?.state?.type !== 'battle' && $store.active_action_659085?.state?.type !== 'dungeon'"
                                                          x-tooltip.cursor="Math.round($store.current_character.health_percentage)+'%'">
                            <div class="h-2 max-w-full font-bold rounded-lg bg-gradient-to-r from-red-600 to-red-400 transition-[width]"
                                                                      :style="'width: '+$store.current_character.health_percentage+'%'"
                                                             ></div>
                        </div>
                                                    <template x-if="$store.active_action_659085?.state?.type === 'battle' || $store.active_action_659085?.state?.type === 'dungeon'">
                                <div class="-mt-1">
                                    <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 inline-flex items-center gap-1">
    <svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
</svg>                                        Currently Battling
</span>                                </div>
                            </template>
                                            </div>
                    <div class="mt-2 flex items-center gap-x-2.5 text-xs leading-5 text-gray-400 w-full justify-between flex-wrap gap-y-2"
                                                      x-show="$store.active_action_659085?.state?.type !== 'battle' && $store.active_action_659085?.state?.type !== 'dungeon'"
                         >
                        <div class="inline-flex items-center text-sm leading-5 text-gray-400">
                            <div class="inline-flex items-center text-xs text-gray-300 font-semibold rounded-md border border-gray-700/40 !bg-gray-700/30 px-2 py-1 whitespace-nowrap rounded-r-none">
                                                                    <span x-text="number_format($store.current_character?.health ?? 0)"></span> <span class="px-1">of</span> <span x-text="number_format($store.current_character.max_health ?? 0)"></span>
                                                            </div>
                            <div class="inline-flex items-center text-xs text-gray-400 font-semibold rounded-md rounded-l-none border border-gray-700/40 !bg-gray-700/50 px-2 py-1 whitespace-nowrap">
                                <div><span x-text="Math.floor($store.current_character.health_percentage)"></span>%</div>
                            </div>
                        </div>
                                                    <button type="button" 
                 
                class="rounded bg-white/5 border border-gray-700/40 px-2 py-1 text-sm font-semibold text-white shadow-sm hover:bg-white/10 inline-block ml-auto" x-on:click.stop.prevent="$dispatch('quick-view-food', {'type':'character', 'id':659085, 'health':65, 'max_health':65 })" data-level-block-ignore-toggle="data-level-block-ignore-toggle">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-3 h-3 inline-block mr-1">
                                    <path d="M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z" />
                                </svg>
                                Heal
        </button>
                                            </div>
                </div>
            </li>
        </ul>
    </div>
</div>
            </div>

            <!-- Additional Information -->
            <div class="overflow-hidden bg-gray-800/40 border border-gray-700/40 rounded-lg mt-4">
    <div class="flex items-center px-4 py-2 bg-gray-700/20 backdrop-blur-md">
        <svg xmlns="http://www.w3.org/2000/svg" class="size-4 text-gray-600" viewBox="0 0 24 24">
            <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"></path>
        </svg>
        <div class="pl-3">
            <h3 class="text-sm font-semibold leading-6 text-gray-100">
                Information
            </h3>
        </div>
    </div>
    <div class="w-full divide-y divide-gray-700/30">
                <div class="flex items-center justify-between">
            <div>
                <div class="flex items-center px-3 py-3 text-sm font-medium text-gray-300 rounded-md group">
                      <svg  viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-gray-500">
                        <path d="M18.25 10.75V13.25M15.25 8.75V15.25M8.75 8.75V15.25M5.75 10.75V13.25M12 6.75V17.25" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                      </svg>


                    <span class="ml-2 truncate">
                        Status
                    </span>
                </div>
            </div>
            <div class="mr-4 font-semibold text-gray-200 text-sm">
                <div>
    <span>
                    <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 flex items-center !text-gray-400 font-medium" x-tooltip.raw="6 seconds ago">
    <span class="relative inline-flex h-2 w-2 mr-2">
                    <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                    <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
                </span>
                Online
</span>            </span>
</div>
            </div>
        </div>
        <div class="flex items-center justify-between">
            <div>
                <div class="flex items-center px-3 py-3 text-sm font-medium text-gray-300 rounded-md group">
                    <svg  class="w-5 h-5 text-gray-500" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M8.75 9.25V6.5M19.25 6.5V10.5C19.25 10.9324 18.7796 11.3281 18 11.6335M19.25 6.5C19.25 7.4665 16.8995 8.25 14 8.25C11.1005 8.25 8.75 7.4665 8.75 6.5M19.25 6.5C19.25 5.5335 16.8995 4.75 14 4.75C11.1005 4.75 8.75 5.5335 8.75 6.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                        <path d="M15.25 13.5V17.5C15.25 18.4665 12.8995 19.25 10 19.25C7.10051 19.25 4.75 18.4665 4.75 17.5V13.5M15.25 13.5C15.25 14.4665 12.8995 15.25 10 15.25C7.10051 15.25 4.75 14.4665 4.75 13.5M15.25 13.5C15.25 12.5335 12.8995 11.75 10 11.75C7.10051 11.75 4.75 12.5335 4.75 13.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                    </svg>
                    <span class="ml-2 truncate">
                         Gold
                    </span>
                </div>
            </div>
            <div class="mr-4 font-semibold text-gray-200 text-sm">
                <img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/gold_coin.png' class='h-4 w-4 inline-block'> 100
            </div>
        </div>
        <div class="flex items-center justify-between">
            <div>
                <div class="flex items-center px-3 py-3 text-sm font-medium text-gray-300 rounded-md group">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" viewBox="0 0 16 16"><path fill="currentColor" d="M5.134 7.031L8 12.764l2.866-5.733L8 2.016zM8 0l4 7l-4 8l-4-8z"/></svg>
                    <span class="ml-2 truncate">
                         Shards
                    </span>
                </div>
            </div>
            <div class="mr-4 font-semibold text-gray-200 text-sm">
                <img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/uploaded/skins/01JVYWCX6QE35GBJQ9TV02G033.png' class='h-4 w-4 inline-block'> 0
            </div>
        </div>
                <div class="flex items-center justify-between">
          <div>
              <div class="flex items-center px-3 py-3 text-sm font-medium text-gray-300 rounded-md group">
                  <svg class="w-5 h-5 text-gray-500" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M4.75 16.25V5.75L9 11.25L12 5.75L15 11.25L19.25 5.75V16.25C19.25 16.25 18 18.25 12 18.25C6 18.25 4.75 16.25 4.75 16.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                  </svg>

                  <span class="ml-2 truncate">
                       Tokens
                  </span>
              </div>
          </div>
          <div class="mr-4 text-xs font-semibold text-gray-200 sm:text-sm">
              <img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/token.png' class='h-4 w-4 inline-block'> 15
          </div>
        </div>
                <div class="flex items-center justify-between">
            <div>
                <div class="flex items-center px-3 py-3 text-sm font-medium text-gray-300 rounded-md group">
                      <svg xmlns="http://www.w3.org/2000/svg"  class="w-5 h-5 text-gray-500" fill="none" viewBox="0 0 24 24">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m13.218 15.625 3.62 3.625 2.412-2.417-3.619-3.625m-2.413 2.417 2.413-2.417m-2.413 2.417-2.412 2.417-4.362-4.37a5.783 5.783 0 0 1 0-8.178l.743-.744 8.444 8.458"></path>
                      </svg>
                    <span class="ml-2 truncate">
                        Class
                    </span>
                </div>
            </div>
            <div class="mr-4 font-semibold text-right text-gray-200 text-sm">
                Ranger
            </div>
        </div>
        <div class="flex items-center justify-between">
            <div>
                <div class="flex items-center px-3 py-3 text-sm font-medium text-gray-300 rounded-md group">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-gray-500">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 8.25v-1.5m0 1.5c-1.355 0-2.697.056-4.024.166C6.845 8.51 6 9.473 6 10.608v2.513m6-4.871c1.355 0 2.697.056 4.024.166C17.155 8.51 18 9.473 18 10.608v2.513M15 8.25v-1.5m-6 1.5v-1.5m12 9.75-1.5.75a3.354 3.354 0 0 1-3 0 3.354 3.354 0 0 0-3 0 3.354 3.354 0 0 1-3 0 3.354 3.354 0 0 0-3 0 3.354 3.354 0 0 1-3 0L3 16.5m15-3.379a48.474 48.474 0 0 0-6-.371c-2.032 0-4.034.126-6 .371m12 0c.39.049.777.102 1.163.16 1.07.16 1.837 1.094 1.837 2.175v5.169c0 .621-.504 1.125-1.125 1.125H4.125A1.125 1.125 0 0 1 3 20.625v-5.17c0-1.08.768-2.014 1.837-2.174A47.78 47.78 0 0 1 6 13.12M12.265 3.11a.375.375 0 1 1-.53 0L12 2.845l.265.265Zm-3 0a.375.375 0 1 1-.53 0L9 2.845l.265.265Zm6 0a.375.375 0 1 1-.53 0L15 2.845l.265.265Z" />
                    </svg>

                    <span class="ml-2 truncate">
                        Birth Date
                    </span>
                </div>
            </div>
            <div class="mr-4 font-semibold text-right text-gray-200 text-sm">
                21st January 2026
            </div>
        </div>
                    </div>
</div>

            
            
            
            
            
            <div class="mt-4 overflow-hidden bg-gray-800/40 rounded-lg border border-gray-700/40">

    <div class="flex items-center px-4 py-2 bg-gray-700/20">
        <svg xmlns="http://www.w3.org/2000/svg" class="size-4 text-gray-600" viewBox="0 0 24 24"><path fill="currentColor" d="M8.35 3c1.18-.17 2.43 1.12 2.79 2.9c.36 1.77-.29 3.35-1.47 3.53c-1.17.18-2.43-1.11-2.8-2.89c-.37-1.77.3-3.35 1.48-3.54m7.15 0c1.19.19 1.85 1.77 1.5 3.54c-.38 1.78-1.63 3.07-2.81 2.89c-1.19-.18-1.84-1.76-1.47-3.53c.36-1.78 1.61-3.07 2.78-2.9M3 7.6c1.14-.49 2.69.4 3.5 1.95c.76 1.58.5 3.24-.63 3.73s-2.67-.39-3.46-1.96S1.9 8.08 3 7.6m18 0c1.1.48 1.38 2.15.59 3.72s-2.33 2.45-3.46 1.96s-1.39-2.15-.63-3.73C18.31 8 19.86 7.11 21 7.6m-1.67 10.78c.04.94-.68 1.98-1.54 2.37c-1.79.82-3.91-.88-5.9-.88s-4.13 1.77-5.89.88c-1-.49-1.69-1.79-1.56-2.87c.18-1.49 1.97-2.29 3.03-3.38c1.41-1.41 2.41-4.06 4.42-4.06c2 0 3.06 2.61 4.41 4.06c1.11 1.22 2.96 2.25 3.03 3.88" stroke-width="0.5" stroke="currentColor"/></svg>
        <div class="pl-3">
            <h3 class="text-sm font-semibold leading-6 text-gray-100">
                Pet
            </h3>
        </div>
    </div>
        <div class="text-center flex flex-col my-4 ">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6 inline-flex mx-auto text-gray-500 opacity-60">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z" />
            </svg>
            <span class="text-gray-200 text-sm mt-2 font-semibold">No Pet Equipped</span>
            <span class="text-gray-400 text-sm font-medium">This character does not have any pet equipped.</span>
        </div>
        <div class="text-center border-t border-gray-700/40 py-2">
        <a href="https://web.idle-mmo.com/pets?character_hash=v5g4z1dQnVMOlQqy32jp&amp;same_window=true">
            <button type="button" 
                 
                class="rounded bg-white/5 border border-gray-700/40 px-2 py-1 text-sm font-semibold text-white shadow-sm hover:bg-white/10 inline-block mx-auto">
            All Pets
        </button>
        </a>
    </div>
</div>


            <!-- Characters -->
            
            <!-- Active Effects Modal -->
            <div x-data="{ 
        active_tab: 'summary',
        filter_type: null,
        filter_name: null,
        clearFilter() {
            this.filter_type = null;
            this.filter_name = null;
        },
        applyFilter(type, name) {
            this.filter_type = type;
            this.filter_name = name;
            this.active_tab = 'full_breakdown';
        }
    }">
        <div
                x-data="modal('active-effects', false, null, )"
                x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'active-effects') })"
                x-on:open-modal.window="$event.detail == 'active-effects' ? show = true : null"
                x-on:close-modal.window="$event.detail == 'active-effects' ? show = false : null"
                x-on:close.stop="show = false"
                x-on:keydown.escape.window="show = false"
                x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()"
                x-on:keydown.shift.tab.prevent="prevFocusable().focus()"
                x-show="show"
                class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50"
                x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                style="display: none;">
                <div class="flex min-h-full  justify-center md:p-4 text-center items-center sm:p-0">
                    <div
                        x-show="show"
                        class="fixed inset-0 transform transition-all"
                         x-on:click="show = false"                         x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms>
                        <div class="absolute inset-0 bg-immo opacity-70"></div>
                    </div>
                    <div
                        x-show="show"
                        class="md:mb-6  bg-gray-800  border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-lg sm:mx-8 md:mx-auto relative max-h-[90vh]"
                        x-transition:enter.duration.300ms x-transition:leave.duration.200ms>
                                                                                    <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2"
                                        x-on:click="$dispatch('close-modal', 'active-effects');"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                                    </svg>
                                </button>
                                                                            <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]"
                             x-ref="scrollContainer"
                             x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                             @scroll="handleScroll()">
                            <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible">
                                <template x-if="content_visible">
                                    
                                    <div x-data="{show:false}" x-init="$nextTick(() => show = true)">
                                        <div x-init="
                $watch('show', function(value){ if(value) { active_tab = 'summary'; clearFilter(); } });
                $watch('active_tab', function(value){ if(value === 'summary') { clearFilter(); } })
            ">
                
                <div class="border-b border-white/5 ">
    <div class="py-3 px-3 text-left flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="size-4 text-gray-500" viewBox="0 0 24 24">
                <path fill="currentColor" d="m20 10.35l-5.78-7.41A3.06 3.06 0 0 0 9.75 3L4 10.35A3.05 3.05 0 0 0 3.51 12A3.1 3.1 0 0 0 4 13.58l.06.07l5.74 7.41A3 3 0 0 0 12 22a3.06 3.06 0 0 0 2.26-1L20 13.65a3 3 0 0 0-.06-3.3Zm-1.57 2.14l-5.67 7.22a1.11 1.11 0 0 1-1.42.07l-5.69-7.31a1 1 0 0 1-.14-.47a1.1 1.1 0 0 1 .1-.45l5.67-7.22a1.11 1.11 0 0 1 1.42-.07l5.63 7.28a1 1 0 0 1 .16.54a1.1 1.1 0 0 1-.1.41Z" />
            </svg>
                                    <div class="text-sm font-semibold text-gray-200 ml-2">
                <h2 class="text-sm font-semibold text-gray-200 ml-2">
                        Active Effects
                    </h2>
            </div>
            </div>
</div>

                
                <div class="mb-4">
                    <div class="block">
    <nav class="flex border-b border-white/5 py-4">
        <ul role="list" class="flex min-w-full gap-x-6 gap-y-3 px-2 text-sm font-semibold leading-6 text-gray-400 flex-wrap px-4">
                                                <li   
                        class=""
                                                    :class="{
                                    'text-yellow-500': (active_tab == 'summary') 
                            }"
                                                >
                                                    <button type="button"  x-on:click="active_tab = 'summary'" >
                                Summary
                            </button>
                        
                                                                    </li>
                                                                <li   
                        class=""
                                                    :class="{
                                    'text-yellow-500': (active_tab == 'full_breakdown') 
                            }"
                                                >
                                                    <button type="button"  x-on:click="active_tab = 'full_breakdown'" >
                                Full Breakdown
                            </button>
                        
                                                                    </li>
                                    </ul>
    </nav>
</div>
                </div>

                
                <div x-show="active_tab === 'summary'" x-cloak>
                    <div class="px-3 sm:px-4 pb-4">
                        
                        <div class="grid grid-cols-2 gap-3 mb-4 text-left">
                            <div class="bg-gray-900/60 rounded-lg p-3">
                                <div class="flex items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5 text-gray-600 shrink-0">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                                    </svg>
                                    <div class="ml-3">
                                        <p class="text-sm text-gray-400 font-medium">Temporary</p>
                                        <p class="text-sm font-semibold text-gray-200">0</p>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-gray-900/60 rounded-lg p-3">
                                <div class="flex items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5 text-gray-600 shrink-0">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z" />
                                    </svg>
                                    <div class="ml-3">
                                        <p class="text-sm text-gray-400 font-medium">Permanent</p>
                                        <p class="text-sm font-semibold text-gray-200">3</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        
                        <div class="bg-gray-900/60 rounded-lg overflow-hidden">
                            <table class="w-full">
                                <thead class="bg-gray-900/90">
                                    <tr class="border-b border-gray-700/50">
                                        <th class="px-3 py-2 text-left text-sm font-semibold text-gray-300">Effect Type</th>
                                        <th class="px-3 py-2 text-right text-sm font-semibold text-gray-300">Count</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-700/30">
                                                                            <tr class="hover:bg-gray-700/20 transition-colors cursor-pointer group"
                                            @click="applyFilter('dexterity_experience_percentage', '+7% Dexterity EXP')">
                                            <td class="px-3 py-3">
                                                <div class="flex items-center">
                                                    <span class="text-sm font-medium text-gray-200 group-hover:text-indigo-400 transition-colors">+7% Dexterity EXP</span>
                                                </div>
                                            </td>
                                            <td class="px-3 py-3 text-right">
                                                <div class="flex items-center justify-end space-x-2">
                                                    <span class="inline-flex items-center px-2 py-0.5 rounded-full text-sm font-medium bg-indigo-600/20 text-indigo-400">
                                                        1
                                                    </span>
                                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4 text-gray-500 group-hover:text-indigo-400 transition-colors">
                                                        <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
                                                    </svg>
                                                </div>
                                            </td>
                                        </tr>
                                                                            <tr class="hover:bg-gray-700/20 transition-colors cursor-pointer group"
                                            @click="applyFilter('hunt_wait-length_efficiency', '+8% Hunt Efficiency')">
                                            <td class="px-3 py-3">
                                                <div class="flex items-center">
                                                    <span class="text-sm font-medium text-gray-200 group-hover:text-indigo-400 transition-colors">+8% Hunt Efficiency</span>
                                                </div>
                                            </td>
                                            <td class="px-3 py-3 text-right">
                                                <div class="flex items-center justify-end space-x-2">
                                                    <span class="inline-flex items-center px-2 py-0.5 rounded-full text-sm font-medium bg-indigo-600/20 text-indigo-400">
                                                        1
                                                    </span>
                                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4 text-gray-500 group-hover:text-indigo-400 transition-colors">
                                                        <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
                                                    </svg>
                                                </div>
                                            </td>
                                        </tr>
                                                                            <tr class="hover:bg-gray-700/20 transition-colors cursor-pointer group"
                                            @click="applyFilter('battle_experience_percentage', '+5% Battle EXP')">
                                            <td class="px-3 py-3">
                                                <div class="flex items-center">
                                                    <span class="text-sm font-medium text-gray-200 group-hover:text-indigo-400 transition-colors">+5% Battle EXP</span>
                                                </div>
                                            </td>
                                            <td class="px-3 py-3 text-right">
                                                <div class="flex items-center justify-end space-x-2">
                                                    <span class="inline-flex items-center px-2 py-0.5 rounded-full text-sm font-medium bg-indigo-600/20 text-indigo-400">
                                                        1
                                                    </span>
                                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4 text-gray-500 group-hover:text-indigo-400 transition-colors">
                                                        <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
                                                    </svg>
                                                </div>
                                            </td>
                                        </tr>
                                                                    </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                
                <div x-show="active_tab === 'full_breakdown'" x-cloak>
                    <div class="px-3 sm:px-4 pb-4">
                        
                        <div x-show="filter_type" class="mb-3 flex items-center justify-between bg-indigo-600/10 border border-indigo-600/20 rounded-lg px-3 py-2">
                            <div class="flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4 text-indigo-400 mr-2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z" />
                                </svg>
                                <span class="text-sm text-gray-300">Filtering by:</span>
                                <span class="text-sm font-semibold text-indigo-400 ml-1" x-text="filter_name"></span>
                            </div>
                            <button @click="clearFilter()" class="text-sm text-gray-400 hover:text-gray-200 transition-colors">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                                </svg>
                            </button>
                        </div>
                        
                        
                        <div class="bg-gray-900/60 rounded-lg overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="w-full text-left">
                            <thead class="sticky top-0 bg-gray-900/90 backdrop-blur-sm">
                                <tr class="border-b border-gray-700/50">
                                    <th class="px-3 py-2 text-left text-sm font-semibold text-gray-300">Effect</th>
                                    <th class="px-3 py-2 text-left text-sm font-semibold text-gray-300 hidden sm:table-cell">Source</th>
                                    <th class="px-3 py-2 text-left text-sm font-semibold text-gray-300">Duration</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-700/30">
                                                                                                <template x-if="!filter_type || filter_type === 'dexterity_experience_percentage'">
                                        <tr>
                                            <td class="px-3 py-3">
                                                <div class="flex items-start space-x-2">
                                                    <div class="min-w-0">
                                                        <p class="text-sm font-medium  text-gray-200 ">
                                                            +7% Dexterity EXP
                                                        </p>
                                                                                                            </div>
                                                </div>
                                            </td>
                                            <td class="px-3 py-3 hidden sm:table-cell">
                                                <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60">
    Class
</span>                                            </td>
                                            <td class="px-3 py-3 text-left">
                                                                                                    <div class="flex items-center">
                                                        <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-200 bg-green-500/60">
    Permanent
</span>
                                                    </div>
                                                                                            </td>
                                        </tr>
                                    </template>
                                                                                                                                <template x-if="!filter_type || filter_type === 'hunt_wait-length_efficiency'">
                                        <tr>
                                            <td class="px-3 py-3">
                                                <div class="flex items-start space-x-2">
                                                    <div class="min-w-0">
                                                        <p class="text-sm font-medium  text-gray-200 ">
                                                            +8% Hunt Efficiency
                                                        </p>
                                                                                                            </div>
                                                </div>
                                            </td>
                                            <td class="px-3 py-3 hidden sm:table-cell">
                                                <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60">
    Class
</span>                                            </td>
                                            <td class="px-3 py-3 text-left">
                                                                                                    <div class="flex items-center">
                                                        <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-200 bg-green-500/60">
    Permanent
</span>
                                                    </div>
                                                                                            </td>
                                        </tr>
                                    </template>
                                                                                                                                <template x-if="!filter_type || filter_type === 'battle_experience_percentage'">
                                        <tr>
                                            <td class="px-3 py-3">
                                                <div class="flex items-start space-x-2">
                                                    <div class="min-w-0">
                                                        <p class="text-sm font-medium  text-gray-200 ">
                                                            +5% Battle EXP
                                                        </p>
                                                                                                            </div>
                                                </div>
                                            </td>
                                            <td class="px-3 py-3 hidden sm:table-cell">
                                                <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60">
    Class
</span>                                            </td>
                                            <td class="px-3 py-3 text-left">
                                                                                                    <div class="flex items-center">
                                                        <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-200 bg-green-500/60">
    Permanent
</span>
                                                    </div>
                                                                                            </td>
                                        </tr>
                                    </template>
                                                                                        
                                                    </tbody>
                    </table>
                    </div>
                    </div>
                </div>
            </div>
                                    </div>
                                </template>
                            </div>
                        </div>
                        
                        <div x-show="show_fade"
                             x-transition:enter="transition ease-out"
                             x-transition:enter-start="opacity-0"
                             x-transition:enter-end="opacity-100"
                             x-transition:leave="transition ease-in"
                             x-transition:leave-start="opacity-100"
                             x-transition:leave-end="opacity-0"
                             :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }"
                             class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div>
                    </div>
                </div>
            </div>

                </div>

        </div>
        <div class="col-span-6">

            <!-- Bio -->
            <div class="relative mt-4 mb-4 bg-gray-800/40 rounded-lg border border-gray-700/40 ">
    <div class="flex items-center px-4 py-2 bg-gray-700/20 border-b border-gray-700/40">
        <svg xmlns="http://www.w3.org/2000/svg" class="size-4 text-gray-600" viewBox="0 0 24 24">
            <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.3" d="M2.75 16.401a1.15 1.15 0 0 0 1.16 1.15a16.7 16.7 0 0 1 3.535.333c1.64.204 3.204.81 4.555 1.761V6.442A10.24 10.24 0 0 0 7.445 4.68a16.6 16.6 0 0 0-3.6-.322a1.15 1.15 0 0 0-1.074 1.15zm18.5 0a1.15 1.15 0 0 1-1.16 1.15a16.7 16.7 0 0 0-3.535.333c-1.64.204-3.204.81-4.555 1.761V6.442a10.24 10.24 0 0 1 4.555-1.762a16.6 16.6 0 0 1 3.6-.322a1.15 1.15 0 0 1 1.073 1.15z" />
        </svg>
        <div class="pl-3">
            <h3 class="text-sm font-semibold leading-6 text-gray-100">
                Bio
            </h3>
        </div>
    </div>
    <div class="px-4 py-3 text-sm break-words text-gray-200 font-medium text-left text-gray-500"
         x-data="{
                bio: 'This character has no bio.',
            }" x-html="markdownize(bio)">

    </div>
        <div class="py-2 px-4 border-t border-white/5">
            <div>
    <div
                x-data="modal('edit-bio', false, null, )"
                x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'edit-bio') })"
                x-on:open-modal.window="$event.detail == 'edit-bio' ? show = true : null"
                x-on:close-modal.window="$event.detail == 'edit-bio' ? show = false : null"
                x-on:close.stop="show = false"
                x-on:keydown.escape.window="show = false"
                x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()"
                x-on:keydown.shift.tab.prevent="prevFocusable().focus()"
                x-show="show"
                class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50"
                x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                style="display: none;">
                <div class="flex min-h-full  justify-center md:p-4 text-center items-center sm:p-0">
                    <div
                        x-show="show"
                        class="fixed inset-0 transform transition-all"
                         x-on:click="show = false"                         x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms>
                        <div class="absolute inset-0 bg-immo opacity-70"></div>
                    </div>
                    <div
                        x-show="show"
                        class="md:mb-6  bg-gray-800  border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-lg sm:mx-8 md:mx-auto relative max-h-[90vh]"
                        x-transition:enter.duration.300ms x-transition:leave.duration.200ms>
                                                                                    <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2"
                                        x-on:click="$dispatch('close-modal', 'edit-bio');"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                                    </svg>
                                </button>
                                                                            <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]"
                             x-ref="scrollContainer"
                             x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                             @scroll="handleScroll()">
                            <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible">
                                <template x-if="content_visible">
                                    
                                    <div x-data="{show:false}" x-init="$nextTick(() => show = true)">
                                        <div class="border-b border-white/5">
            <div class="py-3 px-3 text-left flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="size-4 text-gray-600" viewBox="0 0 24 24">
                    <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.3" d="M2.75 16.401a1.15 1.15 0 0 0 1.16 1.15a16.7 16.7 0 0 1 3.535.333c1.64.204 3.204.81 4.555 1.761V6.442A10.24 10.24 0 0 0 7.445 4.68a16.6 16.6 0 0 0-3.6-.322a1.15 1.15 0 0 0-1.074 1.15zm18.5 0a1.15 1.15 0 0 1-1.16 1.15a16.7 16.7 0 0 0-3.535.333c-1.64.204-3.204.81-4.555 1.761V6.442a10.24 10.24 0 0 1 4.555-1.762a16.6 16.6 0 0 1 3.6-.322a1.15 1.15 0 0 1 1.073 1.15z" />
                </svg>
                <h2 class="text-sm font-semibold text-gray-200 ml-2">
                    Bio
                </h2>
            </div>
        </div>
        <form method="POST" action="https://web.idle-mmo.com/@SVNCRY/bio/update">
            <input type="hidden" name="_token" value="XyMoBec0vexU3Uc6FRmgCq1T9viaXxZJLP7cxHcI" autocomplete="off">            <div class="mx-4">
                <div class="text-center">

                    <div class="mt-4" x-data="{bio: ''}">
                        <div class="text-left">
                            <div>
                                <textarea
                                    maxlength="1000"
                                    type="text"
                                    name="bio"
                                    x-model="bio"
                                    class="bg-gray-700/40 block w-full rounded-none rounded-l-md border-0 py-1.5 text-gray-100  placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
                                    placeholder="Enter your bio here..."
                                    rows="10"
                                    x-ref="bio"
                                ></textarea>
                            </div>
                            <div class="text-xs text-gray-400">
                                <span x-text="bio.length"></span> / 1,000
                            </div>
                            
                                                            <div class="mt-4">
                                    <div 
    x-data="{show: false }"
    class="rounded-lg mt-2 bg-gray-800 shadow-sm py-3 px-6 relative text-gray-200 bg-gray-900/40 font-medium" dismissal-key="membership-bio-benefit"
    x-cloak 
    x-show="show"
            x-init="if(!localStorage.getItem('quick-tip-membership-bio-benefit')) show=true"
        
>
        <div class="absolute top-0 left-0 -mt-2 -ml-2">
        <svg class="h-6 w-6 text-gray-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
        </svg>
    </div>
        <div>
      <div class="md:flex md:justify-between">
        <div class="text-sm w-full">
          Upgrade to membership to increase your maximum character count to 2,500.
        </div>
      </div>
    </div>
            <button class="absolute top-0 right-0 mt-2 mr-2" type="button" onclick="if (!window.__cfRLUnblockHandlers) return false; localStorage.setItem('quick-tip-membership-bio-benefit', 'true');" x-on:click="show=false" data-cf-modified-28379d9fb3f8c28bafd7d866-="">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                <path d="M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z" />
            </svg>
        </button>
    </div>
                                </div>
                                                    </div>
                    </div>
                </div>
            </div>
            <div class="mt-4 text-center bg-gray-900/40 py-2 px-4">
                <button type="submit" 

                 
                class="inline-block rounded px-4 py-2 bg-gradient-to-b font-bold bg-indigo-600 hover:bg-indigo-500 text-sm" type="submit" text="Update Bio">
            Update Bio
        </button>
            </div>
        </form>
                                    </div>
                                </template>
                            </div>
                        </div>
                        
                        <div x-show="show_fade"
                             x-transition:enter="transition ease-out"
                             x-transition:enter-start="opacity-0"
                             x-transition:enter-end="opacity-100"
                             x-transition:leave="transition ease-in"
                             x-transition:leave-start="opacity-100"
                             x-transition:leave-end="opacity-0"
                             :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }"
                             class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div>
                    </div>
                </div>
            </div>

            </div>
            <button type="button" 
                 
                class="rounded bg-white/5 border border-gray-700/40 px-2 py-1 text-sm font-semibold text-white shadow-sm hover:bg-white/10 inline-block flex items-center gap-2" x-on:click="$dispatch('open-modal', 'edit-bio')">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                    <path d="M13.488 2.513a1.75 1.75 0 0 0-2.475 0L6.75 6.774a2.75 2.75 0 0 0-.596.892l-.848 2.047a.75.75 0 0 0 .98.98l2.047-.848a2.75 2.75 0 0 0 .892-.596l4.261-4.262a1.75 1.75 0 0 0 0-2.474Z" />
                    <path d="M4.75 3.5c-.69 0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V9A.75.75 0 0 1 14 9v2.25A2.75 2.75 0 0 1 11.25 14h-6.5A2.75 2.75 0 0 1 2 11.25v-6.5A2.75 2.75 0 0 1 4.75 2H7a.75.75 0 0 1 0 1.5H4.75Z" />
                </svg>
                Edit
        </button>
    </div>
    </div>

            <!-- Charts -->
            <div class="grid grid-cols-1 md:grid-cols-2 md:gap-2" x-data="charts" >

    
    <!-- Activity chart -->
    <div x-intersect.once="initialiseChart('activity', 7);">
        <div class="relative mt-4 mb-4 bg-gray-800/40 rounded-lg border border-gray-700/40">
            <div class="flex items-center px-4 py-3 border-b border-gray-700/40 bg-gray-700/20">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-4 text-gray-600">
                    <path d="M18.375 2.25c-1.035 0-1.875.84-1.875 1.875v15.75c0 1.035.84 1.875 1.875 1.875h.75c1.035 0 1.875-.84 1.875-1.875V4.125c0-1.036-.84-1.875-1.875-1.875h-.75zM9.75 8.625c0-1.036.84-1.875 1.875-1.875h.75c1.036 0 1.875.84 1.875 1.875v11.25c0 1.035-.84 1.875-1.875 1.875h-.75a1.875 1.875 0 01-1.875-1.875V8.625zM3 13.125c0-1.036.84-1.875 1.875-1.875h.75c1.036 0 1.875.84 1.875 1.875v6.75c0 1.035-.84 1.875-1.875 1.875h-.75A1.875 1.875 0 013 19.875v-6.75z" />
                  </svg>
                <div class="pl-4">
                    <h3 class="text-sm font-semibold leading-6 text-gray-100">Activity</h3>
                </div>
                <div class="ml-auto">
                    <div class="relative inline-block text-left" x-data="{dropdown:false}" x-on:click.away="dropdown=false">
                        <div>
                          <button type="button" x-on:click="if(!charts.activity.filter_switchable) return; dropdown=!dropdown" class="inline-flex w-full justify-center gap-x-1.5 rounded-md bg-gray-900 px-2 py-1 text-sm font-semibold text-gray-300 shadow-sm hover:bg-gray-900/30" id="menu-button" aria-expanded="true" aria-haspopup="true">
                            <span x-text="readableFilter('activity')" x-cloak x-show="charts.activity.filter_switchable"></span>
                            <svg x-show="charts.activity.filter_switchable" x-cloak class="-mr-1 h-5 w-5 text-gray-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                              <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd" />
                            </svg>
                            <span x-show="!charts.activity.filter_switchable" class="-mr-1">
                                <svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
</svg>                            </span>
                          </button>
                        </div>
                        <div 
                        x-cloak
                        x-show="dropdown"
                        x-transition:enter="transition ease-out duration-100"
                        x-transition:enter-start="transform opacity-0 scale-95"
                        x-transition:enter-end="transform opacity-100 scale-100"
                        x-transition:leave="transition ease-in duration-75"
                        x-transition:leave-start="transform opacity-100 scale-100"
                        x-transition:leave-end="transform opacity-0 scale-95"
                        class="absolute right-0 z-10 w-28 mt-2 origin-top-right rounded-md bg-gray-900 shadow-lg focus:outline-none" role="menu" aria-orientation="vertical" aria-labelledby="menu-button" tabindex="-1">
                          <div role="none">
                                                            <button :disabled="!charts.activity.filter_switchable"  class="text-gray-300 block px-4 py-2 text-sm font-medium hover:bg-[#1c212c] w-full text-left"  :class="{'opacity-30' : charts.activity.filter === 7}" x-on:click="initialiseChart('activity', '7');dropdown=false;" role="menuitem" tabindex="-1">7 Days</button>
                                                            <button :disabled="!charts.activity.filter_switchable"  class="text-gray-300 block px-4 py-2 text-sm font-medium hover:bg-[#1c212c] w-full text-left"  :class="{'opacity-30' : charts.activity.filter === 14}" x-on:click="initialiseChart('activity', '14');dropdown=false;" role="menuitem" tabindex="-1">14 Days</button>
                                                            <button :disabled="!charts.activity.filter_switchable"  class="text-gray-300 block px-4 py-2 text-sm font-medium hover:bg-[#1c212c] w-full text-left"  :class="{'opacity-30' : charts.activity.filter === 30}" x-on:click="initialiseChart('activity', '30');dropdown=false;" role="menuitem" tabindex="-1">30 Days</button>
                                                            <button :disabled="!charts.activity.filter_switchable"  class="text-gray-300 block px-4 py-2 text-sm font-medium hover:bg-[#1c212c] w-full text-left"  :class="{'opacity-30' : charts.activity.filter === 90}" x-on:click="initialiseChart('activity', '90');dropdown=false;" role="menuitem" tabindex="-1">3 Months</button>
                                                            <button :disabled="!charts.activity.filter_switchable"  class="text-gray-300 block px-4 py-2 text-sm font-medium hover:bg-[#1c212c] w-full text-left"  :class="{'opacity-30' : charts.activity.filter === 365}" x-on:click="initialiseChart('activity', '365');dropdown=false;" role="menuitem" tabindex="-1">12 Months</button>
                                                            <button :disabled="!charts.activity.filter_switchable"  class="text-gray-300 block px-4 py-2 text-sm font-medium hover:bg-[#1c212c] w-full text-left"  :class="{'opacity-30' : charts.activity.filter === 0}" x-on:click="initialiseChart('activity', '0');dropdown=false;" role="menuitem" tabindex="-1">All Time</button>
                                                      </div>
                        </div>
                      </div>
                </div>
            </div>

            <div class="px-4 py-2 text-sm text-lg font-bold h-40 flex justify-center items-center" x-show="charts.activity.plot_points && charts.activity.plot_points.length">
                <canvas id="activity-chart" class="w-full"></canvas>
            </div>
            <template x-if="charts.activity.plot_points === null">
                <div class="flex justify-center py-6">
                    <svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
</svg>                </div>
            </template>
            <template x-if="charts.activity.plot_points && !charts.activity.plot_points.length">
                <div class="flex items-center justify-center h-40">
                    <div class="px-4 py-3 text-sm text-lg text-center">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-12 h-12 mx-auto text-gray-400">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
                        </svg>
                        <span class="block mt-2 text-sm font-semibold text-gray-200">No Data</span>
                        <span class="mt-1 text-sm font-normal text-gray-400">This character has not played enough for their data to be tracked.</span>
                    </div>
                </div>
            </template>
        </div>
    </div>

    <!-- Experience Graph -->
    <div x-intersect.once="initialiseChart('experience', null)">
        <div class="relative mt-4 mb-4 bg-gray-800/40 rounded-lg border border-gray-700/40">
            <div class="flex items-center px-4 py-3 border-b border-gray-700/40 bg-gray-700/20">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-4 text-gray-600">
                    <path d="M18.375 2.25c-1.035 0-1.875.84-1.875 1.875v15.75c0 1.035.84 1.875 1.875 1.875h.75c1.035 0 1.875-.84 1.875-1.875V4.125c0-1.036-.84-1.875-1.875-1.875h-.75zM9.75 8.625c0-1.036.84-1.875 1.875-1.875h.75c1.036 0 1.875.84 1.875 1.875v11.25c0 1.035-.84 1.875-1.875 1.875h-.75a1.875 1.875 0 01-1.875-1.875V8.625zM3 13.125c0-1.036.84-1.875 1.875-1.875h.75c1.036 0 1.875.84 1.875 1.875v6.75c0 1.035-.84 1.875-1.875 1.875h-.75A1.875 1.875 0 013 19.875v-6.75z" />
                  </svg>
                <div class="pl-4">
                    <h3 class="text-sm font-semibold leading-7 text-gray-100">Experience</h3>
                </div>
            </div>

            <div class="px-4 py-1 text-sm font-bold h-40  flex justify-center items-center" x-show="charts.experience.plot_points  && charts.experience.plot_points.data && charts.experience.plot_points.data.length">
                <canvas id="experience-chart" class="w-full"></canvas>
            </div>
            <template x-if="charts.experience.plot_points === null">
                <div class="flex justify-center py-6">
                    <svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
</svg>                </div>  
            </template>
            <template x-if="charts.experience.plot_points && charts.experience.plot_points.data && !charts.experience.plot_points.data.length">
                <div class="flex items-center justify-center h-40">
                    <div class="px-4 py-3 text-sm text-center">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-12 h-12 mx-auto text-gray-400">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
                        </svg>
                        <span class="block mt-2 text-sm font-semibold text-gray-200">No Data</span>
                        <span class="mt-1 text-sm font-normal text-gray-400">This character has not played enough for their data to be tracked.</span>
                    </div>
                </div>
            </template>
        </div>
        <div class="text-xs text-gray-600 text-right mr-2 -mt-2 mb-2">Both charts may take up to 3 hours to update.</div>
    </div>
</div>

            <!-- Showcase -->
            
            <!-- Equipment -->
            <div>
    <div>
    <div class="relative">
        <div class="absolute inset-0 flex items-center" aria-hidden="true">
        <div class="w-full border-t border-gray-800"></div>
        </div>
        <div class="relative flex justify-center">
        <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-900">Equipment</span>
        </div>
    </div>
</div>    <div class="grid grid-cols-3  md:grid-cols-4 xl:grid-cols-7 gap-x-3 gap-y-4 mt-4">
                    <a href="https://web.idle-mmo.com/item/inspect/jGXBy7a4Lb99Y0Pw6Vdg?same_window=true" class="w-full">
                <button class="rounded-lg w-full text-center py-2 px-3 relative border quality:standard:border quality:standard:background"
                    x-tooltip.cursor.html="
                        '<div class=\'text-center\'><span class=\'font-bold\'>Simple Felling Axe</span><br/>Woodcutting Level 1 Felling Axe</div>';
                    ">
                    <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=150,height=150,format=auto/uploaded/skins/SsOngUc5HJJ2Wp5P1wJlCb8qbnV6rK-metaMS5wbmc=-.png" class="inline-block w-12 h-12">
                                    </button>
            </a>
                    <a href="https://web.idle-mmo.com/item/inspect/bAB1E9poQqqVQnakeJj5?same_window=true" class="w-full">
                <button class="rounded-lg w-full text-center py-2 px-3 relative border quality:standard:border quality:standard:background"
                    x-tooltip.cursor.html="
                        '<div class=\'text-center\'><span class=\'font-bold\'>Simple Pickaxe</span><br/>Mining Level 1 Pickaxe</div>';
                    ">
                    <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=150,height=150,format=auto/uploaded/skins/IETUvwVxwm8JOwf0wqJiHU5BtmfrQw-metaZzUyMjYucG5n-.png" class="inline-block w-12 h-12">
                                    </button>
            </a>
                    <a href="https://web.idle-mmo.com/item/inspect/EWGwnXPlY1lvNJqekZ2R?same_window=true" class="w-full">
                <button class="rounded-lg w-full text-center py-2 px-3 relative border quality:standard:border quality:standard:background"
                    x-tooltip.cursor.html="
                        '<div class=\'text-center\'><span class=\'font-bold\'>Simple Fishing Rod</span><br/>Fishing Level 1 Fishing Rod</div>';
                    ">
                    <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=150,height=150,format=auto/uploaded/skins/d64SM9vOwmqItJQ9rQEOZpKVkoXbPs-metaMy5wbmc=-.png" class="inline-block w-12 h-12">
                                    </button>
            </a>
            </div>
</div>

            <!-- Equipment -->
            <div>
    <div class="relative mt-4">
        <div class="absolute inset-0 flex items-center" aria-hidden="true">
        <div class="w-full border-t border-gray-800"></div>
        </div>
        <div class="relative flex justify-center">
        <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-900">Skills</span>
        </div>
    </div>
</div><div class="grid grid-cols-3 md:grid-cols-4 xl:grid-cols-7 gap-x-3 gap-y-4 mt-6">
            <button class="rounded-lg bg-gray-800/40 border border-gray-700/40 w-full text-center py-2 px-3 relative bg-gradient-to-br "
        x-tooltip.cursor="{
            content: () => '<span class=\'font-bold\'>Woodcutting</span>',
            allowHTML: true,
            touch: ['click'],
            hideOnClick: false,
            followCursor: window.isMobile().any ? false : true,
            arrow: window.isMobile().any ? false : true,
            appendTo: $root,
            offset: window.isMobile().any ? [0, -20] : [0, 10],
        }">
            <span class="absolute top-0 right-0 -mt-2 -mr-2 flex gap-2">
                                    <span class="inline-flex items-center rounded-md bg-grayNoBackdrop px-2 py-1 text-xs font-medium text-gray-400 border border-gray-400/20">
    Lv. 1
</span>
                            </span>
            <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=150,height=150,format=auto/uploaded/skins/DKC4LgMAyoUlDmo99LJOVbtUZsezIi-metad29vZGN1dHRpbmcucG5n-.png" class="inline-block w-12 h-12">       
        </button>
            <button class="rounded-lg bg-gray-800/40 border border-gray-700/40 w-full text-center py-2 px-3 relative bg-gradient-to-br "
        x-tooltip.cursor="{
            content: () => '<span class=\'font-bold\'>Mining</span>',
            allowHTML: true,
            touch: ['click'],
            hideOnClick: false,
            followCursor: window.isMobile().any ? false : true,
            arrow: window.isMobile().any ? false : true,
            appendTo: $root,
            offset: window.isMobile().any ? [0, -20] : [0, 10],
        }">
            <span class="absolute top-0 right-0 -mt-2 -mr-2 flex gap-2">
                                    <span class="inline-flex items-center rounded-md bg-grayNoBackdrop px-2 py-1 text-xs font-medium text-gray-400 border border-gray-400/20">
    Lv. 11
</span>
                            </span>
            <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=150,height=150,format=auto/uploaded/skins/CwqOzwaWgR9ooe0BVEpgtKCAduFpka-metabWluaW5nLnBuZw==-.png" class="inline-block w-12 h-12">       
        </button>
            <button class="rounded-lg bg-gray-800/40 border border-gray-700/40 w-full text-center py-2 px-3 relative bg-gradient-to-br "
        x-tooltip.cursor="{
            content: () => '<span class=\'font-bold\'>Fishing</span>',
            allowHTML: true,
            touch: ['click'],
            hideOnClick: false,
            followCursor: window.isMobile().any ? false : true,
            arrow: window.isMobile().any ? false : true,
            appendTo: $root,
            offset: window.isMobile().any ? [0, -20] : [0, 10],
        }">
            <span class="absolute top-0 right-0 -mt-2 -mr-2 flex gap-2">
                                    <span class="inline-flex items-center rounded-md bg-grayNoBackdrop px-2 py-1 text-xs font-medium text-gray-400 border border-gray-400/20">
    Lv. 1
</span>
                            </span>
            <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=150,height=150,format=auto/uploaded/skins/aFjVlrHK2um38ufObrBRXGOZOxGHsj-metaZmlzaGluZy5wbmc=-.png" class="inline-block w-12 h-12">       
        </button>
            <button class="rounded-lg bg-gray-800/40 border border-gray-700/40 w-full text-center py-2 px-3 relative bg-gradient-to-br "
        x-tooltip.cursor="{
            content: () => '<span class=\'font-bold\'>Alchemy</span>',
            allowHTML: true,
            touch: ['click'],
            hideOnClick: false,
            followCursor: window.isMobile().any ? false : true,
            arrow: window.isMobile().any ? false : true,
            appendTo: $root,
            offset: window.isMobile().any ? [0, -20] : [0, 10],
        }">
            <span class="absolute top-0 right-0 -mt-2 -mr-2 flex gap-2">
                                    <span class="inline-flex items-center rounded-md bg-grayNoBackdrop px-2 py-1 text-xs font-medium text-gray-400 border border-gray-400/20">
    Lv. 1
</span>
                            </span>
            <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=150,height=150,format=auto/uploaded/skins/tMKfSVT7ZSbPwMxEIKmulq1B7lFIYZ-metaYWxjaGVteS5wbmc=-.png" class="inline-block w-12 h-12">       
        </button>
            <button class="rounded-lg bg-gray-800/40 border border-gray-700/40 w-full text-center py-2 px-3 relative bg-gradient-to-br "
        x-tooltip.cursor="{
            content: () => '<span class=\'font-bold\'>Smelting</span>',
            allowHTML: true,
            touch: ['click'],
            hideOnClick: false,
            followCursor: window.isMobile().any ? false : true,
            arrow: window.isMobile().any ? false : true,
            appendTo: $root,
            offset: window.isMobile().any ? [0, -20] : [0, 10],
        }">
            <span class="absolute top-0 right-0 -mt-2 -mr-2 flex gap-2">
                                    <span class="inline-flex items-center rounded-md bg-grayNoBackdrop px-2 py-1 text-xs font-medium text-gray-400 border border-gray-400/20">
    Lv. 1
</span>
                            </span>
            <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=150,height=150,format=auto/uploaded/skins/01HMV8CSV9P697HRCPBMQMY6VA.png" class="inline-block w-12 h-12">       
        </button>
            <button class="rounded-lg bg-gray-800/40 border border-gray-700/40 w-full text-center py-2 px-3 relative bg-gradient-to-br "
        x-tooltip.cursor="{
            content: () => '<span class=\'font-bold\'>Cooking</span>',
            allowHTML: true,
            touch: ['click'],
            hideOnClick: false,
            followCursor: window.isMobile().any ? false : true,
            arrow: window.isMobile().any ? false : true,
            appendTo: $root,
            offset: window.isMobile().any ? [0, -20] : [0, 10],
        }">
            <span class="absolute top-0 right-0 -mt-2 -mr-2 flex gap-2">
                                    <span class="inline-flex items-center rounded-md bg-grayNoBackdrop px-2 py-1 text-xs font-medium text-gray-400 border border-gray-400/20">
    Lv. 1
</span>
                            </span>
            <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=150,height=150,format=auto/uploaded/skins/wI2XxGzeSRX6AFMRUADAnKji9NgOIK-metaY29va2luZy5wbmc=-.png" class="inline-block w-12 h-12">       
        </button>
            <button class="rounded-lg bg-gray-800/40 border border-gray-700/40 w-full text-center py-2 px-3 relative bg-gradient-to-br "
        x-tooltip.cursor="{
            content: () => '<span class=\'font-bold\'>Forge</span>',
            allowHTML: true,
            touch: ['click'],
            hideOnClick: false,
            followCursor: window.isMobile().any ? false : true,
            arrow: window.isMobile().any ? false : true,
            appendTo: $root,
            offset: window.isMobile().any ? [0, -20] : [0, 10],
        }">
            <span class="absolute top-0 right-0 -mt-2 -mr-2 flex gap-2">
                                    <span class="inline-flex items-center rounded-md bg-grayNoBackdrop px-2 py-1 text-xs font-medium text-gray-400 border border-gray-400/20">
    Lv. 1
</span>
                            </span>
            <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=150,height=150,format=auto/uploaded/skins/tuVX8BVjiz53PoeSWF1KJ26OTEOoZI-metaaDkucG5n-.png" class="inline-block w-12 h-12">       
        </button>
            <button class="rounded-lg bg-gray-800/40 border border-gray-700/40 w-full text-center py-2 px-3 relative bg-gradient-to-br "
        x-tooltip.cursor="{
            content: () => '<span class=\'font-bold\'>Shadow Mastery</span>',
            allowHTML: true,
            touch: ['click'],
            hideOnClick: false,
            followCursor: window.isMobile().any ? false : true,
            arrow: window.isMobile().any ? false : true,
            appendTo: $root,
            offset: window.isMobile().any ? [0, -20] : [0, 10],
        }">
            <span class="absolute top-0 right-0 -mt-2 -mr-2 flex gap-2">
                                    <span class="inline-flex items-center rounded-md bg-grayNoBackdrop px-2 py-1 text-xs font-medium text-gray-400 border border-gray-400/20">
    Lv. 1
</span>
                            </span>
            <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=150,height=150,format=auto/uploaded/skins/2DKOpVK1LsY1jwOER6tfuBfPGTDXHF-metacHVtcGtpbjMucG5n-.png" class="inline-block w-12 h-12">       
        </button>
            <button class="rounded-lg bg-gray-800/40 border border-gray-700/40 w-full text-center py-2 px-3 relative bg-gradient-to-br "
        x-tooltip.cursor="{
            content: () => '<span class=\'font-bold\'>Bartering</span>',
            allowHTML: true,
            touch: ['click'],
            hideOnClick: false,
            followCursor: window.isMobile().any ? false : true,
            arrow: window.isMobile().any ? false : true,
            appendTo: $root,
            offset: window.isMobile().any ? [0, -20] : [0, 10],
        }">
            <span class="absolute top-0 right-0 -mt-2 -mr-2 flex gap-2">
                                    <span class="inline-flex items-center rounded-md bg-grayNoBackdrop px-2 py-1 text-xs font-medium text-gray-400 border border-gray-400/20">
    Lv. 1
</span>
                            </span>
            <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=150,height=150,format=auto/uploaded/skins/Druis2lTKqmbl8YmDDVCy2TaYFl430-metaYmFydGVyaW5nLnBuZw==-.png" class="inline-block w-12 h-12">       
        </button>
            <button class="rounded-lg bg-gray-800/40 border border-gray-700/40 w-full text-center py-2 px-3 relative bg-gradient-to-br "
        x-tooltip.cursor="{
            content: () => '<span class=\'font-bold\'>Hunting Mastery</span>',
            allowHTML: true,
            touch: ['click'],
            hideOnClick: false,
            followCursor: window.isMobile().any ? false : true,
            arrow: window.isMobile().any ? false : true,
            appendTo: $root,
            offset: window.isMobile().any ? [0, -20] : [0, 10],
        }">
            <span class="absolute top-0 right-0 -mt-2 -mr-2 flex gap-2">
                                    <span class="inline-flex items-center rounded-md bg-grayNoBackdrop px-2 py-1 text-xs font-medium text-gray-400 border border-gray-400/20">
    Lv. 1
</span>
                            </span>
            <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=150,height=150,format=auto/uploaded/skins/ryXY3r3TY70wWquLMMZ7idvKVR19GS-metaaHVudGluZy1pbWFnZS5wbmc=-.png" class="inline-block w-12 h-12">       
        </button>
            <button class="rounded-lg bg-gray-800/40 border border-gray-700/40 w-full text-center py-2 px-3 relative bg-gradient-to-br "
        x-tooltip.cursor="{
            content: () => '<span class=\'font-bold\'>Yule Mastery</span>',
            allowHTML: true,
            touch: ['click'],
            hideOnClick: false,
            followCursor: window.isMobile().any ? false : true,
            arrow: window.isMobile().any ? false : true,
            appendTo: $root,
            offset: window.isMobile().any ? [0, -20] : [0, 10],
        }">
            <span class="absolute top-0 right-0 -mt-2 -mr-2 flex gap-2">
                                    <span class="inline-flex items-center rounded-md bg-grayNoBackdrop px-2 py-1 text-xs font-medium text-gray-400 border border-gray-400/20">
    Lv. 1
</span>
                            </span>
            <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=150,height=150,format=auto/uploaded/skins/OXBGDWcgUce8zFwEUocxz59E6uABq9-metac25vd21hbi5wbmc=-.png" class="inline-block w-12 h-12">       
        </button>
            <button class="rounded-lg bg-gray-800/40 border border-gray-700/40 w-full text-center py-2 px-3 relative bg-gradient-to-br "
        x-tooltip.cursor="{
            content: () => '<span class=\'font-bold\'>Springtide Mastery</span>',
            allowHTML: true,
            touch: ['click'],
            hideOnClick: false,
            followCursor: window.isMobile().any ? false : true,
            arrow: window.isMobile().any ? false : true,
            appendTo: $root,
            offset: window.isMobile().any ? [0, -20] : [0, 10],
        }">
            <span class="absolute top-0 right-0 -mt-2 -mr-2 flex gap-2">
                                    <span class="inline-flex items-center rounded-md bg-grayNoBackdrop px-2 py-1 text-xs font-medium text-gray-400 border border-gray-400/20">
    Lv. 1
</span>
                            </span>
            <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=150,height=150,format=auto/uploaded/skins/01HT2CH8GYGB22Q6RJ5XK7SQ06.png" class="inline-block w-12 h-12">       
        </button>
            <button class="rounded-lg bg-gray-800/40 border border-gray-700/40 w-full text-center py-2 px-3 relative bg-gradient-to-br "
        x-tooltip.cursor="{
            content: () => '<span class=\'font-bold\'>Combat</span>',
            allowHTML: true,
            touch: ['click'],
            hideOnClick: false,
            followCursor: window.isMobile().any ? false : true,
            arrow: window.isMobile().any ? false : true,
            appendTo: $root,
            offset: window.isMobile().any ? [0, -20] : [0, 10],
        }">
            <span class="absolute top-0 right-0 -mt-2 -mr-2 flex gap-2">
                                    <span class="inline-flex items-center rounded-md bg-grayNoBackdrop px-2 py-1 text-xs font-medium text-gray-400 border border-gray-400/20">
    Lv. 1
</span>
                            </span>
            <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=150,height=150,format=auto/uploaded/skins/1eJxBXb1BOJuZpUr2sL3NwaWOV3Gr0-metadGluLXN3b3JkLnBuZw==-.png" class="inline-block w-12 h-12">       
        </button>
            <button class="rounded-lg bg-gray-800/40 border border-gray-700/40 w-full text-center py-2 px-3 relative bg-gradient-to-br "
        x-tooltip.cursor="{
            content: () => '<span class=\'font-bold\'>Dungeoneering</span>',
            allowHTML: true,
            touch: ['click'],
            hideOnClick: false,
            followCursor: window.isMobile().any ? false : true,
            arrow: window.isMobile().any ? false : true,
            appendTo: $root,
            offset: window.isMobile().any ? [0, -20] : [0, 10],
        }">
            <span class="absolute top-0 right-0 -mt-2 -mr-2 flex gap-2">
                                    <span class="inline-flex items-center rounded-md bg-grayNoBackdrop px-2 py-1 text-xs font-medium text-gray-400 border border-gray-400/20">
    Lv. 1
</span>
                            </span>
            <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=150,height=150,format=auto/uploaded/skins/01JWDZ1HDVERM6KWR6RQ52WQ4T.png" class="inline-block w-12 h-12">       
        </button>
            <button class="rounded-lg bg-gray-800/40 border border-gray-700/40 w-full text-center py-2 px-3 relative bg-gradient-to-br "
        x-tooltip.cursor="{
            content: () => '<span class=\'font-bold\'>Pet Mastery</span>',
            allowHTML: true,
            touch: ['click'],
            hideOnClick: false,
            followCursor: window.isMobile().any ? false : true,
            arrow: window.isMobile().any ? false : true,
            appendTo: $root,
            offset: window.isMobile().any ? [0, -20] : [0, 10],
        }">
            <span class="absolute top-0 right-0 -mt-2 -mr-2 flex gap-2">
                                    <span class="inline-flex items-center rounded-md bg-grayNoBackdrop px-2 py-1 text-xs font-medium text-gray-400 border border-gray-400/20">
    Lv. 1
</span>
                            </span>
            <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=150,height=150,format=auto/uploaded/skins/ByGAnT8nNgP0noQicPXr4mhgv1Ux6f-metaZHJhZ29uIDEucG5n-.png" class="inline-block w-12 h-12">       
        </button>
            <button class="rounded-lg bg-gray-800/40 border border-gray-700/40 w-full text-center py-2 px-3 relative bg-gradient-to-br "
        x-tooltip.cursor="{
            content: () => '<span class=\'font-bold\'>Guild Mastery</span>',
            allowHTML: true,
            touch: ['click'],
            hideOnClick: false,
            followCursor: window.isMobile().any ? false : true,
            arrow: window.isMobile().any ? false : true,
            appendTo: $root,
            offset: window.isMobile().any ? [0, -20] : [0, 10],
        }">
            <span class="absolute top-0 right-0 -mt-2 -mr-2 flex gap-2">
                                    <span class="inline-flex items-center rounded-md bg-grayNoBackdrop px-2 py-1 text-xs font-medium text-gray-400 border border-gray-400/20">
    Lv. 1
</span>
                            </span>
            <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=150,height=150,format=auto/uploaded/skins/01HQQJQD8BME4JCHG9H879XM0Q.png" class="inline-block w-12 h-12">       
        </button>
            <button class="rounded-lg bg-gray-800/40 border border-gray-700/40 w-full text-center py-2 px-3 relative bg-gradient-to-br "
        x-tooltip.cursor="{
            content: () => '<span class=\'font-bold\'>Lunar Mastery</span>',
            allowHTML: true,
            touch: ['click'],
            hideOnClick: false,
            followCursor: window.isMobile().any ? false : true,
            arrow: window.isMobile().any ? false : true,
            appendTo: $root,
            offset: window.isMobile().any ? [0, -20] : [0, 10],
        }">
            <span class="absolute top-0 right-0 -mt-2 -mr-2 flex gap-2">
                                    <span class="inline-flex items-center rounded-md bg-grayNoBackdrop px-2 py-1 text-xs font-medium text-gray-400 border border-gray-400/20">
    Lv. 1
</span>
                            </span>
            <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=150,height=150,format=auto/uploaded/skins/01J30CC0VYJB7E0BKVB06A2R6V.png" class="inline-block w-12 h-12">       
        </button>
            <button class="rounded-lg bg-gray-800/40 border border-gray-700/40 w-full text-center py-2 px-3 relative bg-gradient-to-br "
        x-tooltip.cursor="{
            content: () => '<span class=\'font-bold\'>Meditation</span>',
            allowHTML: true,
            touch: ['click'],
            hideOnClick: false,
            followCursor: window.isMobile().any ? false : true,
            arrow: window.isMobile().any ? false : true,
            appendTo: $root,
            offset: window.isMobile().any ? [0, -20] : [0, 10],
        }">
            <span class="absolute top-0 right-0 -mt-2 -mr-2 flex gap-2">
                                    <span class="inline-flex items-center rounded-md bg-grayNoBackdrop px-2 py-1 text-xs font-medium text-gray-400 border border-gray-400/20">
    Lv. 1
</span>
                            </span>
            <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=150,height=150,format=auto/uploaded/skins/01JQ6Z12W4GN3T7S1Q216R91XM.png" class="inline-block w-12 h-12">       
        </button>
    </div>

            <!-- Core Stats -->
            <div class="mt-4">
    <div>
    <div class="relative mt-4">
        <div class="absolute inset-0 flex items-center" aria-hidden="true">
        <div class="w-full border-t border-gray-800"></div>
        </div>
        <div class="relative flex justify-center">
        <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-900">Primary Stats</span>
        </div>
    </div>
</div>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-2 mt-4">
                    <div>
    <div class="overflow-hidden bg-grayNoBackdrop rounded-lg border border-gray-700/40" collapsible="collapsible" image-url="https://cdn.idle-mmo.com/stats/strength.png" experience="835" type="Strength" description="Strength increases your attack power which, in turn, increases your damage against opponents." event-name="strength"
         x-data="(() => {
                const storage_key = 'level-block:expanded';
                const collapse_lookup = 'strength';
                const expanded_types = (window.localStorage.getItem(storage_key) ?? '')
                    .split(',')
                    .map(value => value.trim())
                    .filter(Boolean);
                const is_collapsible = true;
                const default_collapsed = is_collapsible ? !expanded_types.includes(collapse_lookup) : false;

                return {
                    experience: 835,
                    level_difficulty: 260,
                    level_calculator: null,
                    processed_level: null,
                    is_collapsible: is_collapsible,
                    is_collapsed: default_collapsed,
                    collapse_lookup: collapse_lookup,
                    storage_key: storage_key,
                    expanded_types: expanded_types,
                    toggle_card(event) {
                    if(!this.is_collapsible)
                        return;

                    if(event.target.closest('[data-level-block-ignore-toggle]'))
                        return;

                    this.is_collapsed = !this.is_collapsed;
                    this.persistCollapsedPreference();
                },
                loadCollapsedPreference() {
                    if(!this.is_collapsible){
                        this.is_collapsed = false;
                        return;
                    }
                    this.expanded_types = this.getStoredExpandedTypes();
                    this.is_collapsed = !this.expanded_types.includes(this.collapse_lookup);
                },
                persistCollapsedPreference() {
                    if(!this.is_collapsible)
                        return;

                    this.expanded_types = this.getStoredExpandedTypes();
                    if(this.is_collapsed)
                        this.expanded_types = this.expanded_types.filter(type => type !== this.collapse_lookup);
                    else if(!this.expanded_types.includes(this.collapse_lookup))
                        this.expanded_types = [...this.expanded_types, this.collapse_lookup];

                    window.localStorage.setItem(this.storage_key, this.expanded_types.join(','));
                },
                getStoredExpandedTypes() {
                    const payload = window.localStorage.getItem(this.storage_key) ?? '';
                    return payload.split(',').map(value => value.trim()).filter(Boolean);
                },
            };
        })()"
                  x-init="
            loadCollapsedPreference();
            level_calculator = (new LevelCalculator()).setDifficulty(level_difficulty);
            processed_level = level_calculator.getLevel(experience);
            $watch('experience', function(){ 
                if(processed_level < level_calculator.getLevel(experience)){
                    processed_level = level_calculator.getLevel(experience);
                    window.dispatchEvent(new CustomEvent('level-up', { detail:{type: 'strength', level: processed_level} }))
                }
            });
            "
                      x-on:increment-experience.window="if($event.detail.type !== 'strength') return; experience = experience + $event.detail.amount"
                  x-on:refresh-level-block.window="
                        if($event.detail !== 'strength') 
                            return; 
                        
                        await fetch('https://web.idle-mmo.com/api/character/skills/experience?expires=1769114238&amp;signature=51492fc063c5d96f4ec9f3f079734e5f37bc8eb50e9f490e2c875736c01eb21d', {
                            method: 'POST',
                            headers: {
                                'Authorization': 'Bearer 3ulTlAsihPkNSk8iaXDDW9UPKadvSZmV2hWqbRvDxYyOExJgEXriCDEQRnKm',
                                'Accept': 'application/json',
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({'skill':'strength'})
                        }).then(async function(response){
                            if (!response.ok) {
                                let error_message;
                                try{
                                    response = await response.json();
                                    error_message = response.message;
                                }catch(e){
                                    error_message = 'Something went wrong. Please try again in a few moments.';
                                }
                                throw new Error(error_message);
                            }
                            return response.json();
                        }.bind(this)).then(function(response){
                            experience = response.experience;
                        }.bind(this)).catch(function(error){
                            let errorMessage = error.message ? error.message : error.toString();
                            displayToast(errorMessage, null, 'error', true);
                        });
                    "
         x-on:click="toggle_card($event)"
         x-bind:class="{'cursor-pointer': is_collapsible}"
    >
        <div class="flex items-center gap-3 px-4   py-3  bg-gray-700/20  hover:bg-gray-700/40 " >
                            <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=120,height=120,format=auto/https://cdn.idle-mmo.com/stats/strength.png" class="h-10 w-10 flex-shrink-0 object-contain">
                        <div class="flex flex-1 items-center gap-3">
                <div class="flex flex-1 flex-col justify-center gap-1">
                    <div class="flex items-center gap-x-2 flex-wrap">
                        <h3 class="text-sm font-semibold leading-6 text-gray-100">
                                                            Strength
                                                    </h3>
                                                    <div x-cloak x-show="is_collapsed" x-transition.opacity.duration.150ms>
                                <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 !text-gray-200 font-medium inline-flex gap-2 items-center border border-gray-700/40 !bg-gray-700/30">
    <template x-if="level_calculator.getLevel(experience) >= 100 && true">
                                        Max Level
                                    </template>
            
                                    
                                                                            <span>Lv. <span class="font-bold" x-text="level_calculator.getLevel(experience)"></span></span>
</span>                            </div>
                                            </div>
    
                                    <div class="w-full mt-1" x-cloak x-show="is_collapsed" x-transition.opacity.duration.150ms>
                        <div class="h-2 bg-gray-700 rounded-lg"><div class="h-2 w-full font-bold rounded-lg bg-gradient-to-r from-yellow-600 to-yellow-400 transition-[width]"
                                                                     style="width:0%;"
                                                                                                                                              :style="'width:'+Math.min(100, level_calculator.getExperiencePercentage(experience))+'%'"
                                                            ></div></div>
                    </div>
                                </div>
                                    <div class="flex h-10 w-10 items-center justify-center text-gray-400" aria-hidden="true">
                        <svg xmlns="http://www.w3.org/2000/svg"
                             viewBox="0 0 16 16"
                             fill="currentColor"
                             class="size-5 transition-transform duration-150"
                             :class="{'rotate-180': !is_collapsed}">
                            <path fill-rule="evenodd" d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
                        </svg>
                    </div>
                            </div>
        </div>
        <div x-cloak x-show="!is_collapsed" x-collapse>
            <div role="list" class="divide-y divide-white/5 border-t border-gray-700/40">
                <div class="relative flex items-center px-4 py-3 space-x-4">
                    <div class="flex-auto min-w-0">
                        <div>
                            <div class="h-2 bg-gray-600 rounded-lg" x-tooltip.cursor="level_calculator.getExperiencePercentage(experience)+'%'">
                                <div class="h-2 max-w-full font-bold rounded-lg bg-gradient-to-r from-yellow-600 to-yellow-400 transition-[width]"
                                                                              :style="'width:'+Math.min(100, level_calculator.getExperiencePercentage(experience))+'%'"
                                                                    ></div>
                            </div>
                        </div>
                        <div class="mt-2 flex items-center gap-x-2.5 text-xs leading-5 text-gray-400 w-full justify-between flex-wrap gap-y-2">
                            <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 !text-gray-200 font-medium flex gap-2 items-center border border-gray-700/40 !bg-gray-700/30">
    <template x-if="level_calculator.getLevel(experience) >= 100 && true">
                                    Max Level
                                </template>
    
                                
                                                                    <span>Lv. <span class="font-bold" x-text="level_calculator.getLevel(experience)"></span></span>
</span>    
                            <template x-if="level_calculator.getLevel(experience) < 100 || false">
                                <div class="inline-flex items-center text-sm leading-5 text-gray-400">
                                    <div class="inline-flex gap-1 items-center text-xs text-gray-200 font-semibold rounded-md border border-gray-700/40 !bg-gray-700/30 px-2 py-1 whitespace-nowrap rounded-r-none">
                                                                                    <span class="truncate" x-text="number_format(level_calculator.getRemainingExperience(experience))"></span> EXP <span class="hidden min-[350px]:inline-block">Needed</span>
                                                                            </div>
                                    <div class="inline-flex items-center text-xs text-gray-400 font-semibold rounded-md rounded-l-none border border-gray-700/40 !bg-gray-700/50 px-2 py-1 whitespace-nowrap">
                                                                                    <span x-text="Math.min(100, level_calculator.getExperiencePercentage(experience))"></span>%
                                                                            </div>
                                </div>
                            </template>
                        </div>
                    </div>
                </div>
            </div>
    
                    </div>
    </div>
    </div>
                    <div>
    <div class="overflow-hidden bg-grayNoBackdrop rounded-lg border border-gray-700/40" collapsible="collapsible" image-url="https://cdn.idle-mmo.com/stats/defence.png" experience="813" type="Defence" description="Defence increases your protection which, in turn, decreases the damage you receive against opponents." event-name="defence"
         x-data="(() => {
                const storage_key = 'level-block:expanded';
                const collapse_lookup = 'defence';
                const expanded_types = (window.localStorage.getItem(storage_key) ?? '')
                    .split(',')
                    .map(value => value.trim())
                    .filter(Boolean);
                const is_collapsible = true;
                const default_collapsed = is_collapsible ? !expanded_types.includes(collapse_lookup) : false;

                return {
                    experience: 813,
                    level_difficulty: 260,
                    level_calculator: null,
                    processed_level: null,
                    is_collapsible: is_collapsible,
                    is_collapsed: default_collapsed,
                    collapse_lookup: collapse_lookup,
                    storage_key: storage_key,
                    expanded_types: expanded_types,
                    toggle_card(event) {
                    if(!this.is_collapsible)
                        return;

                    if(event.target.closest('[data-level-block-ignore-toggle]'))
                        return;

                    this.is_collapsed = !this.is_collapsed;
                    this.persistCollapsedPreference();
                },
                loadCollapsedPreference() {
                    if(!this.is_collapsible){
                        this.is_collapsed = false;
                        return;
                    }
                    this.expanded_types = this.getStoredExpandedTypes();
                    this.is_collapsed = !this.expanded_types.includes(this.collapse_lookup);
                },
                persistCollapsedPreference() {
                    if(!this.is_collapsible)
                        return;

                    this.expanded_types = this.getStoredExpandedTypes();
                    if(this.is_collapsed)
                        this.expanded_types = this.expanded_types.filter(type => type !== this.collapse_lookup);
                    else if(!this.expanded_types.includes(this.collapse_lookup))
                        this.expanded_types = [...this.expanded_types, this.collapse_lookup];

                    window.localStorage.setItem(this.storage_key, this.expanded_types.join(','));
                },
                getStoredExpandedTypes() {
                    const payload = window.localStorage.getItem(this.storage_key) ?? '';
                    return payload.split(',').map(value => value.trim()).filter(Boolean);
                },
            };
        })()"
                  x-init="
            loadCollapsedPreference();
            level_calculator = (new LevelCalculator()).setDifficulty(level_difficulty);
            processed_level = level_calculator.getLevel(experience);
            $watch('experience', function(){ 
                if(processed_level < level_calculator.getLevel(experience)){
                    processed_level = level_calculator.getLevel(experience);
                    window.dispatchEvent(new CustomEvent('level-up', { detail:{type: 'defence', level: processed_level} }))
                }
            });
            "
                      x-on:increment-experience.window="if($event.detail.type !== 'defence') return; experience = experience + $event.detail.amount"
                  x-on:refresh-level-block.window="
                        if($event.detail !== 'defence') 
                            return; 
                        
                        await fetch('https://web.idle-mmo.com/api/character/skills/experience?expires=1769114238&amp;signature=51492fc063c5d96f4ec9f3f079734e5f37bc8eb50e9f490e2c875736c01eb21d', {
                            method: 'POST',
                            headers: {
                                'Authorization': 'Bearer 3ulTlAsihPkNSk8iaXDDW9UPKadvSZmV2hWqbRvDxYyOExJgEXriCDEQRnKm',
                                'Accept': 'application/json',
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({'skill':'defence'})
                        }).then(async function(response){
                            if (!response.ok) {
                                let error_message;
                                try{
                                    response = await response.json();
                                    error_message = response.message;
                                }catch(e){
                                    error_message = 'Something went wrong. Please try again in a few moments.';
                                }
                                throw new Error(error_message);
                            }
                            return response.json();
                        }.bind(this)).then(function(response){
                            experience = response.experience;
                        }.bind(this)).catch(function(error){
                            let errorMessage = error.message ? error.message : error.toString();
                            displayToast(errorMessage, null, 'error', true);
                        });
                    "
         x-on:click="toggle_card($event)"
         x-bind:class="{'cursor-pointer': is_collapsible}"
    >
        <div class="flex items-center gap-3 px-4   py-3  bg-gray-700/20  hover:bg-gray-700/40 " >
                            <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=120,height=120,format=auto/https://cdn.idle-mmo.com/stats/defence.png" class="h-10 w-10 flex-shrink-0 object-contain">
                        <div class="flex flex-1 items-center gap-3">
                <div class="flex flex-1 flex-col justify-center gap-1">
                    <div class="flex items-center gap-x-2 flex-wrap">
                        <h3 class="text-sm font-semibold leading-6 text-gray-100">
                                                            Defence
                                                    </h3>
                                                    <div x-cloak x-show="is_collapsed" x-transition.opacity.duration.150ms>
                                <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 !text-gray-200 font-medium inline-flex gap-2 items-center border border-gray-700/40 !bg-gray-700/30">
    <template x-if="level_calculator.getLevel(experience) >= 100 && true">
                                        Max Level
                                    </template>
            
                                    
                                                                            <span>Lv. <span class="font-bold" x-text="level_calculator.getLevel(experience)"></span></span>
</span>                            </div>
                                            </div>
    
                                    <div class="w-full mt-1" x-cloak x-show="is_collapsed" x-transition.opacity.duration.150ms>
                        <div class="h-2 bg-gray-700 rounded-lg"><div class="h-2 w-full font-bold rounded-lg bg-gradient-to-r from-yellow-600 to-yellow-400 transition-[width]"
                                                                     style="width:0%;"
                                                                                                                                              :style="'width:'+Math.min(100, level_calculator.getExperiencePercentage(experience))+'%'"
                                                            ></div></div>
                    </div>
                                </div>
                                    <div class="flex h-10 w-10 items-center justify-center text-gray-400" aria-hidden="true">
                        <svg xmlns="http://www.w3.org/2000/svg"
                             viewBox="0 0 16 16"
                             fill="currentColor"
                             class="size-5 transition-transform duration-150"
                             :class="{'rotate-180': !is_collapsed}">
                            <path fill-rule="evenodd" d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
                        </svg>
                    </div>
                            </div>
        </div>
        <div x-cloak x-show="!is_collapsed" x-collapse>
            <div role="list" class="divide-y divide-white/5 border-t border-gray-700/40">
                <div class="relative flex items-center px-4 py-3 space-x-4">
                    <div class="flex-auto min-w-0">
                        <div>
                            <div class="h-2 bg-gray-600 rounded-lg" x-tooltip.cursor="level_calculator.getExperiencePercentage(experience)+'%'">
                                <div class="h-2 max-w-full font-bold rounded-lg bg-gradient-to-r from-yellow-600 to-yellow-400 transition-[width]"
                                                                              :style="'width:'+Math.min(100, level_calculator.getExperiencePercentage(experience))+'%'"
                                                                    ></div>
                            </div>
                        </div>
                        <div class="mt-2 flex items-center gap-x-2.5 text-xs leading-5 text-gray-400 w-full justify-between flex-wrap gap-y-2">
                            <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 !text-gray-200 font-medium flex gap-2 items-center border border-gray-700/40 !bg-gray-700/30">
    <template x-if="level_calculator.getLevel(experience) >= 100 && true">
                                    Max Level
                                </template>
    
                                
                                                                    <span>Lv. <span class="font-bold" x-text="level_calculator.getLevel(experience)"></span></span>
</span>    
                            <template x-if="level_calculator.getLevel(experience) < 100 || false">
                                <div class="inline-flex items-center text-sm leading-5 text-gray-400">
                                    <div class="inline-flex gap-1 items-center text-xs text-gray-200 font-semibold rounded-md border border-gray-700/40 !bg-gray-700/30 px-2 py-1 whitespace-nowrap rounded-r-none">
                                                                                    <span class="truncate" x-text="number_format(level_calculator.getRemainingExperience(experience))"></span> EXP <span class="hidden min-[350px]:inline-block">Needed</span>
                                                                            </div>
                                    <div class="inline-flex items-center text-xs text-gray-400 font-semibold rounded-md rounded-l-none border border-gray-700/40 !bg-gray-700/50 px-2 py-1 whitespace-nowrap">
                                                                                    <span x-text="Math.min(100, level_calculator.getExperiencePercentage(experience))"></span>%
                                                                            </div>
                                </div>
                            </template>
                        </div>
                    </div>
                </div>
            </div>
    
                    </div>
    </div>
    </div>
                    <div>
    <div class="overflow-hidden bg-grayNoBackdrop rounded-lg border border-gray-700/40" collapsible="collapsible" image-url="https://cdn.idle-mmo.com/stats/speed.png" experience="0" type="Speed" description="Speed increases your agility which, in turn, affects the enemy\&#039;s chance of hitting you." event-name="speed"
         x-data="(() => {
                const storage_key = 'level-block:expanded';
                const collapse_lookup = 'speed';
                const expanded_types = (window.localStorage.getItem(storage_key) ?? '')
                    .split(',')
                    .map(value => value.trim())
                    .filter(Boolean);
                const is_collapsible = true;
                const default_collapsed = is_collapsible ? !expanded_types.includes(collapse_lookup) : false;

                return {
                    experience: 0,
                    level_difficulty: 260,
                    level_calculator: null,
                    processed_level: null,
                    is_collapsible: is_collapsible,
                    is_collapsed: default_collapsed,
                    collapse_lookup: collapse_lookup,
                    storage_key: storage_key,
                    expanded_types: expanded_types,
                    toggle_card(event) {
                    if(!this.is_collapsible)
                        return;

                    if(event.target.closest('[data-level-block-ignore-toggle]'))
                        return;

                    this.is_collapsed = !this.is_collapsed;
                    this.persistCollapsedPreference();
                },
                loadCollapsedPreference() {
                    if(!this.is_collapsible){
                        this.is_collapsed = false;
                        return;
                    }
                    this.expanded_types = this.getStoredExpandedTypes();
                    this.is_collapsed = !this.expanded_types.includes(this.collapse_lookup);
                },
                persistCollapsedPreference() {
                    if(!this.is_collapsible)
                        return;

                    this.expanded_types = this.getStoredExpandedTypes();
                    if(this.is_collapsed)
                        this.expanded_types = this.expanded_types.filter(type => type !== this.collapse_lookup);
                    else if(!this.expanded_types.includes(this.collapse_lookup))
                        this.expanded_types = [...this.expanded_types, this.collapse_lookup];

                    window.localStorage.setItem(this.storage_key, this.expanded_types.join(','));
                },
                getStoredExpandedTypes() {
                    const payload = window.localStorage.getItem(this.storage_key) ?? '';
                    return payload.split(',').map(value => value.trim()).filter(Boolean);
                },
            };
        })()"
                  x-init="
            loadCollapsedPreference();
            level_calculator = (new LevelCalculator()).setDifficulty(level_difficulty);
            processed_level = level_calculator.getLevel(experience);
            $watch('experience', function(){ 
                if(processed_level < level_calculator.getLevel(experience)){
                    processed_level = level_calculator.getLevel(experience);
                    window.dispatchEvent(new CustomEvent('level-up', { detail:{type: 'speed', level: processed_level} }))
                }
            });
            "
                      x-on:increment-experience.window="if($event.detail.type !== 'speed') return; experience = experience + $event.detail.amount"
                  x-on:refresh-level-block.window="
                        if($event.detail !== 'speed') 
                            return; 
                        
                        await fetch('https://web.idle-mmo.com/api/character/skills/experience?expires=1769114238&amp;signature=51492fc063c5d96f4ec9f3f079734e5f37bc8eb50e9f490e2c875736c01eb21d', {
                            method: 'POST',
                            headers: {
                                'Authorization': 'Bearer 3ulTlAsihPkNSk8iaXDDW9UPKadvSZmV2hWqbRvDxYyOExJgEXriCDEQRnKm',
                                'Accept': 'application/json',
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({'skill':'speed'})
                        }).then(async function(response){
                            if (!response.ok) {
                                let error_message;
                                try{
                                    response = await response.json();
                                    error_message = response.message;
                                }catch(e){
                                    error_message = 'Something went wrong. Please try again in a few moments.';
                                }
                                throw new Error(error_message);
                            }
                            return response.json();
                        }.bind(this)).then(function(response){
                            experience = response.experience;
                        }.bind(this)).catch(function(error){
                            let errorMessage = error.message ? error.message : error.toString();
                            displayToast(errorMessage, null, 'error', true);
                        });
                    "
         x-on:click="toggle_card($event)"
         x-bind:class="{'cursor-pointer': is_collapsible}"
    >
        <div class="flex items-center gap-3 px-4   py-3  bg-gray-700/20  hover:bg-gray-700/40 " >
                            <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=120,height=120,format=auto/https://cdn.idle-mmo.com/stats/speed.png" class="h-10 w-10 flex-shrink-0 object-contain">
                        <div class="flex flex-1 items-center gap-3">
                <div class="flex flex-1 flex-col justify-center gap-1">
                    <div class="flex items-center gap-x-2 flex-wrap">
                        <h3 class="text-sm font-semibold leading-6 text-gray-100">
                                                            Speed
                                                    </h3>
                                                    <div x-cloak x-show="is_collapsed" x-transition.opacity.duration.150ms>
                                <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 !text-gray-200 font-medium inline-flex gap-2 items-center border border-gray-700/40 !bg-gray-700/30">
    <template x-if="level_calculator.getLevel(experience) >= 100 && true">
                                        Max Level
                                    </template>
            
                                    
                                                                            <span>Lv. <span class="font-bold" x-text="level_calculator.getLevel(experience)"></span></span>
</span>                            </div>
                                            </div>
    
                                    <div class="w-full mt-1" x-cloak x-show="is_collapsed" x-transition.opacity.duration.150ms>
                        <div class="h-2 bg-gray-700 rounded-lg"><div class="h-2 w-full font-bold rounded-lg bg-gradient-to-r from-yellow-600 to-yellow-400 transition-[width]"
                                                                     style="width:0%;"
                                                                                                                                              :style="'width:'+Math.min(100, level_calculator.getExperiencePercentage(experience))+'%'"
                                                            ></div></div>
                    </div>
                                </div>
                                    <div class="flex h-10 w-10 items-center justify-center text-gray-400" aria-hidden="true">
                        <svg xmlns="http://www.w3.org/2000/svg"
                             viewBox="0 0 16 16"
                             fill="currentColor"
                             class="size-5 transition-transform duration-150"
                             :class="{'rotate-180': !is_collapsed}">
                            <path fill-rule="evenodd" d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
                        </svg>
                    </div>
                            </div>
        </div>
        <div x-cloak x-show="!is_collapsed" x-collapse>
            <div role="list" class="divide-y divide-white/5 border-t border-gray-700/40">
                <div class="relative flex items-center px-4 py-3 space-x-4">
                    <div class="flex-auto min-w-0">
                        <div>
                            <div class="h-2 bg-gray-600 rounded-lg" x-tooltip.cursor="level_calculator.getExperiencePercentage(experience)+'%'">
                                <div class="h-2 max-w-full font-bold rounded-lg bg-gradient-to-r from-yellow-600 to-yellow-400 transition-[width]"
                                                                              :style="'width:'+Math.min(100, level_calculator.getExperiencePercentage(experience))+'%'"
                                                                    ></div>
                            </div>
                        </div>
                        <div class="mt-2 flex items-center gap-x-2.5 text-xs leading-5 text-gray-400 w-full justify-between flex-wrap gap-y-2">
                            <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 !text-gray-200 font-medium flex gap-2 items-center border border-gray-700/40 !bg-gray-700/30">
    <template x-if="level_calculator.getLevel(experience) >= 100 && true">
                                    Max Level
                                </template>
    
                                
                                                                    <span>Lv. <span class="font-bold" x-text="level_calculator.getLevel(experience)"></span></span>
</span>    
                            <template x-if="level_calculator.getLevel(experience) < 100 || false">
                                <div class="inline-flex items-center text-sm leading-5 text-gray-400">
                                    <div class="inline-flex gap-1 items-center text-xs text-gray-200 font-semibold rounded-md border border-gray-700/40 !bg-gray-700/30 px-2 py-1 whitespace-nowrap rounded-r-none">
                                                                                    <span class="truncate" x-text="number_format(level_calculator.getRemainingExperience(experience))"></span> EXP <span class="hidden min-[350px]:inline-block">Needed</span>
                                                                            </div>
                                    <div class="inline-flex items-center text-xs text-gray-400 font-semibold rounded-md rounded-l-none border border-gray-700/40 !bg-gray-700/50 px-2 py-1 whitespace-nowrap">
                                                                                    <span x-text="Math.min(100, level_calculator.getExperiencePercentage(experience))"></span>%
                                                                            </div>
                                </div>
                            </template>
                        </div>
                    </div>
                </div>
            </div>
    
                    </div>
    </div>
    </div>
                    <div>
    <div class="overflow-hidden bg-grayNoBackdrop rounded-lg border border-gray-700/40" collapsible="collapsible" image-url="https://cdn.idle-mmo.com/stats/dexterity.png" experience="0" type="Dexterity" description="Dexterity increases your accuracy which, in turn, determines your chance of landing a successful hit." event-name="dexterity"
         x-data="(() => {
                const storage_key = 'level-block:expanded';
                const collapse_lookup = 'dexterity';
                const expanded_types = (window.localStorage.getItem(storage_key) ?? '')
                    .split(',')
                    .map(value => value.trim())
                    .filter(Boolean);
                const is_collapsible = true;
                const default_collapsed = is_collapsible ? !expanded_types.includes(collapse_lookup) : false;

                return {
                    experience: 0,
                    level_difficulty: 260,
                    level_calculator: null,
                    processed_level: null,
                    is_collapsible: is_collapsible,
                    is_collapsed: default_collapsed,
                    collapse_lookup: collapse_lookup,
                    storage_key: storage_key,
                    expanded_types: expanded_types,
                    toggle_card(event) {
                    if(!this.is_collapsible)
                        return;

                    if(event.target.closest('[data-level-block-ignore-toggle]'))
                        return;

                    this.is_collapsed = !this.is_collapsed;
                    this.persistCollapsedPreference();
                },
                loadCollapsedPreference() {
                    if(!this.is_collapsible){
                        this.is_collapsed = false;
                        return;
                    }
                    this.expanded_types = this.getStoredExpandedTypes();
                    this.is_collapsed = !this.expanded_types.includes(this.collapse_lookup);
                },
                persistCollapsedPreference() {
                    if(!this.is_collapsible)
                        return;

                    this.expanded_types = this.getStoredExpandedTypes();
                    if(this.is_collapsed)
                        this.expanded_types = this.expanded_types.filter(type => type !== this.collapse_lookup);
                    else if(!this.expanded_types.includes(this.collapse_lookup))
                        this.expanded_types = [...this.expanded_types, this.collapse_lookup];

                    window.localStorage.setItem(this.storage_key, this.expanded_types.join(','));
                },
                getStoredExpandedTypes() {
                    const payload = window.localStorage.getItem(this.storage_key) ?? '';
                    return payload.split(',').map(value => value.trim()).filter(Boolean);
                },
            };
        })()"
                  x-init="
            loadCollapsedPreference();
            level_calculator = (new LevelCalculator()).setDifficulty(level_difficulty);
            processed_level = level_calculator.getLevel(experience);
            $watch('experience', function(){ 
                if(processed_level < level_calculator.getLevel(experience)){
                    processed_level = level_calculator.getLevel(experience);
                    window.dispatchEvent(new CustomEvent('level-up', { detail:{type: 'dexterity', level: processed_level} }))
                }
            });
            "
                      x-on:increment-experience.window="if($event.detail.type !== 'dexterity') return; experience = experience + $event.detail.amount"
                  x-on:refresh-level-block.window="
                        if($event.detail !== 'dexterity') 
                            return; 
                        
                        await fetch('https://web.idle-mmo.com/api/character/skills/experience?expires=1769114238&amp;signature=51492fc063c5d96f4ec9f3f079734e5f37bc8eb50e9f490e2c875736c01eb21d', {
                            method: 'POST',
                            headers: {
                                'Authorization': 'Bearer 3ulTlAsihPkNSk8iaXDDW9UPKadvSZmV2hWqbRvDxYyOExJgEXriCDEQRnKm',
                                'Accept': 'application/json',
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({'skill':'dexterity'})
                        }).then(async function(response){
                            if (!response.ok) {
                                let error_message;
                                try{
                                    response = await response.json();
                                    error_message = response.message;
                                }catch(e){
                                    error_message = 'Something went wrong. Please try again in a few moments.';
                                }
                                throw new Error(error_message);
                            }
                            return response.json();
                        }.bind(this)).then(function(response){
                            experience = response.experience;
                        }.bind(this)).catch(function(error){
                            let errorMessage = error.message ? error.message : error.toString();
                            displayToast(errorMessage, null, 'error', true);
                        });
                    "
         x-on:click="toggle_card($event)"
         x-bind:class="{'cursor-pointer': is_collapsible}"
    >
        <div class="flex items-center gap-3 px-4   py-3  bg-gray-700/20  hover:bg-gray-700/40 " >
                            <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=120,height=120,format=auto/https://cdn.idle-mmo.com/stats/dexterity.png" class="h-10 w-10 flex-shrink-0 object-contain">
                        <div class="flex flex-1 items-center gap-3">
                <div class="flex flex-1 flex-col justify-center gap-1">
                    <div class="flex items-center gap-x-2 flex-wrap">
                        <h3 class="text-sm font-semibold leading-6 text-gray-100">
                                                            Dexterity
                                                    </h3>
                                                    <div x-cloak x-show="is_collapsed" x-transition.opacity.duration.150ms>
                                <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 !text-gray-200 font-medium inline-flex gap-2 items-center border border-gray-700/40 !bg-gray-700/30">
    <template x-if="level_calculator.getLevel(experience) >= 100 && true">
                                        Max Level
                                    </template>
            
                                    
                                                                            <span>Lv. <span class="font-bold" x-text="level_calculator.getLevel(experience)"></span></span>
</span>                            </div>
                                            </div>
    
                                    <div class="w-full mt-1" x-cloak x-show="is_collapsed" x-transition.opacity.duration.150ms>
                        <div class="h-2 bg-gray-700 rounded-lg"><div class="h-2 w-full font-bold rounded-lg bg-gradient-to-r from-yellow-600 to-yellow-400 transition-[width]"
                                                                     style="width:0%;"
                                                                                                                                              :style="'width:'+Math.min(100, level_calculator.getExperiencePercentage(experience))+'%'"
                                                            ></div></div>
                    </div>
                                </div>
                                    <div class="flex h-10 w-10 items-center justify-center text-gray-400" aria-hidden="true">
                        <svg xmlns="http://www.w3.org/2000/svg"
                             viewBox="0 0 16 16"
                             fill="currentColor"
                             class="size-5 transition-transform duration-150"
                             :class="{'rotate-180': !is_collapsed}">
                            <path fill-rule="evenodd" d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
                        </svg>
                    </div>
                            </div>
        </div>
        <div x-cloak x-show="!is_collapsed" x-collapse>
            <div role="list" class="divide-y divide-white/5 border-t border-gray-700/40">
                <div class="relative flex items-center px-4 py-3 space-x-4">
                    <div class="flex-auto min-w-0">
                        <div>
                            <div class="h-2 bg-gray-600 rounded-lg" x-tooltip.cursor="level_calculator.getExperiencePercentage(experience)+'%'">
                                <div class="h-2 max-w-full font-bold rounded-lg bg-gradient-to-r from-yellow-600 to-yellow-400 transition-[width]"
                                                                              :style="'width:'+Math.min(100, level_calculator.getExperiencePercentage(experience))+'%'"
                                                                    ></div>
                            </div>
                        </div>
                        <div class="mt-2 flex items-center gap-x-2.5 text-xs leading-5 text-gray-400 w-full justify-between flex-wrap gap-y-2">
                            <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 !text-gray-200 font-medium flex gap-2 items-center border border-gray-700/40 !bg-gray-700/30">
    <template x-if="level_calculator.getLevel(experience) >= 100 && true">
                                    Max Level
                                </template>
    
                                
                                                                    <span>Lv. <span class="font-bold" x-text="level_calculator.getLevel(experience)"></span></span>
</span>    
                            <template x-if="level_calculator.getLevel(experience) < 100 || false">
                                <div class="inline-flex items-center text-sm leading-5 text-gray-400">
                                    <div class="inline-flex gap-1 items-center text-xs text-gray-200 font-semibold rounded-md border border-gray-700/40 !bg-gray-700/30 px-2 py-1 whitespace-nowrap rounded-r-none">
                                                                                    <span class="truncate" x-text="number_format(level_calculator.getRemainingExperience(experience))"></span> EXP <span class="hidden min-[350px]:inline-block">Needed</span>
                                                                            </div>
                                    <div class="inline-flex items-center text-xs text-gray-400 font-semibold rounded-md rounded-l-none border border-gray-700/40 !bg-gray-700/50 px-2 py-1 whitespace-nowrap">
                                                                                    <span x-text="Math.min(100, level_calculator.getExperiencePercentage(experience))"></span>%
                                                                            </div>
                                </div>
                            </template>
                        </div>
                    </div>
                </div>
            </div>
    
                    </div>
    </div>
    </div>
            </div>
</div>

            <!-- Additional Stats -->
            <div>
    <div class="relative mt-4">
        <div class="absolute inset-0 flex items-center" aria-hidden="true">
        <div class="w-full border-t border-gray-800"></div>
        </div>
        <div class="relative flex justify-center">
        <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-900">Secondary Stats</span>
        </div>
    </div>
    <div class="mt-4 overflow-hidden bg-gray-800/40 border border-gray-700/40 rounded-lg">
        <div class="w-full divide-y divide-gray-700/30">
                        <div class="flex items-center justify-between">
                <div>
                    <div class="flex items-center px-3 py-3 text-sm font-medium text-gray-300 rounded-md group">
                        <span class="flex-shrink-0">
                                                    <svg xmlns='http://www.w3.org/2000/svg' class='h-5 w-5 text-gray-500' viewBox='0 0 14 14'>
	<path fill='currentColor' fill-rule='evenodd' d='M5.365.263A.5.5 0 0 1 5.867.11c1.109.289 2.813 1.04 4.249 2.377c1.447 1.349 2.631 3.306 2.631 5.975c0 1.057-.237 2.35-1.058 3.421c-.834 1.09-2.217 1.88-4.363 2.013H7.32c-2.86.144-4.868-1.342-5.675-3.389c-.8-2.029-.399-4.553 1.404-6.468a.5.5 0 0 1 .74.012l1.265 1.436c.463-.826.688-1.546.722-2.267c.035-.733-.127-1.507-.5-2.44a.5.5 0 0 1 .09-.517Zm-.05 7.605a.75.75 0 1 1 1.5 0a.75.75 0 0 1-1.5 0m3.99.126a.5.5 0 0 0-.708-.707L5.314 10.57a.5.5 0 1 0 .707.707zm-1.33 2.703a.75.75 0 1 1 1.5 0a.75.75 0 0 1-1.5 0' clip-rule='evenodd' />
</svg>
                                                </span>

                        <div class="ml-4 ">
                            <div class="font-bold">Critical Chance</div>
                                                        <div class="text-sm text-gray-400">Chance of landing a critical hit.</div>
                                                    </div>
                    </div>
                </div>
                <div class="mr-4 font-semibold text-gray-200 text-sm whitespace-nowrap">
                    <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 !text-gray-200 !font-bold">
    5%
</span>                </div>
            </div>
                        <div class="flex items-center justify-between">
                <div>
                    <div class="flex items-center px-3 py-3 text-sm font-medium text-gray-300 rounded-md group">
                        <span class="flex-shrink-0">
                                                    <svg xmlns='http://www.w3.org/2000/svg'  class='h-5 w-5 text-gray-500' viewBox='0 0 48 48'>
	<path fill='currentColor' fill-rule='evenodd' d='m16.871 33.044l-.873 11.66c-.062.82.667 1.383 1.318 1.018c4.613-2.584 19.062-12.074 26.386-32.932c.336-.957-.567-1.82-1.337-1.28c-4.326 3.03-13.78 9.29-19.623 10.484c0 0 3.742-2.6 5.981-6.588a1.2 1.2 0 0 0-.043-1.245L20.513 2.389c-.484-.697-1.478-.408-1.652.481l-2.543 12.937L4.384 26.223c-.598.522-.476 1.577.215 1.856zm21.104-4.596c-.756 1.055-2.384 3.224-3.887 4.55c-.3.265-.26.709.084.925l7.943 4.986c.478.3 1.123-.056 1.043-.576c-.37-2.383-1.434-7.351-4.125-9.959c-.3-.29-.819-.26-1.059.074' clip-rule='evenodd' />
</svg>
                                                </span>

                        <div class="ml-4 ">
                            <div class="font-bold">Critical Damage</div>
                                                        <div class="text-sm text-gray-400">Bonus damage when landing a critical strike.</div>
                                                    </div>
                    </div>
                </div>
                <div class="mr-4 font-semibold text-gray-200 text-sm whitespace-nowrap">
                    <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 !text-gray-200 !font-bold">
    0
</span>                </div>
            </div>
                        <div class="flex items-center justify-between">
                <div>
                    <div class="flex items-center px-3 py-3 text-sm font-medium text-gray-300 rounded-md group">
                        <span class="flex-shrink-0">
                                                    <svg xmlns='http://www.w3.org/2000/svg' class='h-5 w-5 text-gray-500' viewBox='0 0 24 24'>
                        <path fill='currentColor' d='m7.048 13.406l3.535 3.536l-1.413 1.414l1.415 1.415l-1.414 1.414l-2.475-2.475l-2.829 2.829l-1.414-1.414l2.829-2.83l-2.475-2.474l1.414-1.414l1.414 1.413zM3 3l3.546.003l11.817 11.818l1.415-1.414l1.415 1.414l-2.475 2.475l2.828 2.829l-1.414 1.414l-2.829-2.829l-2.474 2.475l-1.415-1.414l1.414-1.415L3.002 6.531zm14.457 0L21 3.003l.002 3.523l-4.053 4.052l-3.536-3.535z' />
                    </svg>
                                                </span>

                        <div class="ml-4 ">
                            <div class="font-bold">Attack Power</div>
                                                        <div class="text-sm text-gray-400">The total attack power from skills and equipment.</div>
                                                    </div>
                    </div>
                </div>
                <div class="mr-4 font-semibold text-gray-200 text-sm whitespace-nowrap">
                    <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 !text-gray-200 !font-bold">
    12
</span>                </div>
            </div>
                        <div class="flex items-center justify-between">
                <div>
                    <div class="flex items-center px-3 py-3 text-sm font-medium text-gray-300 rounded-md group">
                        <span class="flex-shrink-0">
                                                    <svg xmlns='http://www.w3.org/2000/svg' class='h-5 w-5 text-gray-500'  viewBox='0 0 512 512'>
                    <path fill='currentColor' d='m466.5 83.7l-192-80a48.15 48.15 0 0 0-36.9 0l-192 80C27.7 91.1 16 108.6 16 128c0 198.5 114.5 335.7 221.5 380.3c11.8 4.9 25.1 4.9 36.9 0C360.1 472.6 496 349.3 496 128c0-19.4-11.7-36.9-29.5-44.3M256.1 446.3l-.1-381l175.9 73.3c-3.3 151.4-82.1 261.1-175.8 307.7' />
                </svg>
                                                </span>

                        <div class="ml-4 ">
                            <div class="font-bold">Protection</div>
                                                        <div class="text-sm text-gray-400">Total protection gained from skills and equipment.</div>
                                                    </div>
                    </div>
                </div>
                <div class="mr-4 font-semibold text-gray-200 text-sm whitespace-nowrap">
                    <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 !text-gray-200 !font-bold">
    12
</span>                </div>
            </div>
                        <div class="flex items-center justify-between">
                <div>
                    <div class="flex items-center px-3 py-3 text-sm font-medium text-gray-300 rounded-md group">
                        <span class="flex-shrink-0">
                                                    <svg xmlns='http://www.w3.org/2000/svg' class='h-5 w-5 text-gray-500' viewBox='0 0 28 28'>
                        <path fill='currentColor' d='M13.251 5.501a5.125 5.125 0 0 1 7.248 7.248L8.955 24.293a1 1 0 0 0 1.414 1.414l11.544-11.544A7.125 7.125 0 1 0 11.837 4.087l-4.5 4.499V3a1 1 0 1 0-2 0v8a1 1 0 0 0 1 1h8.003a1 1 0 1 0 0-2H8.752z' />
                    </svg>
                                                </span>

                        <div class="ml-4 ">
                            <div class="font-bold">Agility</div>
                                                        <div class="text-sm text-gray-400">Affects the chance of an enemy landing a hit.</div>
                                                    </div>
                    </div>
                </div>
                <div class="mr-4 font-semibold text-gray-200 text-sm whitespace-nowrap">
                    <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 !text-gray-200 !font-bold">
    2
</span>                </div>
            </div>
                        <div class="flex items-center justify-between">
                <div>
                    <div class="flex items-center px-3 py-3 text-sm font-medium text-gray-300 rounded-md group">
                        <span class="flex-shrink-0">
                                                    <svg xmlns='http://www.w3.org/2000/svg' class='w-5 h-5 text-gray-500' viewBox='0 0 24 24'>
                        <path fill='currentColor' d='M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10a10 10 0 0 0 10-10A10 10 0 0 0 12 2m0 2a8 8 0 0 1 8 8a8 8 0 0 1-8 8a8 8 0 0 1-8-8a8 8 0 0 1 8-8m0 2a6 6 0 0 0-6 6a6 6 0 0 0 6 6a6 6 0 0 0 6-6a6 6 0 0 0-6-6m0 2a4 4 0 0 1 4 4a4 4 0 0 1-4 4a4 4 0 0 1-4-4a4 4 0 0 1 4-4m0 2a2 2 0 0 0-2 2a2 2 0 0 0 2 2a2 2 0 0 0 2-2a2 2 0 0 0-2-2' />
                    </svg>
                                                </span>

                        <div class="ml-4 ">
                            <div class="font-bold">Accuracy</div>
                                                        <div class="text-sm text-gray-400">The chance of landing a successful hit.</div>
                                                    </div>
                    </div>
                </div>
                <div class="mr-4 font-semibold text-gray-200 text-sm whitespace-nowrap">
                    <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 !text-gray-200 !font-bold">
    2
</span>                </div>
            </div>
                        <div class="flex items-center justify-between">
                <div>
                    <div class="flex items-center px-3 py-3 text-sm font-medium text-gray-300 rounded-md group">
                        <span class="flex-shrink-0">
                                                    <svg xmlns='http://www.w3.org/2000/svg' class='w-5 h-5 text-gray-500' viewBox='0 0 24 24'>
	<path fill='currentColor' d='M23 8v8l-3 1l-3.09-5.5c-.26-.46-.99-.23-.91.31L17 21L7 17l1.15-8.06A6.92 6.92 0 0 1 15 3h8l-1.58 2.37C22.36 5.88 23 6.86 23 8M4 5h3.58c.5-.76 1.12-1.43 1.83-2H4c-.55 0-1 .45-1 1s.45 1 1 1m1.84 6H2c-.55 0-1 .45-1 1s.45 1 1 1h3.55zM3 9h3.12l.05-.34c.08-.58.22-1.13.41-1.66H3c-.55 0-1 .45-1 1s.45 1 1 1' />
</svg>
                                                </span>

                        <div class="ml-4 ">
                            <div class="font-bold">Movement Speed</div>
                                                        <div class="text-sm text-gray-400">Improves travel and hunting speed.</div>
                                                    </div>
                    </div>
                </div>
                <div class="mr-4 font-semibold text-gray-200 text-sm whitespace-nowrap">
                    <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 !text-gray-200 !font-bold">
    3m/s
</span>                </div>
            </div>
                        <div class="flex items-center justify-between">
                <div>
                    <div class="flex items-center px-3 py-3 text-sm font-medium text-gray-300 rounded-md group">
                        <span class="flex-shrink-0">
                                                    <svg xmlns='http://www.w3.org/2000/svg' class='w-5 h-5 text-gray-500' viewBox='0 0 24 24'>
                    <path fill='currentColor' d='m22 2l-4.61 1.75l-6.93 6.93L14 14.22l6.92-6.93C22.43 5.78 22 2 22 2M8.33 10l-1.41 1.39l1.41 1.41l-5.65 5.66L6.21 22l5.66-5.66l1.41 1.42l1.42-1.42z' />
                </svg>
                                                </span>

                        <div class="ml-4 ">
                            <div class="font-bold">Damage</div>
                                                        <div class="text-sm text-gray-400">Bonus damage that is applied on the end of every attack.</div>
                                                    </div>
                    </div>
                </div>
                <div class="mr-4 font-semibold text-gray-200 text-sm whitespace-nowrap">
                    <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 !text-gray-200 !font-bold">
    0
</span>                </div>
            </div>
                    </div>
    </div>
</div>

        </div>
    </div>

    
            <div>
            <div x-data="profileComments" class="bg-gray-800/40 border border-gray-700/40 rounded-lg mt-4" id="profile-comments" x-intersect="load()">
    <div class="flex items-center px-4 py-2 border-b border-gray-700/30 bg-gray-700/20">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-4 text-gray-600">
            <path fill-rule="evenodd" d="M4.848 2.771A49.144 49.144 0 0 1 12 2.25c2.43 0 4.817.178 7.152.52 1.978.292 3.348 2.024 3.348 3.97v6.02c0 1.946-1.37 3.678-3.348 3.97a48.901 48.901 0 0 1-3.476.383.39.39 0 0 0-.297.17l-2.755 4.133a.75.75 0 0 1-1.248 0l-2.755-4.133a.39.39 0 0 0-.297-.17 48.9 48.9 0 0 1-3.476-.384c-1.978-.29-3.348-2.024-3.348-3.97V6.741c0-1.946 1.37-3.68 3.348-3.97ZM6.75 8.25a.75.75 0 0 1 .75-.75h9a.75.75 0 0 1 0 1.5h-9a.75.75 0 0 1-.75-.75Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H7.5Z" clip-rule="evenodd" />
        </svg>

        <div class="pl-4">
            <h3 class="text-sm font-semibold leading-7 text-gray-100">Comments</h3>
        </div>
    </div>
    <div class="mx-4 my-4">
    
    
            <form @submit.prevent="submitComment" class="mb-4">
            <div class="flex flex-col gap-2">
                <div class="flex flex-col sm:flex-row gap-2">
                    <div class="flex-1">
                        <!-- This wrapper *is* the visible textarea -->
                        <div class="relative bg-gray-700/40 rounded-md  pb-6">

                            <!-- Real textarea: transparent, no border -->
                            <textarea
                                x-model="new_comment"
                                :disabled="is_submitting"
                                rows="2"
                                placeholder="Write a comment..."
                                maxlength="250"
                                class="w-full bg-transparent border-0 resize-none text-sm text-gray-300 placeholder-gray-500 focus:outline-none focus:ring-0"
                            ></textarea>

                            <!-- Counter lives inside the same coloured box -->
                            <div class="pointer-events-none absolute bottom-2 left-0 text-xs text-gray-400 ml-3">
                                <span x-text="new_comment.length"></span>/250
                            </div>
                        </div>
                    </div>

                    <div class="sm:flex-shrink-0">
                        <button type="submit" 

                 
                class="inline-block rounded px-4 py-2 bg-gradient-to-b font-bold bg-indigo-600 hover:bg-indigo-500 text-sm w-full sm:w-auto h-full" type="submit" x-bind:disabled="!new_comment.trim() || is_submitting">
            <span x-show="!is_submitting">Post</span>
                            <span x-show="is_submitting">Posting...</span>
        </button>
                    </div>
                </div>
            </div>
        </form>
        
    
    <div x-show="is_processing && page === 1" class="text-center py-8">
        <div class="inline-flex items-center text-sm text-gray-400">
            <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            Loading comments...
        </div>
    </div>
    
    
    <div x-show="!is_processing || page > 1" class="space-y-2">
        <template x-if="data?.comments?.length > 0">
            <div class="space-y-2 pb-4">
                <template x-for="comment in data?.comments" :key="comment.id">
                    <div>
                        
                        <div class="bg-gray-900/60 border border-gray-700/40 rounded-md p-3 relative flex gap-3 break-words">
                            <div class="flex-shrink-0">
                                <a :href="comment.character.profile_url" class="block relative size-12 rounded-full overflow-hidden">
                                    <template x-if="comment.character.background_url">
                                        <img 
                                            :src="comment.character.background_url"
                                            class="absolute inset-0 w-full h-full object-cover"
                                        >
                                    </template>
                                    <img 
                                        :src="comment.character.avatar_url" 
                                        class="relative size-20 max-w-none -ml-4 mt-1"
                                    >
                                </a>
                            </div>
                            <div class="flex-1 min-w-0">
                                <div class="flex items-start justify-between">
                                    <div class="flex-1 min-w-0">
                                        <div class="flex flex-col sm:flex-row sm:items-center sm:gap-2 mb-1">
                                            <span x-html="comment.character.formatted_name" class="text-sm font-medium"></span>
                                            <div class="flex items-center gap-2">
                                                <span class="text-gray-400 opacity-40 hidden sm:inline">&bullet;</span>
                                                <span class="text-sm text-gray-500" x-text="comment.created_at_human"></span>
                                            </div>
                                        </div>
                                        <p class="text-sm text-gray-300 font-medium break-words markdown" x-html="markdownize(comment.comment)"></p>
                                        
                                        
                                        <button
                                            @click="startReply(comment.id)"
                                            x-show="replying_to !== comment.id"
                                            class="mt-2 text-sm text-yellow-400 hover:text-yellow-500 font-medium flex gap-1 items-center"
                                        >
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                                                <path fill-rule="evenodd" d="M12.5 9.75A2.75 2.75 0 0 0 9.75 7H4.56l2.22 2.22a.75.75 0 1 1-1.06 1.06l-3.5-3.5a.75.75 0 0 1 0-1.06l3.5-3.5a.75.75 0 0 1 1.06 1.06L4.56 5.5h5.19a4.25 4.25 0 0 1 0 8.5h-1a.75.75 0 0 1 0-1.5h1a2.75 2.75 0 0 0 2.75-2.75Z" clip-rule="evenodd" />
                                            </svg>
                                            Reply
                                        </button>
                                    </div>
                                    <div class="flex items-center gap-1 absolute top-0 right-0 mt-2 mr-2">
                                        <button x-on:click="$dispatch('report', {type: 'PROFILE_COMMENT', character_profile_comment_id: comment.id})" class="text-gray-500 hover:text-yellow-400 transition-colors">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4 ">
                                                <path fill-rule="evenodd" d="M6.701 2.25c.577-1 2.02-1 2.598 0l5.196 9a1.5 1.5 0 0 1-1.299 2.25H2.804a1.5 1.5 0 0 1-1.3-2.25l5.197-9ZM8 4a.75.75 0 0 1 .75.75v3a.75.75 0 1 1-1.5 0v-3A.75.75 0 0 1 8 4Zm0 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z" clip-rule="evenodd" />
                                            </svg>
                                        </button>
                                        <template x-if="comment.can_delete">
                                            <div class="relative" x-data="{ open: false }" @click.away="open = false">
                                                <button
                                                    @click="open = !open"
                                                    class="p-1 text-gray-500 hover:text-red-400 focus:outline-none transition-colors"
                                                >
                                                    <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                                    </svg>
                                                </button>
                                                <div x-show="open" x-transition class="absolute right-0 mt-2 w-48 bg-slate-800 rounded-md shadow-lg z-10">
                                                    <div class="p-3">
                                                        <div class="flex gap-2 flex-wrap">
                                                            <button type="button" 
                 
                class="rounded px-4 py-2 bg-gradient-to-b font-bold bg-red-600/80 hover:bg-red-600 text-sm" x-on:click="deleteComment(comment.id); open = false">
            Delete
        </button>
                                                            <button type="button" 
                 
                class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block" x-on:click="open = false">
            Cancel
        </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </template>
                                    </div>
                                </div>
                                
                                
                                                                    <div x-show="replying_to === comment.id" class="mt-3">
                                        <form @submit.prevent="submitReply(comment.id)">
                                            <div class="relative">
                                                <textarea
                                                    x-model="reply_text"
                                                    :id="'reply-input-' + comment.id"
                                                    :disabled="is_submitting"
                                                    class="w-full bg-gray-700/40 border-0 rounded-md px-3 pt-2 pb-1 text-sm text-gray-300 placeholder-gray-500 focus:outline-none focus:border-blue-500"
                                                    placeholder="Write a reply..."
                                                    rows="2"
                                                    maxlength="250"
                                                ></textarea>
                                                <div class="text-gray-400 text-xs">
                                                    <span x-text="reply_text.length"></span>/250
                                                </div>
                                            </div>
                                            <div class="flex gap-2 mt-2">
                                                <button type="submit" 

                 
                class="inline-block rounded px-4 py-2 bg-gradient-to-b font-bold bg-indigo-600 hover:bg-indigo-500 text-sm" type="submit" x-bind:disabled="!reply_text.trim() || is_submitting">
            Post
        </button>
                                                <button type="button" 
                 
                class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block" type="button" @click="cancelReply">
            Cancel
        </button>
                                            </div>
                                        </form>
                                    </div>
                                                            </div>
                        </div>
                        
                        
                        <template x-if="comment.replies && comment.replies.length > 0">
                            <div class="ml-12 mt-2 space-y-2">
                                <template x-for="reply in comment.replies" :key="reply.id">
                                    <div class="bg-gray-900/60 rounded-md p-3 relative flex gap-3">
                                        <div class="flex-shrink-0">
                                            <a :href="reply.character.profile_url" class="block relative w-12 h-12 rounded-full overflow-hidden">
                                                <template x-if="reply.character.background_url">
                                                    <img 
                                                        :src="reply.character.background_url" 
                                                        class="absolute inset-0 w-full h-full object-cover"
                                                    >
                                                </template>
                                                <img 
                                                    :src="reply.character.avatar_url" 
                                                    class="relative size-20 max-w-none -ml-4 mt-1"
                                                >
                                            </a>
                                        </div>
                                        <div class="flex-1">
                                            <div class="flex items-start justify-between">
                                                <div class="flex-1">
                                                    <div class="flex flex-col sm:flex-row sm:items-center sm:gap-2 mb-1 text-sm">
                                                        <span x-html="reply.character.formatted_name" class="font-bold"></span>
                                                        <div class="flex items-center gap-2">
                                                            <span class="text-gray-400 opacity-40 hidden sm:inline">&bullet;</span>
                                                            <span class="text-gray-500" x-text="reply.created_at_human"></span>
                                                        </div>
                                                    </div>
                                                    <p class="text-sm text-gray-300 whitespace-pre-wrap font-medium" x-html="markdownize(reply.comment)"></p>
                                                </div>
                                                <template x-if="reply.can_delete">
                                                    <div class="relative" x-data="{ open: false }" @click.away="open = false">
                                                        <button
                                                            @click="open = !open"
                                                            class="ml-2 p-1 text-gray-500 hover:text-red-400 focus:outline-none"
                                                        >
                                                            <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                                            </svg>
                                                        </button>
                                                        <div x-show="open" x-transition class="absolute right-0 mt-2 w-48 bg-gray-800 rounded-md shadow-lg z-10">
                                                            <div class="p-3">
                                                                <div class="flex gap-2">
                                                                    <button type="button" 
                 
                class="rounded px-4 py-2 bg-gradient-to-b font-bold bg-red-600/80 hover:bg-red-600 text-sm" x-on:click="deleteComment(reply.id); open = false">
            Delete
        </button>
                                                                    <button type="button" 
                 
                class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block" x-on:click="open = false">
            Cancel
        </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </template>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                            </div>
                        </template>
                    </div>
                </template>
                
                
                <template x-if="data.has_more_pages">
                    <div class="text-center pt-4">
                        <button type="button" 
                 
                class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block" @click="loadMore" x-bind:disabled="is_processing">
            <span x-show="!is_processing">Load More</span>
                            <span x-show="is_processing">Loading...</span>
        </button>
                    </div>
                </template>
            </div>
        </template>
        
        
        <template x-if="!is_processing && (!data || !data.comments || data.comments.length === 0)">
            <div class="text-center py-8">
                <p class="text-sm text-gray-500">No comments yet. Be the first to comment!</p>
            </div>
        </template>
    </div>
</div>
</div>

        </div>
    
    <!-- Tutorial -->
                    </div>
                </div>
            </div>
        </div>

        
        <div x-data="search"
@keydown.window.prevent.cmd.slash="$dispatch('open-modal', 'global-search');"
@keydown.window.prevent.alt.slash="$dispatch('open-modal', 'global-search');"> <div x-data="modal('global-search', false, null, 1)" x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'global-search') })" x-on:open-modal.window="$event.detail == 'global-search' ? show = true : null" x-on:close-modal.window="$event.detail == 'global-search' ? show = false : null" x-on:close.stop="show = false" x-on:keydown.escape.window="show = false" x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()" x-on:keydown.shift.tab.prevent="prevFocusable().focus()" x-show="show" class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" style="display: none;"> <div class="flex min-h-full justify-center md:p-4 text-center items-center sm:p-0"> <div x-show="show" class="fixed inset-0 transform transition-all" x-on:click="show = false" x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms> <div class="absolute inset-0 bg-immo opacity-70"></div> </div> <div x-show="show" class="md:mb-6 bg-gray-800 border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-2xl sm:mx-8 md:mx-auto relative max-h-[90vh]" x-transition:enter.duration.300ms x-transition:leave.duration.200ms> <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]" x-ref="scrollContainer" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" @scroll="handleScroll()"> <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible"> <template x-if="content_visible"> <div x-data="{show:false}" x-init="$nextTick(() => show = true)"> <div class="mx-auto max-w-2xl transform divide-y divide-gray-500 divide-opacity-20 overflow-hidden rounded-xl text-left shadow-2xl transition-all"> <div class="relative"> <svg class="pointer-events-none absolute left-4 top-3.5 h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true"> <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" /> </svg> <input type="text" x-on:input.debounce="performSearch();" x-model="search_input" class="h-12 w-full border-0 bg-transparent pl-11 pr-4 text-white focus:ring-0 text-sm" placeholder="Search..."> </div> <div x-show="show_character_requirement" class="pt-1 pb-2"> <span class="text-red-400 ml-4 text-sm py-2">Please enter 3 or more characters.</span> </div> <template x-if="search_results && search_results.errors"> <div class="pt-1 pb-2"> <span class="text-red-400 ml-4 text-sm py-2" x-text="search_results.message"></span> </div> </template> <template x-if="search_results && !search_results.errors"> <div> <template x-if="search_results.length <= 0"> <div class="px-6 py-14 text-center sm:px-14"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 mx-auto text-gray-500"> <path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" /> </svg> <p class="mt-4 text-sm text-gray-200">We couldn&#039;t find any results with that term. Please try again.</p> </div> </template> <ul class="max-h-80 scroll-py-2 divide-y divide-gray-500 divide-opacity-20 overflow-y-auto"> <template x-for="(category_results, index) in search_results" :key="index"> <li class="p-2"> <h2 class="mb-2 mt-4 px-3 text-xs font-semibold text-gray-200 uppercase" x-text="index"></h2> <ul class="text-sm text-gray-400"> <template x-for="category_result in category_results"> <a :href="category_result.url" > <li class="group flex cursor-default select-none items-center rounded-md px-3 py-2 hover:bg-gray-700/20" x-on:click="if(category_result.is_external) { $event.preventDefault(); $dispatch('open-wiki', category_result.url); } else if(category_result.dispatch_event !== null && category_result.dispatch_event !== undefined) { $dispatch(category_result.dispatch_event.key, category_result.dispatch_event.value); }" > <template x-if="category_result.image_url"> <img :src="category_result.image_url" class="w-6 h-6"> </template> <template x-if="!category_result.image_url"> <div> <!-- Character --> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 flex-none text-gray-500" x-show="index == 'characters'"> <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" /> </svg> <!-- Location map --> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 flex-none text-gray-500" x-show="index == 'locations'"> <path stroke-linecap="round" stroke-linejoin="round" d="M9 6.75V15m6-6v8.25m.503 3.498l4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 00-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0z" /> </svg> <!-- Item --> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 flex-none text-gray-500" x-show="index == 'items'"> <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z" /> </svg> <!-- Guild --> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 flex-none text-gray-500" x-show="index == 'guilds'"> <path stroke-linecap="round" stroke-linejoin="round" d="M18 20v-2a4 4 0 00-4-4H6a4 4 0 00-4 4v2" /> <path stroke-linecap="round" stroke-linejoin="round" d="M14 7a4 4 0 11-8 0 4 4 0 018 0z" /> <path stroke-linecap="round" stroke-linejoin="round" d="M20 8a3 3 0 11-6 0 3 3 0 016 0zm-3 12h4v-1a4 4 0 00-4-4h-.098" /> </svg> <!-- Enemy --> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-6 h-6 flex-none text-gray-500" x-show="index == 'enemies'"> <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m13.218 15.625 3.62 3.625 2.412-2.417-3.619-3.625m-2.413 2.417 2.413-2.417m-2.413 2.417-2.412 2.417-4.362-4.37a5.783 5.783 0 0 1 0-8.178l.743-.744 8.444 8.458"></path> </svg> <!-- Wiki --> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 flex-none text-gray-500" x-show="index == 'wiki'"> <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25" /> </svg> </div> </template> <div class="ml-3 flex-auto truncate flex gap-1 items-center"> <template x-if="category_result.match_type === 'heading'"> <span> <span class="text-gray-400" x-text="category_result.title"></span> <span class="text-gray-500 mx-1">&gt;</span> <span class="text-gray-300 font-bold" x-text="category_result.subtitle"></span> </span> </template> <template x-if="category_result.match_type === 'title'"> <span class="text-gray-300 font-bold" x-text="category_result.title"></span> </template> <template x-if="category_result.match_type === 'description'"> <span class="text-gray-300" x-text="category_result.title"></span> </template> <template x-if="!category_result.match_type"> <span> <span class="text-gray-300 font-bold" x-text="category_result.title"></span> <span x-text="category_result.subtitle"></span> </span> </template> <template x-if="category_result.is_external"> <svg class="h-4 w-4 text-gray-500 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"> <path stroke-linecap="round" stroke-linejoin="round" d="M9.25 4.75H6.75C5.64543 4.75 4.75 5.64543 4.75 6.75V17.25C4.75 18.3546 5.64543 19.25 6.75 19.25H17.25C18.3546 19.25 19.25 18.3546 19.25 17.25V14.75"></path> <path stroke-linecap="round" stroke-linejoin="round" d="M19.25 9.25V4.75H14.75"></path> <path stroke-linecap="round" stroke-linejoin="round" d="M19 5L11.75 12.25"></path> </svg> </template> </div> </li> </a> </template> </ul> </li> </template> </ul> </div> </template> </div> </div> </template> </div> </div> <div x-show="show_fade" x-transition:enter="transition ease-out" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }" class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div> </div> </div> </div> </div>
<!-- Script --> <div x-data="character_selector"
@keyup.window.prevent.alt.period="$dispatch('open-modal', 'character-selector');"
@keydown.window.prevent.cmd.period="$dispatch('open-modal', 'character-selector');"> <div x-data="modal('character-selector', false, null, )" x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'character-selector') })" x-on:open-modal.window="$event.detail == 'character-selector' ? show = true : null" x-on:close-modal.window="$event.detail == 'character-selector' ? show = false : null" x-on:close.stop="show = false" x-on:keydown.escape.window="show = false" x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()" x-on:keydown.shift.tab.prevent="prevFocusable().focus()" x-show="show" class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" style="display: none;"> <div class="flex min-h-full justify-center md:p-4 text-center items-center sm:p-0"> <div x-show="show" class="fixed inset-0 transform transition-all" x-on:click="show = false" x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms> <div class="absolute inset-0 bg-immo opacity-70"></div> </div> <div x-show="show" class="md:mb-6 bg-gray-800 border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-xl sm:mx-8 md:mx-auto relative max-h-[90vh]" x-transition:enter.duration.300ms x-transition:leave.duration.200ms> <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2" x-on:click="$dispatch('close-modal', 'character-selector');" > <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold"> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /> </svg> </button> <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]" x-ref="scrollContainer" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" @scroll="handleScroll()"> <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible"> <template x-if="content_visible"> <div x-data="{show:false}" x-init="$nextTick(() => show = true)"> <div class="py-3 px-3 text-left flex items-center border-b border-white/5"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4 text-gray-600"> <path d="M8.5 4.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0ZM10.9 12.006c.11.542-.348.994-.9.994H2c-.553 0-1.01-.452-.902-.994a5.002 5.002 0 0 1 9.803 0ZM14.002 12h-1.59a2.556 2.556 0 0 0-.04-.29 6.476 6.476 0 0 0-1.167-2.603 3.002 3.002 0 0 1 3.633 1.911c.18.522-.283.982-.836.982ZM12 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" /> </svg> <h2 class="text-sm font-semibold text-gray-200 ml-2"> Characters </h2> </div> <div x-data="$watch('show', function(value){if(value) getCharactersData()})" class="mt-4"> <template x-if="characters_data"> <div x-show="is_processing === false"> <div class="grid grid-cols-1 xs:grid-cols-2 min-[550px]:grid-cols-3 sm:grid-cols-4 xl:grid-cols-4 my-4 gap-x-1 md:gap-x-3 gap-y-4 text-center mx-4"> <!-- Block for character --> <template x-if="characters_data.characters"> <template x-for="(character, index) in characters_data.characters"> <div class="w-32 relative mx-auto" x-data="{visible:false}" x-init="setTimeout(function(){visible=true},250)" x-transition.opacity.duration.400ms x-show="visible" > <form :action="character.change_url" method="POST" x-on:submit="is_processing = true;"> <input type="hidden" name="_token" value="XyMoBec0vexU3Uc6FRmgCq1T9viaXxZJLP7cxHcI" autocomplete="off"> <button type="submit" :class="{'opacity-40' : character.id == 659085, 'hover:bg-gray-700/40' : character.id != 659085}" class="rounded-lg bg-gray-700 text-center relative h-32 w-full" :disabled="character.id == 659085"> <div class="py-2 px-3 overflow-hidden max-h-full"> <img class="inline-block h-52 max-w-none -ml-14" :src="character.skin_url"> </div> <template x-if="character.current_action"> <div class="absolute top-0 right-0 -mt-2 -mr-2"> <span class="inline-flex items-center px-2 py-1 text-sm font-bold text-gray-100 bg-[#262e3c] rounded-md"> <svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin !mr-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"> <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle> <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> </span> </div> </template> <div class="absolute top-0 left-1 flex py-1.5 pr-1.5"> <kbd class="inline-flex items-center rounded bg-gray-800 px-1 font-sans text-xs text-gray-400" x-cloak x-show="navigator.userAgent.toUpperCase().indexOf('MAC')>=0">âŒ˜+<span x-text="index + 1"></span></kbd> <kbd class="inline-flex items-center rounded bg-gray-800 px-1 font-sans text-xs text-gray-400" x-show="navigator.userAgent.toUpperCase().indexOf('WINDOWS')>=0">ALT+<span x-text="index + 1"></span></kbd> </div> <div class="absolute bottom-0 w-full bg-gray-800/80 text-center font-bold text-sm py-1 h-12 flex items-center justify-center"> <div> <span class="block truncate" x-text="character.name"></span> <span class="block text-xs text-gray-400">Lv. <span x-text='character.level'></span></span> </div> </div> </button> <input name="return_to_current_page" type="hidden" x-model="return_to_current_page"> </form> </div> </template> </template> <!-- Block for empty slot --> <template x-for="i in characters_data.free_slots"> <div class="w-32 relative mx-auto" x-data="{visible:false}" x-init="setTimeout(function(){visible=true},250)" x-transition.opacity.duration.400ms x-show="visible"> <a href="https://web.idle-mmo.com/user/character/create" class="h-full"> <button class="rounded-lg bg-gray-700 text-center relative h-32 w-full hover:bg-gray-700/40 flex items-center justify-center"> <div class="py-2 px-3 overflow-hidden max-h-full"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-24 h-24 text-gray-600"> <path stroke-linecap="round" stroke-linejoin="round" d="M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z" /> </svg> </div> <div class="absolute bottom-0 w-full bg-gray-800/80 text-center font-bold text-sm py-1 h-12 flex items-center justify-center"> <span class="block text-xs text-gray-200 font-bol">Create</span> </div> </button> </a> </div> </template> <!-- Block for level unlock --> <template x-for="i in characters_data.level_locked_slot"> <div class="w-32 relative mx-auto" x-data="{visible:false}" x-init="setTimeout(function(){visible=true},250)" x-transition.opacity.duration.400ms x-show="visible"> <button class="rounded-lg bg-gray-700 text-center relative h-32 w-full hover:bg-gray-700/40 flex items-center justify-center"> <div class="py-2 px-3 overflow-hidden max-h-full"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-24 h-24 text-gray-600"> <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z" /> </svg> </div> <div class="absolute bottom-0 w-full bg-gray-800/80 text-center font-bold text-sm py-1 h-12 flex items-center justify-center px-4"> <span class="block text-xs text-gray-400">Reach combat level <span class='text-gray-100'>45</span>.</span> </div> </button> </div> </template> <!-- Block for token unlock --> <template x-for="i in characters_data.purchase_slots"> <a href="https://web.idle-mmo.com/merchants?highlight%5B%5D=character-slot&amp;tab=SLOTS&amp;category=SATCHEL_AND_CO&amp;same_window=true" class="h-full" x-data="{visible:false}" x-init="setTimeout(function(){visible=true},250)" x-transition.opacity.duration.400ms x-show="visible"> <div class="w-32 relative mx-auto"> <button class="rounded-lg bg-gray-700 text-center relative h-32 w-full hover:bg-gray-700/40 flex items-center justify-center"> <div class="py-2 px-3 overflow-hidden max-h-full"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-24 h-24 text-gray-600"> <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z" /> </svg> </div> <div class="absolute bottom-0 w-full bg-gray-800/80 text-center font-bold text-sm py-1 h-12 flex items-center justify-center px-4"> <span class="block text-xs text-gray-400">Purchase for <img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/token.png' class='h-4 w-4 inline-block'> <span class='text-gray-100'><span x-text='characters_data.slot_token_cost'></span></span></span> </div> </button> </div> </a> </template> </div> <div class="w-full flex items-center justify-center" x-show="!characters_data" x-transition.opacity.400ms> <svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"> <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle> <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> </div> <div class="mb-4 mx-2 text-left"> <div class="rounded-lg mt-2 bg-gray-900 shadow-sm p-4 border border-gray-800 !bg-gray-900/40"> <div class="flex"> <div class="flex-shrink-0"> <svg class="h-5 w-5 text-gray-700" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"> <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path> </svg> </div> <div class="ml-3 flex-1 md:flex md:justify-between"> <p class="text-sm text-gray-200"> <strong>Important note:</strong> You can only assign an action to a maximum of <span class='font-bold'>3</span> non-market-locked characters at one time. <a href="https://wiki.idle-mmo.com/character/classes#class-limitations" target="_blank" class="text-yellow-400 font-bold">Read more...</a> </p> </div> </div></div> </div> </div> </template> <div class="text-left border-gray-700/80 border-t mt-4 px-4"> <div class="flex items-center justify-between my-3"> <span class="flex flex-col flex-grow mr-4"> <div> <span class="text-sm font-medium leading-6 text-gray-100 block" id="availability-label">Return to the current page*</span> <span class="text-sm font-medium text-gray-400 block">If enabled, when changing character, the game will return you to the page you&#039;re currently on.</span> </div> </span> <button type="button" x-on:click="updateCurrentPageOption();" :class="{'bg-yellow-500':return_to_current_page, 'bg-gray-200':!return_to_current_page}" class="relative inline-flex flex-shrink-0 h-6 transition-colors duration-200 ease-in-out bg-gray-700 border-2 border-transparent rounded-full cursor-pointer w-11 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2" role="switch" aria-checked="false" aria-labelledby="availability-label" aria-describedby="availability-description"> <span aria-hidden="true" :class="{'translate-x-5':return_to_current_page, 'translate-x-0':!return_to_current_page}" class="inline-block w-5 h-5 transition duration-200 ease-in-out transform translate-x-0 bg-gray-800 rounded-full shadow pointer-events-none ring-0"></span> </button> </div> </div> <template x-if="is_processing"> <div class="my-4"> <svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"> <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle> <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> </div> </template> </div> </div> </template> </div> </div> <div x-show="show_fade" x-transition:enter="transition ease-out" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }" class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div> </div> </div> </div> <div x-data x-on:keyup.window.prevent.alt.1="document.getElementById('character_slot_0').submit();" x-on:keydown.window.prevent.cmd.1="document.getElementById('character_slot_0').submit();" x-on:keyup.window.prevent.alt.2="document.getElementById('character_slot_1').submit();" x-on:keydown.window.prevent.cmd.2="document.getElementById('character_slot_1').submit();" x-on:keyup.window.prevent.alt.3="document.getElementById('character_slot_2').submit();" x-on:keydown.window.prevent.cmd.3="document.getElementById('character_slot_2').submit();" x-on:keyup.window.prevent.alt.4="document.getElementById('character_slot_3').submit();" x-on:keydown.window.prevent.cmd.4="document.getElementById('character_slot_3').submit();" x-on:keyup.window.prevent.alt.5="document.getElementById('character_slot_4').submit();" x-on:keydown.window.prevent.cmd.5="document.getElementById('character_slot_4').submit();" > <form id="character_slot_0" action="https://web.idle-mmo.com/user/character/switch/slot/0" method="POST"> <input type="hidden" name="_token" value="XyMoBec0vexU3Uc6FRmgCq1T9viaXxZJLP7cxHcI" autocomplete="off"> <input name="return_to_current_page" type="hidden" x-model="return_to_current_page"> </form> <form id="character_slot_1" action="https://web.idle-mmo.com/user/character/switch/slot/1" method="POST"> <input type="hidden" name="_token" value="XyMoBec0vexU3Uc6FRmgCq1T9viaXxZJLP7cxHcI" autocomplete="off"> <input name="return_to_current_page" type="hidden" x-model="return_to_current_page"> </form> <form id="character_slot_2" action="https://web.idle-mmo.com/user/character/switch/slot/2" method="POST"> <input type="hidden" name="_token" value="XyMoBec0vexU3Uc6FRmgCq1T9viaXxZJLP7cxHcI" autocomplete="off"> <input name="return_to_current_page" type="hidden" x-model="return_to_current_page"> </form> <form id="character_slot_3" action="https://web.idle-mmo.com/user/character/switch/slot/3" method="POST"> <input type="hidden" name="_token" value="XyMoBec0vexU3Uc6FRmgCq1T9viaXxZJLP7cxHcI" autocomplete="off"> <input name="return_to_current_page" type="hidden" x-model="return_to_current_page"> </form> <form id="character_slot_4" action="https://web.idle-mmo.com/user/character/switch/slot/4" method="POST"> <input type="hidden" name="_token" value="XyMoBec0vexU3Uc6FRmgCq1T9viaXxZJLP7cxHcI" autocomplete="off"> <input name="return_to_current_page" type="hidden" x-model="return_to_current_page"> </form> </div> </div>
<div> <div x-data="modal('show-map', false, null, )" x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'show-map') })" x-on:open-modal.window="$event.detail == 'show-map' ? show = true : null" x-on:close-modal.window="$event.detail == 'show-map' ? show = false : null" x-on:close.stop="show = false" x-on:keydown.escape.window="show = false" x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()" x-on:keydown.shift.tab.prevent="prevFocusable().focus()" x-show="show" class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" style="display: none;"> <div class="flex min-h-full justify-center md:p-4 text-center items-center sm:p-0"> <div x-show="show" class="fixed inset-0 transform transition-all" x-on:click="show = false" x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms> <div class="absolute inset-0 bg-immo opacity-70"></div> </div> <div x-show="show" class="md:mb-6 bg-gray-800 border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-2xl sm:mx-8 md:mx-auto relative max-h-[90vh]" x-transition:enter.duration.300ms x-transition:leave.duration.200ms> <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2" x-on:click="$dispatch('close-modal', 'show-map');" > <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold"> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /> </svg> </button> <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]" x-ref="scrollContainer" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" @scroll="handleScroll()"> <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible"> <template x-if="content_visible"> <div x-data="{show:false}" x-init="$nextTick(() => show = true)"> <div x-data="mapMain" x-init="$watch('show', function(value){ if(value) initialiseMap(); })" x-on:started-travelling.window="$dispatch('close-modal', 'show-map');" class="relative"> <!-- Start map --> <div class="absolute bottom-0 left-0 z-10 px-2 py-1 mb-2 ml-2 text-sm bg-gray-800/80 rounded-3xl font-bold flex items-center gap-1"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="inline-block w-4 h-4"> <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15" /> </svg> Press and hold to drag </div> <div class="overflow-hidden h-[calc(100%-80px)] max-h-[calc(100vh-80px)] map-viewport rounded-3xl flex"> <div class="relative map-container"> <img src="https://cdn.idle-mmo.com/uploaded/skins/01KCV67S30XVWXNGWXMVB0MA8R.jpg" class="w-[calc(1020px/1.35)] max-w-none brightness-75"> <div id="location-markers"> <template x-if="locations"> <template x-for="location in locations"> <a href="javascript:;" x-on:click="$dispatch('quick-view-location', location.id);" class="absolute top-0 left-0 px-1 py-1 font-bold rounded-lg" :style="'margin-top:'+(location.y/1.35)+'px; margin-left:'+(location.x/1.35)+'px;'"> <div class="inline-flex items-center justify-center min-h-[2.5rem] min-w-[2.5rem] isolate -space-x-2"> <template x-if="getLocationCharacters(location.id).length"> <template x-for="character in getLocationCharacters(location.id)" :key="character.id"> <div class="inline-flex"> <div class="relative inline-block size-8 rounded-full overflow-hidden bg-gray-800/40 ring-2 transition-transform duration-300 ease-out hover:-translate-y-1" x-tooltip="character.name" :class="{ 'ring-yellow-400': character.is_current, 'ring-gray-800': !character.is_current }" :style="character.background_url ? 'background-image: url(' + character.background_url + '); background-size: cover; background-position: center; background-repeat: no-repeat;' : ''"> <img class="h-12 -ml-2 mt-0.5 max-w-none" :src="character.image_url" :alt="character.name"> </div> </div> </template> </template> </div> <div class="border border-gray-700/40 bg-gray-900/90 hover:bg-gray-900 text-sm text-center rounded-lg mt-0.5 px-1.5 py-2 absolute bottom-0 -mb-[3.75rem] translate -translate-x-1/2 ml-3 whitespace-nowrap scale-95"> <span x-text="location.name" class="block"></span> <div class="mt-1 flex gap-2 justify-center"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 flex items-center"> Level <span x-text='location.meta_data.recommended_level' class='ml-1'></span></span> <template x-if="location.meta_data.campaign"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60"> <div class="flex items-center"> <span class="relative inline-flex h-2 w-2"> <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span> <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span> </span> <span class="pl-1"> Seasonal </span> </div></span> </template> <template x-if="location.points_of_interest.has_scheduled_raid"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60"> <div class="flex items-center"> <span class="relative inline-flex h-2 w-2"> <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-yellow-400 opacity-75"></span> <span class="relative inline-flex rounded-full h-2 w-2 bg-yellow-500"></span> </span> <span class="pl-1"> Raid </span> </div></span> </template> <template x-if="location.points_of_interest.has_guild_assault"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60"> <div class="flex items-center"> <span class="relative inline-flex h-2 w-2"> <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-yellow-400 opacity-75"></span> <span class="relative inline-flex rounded-full h-2 w-2 bg-indigo-500"></span> </span> <span class="pl-1"> Assault </span> </div></span> </template> </div> </div> </a> </template> </template> </div> </div> </div> </div> </div> </template> </div> </div> <div x-show="show_fade" x-transition:enter="transition ease-out" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }" class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div> </div> </div> </div> </div>
<div x-data="quick_view_location"
x-on:quick-view-location.window="getLocation($event.detail);"> <div x-data="modal('quick-view-location', false, null, )" x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'quick-view-location') })" x-on:open-modal.window="$event.detail == 'quick-view-location' ? show = true : null" x-on:close-modal.window="$event.detail == 'quick-view-location' ? show = false : null" x-on:close.stop="show = false" x-on:keydown.escape.window="show = false" x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()" x-on:keydown.shift.tab.prevent="prevFocusable().focus()" x-show="show" class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" style="display: none;"> <div class="flex min-h-full justify-center md:p-4 text-center items-center sm:p-0"> <div x-show="show" class="fixed inset-0 transform transition-all" x-on:click="show = false" x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms> <div class="absolute inset-0 bg-immo opacity-70"></div> </div> <div x-show="show" class="md:mb-6 bg-gray-800 border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-sm sm:mx-8 md:mx-auto relative max-h-[90vh]" x-transition:enter.duration.300ms x-transition:leave.duration.200ms> <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2" x-on:click="$dispatch('close-modal', 'quick-view-location');" > <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold"> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /> </svg> </button> <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]" x-ref="scrollContainer" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" @scroll="handleScroll()"> <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible"> <template x-if="content_visible"> <div x-data="{show:false}" x-init="$nextTick(() => show = true)"> <template x-if="!location"> <div class="p-4"> <svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"> <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle> <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> </div> </template> <template x-if="location"> <div class="my-4 " x-init="$watch('show', value => currently_selected='skill_items');" x-on:started-travelling.window="$dispatch('close-modal','quick-view-location');ActiveAction.update(659085);"> <div class="mx-4 mt-4 bg-white dark:brightness-80 rounded-lg ring-1 ring-black ring-opacity-5 shadow-sm h-32 flex items-center justify-center" :style="'background:linear-gradient( to left, rgba(0,0,0, 0.1), rgb(0, 0, 0, 0.6) ),url(\''+location.image_url+'\'); outline: none; background-position: center; background-repeat:no-repeat; background-size:cover'"> <div class="flex justify-center"> <div class="px-2 py-4 text-center rounded-lg bg-gray-900/40 backdrop-blur-md z-10"> <div> <h2 class="font-bold" x-text="location.name">Loading...</h2> </div> </div> </div> </div> <template x-if="location.description"> <div class="text-left mx-4"> <blockquote class="p-4 my-4 rounded-lg bg-gray-900/40 dark:border-gray-500 dark:bg-gray-800"> <p class="text-sm font-medium leading-relaxed text-gray-100" x-text="location.description"> Loading... </p> </blockquote> </div> </template> <div> <div class="relative mt-4"> <div class="absolute inset-0 flex items-center" aria-hidden="true"> <div class="w-full border-t border-gray-700"></div> </div> <div class="relative flex justify-center"> <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">Points of Interest</span> </div> </div></div> <div class="mt-4 flex gap-2 flex-wrap justify-center"> <template x-if="location.points_of_interest.has_shrine"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-4 w-4 mr-1 inline-block"> <path fill-rule="evenodd" d="M9 4.5a.75.75 0 0 1 .721.544l.813 2.846a3.75 3.75 0 0 0 2.576 2.576l2.846.813a.75.75 0 0 1 0 1.442l-2.846.813a3.75 3.75 0 0 0-2.576 2.576l-.813 2.846a.75.75 0 0 1-1.442 0l-.813-2.846a3.75 3.75 0 0 0-2.576-2.576l-2.846-.813a.75.75 0 0 1 0-1.442l2.846-.813A3.75 3.75 0 0 0 7.466 7.89l.813-2.846A.75.75 0 0 1 9 4.5ZM18 1.5a.75.75 0 0 1 .728.568l.258 1.036c.236.94.97 1.674 1.91 1.91l1.036.258a.75.75 0 0 1 0 1.456l-1.036.258c-.94.236-1.674.97-1.91 1.91l-.258 1.036a.75.75 0 0 1-1.456 0l-.258-1.036a2.625 2.625 0 0 0-1.91-1.91l-1.036-.258a.75.75 0 0 1 0-1.456l1.036-.258a2.625 2.625 0 0 0 1.91-1.91l.258-1.036A.75.75 0 0 1 18 1.5ZM16.5 15a.75.75 0 0 1 .712.513l.394 1.183c.15.447.5.799.948.948l1.183.395a.75.75 0 0 1 0 1.422l-1.183.395c-.447.15-.799.5-.948.948l-.395 1.183a.75.75 0 0 1-1.422 0l-.395-1.183a1.5 1.5 0 0 0-.948-.948l-1.183-.395a.75.75 0 0 1 0-1.422l1.183-.395c.447-.15.799-.5.948-.948l.395-1.183A.75.75 0 0 1 16.5 15Z" clip-rule="evenodd" /> </svg> Shrine
</span> </template> <template x-if="location.points_of_interest.has_bank"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60"> <svg class="h-4 w-4 mr-1 inline-block" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M8.75 9.25V6.5M19.25 6.5V10.5C19.25 10.9324 18.7796 11.3281 18 11.6335M19.25 6.5C19.25 7.4665 16.8995 8.25 14 8.25C11.1005 8.25 8.75 7.4665 8.75 6.5M19.25 6.5C19.25 5.5335 16.8995 4.75 14 4.75C11.1005 4.75 8.75 5.5335 8.75 6.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> <path d="M15.25 13.5V17.5C15.25 18.4665 12.8995 19.25 10 19.25C7.10051 19.25 4.75 18.4665 4.75 17.5V13.5M15.25 13.5C15.25 14.4665 12.8995 15.25 10 15.25C7.10051 15.25 4.75 14.4665 4.75 13.5M15.25 13.5C15.25 12.5335 12.8995 11.75 10 11.75C7.10051 11.75 4.75 12.5335 4.75 13.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> </svg> Bank
</span> </template> <template x-if="location.points_of_interest.has_dungeons"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60"> <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1 inline-block" fill="none" viewBox="0 0 24 24"> <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m13.218 15.625 3.62 3.625 2.412-2.417-3.619-3.625m-2.413 2.417 2.413-2.417m-2.413 2.417-2.412 2.417-4.362-4.37a5.783 5.783 0 0 1 0-8.178l.743-.744 8.444 8.458"></path> </svg> Dungeons
</span> </template> <template x-if="location.points_of_interest.has_world_bosses"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60"> <svg class="h-4 w-4 mr-1 inline-block" fill="none" viewBox="0 0 24 24"> <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 4.75L13.75 10.25H19.25L14.75 13.75L16.25 19.25L12 15.75L7.75 19.25L9.25 13.75L4.75 10.25H10.25L12 4.75Z"></path> </svg> World Bosses
</span> </template> <template x-if="location.points_of_interest.has_enemies"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60"> <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1 inline-block" fill="none" viewBox="0 0 24 24"> <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M14.625 13.33v-.03c0-1.408-1.175-2.55-2.625-2.55s-2.625 1.142-2.625 2.55v.03c-1.484.206-2.625 1.446-2.625 2.945 0 1.643 1.371 2.975 3.063 2.975.856 0 1.631-.342 2.187-.893.556.551 1.33.893 2.188.893 1.69 0 3.062-1.332 3.062-2.975 0-1.499-1.141-2.739-2.625-2.945Z"></path> <circle cx="6" cy="10" r="1.25" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></circle> <circle cx="12" cy="6" r="1.25" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></circle> <circle cx="18" cy="10" r="1.25" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></circle> </svg> Enemies
</span> </template> </div> <div> <div class="relative mt-4"> <div class="absolute inset-0 flex items-center" aria-hidden="true"> <div class="w-full border-t border-gray-700"></div> </div> <div class="relative flex justify-center"> <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">Information</span> </div> </div></div> <div class="mt-4 flex gap-2 justify-center flex-wrap mx-4"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 flex items-center"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4 inline-block mr-2"> <path fill-rule="evenodd" d="M8 1.75a.75.75 0 0 1 .692.462l1.41 3.393 3.664.293a.75.75 0 0 1 .428 1.317l-2.791 2.39.853 3.575a.75.75 0 0 1-1.12.814L7.998 12.08l-3.135 1.915a.75.75 0 0 1-1.12-.814l.852-3.574-2.79-2.39a.75.75 0 0 1 .427-1.318l3.663-.293 1.41-3.393A.75.75 0 0 1 8 1.75Z" clip-rule="evenodd" /> </svg> <span> Recommended Level <span x-text='location.recommended_level'></span> </span></span> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 flex items-center"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4 inline-block mr-2"> <path fill-rule="evenodd" d="M5.37 2.257a1.25 1.25 0 0 1 1.214-.054l3.378 1.69 2.133-1.313A1.25 1.25 0 0 1 14 3.644v7.326c0 .434-.225.837-.595 1.065l-2.775 1.708a1.25 1.25 0 0 1-1.214.053l-3.378-1.689-2.133 1.313A1.25 1.25 0 0 1 2 12.354V5.029c0-.434.225-.837.595-1.064L5.37 2.257ZM6 4a.75.75 0 0 1 .75.75v4.5a.75.75 0 0 1-1.5 0v-4.5A.75.75 0 0 1 6 4Zm4.75 2.75a.75.75 0 0 0-1.5 0v4.5a.75.75 0 0 0 1.5 0v-4.5Z" clip-rule="evenodd" /> </svg> <span> <span x-text='location.distance ? number_format(location.distance) : 0'></span> Metres Away </span></span> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 flex items-center"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4 inline-block mr-2"> <path fill-rule="evenodd" d="M1 8a7 7 0 1 1 14 0A7 7 0 0 1 1 8Zm7.75-4.25a.75.75 0 0 0-1.5 0V8c0 .414.336.75.75.75h3.25a.75.75 0 0 0 0-1.5h-2.5v-3.5Z" clip-rule="evenodd" /> </svg> <span> <span x-text="location.length"></span> </span></span> </div> <div> <div class="relative mt-4"> <div class="absolute inset-0 flex items-center" aria-hidden="true"> <div class="w-full border-t border-gray-700"></div> </div> <div class="relative flex justify-center"> <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">Actions</span> </div> </div></div> <div class="mt-4 mx-4"> <div class="flex flex-wrap gap-2 justify-center text-center"> <form x-on:submit.prevent="startTravel()" method="post" class="inline-block"> <input type="hidden" name="_token" value="XyMoBec0vexU3Uc6FRmgCq1T9viaXxZJLP7cxHcI" autocomplete="off"> <button type="submit" class="inline-block rounded px-4 py-2 bg-gradient-to-b font-bold bg-indigo-600 hover:bg-indigo-500 text-sm" type="submit" x-bind:class="{'opacity-40':processing || location.disabled}" x-bind:disabled="processing || location.disabled"> Travel </button> </form> <form :action="'https://web.idle-mmo.com/locations/teleport/:REPLACE'.replace(':REPLACE', location.key)" method="post" class="inline-block"> <input type="hidden" name="_token" value="XyMoBec0vexU3Uc6FRmgCq1T9viaXxZJLP7cxHcI" autocomplete="off"> <button type="submit" class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block" type="submit" x-bind:class="{'opacity-40':location.disabled}" x-bind:disabled="location.disabled"> Teleport for <img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/gold_coin.png' class='h-4 w-4 inline-block'> <span x-text='location.teleport_cost'></span> </button> </form> <button type="button" class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block" x-on:click="$dispatch('open-modal', 'whats-there-location')" type="button"> What&#039;s there? </button> </div> </div> </div> </template> </div> </template> </div> </div> <div x-show="show_fade" x-transition:enter="transition ease-out" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }" class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div> </div> </div> </div> <div x-data="modal('whats-there-location', false, null, )" x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'whats-there-location') })" x-on:open-modal.window="$event.detail == 'whats-there-location' ? show = true : null" x-on:close-modal.window="$event.detail == 'whats-there-location' ? show = false : null" x-on:close.stop="show = false" x-on:keydown.escape.window="show = false" x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()" x-on:keydown.shift.tab.prevent="prevFocusable().focus()" x-show="show" class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" style="display: none;"> <div class="flex min-h-full justify-center md:p-4 text-center items-center sm:p-0"> <div x-show="show" class="fixed inset-0 transform transition-all" x-on:click="show = false" x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms> <div class="absolute inset-0 bg-immo opacity-70"></div> </div> <div x-show="show" class="md:mb-6 bg-gray-800 border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-lg sm:mx-8 md:mx-auto relative max-h-[90vh]" x-transition:enter.duration.300ms x-transition:leave.duration.200ms> <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2" x-on:click="$dispatch('close-modal', 'whats-there-location');" > <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold"> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /> </svg> </button> <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]" x-ref="scrollContainer" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" @scroll="handleScroll()"> <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible"> <template x-if="content_visible"> <div x-data="{show:false}" x-init="$nextTick(() => show = true)"> <template x-if="location"> <div class="my-4"> <div class="mt-2 flex justify-center mx-4 "> <nav class="flex space-x-4 flex-wrap justify-center" aria-label="Tabs"> <template x-if="location.skill_items.length"> <button class="rounded-md px-3 py-2 text-sm font-medium" :class="{ 'bg-gray-700 text-gray-100' : currently_selected == 'skill_items', 'text-gray-400 hover:text-gray-300' : currently_selected != 'skill_items' }" x-on:click="currently_selected = 'skill_items'">Skill Items</button> </template> <template x-if="location.enemies.length"> <button class="rounded-md px-3 py-2 text-sm font-medium" :class="{ 'bg-yellow-700 text-gray-100' : currently_selected == 'enemies', 'text-gray-400 hover:text-gray-300' : currently_selected != 'enemies' }" x-on:click="currently_selected = 'enemies'">Enemies</button> </template> <template x-if="location.dungeons.length"> <button class="rounded-md px-3 py-2 text-sm font-medium" :class="{ 'bg-yellow-700 text-gray-100' : currently_selected == 'dungeons', 'text-gray-400 hover:text-gray-300' : currently_selected != 'dungeons' }" x-on:click="currently_selected = 'dungeons'">Dungeons</button> </template> <template x-if="location.world_bosses.length"> <button class="rounded-md px-3 py-2 text-sm font-medium" :class="{ 'bg-yellow-700 text-gray-100' : currently_selected == 'world_bosses', 'text-gray-400 hover:text-gray-300' : currently_selected != 'world_bosses' }" x-on:click="currently_selected = 'world_bosses'">World Bosses</button> </template> </nav> </div> <template x-if="currently_selected === 'skill_items'"> <div> <div> <div class="relative mt-4"> <div class="absolute inset-0 flex items-center" aria-hidden="true"> <div class="w-full border-t border-gray-700"></div> </div> <div class="relative flex justify-center"> <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">Items</span> </div> </div></div> <ul role="list" class="mt-3 grid grid-cols-2 xs:grid-cols-3 gap-4 sm:grid-cols-5 mt-4 mx-4"> <template x-for="skill_item in location.skill_items"> <button clas="col-span-1 text-center"> <li class="inline-flex mx-auto rounded-md shadow-sm"> <div :id="'skill-item-'+skill_item.id" class="hidden"> <div class='text-center w-24'> <div class='font-bold' x-text="skill_item.name"></div> <div class='text-gray-400' x-text="skill_item.skill"></div> <div class='text-gray-400'>Level <span x-text='skill_item.level_required' class='font-bold'></span></div> </div> </div> <div class="rounded-lg bg-gray-700 text-center py-2 px-3 relative h-16 select-none hover:bg-gray-700/40" x-tooltip.cursor=" { onShow(instance) { const template = document.getElementById('skill-item-' + skill_item.id); const clonedTemplate = template.cloneNode(true); const elementsWithXText = clonedTemplate.querySelectorAll('[x-text]'); elementsWithXText.forEach(element => { element.removeAttribute('x-text'); }); instance.setContent(clonedTemplate.innerHTML); }, trigger: window.matchMedia('(hover: none)').matches ? 'click' : 'mouseenter focus', allowHTML: true, touch: true, followCursor: window.matchMedia('(hover: none)').matches ? false : true, appendTo: $root, placement: 'top', }" > <img :src="skill_item.image_url" class="h-12 w-12 max-w-none"> <span class="absolute top-0 right-0 -mt-2 -mr-2 flex items-center justify-center h-7 rounded-lg bg-gray-900 px-2 py-1 text-xs font-bold text-gray-100"> Lv. <span x-text='skill_item.level_required'></span> </span> </div> </li> </button> </template> </ul> </div> </template> <template x-if="currently_selected === 'enemies'"> <div> <div> <div class="relative mt-4"> <div class="absolute inset-0 flex items-center" aria-hidden="true"> <div class="w-full border-t border-gray-700"></div> </div> <div class="relative flex justify-center"> <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">Enemies</span> </div> </div></div> <ul role="list" class="mt-3 grid grid-cols-2 xs:grid-cols-3 gap-4 sm:grid-cols-5 mt-4 mx-4"> <template x-for="enemy in location.enemies"> <button clas="col-span-1 text-center"> <li class="inline-flex mx-auto rounded-md shadow-sm"> <div :id="'enemy-'+enemy.id" class="hidden"> <div class='text-center w-24'> <div class='font-bold' x-text="enemy.name"></div> <div class='text-gray-400'>Level <span x-text='enemy.level' class='font-bold'></span></div> </div> </div> <div class="rounded-lg bg-gray-700 text-center py-2 px-3 relative h-16 select-none hover:bg-gray-700/40" x-tooltip.cursor=" { onShow(instance) { // Delay the content setting until the tooltip is shown const template = document.getElementById('enemy-' + enemy.id); // Clone the template to avoid modifying the original element const clonedTemplate = template.cloneNode(true); // Remove all x-text attributes within the cloned template const elementsWithXText = clonedTemplate.querySelectorAll('[x-text]'); elementsWithXText.forEach(element => { element.removeAttribute('x-text'); }); // Set the content of the tooltip with the modified clone instance.setContent(clonedTemplate.innerHTML); }, trigger: window.matchMedia('(hover: none)').matches ? 'click' : 'mouseenter focus', allowHTML: true, touch: true, followCursor: window.matchMedia('(hover: none)').matches ? false : true, appendTo: $root, placement: 'top', }" > <img :src="enemy.image_url" class="h-12 w-12 max-w-none"> <span class="absolute top-0 right-0 -mt-2 -mr-2 flex items-center justify-center h-7 rounded-lg bg-gray-900 px-2 py-1 text-xs font-bold text-gray-100"> Lv. <span x-text='enemy.level'></span> </span> </div> </li> </button> </template> </ul> </div> </template> <template x-if="currently_selected === 'dungeons'"> <div> <div> <div class="relative mt-4"> <div class="absolute inset-0 flex items-center" aria-hidden="true"> <div class="w-full border-t border-gray-700"></div> </div> <div class="relative flex justify-center"> <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">Dungeons</span> </div> </div></div> <ul role="list" class="mt-3 grid grid-cols-2 xs:grid-cols-3 gap-4 sm:grid-cols-5 mt-4 mx-4"> <template x-for="dungeon in location.dungeons"> <button clas="col-span-1 text-center"> <li class="inline-flex mx-auto rounded-md shadow-sm"> <div :id="'dungeon-'+dungeon.id" class="hidden"> <div class='text-center w-24'> <div class='font-bold' x-text="dungeon.name"></div> <div class='text-gray-400'>Level <span x-text='dungeon.level' class='font-bold'></span></div> </div> </div> <div class="rounded-lg bg-gray-700 text-center py-2 px-3 relative h-16 select-none hover:bg-gray-700/40" x-tooltip.cursor=" { onShow(instance) { // Delay the content setting until the tooltip is shown const template = document.getElementById('dungeon-' + dungeon.id); // Clone the template to avoid modifying the original element const clonedTemplate = template.cloneNode(true); // Remove all x-text attributes within the cloned template const elementsWithXText = clonedTemplate.querySelectorAll('[x-text]'); elementsWithXText.forEach(element => { element.removeAttribute('x-text'); }); // Set the content of the tooltip with the modified clone instance.setContent(clonedTemplate.innerHTML); }, trigger: window.matchMedia('(hover: none)').matches ? 'click' : 'mouseenter focus', allowHTML: true, touch: true, followCursor: window.matchMedia('(hover: none)').matches ? false : true, appendTo: $root, placement: 'top', }"> <img :src="dungeon.image_url" class="h-12 w-12 max-w-none"> <span class="absolute top-0 right-0 -mt-2 -mr-2 flex items-center justify-center h-7 rounded-lg bg-gray-900 px-2 py-1 text-xs font-bold text-gray-100"> Lv. <span x-text='dungeon.level'></span> </span> </div> </li> </button> </template> </ul> </div> </template> <template x-if="currently_selected === 'world_bosses'"> <div> <div> <div class="relative mt-4"> <div class="absolute inset-0 flex items-center" aria-hidden="true"> <div class="w-full border-t border-gray-700"></div> </div> <div class="relative flex justify-center"> <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">World Bosses</span> </div> </div></div> <ul role="list" class="mt-3 grid grid-cols-2 xs:grid-cols-3 gap-4 sm:grid-cols-5 mt-4 mx-4"> <template x-for="world_boss in location.world_bosses"> <button clas="col-span-1 text-center"> <li class="inline-flex mx-auto rounded-md shadow-sm"> <div :id="'world-boss-'+world_boss.id" class="hidden"> <div class='text-center w-24'> <div class='font-bold' x-text="world_boss.name"></div> <div class='text-gray-400'>Level <span x-text='world_boss.level' class='font-bold'></span></div> </div> </div> <div class="rounded-lg bg-gray-700 text-center py-2 px-3 relative h-16 select-none hover:bg-gray-700/40" x-tooltip.cursor=" { onShow(instance) { // Delay the content setting until the tooltip is shown const template = document.getElementById('world-boss-' + world_boss.id); // Clone the template to avoid modifying the original element const clonedTemplate = template.cloneNode(true); // Remove all x-text attributes within the cloned template const elementsWithXText = clonedTemplate.querySelectorAll('[x-text]'); elementsWithXText.forEach(element => { element.removeAttribute('x-text'); }); // Set the content of the tooltip with the modified clone instance.setContent(clonedTemplate.innerHTML); }, trigger: window.matchMedia('(hover: none)').matches ? 'click' : 'mouseenter focus', allowHTML: true, touch: true, followCursor: window.matchMedia('(hover: none)').matches ? false : true, appendTo: $root, placement: 'top', }"> <img :src="world_boss.image_url" class="h-12 w-12 max-w-none"> <span class="absolute top-0 right-0 -mt-2 -mr-2 flex items-center justify-center h-7 rounded-lg bg-gray-900 px-2 py-1 text-xs font-bold text-gray-100"> Lv. <span x-text='world_boss.level'></span> </span> </div> </li> </button> </template> </ul> </div> </template> </div> </template> </div> </template> </div> </div> <div x-show="show_fade" x-transition:enter="transition ease-out" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }" class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div> </div> </div> </div> </div>
<div x-data="quick_view_enemy"
x-on:quick-view-enemy.window="getEnemy($event.detail);"> <div x-data="modal('quick-view-enemy', false, null, )" x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'quick-view-enemy') })" x-on:open-modal.window="$event.detail == 'quick-view-enemy' ? show = true : null" x-on:close-modal.window="$event.detail == 'quick-view-enemy' ? show = false : null" x-on:close.stop="show = false" x-on:keydown.escape.window="show = false" x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()" x-on:keydown.shift.tab.prevent="prevFocusable().focus()" x-show="show" class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" style="display: none;"> <div class="flex min-h-full justify-center md:p-4 text-center items-center sm:p-0"> <div x-show="show" class="fixed inset-0 transform transition-all" x-on:click="show = false" x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms> <div class="absolute inset-0 bg-immo opacity-70"></div> </div> <div x-show="show" class="md:mb-6 bg-gray-800 border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-sm sm:mx-8 md:mx-auto relative max-h-[90vh]" x-transition:enter.duration.300ms x-transition:leave.duration.200ms> <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2" x-on:click="$dispatch('close-modal', 'quick-view-enemy');" > <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold"> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /> </svg> </button> <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]" x-ref="scrollContainer" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" @scroll="handleScroll()"> <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible"> <template x-if="content_visible"> <div x-data="{show:false}" x-init="$nextTick(() => show = true)"> <template x-if="enemy"> <div class="my-4"> <div class="mx-4 mt-4 bg-white dark:brightness-80 rounded-lg ring-1 ring-black ring-opacity-5 shadow-sm h-64 flex items-center justify-center" :style="'background:linear-gradient( to left, rgba(0,0,0, 0.1), rgb(0, 0, 0, 0.6) ),url(\''+enemy.location.image_url+'\'); outline: none; background-position: center; background-repeat:no-repeat; background-size:cover'"> <div class="flex justify-center"> <div class="px-2 py-4 text-center rounded-lg bg-black/60 backdrop-blur-md z-10 min-w-60"> <div> <img :src="enemy.image_url" class="h-32 mx-auto"> </div> <div class="mt-2"> <h2 class="font-bold" x-text="enemy.name">Loading...</h2> </div> <div class="mt-2 flex gap-2 flex-wrap justify-center"> <template x-for="badge in enemy.badges"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60" x-text="badge"> </span> </template> </div> </div> </div> </div> <template x-if="enemy.description"> <div class="mx-4"> <blockquote class="p-4 my-4 border-l-4 border-yellow-400 bg-gray-900/40 dark:border-gray-500 dark:bg-gray-800"> <p class="text-sm italic font-medium leading-relaxed text-gray-100" x-text="enemy.description"> Loading... </p> </blockquote> </div> </template> <div> <div class="relative mt-4" custom-border="border-gray-700" custom-background="bg-gray-800"> <div class="absolute inset-0 flex items-center" aria-hidden="true"> <div class="w-full border-t border-gray-700"></div> </div> <div class="relative flex justify-center"> <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">Drops</span> </div> </div></div> <div class="grid grid-cols-2 xs:grid-cols-4 gap-2 mx-4 mt-4"> <template x-for="drop in enemy.drops" hidden> <a :href="drop.item.url" class="block w-full"> <button class="rounded-lg w-full bg-gray-900 text-center py-2 px-3 relative border h-16 quality:standard:background quality:standard:border flex items-center justify-center" x-tooltip.cursor.html="'<div class=\'text-center\'><span class=\'font-bold\'>'+drop.item.name+'</span></div>'"> <img class="h-8" :src="drop.image_url"> </button> </a> </template> </div> <div> <div class="relative mt-4" custom-border="border-gray-700" custom-background="bg-gray-800"> <div class="absolute inset-0 flex items-center" aria-hidden="true"> <div class="w-full border-t border-gray-700"></div> </div> <div class="relative flex justify-center"> <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">Location</span> </div> </div></div> <div class="flex items-center justify-between"> <div class="mx-4"> <div class="flex items-center px-3 py-3 text-sm font-medium text-gray-300 rounded-md group"> <img class="h-8 mr-4" src="https://cdn.idle-mmo.com/global/map.png"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8 mr-4 text-gray-400" style="display: none;"> <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path> </svg> <button class="ml-1 truncate" x-html="enemy.location.name" x-on:click="$dispatch('quick-view-location', enemy.location.id);$dispatch('close-modal', 'quick-view-enemy');"></button> </div> </div> <div class="mr-4 text-xs font-semibold text-gray-200 sm:text-sm"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60" x-text="enemy.location.distance"> </span> </div> </div> </div> </template> </div> </template> </div> </div> <div x-show="show_fade" x-transition:enter="transition ease-out" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }" class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div> </div> </div> </div> </div>
<div x-data="quick_view_food" x-on:quick-view-food.window=" $dispatch('open-modal', 'quick-view-food'); getItems(); entity_type = $event.detail.type; entity_id = $event.detail.id; health = $event.detail.health; max_health = $event.detail.max_health; "> <div x-data="modal('quick-view-food', false, null, )" x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'quick-view-food') })" x-on:open-modal.window="$event.detail == 'quick-view-food' ? show = true : null" x-on:close-modal.window="$event.detail == 'quick-view-food' ? show = false : null" x-on:close.stop="show = false" x-on:keydown.escape.window="show = false" x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()" x-on:keydown.shift.tab.prevent="prevFocusable().focus()" x-show="show" class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" style="display: none;"> <div class="flex min-h-full justify-center md:p-4 text-center items-center sm:p-0"> <div x-show="show" class="fixed inset-0 transform transition-all" x-on:click="show = false" x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms> <div class="absolute inset-0 bg-immo opacity-70"></div> </div> <div x-show="show" class="md:mb-6 bg-gray-800 border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-sm sm:mx-8 md:mx-auto relative max-h-[90vh]" x-transition:enter.duration.300ms x-transition:leave.duration.200ms> <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2" x-on:click="$dispatch('close-modal', 'quick-view-food');" > <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold"> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /> </svg> </button> <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]" x-ref="scrollContainer" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" @scroll="handleScroll()"> <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible"> <template x-if="content_visible"> <div x-data="{show:false}" x-init="$nextTick(() => show = true)"> <div> <div class="py-3 px-3 text-left flex items-center"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4 text-gray-600"> <path d="M2 6.342a3.375 3.375 0 0 1 6-2.088 3.375 3.375 0 0 1 5.997 2.26c-.063 2.134-1.618 3.76-2.955 4.784a14.437 14.437 0 0 1-2.676 1.61c-.02.01-.038.017-.05.022l-.014.006-.004.002h-.002a.75.75 0 0 1-.592.001h-.002l-.004-.003-.015-.006a5.528 5.528 0 0 1-.232-.107 14.395 14.395 0 0 1-2.535-1.557C3.564 10.22 1.999 8.558 1.999 6.38L2 6.342Z" /> </svg> <h2 class="text-sm font-semibold text-gray-200 ml-2"> Food </h2> </div> <ul role="list" class="divide-y divide-white/5"> <template x-for="item in items"> <li> <button class="relative flex items-center space-x-4 py-4 px-4 hover:bg-gray-700/30 cursor-pointer w-full" x-on:click="selected_item=item;$dispatch('open-modal', 'food-quantity-window');"> <div class="relative"> <img :src="item.image_url" class="h-12"> <div class="absolute bottom-0 left-0"> <div class="bg-gray-700/90 px-2 font-bold inline-block text-xs py-0.5 rounded-full"> <span x-text='item.quantity'></span> </div> </div> </div> <div class="min-w-0 flex-auto"> <div class="flex items-center gap-x-3"> <h2 class="min-w-0 text-sm font-semibold leading-6 text-white"> <a href="#" class="flex gap-x-2"> <span x-html="item.formatted_name"></span> </a> </h2> </div> <div class="mt-1 flex items-center gap-x-2.5 gap-y-1 text-xs leading-5 text-gray-400 flex-wrap"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60"> +<span x-text='item.health_increase'></span> Health
</span> </div> </div> <svg class="h-5 w-5 flex-none text-gray-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"> <path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" /> </svg> </button> </li> </template> <template x-if="items && items.length <= 0"> <div class="px-3 py-4 text-center sm:px-14"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 mx-auto text-gray-300"> <path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"></path> </svg> <h4 class="text-gray-200 text-sm font-bold mt-2">No Food</h4> <p class="text-sm text-gray-400">You don&#039;t have any food items in your inventory.</p> <div class="mt-2"> <a href="https://web.idle-mmo.com/market/listings?type=food&amp;same_window_refresh=true"> <button type="button" class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block"> Buy From Market </button> </a> </div> </div> </template> <template x-if="items === null"> <div class="px-3 py-4 text-center sm:px-14 flex items-center justify-center"> <svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"> <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle> <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> </div> </template> </ul> <template x-if="items && items.length"> <div class="my-2 text-xs border-t border-white/5"> <div class="font-medium text-gray-400 mt-2">Need more food? <a href="https://web.idle-mmo.com/market/listings?type=food&amp;same_window_refresh=true" class="text-yellow-400 hover:text-yellow-500 font-semibold">Buy more</a>. </div> </div> </template> </div> </div> </template> </div> </div> <div x-show="show_fade" x-transition:enter="transition ease-out" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }" class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div> </div> </div> </div> <div x-data="modal('food-quantity-window', false, null, 1)" x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'food-quantity-window') })" x-on:open-modal.window="$event.detail == 'food-quantity-window' ? show = true : null" x-on:close-modal.window="$event.detail == 'food-quantity-window' ? show = false : null" x-on:close.stop="show = false" x-on:keydown.escape.window="show = false" x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()" x-on:keydown.shift.tab.prevent="prevFocusable().focus()" x-show="show" class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" style="display: none;"> <div class="flex min-h-full justify-center md:p-4 text-center items-center sm:p-0"> <div x-show="show" class="fixed inset-0 transform transition-all" x-on:click="show = false" x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms> <div class="absolute inset-0 bg-immo opacity-70"></div> </div> <div x-show="show" class="md:mb-6 bg-gray-800 border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-xs sm:mx-8 md:mx-auto relative max-h-[90vh]" x-transition:enter.duration.300ms x-transition:leave.duration.200ms> <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2" x-on:click="$dispatch('close-modal', 'food-quantity-window');" > <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold"> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /> </svg> </button> <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]" x-ref="scrollContainer" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" @scroll="handleScroll()"> <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible"> <template x-if="content_visible"> <div x-data="{show:false}" x-init="$nextTick(() => show = true)"> <div class="w-full text-left"> <div class="py-3 pb-1 px-3 text-left flex items-center border-b border-white/5"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4 text-gray-600"> <path d="M2 6.342a3.375 3.375 0 0 1 6-2.088 3.375 3.375 0 0 1 5.997 2.26c-.063 2.134-1.618 3.76-2.955 4.784a14.437 14.437 0 0 1-2.676 1.61c-.02.01-.038.017-.05.022l-.014.006-.004.002h-.002a.75.75 0 0 1-.592.001h-.002l-.004-.003-.015-.006a5.528 5.528 0 0 1-.232-.107 14.395 14.395 0 0 1-2.535-1.557C3.564 10.22 1.999 8.558 1.999 6.38L2 6.342Z" /> </svg> <h2 class="text-sm font-semibold text-gray-200 ml-2"> Quick Feed </h2> </div> <div class="p-4"> <div class="flex rounded-md shadow-sm"> <div class="relative flex items-stretch flex-grow focus-within:z-10"> <input type="number" name="quantity" x-on:change="checkQuantity();" x-model="quantity" id="quantity" class="bg-gray-900 block w-full rounded-none rounded-l-md border-0 py-1.5 text-gray-100 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6" placeholder="Enter a quantity here..."> </div> <button type="button" x-on:click="quantity--;checkQuantity();" class="relative -ml-px inline-flex items-center gap-x-1.5 border-l border-gray-800/30 px-3 py-2 text-sm font-semibold text-gray-100 bg-gray-700 hover:bg-gray-700/80"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"> <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12h-15"></path> </svg> </button> <button type="button" x-on:click="quantity++;checkQuantity();" class="relative -ml-px inline-flex items-center gap-x-1.5 border-l border-gray-800/30 rounded-r-md px-3 py-2 text-sm font-semibold text-gray-100 bg-gray-700 hover:bg-gray-700/80"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"> <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"></path> </svg> </button> </div> <div class="text-xs mt-1 flex flex-wrap justify-end gap-3"> <template x-if="max_health"> <button class="text-yellow-400 hover:text-yellow-500 font-medium" x-on:click="calculateMax('health');">Max Health</button> </template> </div> </div> </div> <template x-if="selected_item"> <div> <div> <div class="relative mt-0"> <div class="absolute inset-0 flex items-center" aria-hidden="true"> <div class="w-full border-t border-gray-700"></div> </div> <div class="relative flex justify-center"> <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">Increase</span> </div> </div></div> <div class="flex flex-wrap justify-center mx-4 gap-2 mt-4"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60"> +<span x-text='selected_item.health_increase * quantity'></span> Health <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-3 h-3 text-green-400 inline-block"> <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 15.75 7.5-7.5 7.5 7.5" /> </svg></span> </div> </div> </template> <div class="py-2 bg-gray-900/60 mt-4"> <button type="button" class="inline-block rounded px-4 py-2 bg-gradient-to-b font-bold bg-indigo-600 hover:bg-indigo-500 text-sm" x-on:click="feed();" x-bind:disabled="processing" x-bind:class="{'opacity-40' : processing}"> Use </button> </div> </div> </template> </div> </div> <div x-show="show_fade" x-transition:enter="transition ease-out" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }" class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div> </div> </div> </div> </div>
<div x-data="quick_view_dungeon"
x-on:quick-view-dungeon.window="getDungeon($event.detail);"> <div x-data="modal('quick-view-dungeon', false, null, )" x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'quick-view-dungeon') })" x-on:open-modal.window="$event.detail == 'quick-view-dungeon' ? show = true : null" x-on:close-modal.window="$event.detail == 'quick-view-dungeon' ? show = false : null" x-on:close.stop="show = false" x-on:keydown.escape.window="show = false" x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()" x-on:keydown.shift.tab.prevent="prevFocusable().focus()" x-show="show" class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" style="display: none;"> <div class="flex min-h-full justify-center md:p-4 text-center items-center sm:p-0"> <div x-show="show" class="fixed inset-0 transform transition-all" x-on:click="show = false" x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms> <div class="absolute inset-0 bg-immo opacity-70"></div> </div> <div x-show="show" class="md:mb-6 bg-gray-800 border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-sm sm:mx-8 md:mx-auto relative max-h-[90vh]" x-transition:enter.duration.300ms x-transition:leave.duration.200ms> <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2" x-on:click="$dispatch('close-modal', 'quick-view-dungeon');" > <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold"> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /> </svg> </button> <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]" x-ref="scrollContainer" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" @scroll="handleScroll()"> <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible"> <template x-if="content_visible"> <div x-data="{show:false}" x-init="$nextTick(() => show = true)"> <template x-if="dungeon"> <div class="my-4"> <div class="mx-4 mt-4 bg-white dark:brightness-80 rounded-lg ring-1 ring-black ring-opacity-5 shadow-sm h-64 flex items-center justify-center" :style="'background:linear-gradient( to left, rgba(0,0,0, 0.1), rgb(0, 0, 0, 0.6) ),url(\''+dungeon.location.image_url+'\'); outline: none; background-position: center; background-repeat:no-repeat; background-size:cover'"> <div class="flex justify-center"> <div class="px-2 py-4 text-center rounded-lg bg-black/60 backdrop-blur-md z-10 min-w-60"> <div> <img :src="dungeon.image_url" class="h-32 mx-auto"> </div> <div class="mt-2"> <h2 class="font-bold" x-text="dungeon.name">Loading...</h2> </div> <div class="mt-2 flex gap-2 flex-wrap justify-center"> <template x-for="badge in dungeon.badges"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60" x-text="badge"> </span> </template> </div> </div> </div> </div> <template x-if="dungeon.description"> <div class="mx-4"> <blockquote class="p-4 my-4 border-l-4 border-yellow-400 bg-gray-900/40 dark:border-gray-500 dark:bg-gray-800"> <p class="text-sm italic font-medium leading-relaxed text-gray-100" x-text="dungeon.description"> Loading... </p> </blockquote> </div> </template> <div> <div class="relative mt-4" custom-border="border-gray-700" custom-background="bg-gray-800"> <div class="absolute inset-0 flex items-center" aria-hidden="true"> <div class="w-full border-t border-gray-700"></div> </div> <div class="relative flex justify-center"> <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">Drops</span> </div> </div></div> <div class="grid grid-cols-2 xs:grid-cols-4 gap-2 mx-4 mt-4"> <template x-for="drop in dungeon.drops" hidden> <a :href="drop.item.url" class="block w-full"> <button class="rounded-lg w-full bg-gray-900 text-center py-2 px-3 relative border h-16 quality:standard:background quality:standard:border flex items-center justify-center" x-tooltip.cursor.html="'<div class=\'text-center\'><span class=\'font-bold\'>'+drop.item.name+'</span></div>'"> <img class="h-8" :src="drop.image_url"> </button> </a> </template> </div> <div> <div class="relative mt-4" custom-border="border-gray-700" custom-background="bg-gray-800"> <div class="absolute inset-0 flex items-center" aria-hidden="true"> <div class="w-full border-t border-gray-700"></div> </div> <div class="relative flex justify-center"> <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">Location</span> </div> </div></div> <div class="flex items-center justify-between flex-wrap w-full"> <div class="mx-4 w-full"> <div class="flex items-center px-3 py-3 text-sm font-medium text-gray-300 rounded-md group w-full"> <img class="h-8 mr-4" src="https://cdn.idle-mmo.com/global/map.png"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8 mr-4 text-gray-400" style="display: none;"> <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path> </svg> <div class="text-left flex justify-between flex-wrap w-full gap-y-1"> <button class="ml-1 truncate" x-html="dungeon.location.name" x-on:click="$dispatch('quick-view-location', dungeon.location.id);$dispatch('close-modal', 'quick-view-dungeon');"></button> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60" x-text="dungeon.location.distance"> </span> </div> </div> </div> </div> </div> </template> </div> </template> </div> </div> <div x-show="show_fade" x-transition:enter="transition ease-out" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }" class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div> </div> </div> </div> </div>
<div x-data="quick_view_world_boss"
x-on:quick-view-world-boss.window="getWorldBoss($event.detail);"> <div x-data="modal('quick-view-world-boss', false, null, )" x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'quick-view-world-boss') })" x-on:open-modal.window="$event.detail == 'quick-view-world-boss' ? show = true : null" x-on:close-modal.window="$event.detail == 'quick-view-world-boss' ? show = false : null" x-on:close.stop="show = false" x-on:keydown.escape.window="show = false" x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()" x-on:keydown.shift.tab.prevent="prevFocusable().focus()" x-show="show" class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" style="display: none;"> <div class="flex min-h-full justify-center md:p-4 text-center items-center sm:p-0"> <div x-show="show" class="fixed inset-0 transform transition-all" x-on:click="show = false" x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms> <div class="absolute inset-0 bg-immo opacity-70"></div> </div> <div x-show="show" class="md:mb-6 bg-gray-800 border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-sm sm:mx-8 md:mx-auto relative max-h-[90vh]" x-transition:enter.duration.300ms x-transition:leave.duration.200ms> <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2" x-on:click="$dispatch('close-modal', 'quick-view-world-boss');" > <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold"> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /> </svg> </button> <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]" x-ref="scrollContainer" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" @scroll="handleScroll()"> <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible"> <template x-if="content_visible"> <div x-data="{show:false}" x-init="$nextTick(() => show = true)"> <template x-if="world_boss"> <div class="my-4"> <div class="mx-4 mt-4 bg-white dark:brightness-80 rounded-lg ring-1 ring-black ring-opacity-5 shadow-sm h-64 flex items-center justify-center" :style="'background:linear-gradient( to left, rgba(0,0,0, 0.1), rgb(0, 0, 0, 0.6) ),url(\''+world_boss.location.image_url+'\'); outline: none; background-position: center; background-repeat:no-repeat; background-size:cover'"> <div class="flex justify-center"> <div class="px-2 py-4 text-center rounded-lg bg-black/60 backdrop-blur-md z-10 min-w-60"> <div> <img :src="world_boss.image_url" class="h-32 mx-auto"> </div> <div class="mt-2"> <h2 class="font-bold" x-text="world_boss.name">Loading...</h2> </div> <div class="mt-2 flex gap-2 flex-wrap justify-center"> <template x-for="badge in world_boss.badges"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60" x-text="badge"> </span> </template> </div> </div> </div> </div> <template x-if="world_boss.description"> <div class="mx-4"> <blockquote class="p-4 my-4 border-l-4 border-yellow-400 bg-gray-900/40 dark:border-gray-500 dark:bg-gray-800"> <p class="text-sm italic font-medium leading-relaxed text-gray-100" x-text="world_boss.description"> Loading... </p> </blockquote> </div> </template> <div> <div class="relative mt-4" custom-border="border-gray-700" custom-background="bg-gray-800"> <div class="absolute inset-0 flex items-center" aria-hidden="true"> <div class="w-full border-t border-gray-700"></div> </div> <div class="relative flex justify-center"> <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">Drops</span> </div> </div></div> <div class="grid grid-cols-2 xs:grid-cols-4 gap-2 mx-4 mt-4"> <template x-for="drop in world_boss.drops" hidden> <a :href="drop.item.url" class="block w-full"> <button class="rounded-lg w-full bg-gray-900 text-center py-2 px-3 relative border h-16 quality:standard:background quality:standard:border flex items-center justify-center" x-tooltip.cursor.html="'<div class=\'text-center\'><span class=\'font-bold\'>'+drop.item.name+'</span></div>'"> <img class="h-8" :src="drop.image_url"> </button> </a> </template> </div> <div> <div class="relative mt-4" custom-border="border-gray-700" custom-background="bg-gray-800"> <div class="absolute inset-0 flex items-center" aria-hidden="true"> <div class="w-full border-t border-gray-700"></div> </div> <div class="relative flex justify-center"> <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">Location</span> </div> </div></div> <div class="flex items-center justify-between"> <div class="mx-4"> <div class="flex items-center px-3 py-3 text-sm font-medium text-gray-300 rounded-md group"> <img class="h-8 mr-4" src="https://cdn.idle-mmo.com/global/map.png"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8 mr-4 text-gray-400" style="display: none;"> <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path> </svg> <button class="ml-1 truncate" x-html="world_boss.location.name" x-on:click="$dispatch('quick-view-location', world_boss.location.id);$dispatch('close-modal', 'quick-view-world-boss');"></button> </div> </div> <div class="mr-4 text-xs font-semibold text-gray-200 sm:text-sm"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60" x-text="world_boss.location.distance"> </span> </div> </div> </div> </template> </div> </template> </div> </div> <div x-show="show_fade" x-transition:enter="transition ease-out" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }" class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div> </div> </div> </div> </div>
<div x-data="shrine"> <div x-data="modal('contribute-to-shrine', false, null, )" x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'contribute-to-shrine') })" x-on:open-modal.window="$event.detail == 'contribute-to-shrine' ? show = true : null" x-on:close-modal.window="$event.detail == 'contribute-to-shrine' ? show = false : null" x-on:close.stop="show = false" x-on:keydown.escape.window="show = false" x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()" x-on:keydown.shift.tab.prevent="prevFocusable().focus()" x-show="show" class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" style="display: none;"> <div class="flex min-h-full justify-center md:p-4 text-center items-center sm:p-0"> <div x-show="show" class="fixed inset-0 transform transition-all" x-on:click="show = false" x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms> <div class="absolute inset-0 bg-immo opacity-70"></div> </div> <div x-show="show" class="md:mb-6 bg-gray-800 border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-sm sm:mx-8 md:mx-auto relative max-h-[90vh]" x-transition:enter.duration.300ms x-transition:leave.duration.200ms> <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2" x-on:click="$dispatch('close-modal', 'contribute-to-shrine');" > <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold"> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /> </svg> </button> <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]" x-ref="scrollContainer" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" @scroll="handleScroll()"> <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible"> <template x-if="content_visible"> <div x-data="{show:false}" x-init="$nextTick(() => show = true)"> <div x-init="$watch('show', function(value){ if(value) getShrine() })"> <template x-if="shrine_data?.progress"> <div> <div class="px-3 py-2 text-center"> <img src="https://cdn.idle-mmo.com/cdn-cgi/image/width=150,height=150,format=auto/uploaded/skins/01HR4PQW3PX271SS7Y02MNSQT8.png" class="mx-auto"> </div> <div class="px-4 pt-2"> <div class="text-center"> <h2 class="text-sm font-bold text-gray-200">Shrine of the Old Gods</h2> <p class="text-gray-400 text-sm mt-2 font-medium">Contribute to the Shrine to earn rewards and help the community.</p> </div> <div class="mt-2"> <div class="inline-flex items-center text-sm leading-5 text-gray-400"> <div class="inline-flex items-center text-xs text-gray-300 font-bold rounded-md bg-gray-700 px-2 py-1 whitespace-nowrap rounded-r-none"> <span> Length of Effects </span> </div> <div class="inline-flex items-center text-xs text-gray-400 font-semibold rounded-md rounded-l-none bg-gray-700/60 px-2 py-1 whitespace-nowrap" label="Length of Effects" > <div> 2h </div> </div></div> </div> </div> <div> <div class="relative mt-4"> <div class="absolute inset-0 flex items-center" aria-hidden="true"> <div class="w-full border-t border-gray-700"></div> </div> <div class="relative flex justify-center"> <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">More</span> </div> </div></div> <div class="mt-4"> <button type="button" class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block" x-on:click="$dispatch('open-modal', 'list-shrine-contributors')"> Contributors </button> </div> <div> <div class="relative mt-4"> <div class="absolute inset-0 flex items-center" aria-hidden="true"> <div class="w-full border-t border-gray-700"></div> </div> <div class="relative flex justify-center"> <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">Tiers</span> </div> </div></div> <div class="px-4"> <div class="mt-4 text-left flex mx-1"> <nav aria-label="Progress" class="w-full"> <ol role="list" class="overflow-hidden"> <template x-for="tier in shrine_data?.progress"> <li class="relative pb-5"> <div class="absolute left-4 top-4 -ml-px mt-0.5 h-full w-0.5 bg-yellow-600" :class="{ 'bg-yellow-600' : tier.target_remaining === 0 && !tier.last_in_list, 'bg-gray-700' : tier.target_remaining > 0 && !tier.last_in_list, 'bg-transparent group-hover:bg-gray-700' : tier.last_in_list, }" aria-hidden="true"></div> <div class="group relative flex items-start"> <span class="flex h-9 items-center"> <span class="relative z-10 flex h-8 w-8 items-center justify-center rounded-full " :class="{ 'bg-gradient-to-b from-yellow-400 to-yellow-600' : tier.target_remaining === 0, 'bg-gray-800 border-2 border-gray-700' : tier.target_remaining > 0 }"> <template x-if="tier.target_remaining === 0"> <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" viewBox="0 0 24 24"> <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M20 7L10 17l-5-5" /> </svg> </template> <template x-if="tier.in_progress"> <span class="h-2.5 w-2.5 rounded-full bg-yellow-600"></span> </template> </span> </span> <span class="ml-4 flex min-w-0 flex-col w-full"> <div> <span class="text-sm font-bold" x-text="tier.tier.name"> </span> <template x-if="tier.is_active"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-200 bg-green-500/60"> Reached
</span> </template> </div> <div class="mt-2"> <div class="h-2 bg-gray-700 rounded-lg"><div class="h-2 font-bold rounded-lg bg-gradient-to-r from-yellow-600 to-yellow-400 transition-[width]" :style="'width:'+tier.percentage+'%'"></div></div> </div> <span class="text-sm text-gray-500 mt-2 flex flex-wrap gap-2"> <template x-if="tier.target_remaining"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60"> <img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/gold_coin.png' class='h-4 w-4 inline-block'> <span x-text='number_format(tier.target_remaining)'></span> Remaining
</span> </template> <template x-for="effect in tier.effects" hidden> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60"> <span x-text="effect.label"></span></span> </template> </span> <template x-if="tier.can_activate"> <div class="mt-2"> <button type="button" class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block disabled:opacity-40" x-on:click="activateTier(tier.id)" x-bind:disabled="is_processing"> <span> <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 inline-block mr-1" viewBox="0 0 16 16"> <path fill="currentColor" fill-rule="evenodd" d="M8.074.945A5 5 0 0 0 6 5v.032c.004.6.114 1.176.311 1.709c.16.428-.204.91-.61.7a5 5 0 0 1-1.868-1.677c-.202-.304-.648-.363-.848-.058a6 6 0 1 0 8.017-1.901l-.004-.007a4.98 4.98 0 0 1-2.18-2.574c-.116-.31-.477-.472-.744-.28m.78 6.178a3.001 3.001 0 1 1-3.473 4.341c-.205-.365.215-.694.62-.59a4 4 0 0 0 1.873.03c.288-.065.413-.386.321-.666A4 4 0 0 1 8 8.999c0-.585.126-1.14.351-1.641a.42.42 0 0 1 .503-.235" clip-rule="evenodd" /> </svg> Activate </span> </button> </div> </template> </span> </div> </li> </template> </ol> </nav> </div> </div> <div> <div class="relative mt-6"> <div class="absolute inset-0 flex items-center" aria-hidden="true"> <div class="w-full border-t border-gray-700"></div> </div> <div class="relative flex justify-center"> <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">Contribute</span> </div> </div></div> <div> <form x-on:submit.prevent="contribute();" method="POST"> <input type="hidden" name="_token" value="XyMoBec0vexU3Uc6FRmgCq1T9viaXxZJLP7cxHcI" autocomplete="off"> <ul role="list" class="flex gap-x-4 gap-y-2 flex-wrap content-start mx-4 mt-2"> <li :class="{'bg-gray-900/40' : currency === 'GOLD'}" class="text-gray-200 rounded-md px-3 py-2 text-sm font-bold"> <button type="button" x-on:click="currency='GOLD'"> Gold </button> </li> <li :class="{'bg-gray-900/40' : currency === 'TOKENS'}" class="text-gray-200 rounded-md px-3 py-2 text-sm font-bold"> <button type="button" x-on:click="currency='TOKENS'"> Tokens </button> </li> </ul> <template x-if="currency === 'TOKENS'"> <div class="inline-flex items-center rounded-md bg-red-500/10 px-2 py-1 text-xs font-medium text-red-400 ring-1 ring-inset ring-red-500/20 gap-2 text-left mx-4 mt-2"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6"> <path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z" /> </svg> <div> <span class="block font-bold">Not High Enough Level</span> <span class="text-gray-400">You need to have a total level of <strong>600</strong> to contribute to the shrine with tokens. </span> </div></div> </template> <div class="px-4 py-2" :class="{'opacity-40':!shrine_data.can_contribute}"> <div class="flex rounded-md shadow-sm"> <div class="relative flex items-stretch flex-grow focus-within:z-10"> <input type="number" name="amount" x-on:keyup="checkAmount();" x-model="amount" id="amount" class="bg-gray-900 block w-full rounded-none rounded-l-md border-0 py-1.5 text-gray-100 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6" placeholder="0"> </div> <button type="button" x-on:click="amount--;checkAmount();" class="relative -ml-px inline-flex items-center border-l border-gray-800/30 gap-x-1.5 px-3 py-2 text-sm font-semibold text-gray-100 bg-gray-700 hover:bg-gray-700/80"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"> <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12h-15"></path> </svg> </button> <button type="button" x-on:click="amount++;checkAmount();" class="relative -ml-px inline-flex items-center gap-x-1.5 border-l border-gray-800/30 rounded-r-md px-3 py-2 text-sm font-semibold text-gray-100 bg-gray-700 hover:bg-gray-700/80"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"> <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"></path> </svg> </button> </div> </div> <div> <template x-if="!shrine_data.can_contribute"> <div class="px-4 py-2 text-left"> <div class="inline-flex items-center rounded-md bg-indigo-500/10 px-2 py-1 text-xs font-medium text-indigo-300 ring-1 ring-inset ring-indigo-500/20 gap-2"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6"> <path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z" /> </svg> <div> You cannot contribute to the shrine as it is too close to the daily reset. </div></div> </div> </template> <template x-if="currency === 'TOKENS' && amount > 0"> <div> <div x-data="{show: true }" class="rounded-lg mt-2 bg-gray-800 shadow-sm py-3 px-6 relative text-gray-200 bg-gray-900/40 mx-4" x-cloak x-show="show" > <div class="absolute top-0 left-0 -mt-2 -ml-2"> <svg class="h-6 w-6 text-gray-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"> <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path> </svg> </div> <div> <div class="md:flex md:justify-between"> <div class="text-sm w-full"> This will be converted to <img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/gold_coin.png' class='h-4 w-4 inline-block'> <span class="font-bold" x-text="number_format(amount * 900)"></span> </div> </div> </div> </div> </div> </template> <div class="mt-2"> <div class="bg-gray-900/40 py-2 px-4 flex justify-between flex-wrap gap-2"> <button type="submit" class="inline-block rounded px-4 py-2 bg-gradient-to-b font-bold bg-indigo-600 hover:bg-indigo-500 text-sm" x-bind:class="{'opacity-40': !amount || is_processing || !shrine_data.can_contribute}" x-bind:disabled="!amount || is_processing || !shrine_data.can_contribute" type="submit"> Contribute </button> </div> </div> </div> </form> </div> </div> </template> </div> </div> </template> </div> </div> <div x-show="show_fade" x-transition:enter="transition ease-out" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }" class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div> </div> </div> </div> <div x-data="modal('list-shrine-contributors', false, null, )" x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'list-shrine-contributors') })" x-on:open-modal.window="$event.detail == 'list-shrine-contributors' ? show = true : null" x-on:close-modal.window="$event.detail == 'list-shrine-contributors' ? show = false : null" x-on:close.stop="show = false" x-on:keydown.escape.window="show = false" x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()" x-on:keydown.shift.tab.prevent="prevFocusable().focus()" x-show="show" class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" style="display: none;"> <div class="flex min-h-full justify-center md:p-4 text-center items-center sm:p-0"> <div x-show="show" class="fixed inset-0 transform transition-all" x-on:click="show = false" x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms> <div class="absolute inset-0 bg-immo opacity-70"></div> </div> <div x-show="show" class="md:mb-6 bg-gray-800 border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-sm sm:mx-8 md:mx-auto relative max-h-[90vh]" x-transition:enter.duration.300ms x-transition:leave.duration.200ms> <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2" x-on:click="$dispatch('close-modal', 'list-shrine-contributors');" > <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold"> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /> </svg> </button> <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]" x-ref="scrollContainer" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" @scroll="handleScroll()"> <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible"> <template x-if="content_visible"> <div x-data="{show:false}" x-init="$nextTick(() => show = true)"> <div x-data="{active_tab:'top', top_currency_tab: 'gold'}"> <div class="py-3 px-3 text-left flex items-center border-b border-white/5"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4 text-gray-600"> <path fill-rule="evenodd" d="M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0ZM9 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM6.75 8a.75.75 0 0 0 0 1.5h.75v1.75a.75.75 0 0 0 1.5 0v-2.5A.75.75 0 0 0 8.25 8h-1.5Z" clip-rule="evenodd" /> </svg> <h2 class="text-sm font-semibold text-gray-200 ml-2"> Shrine Contributors </h2> </div> <div> <div class="block"> <nav class="flex border-b border-white/5 py-4"> <ul role="list" class="flex min-w-full gap-x-6 gap-y-3 px-2 text-sm font-semibold leading-6 text-gray-400 flex-wrap px-4 justify-center text-center"> <li class="" :class="{ 'text-yellow-500': (active_tab == 'top') }" > <button type="button" x-on:click="active_tab = 'top'" > Top </button> </li> <li class="" :class="{ 'text-yellow-500': (active_tab == 'recent') }" > <button type="button" x-on:click="active_tab = 'recent'" > Recent </button> </li> </ul> </nav></div> </div> <template x-if="active_tab === 'top'"> <div class="flex justify-center mx-4 mt-2 flex-wrap"> <ul role="list" class="flex gap-x-4 gap-y-2 flex-wrap content-start"> <li :class="{'bg-gray-900/40' : top_currency_tab === 'gold'}" class="text-gray-200 rounded-md px-3 py-2 text-sm font-bold"> <button type="button" x-on:click="top_currency_tab='gold'"> Gold </button> </li> <li :class="{'bg-gray-900/40' : top_currency_tab === 'tokens'}" class="text-gray-200 rounded-md px-3 py-2 text-sm font-bold"> <button type="button" x-on:click="top_currency_tab='tokens'"> Tokens </button> </li> </ul> </div> </template> <template x-if="!shrine_data?.contributors"> <div class="flex justify-center py-8"> <svg class="animate-spin h-8 w-8 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"> <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle> <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path> </svg> </div> </template> <template x-if="shrine_data?.contributors"> <div> <template x-if="(active_tab === 'recent' && shrine_data?.contributors.recent.length === 0) || (active_tab === 'top' && top_currency_tab === 'gold' && shrine_data?.contributors.top_gold.length === 0) || (active_tab === 'top' && top_currency_tab === 'tokens' && shrine_data?.contributors.top_tokens.length === 0)"> <div x-data="{show: true }" class="rounded-lg mt-2 bg-gray-800 shadow-sm py-3 px-6 relative text-gray-200 mx-4 bg-gray-900/40 text-left" x-cloak x-show="show" > <div class="absolute top-0 left-0 -mt-2 -ml-2"> <svg class="h-6 w-6 text-gray-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"> <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path> </svg> </div> <div> <div class="md:flex md:justify-between"> <div class="text-sm w-full"> No contributors yet. Be the first to contribute! </div> </div> </div> </div> </template> <div class="w-full divide-y divide-gray-700/30 mt-2"> <template x-for="contributor in (active_tab === 'recent' ? shrine_data?.contributors.recent : (top_currency_tab === 'gold' ? shrine_data?.contributors.top_gold : shrine_data?.contributors.top_tokens))" hidden> <div class="flex items-center justify-between"> <div> <div class="flex items-center px-3 py-3 text-sm font-medium text-gray-300 rounded-md group"> <div class="h-8 w-8 rounded-full overflow-hidden bg-gray-900/40 flex items-center justify-center"> <img :src="contributor.character.image_url" class="h-12 w-12 max-w-none mt-5"> </div> <div class="ml-2 text-left space-y-1"> <span class="truncate" x-html="contributor.character.formatted_name"></span> <template x-if="contributor?.created_at"> <span class="block"><span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60" x-text="contributor?.created_at"> </span></span> </template> </div> </div> </div> <div class="mr-4 font-semibold text-gray-200 text-sm"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 whitespace-nowrap"> <template x-if="contributor?.currency"> <span> <template x-if="contributor.currency === 'GOLD'"> <span><img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/gold_coin.png' class='h-4 w-4 inline-block'></span> </template> <template x-if="contributor.currency === 'TOKENS'"> <span><img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/token.png' class='h-4 w-4 inline-block'></span> </template> <span x-text="number_format(contributor.amount)"></span> </span> </template> <template x-if="!contributor?.currency"> <span><img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/gold_coin.png' class='h-4 w-4 inline-block'> <span x-text="number_format(contributor.amount)"></span></span> </template></span> </div> </div> </template> </div> </div> </template> </div> </div> </template> </div> </div> <div x-show="show_fade" x-transition:enter="transition ease-out" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }" class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div> </div> </div> </div> </div>
<div x-data="shootingStar"> <div x-data="modal('shooting-star', false, null, )" x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'shooting-star') })" x-on:open-modal.window="$event.detail == 'shooting-star' ? show = true : null" x-on:close-modal.window="$event.detail == 'shooting-star' ? show = false : null" x-on:close.stop="show = false" x-on:keydown.escape.window="show = false" x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()" x-on:keydown.shift.tab.prevent="prevFocusable().focus()" x-show="show" class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" style="display: none;"> <div class="flex min-h-full justify-center md:p-4 text-center items-center sm:p-0"> <div x-show="show" class="fixed inset-0 transform transition-all" x-on:click="show = false" x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms> <div class="absolute inset-0 bg-immo opacity-70"></div> </div> <div x-show="show" class="md:mb-6 bg-gray-800 border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-xs sm:mx-8 md:mx-auto relative max-h-[90vh]" x-transition:enter.duration.300ms x-transition:leave.duration.200ms> <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2" x-on:click="$dispatch('close-modal', 'shooting-star');" > <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold"> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /> </svg> </button> <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]" x-ref="scrollContainer" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" @scroll="handleScroll()"> <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible"> <template x-if="content_visible"> <div x-data="{show:false}" x-init="$nextTick(() => show = true)"> <div x-init="$watch('show', function(value){ if(value) getShootingStarStatus() })"> <template x-if="shooting_star_data !== null"> <div> <div class="px-4 py-2 text-center"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-24 text-gray-400 mx-auto"> <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z" /> </svg> </div> <div class="px-4 pt-2"> <div class="text-center"> <h2 class="text-sm font-bold text-gray-200">Shooting Star</h2> <p class="text-gray-400 text-sm mt-2">A rare celestial event that grants powerful blessings to those who witness it.</p> </div> </div> <div class="mt-4"> <template x-if="shooting_star_data.shooting_star.is_active"> <div> <div> <div class="relative"> <div class="absolute inset-0 flex items-center" aria-hidden="true"> <div class="w-full border-t border-gray-700"></div> </div> <div class="relative flex justify-center"> <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">Time Remaining</span> </div> </div></div> <div class="mt-4 mx-4"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 inline-block mr-1"> <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" /> </svg> <span x-text="msToDaysHoursMinutesAndSeconds(shooting_star_data.shooting_star.ms_remaining)"></span></span> </div> <div> <div class="relative mt-4"> <div class="absolute inset-0 flex items-center" aria-hidden="true"> <div class="w-full border-t border-gray-700"></div> </div> <div class="relative flex justify-center"> <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">Effects</span> </div> </div></div> <div class="mt-4 flex flex-wrap gap-2 mx-4"> <template x-for="effect in shooting_star_data.shooting_star.effects" hidden> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60"> <span x-text="effect"></span></span> </template> </div> <div class="mt-4"> <div class="bg-gray-900/40 py-3 px-4"> <button type="button" class="inline-block rounded px-4 py-2 bg-gradient-to-b font-bold bg-indigo-600 hover:bg-indigo-500 text-sm w-full disabled:opacity-40" x-on:click="applyEffects()" x-bind:disabled="is_processing || shooting_star_data.shooting_star.has_applied"> <span x-show="!is_processing" class="flex items-center justify-center"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-1"> <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z" /> </svg> Apply Effects </span> <span x-show="is_processing"> <svg class="animate-spin h-4 w-4 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"> <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle> <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path> </svg> </span> </button> </div> </div> </div> </template> <template x-if="!shooting_star_data.shooting_star.is_active"> <div class="mx-4 my-4 text-left"> <div class="inline-flex items-center rounded-md bg-indigo-500/10 px-2 py-1 text-xs font-medium text-indigo-300 ring-1 ring-inset ring-indigo-500/20 gap-2"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6"> <path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z" /> </svg> <div> There is no shooting star at this location right now. </div></div> </div> </template> </div> </div> </template> <template x-if="shooting_star_data === null"> <div class="flex justify-center py-8"> <svg class="animate-spin h-8 w-8 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"> <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle> <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path> </svg> </div> </template> </div> </div> </template> </div> </div> <div x-show="show_fade" x-transition:enter="transition ease-out" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }" class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div> </div> </div> </div> </div>
<!-- Setup the communication hub script data --> <div x-data="communicationHub" x-on:communication-hub.window="active_tab = $event.detail; $dispatch('open-modal', 'communication-hub')"> <div x-data="modal('communication-hub', false, null, )" x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'communication-hub') })" x-on:open-modal.window="$event.detail == 'communication-hub' ? show = true : null" x-on:close-modal.window="$event.detail == 'communication-hub' ? show = false : null" x-on:close.stop="show = false" x-on:keydown.escape.window="show = false" x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()" x-on:keydown.shift.tab.prevent="prevFocusable().focus()" x-show="show" class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" style="display: none;"> <div class="flex min-h-full justify-center md:p-4 text-center items-center sm:p-0"> <div x-show="show" class="fixed inset-0 transform transition-all" x-on:click="show = false" x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms> <div class="absolute inset-0 bg-immo opacity-70"></div> </div> <div x-show="show" class="md:mb-6 bg-gray-800 border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-md sm:mx-8 md:mx-auto relative max-h-[90vh]" x-transition:enter.duration.300ms x-transition:leave.duration.200ms> <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2" x-on:click="$dispatch('close-modal', 'communication-hub');" > <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold"> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /> </svg> </button> <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]" x-ref="scrollContainer" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" @scroll="handleScroll()"> <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible"> <template x-if="content_visible"> <div x-data="{show:false}" x-init="$nextTick(() => show = true)"> <div x-init="$watch('show', function(value){ if(value) { openHub(); } else closeHub(); })" class="text-left"> <div class="border-b border-white/5 "> <div class="py-3 px-3 text-left flex items-center"> <svg xmlns="http://www.w3.org/2000/svg" class="size-4 text-gray-500" viewBox="0 0 24 24"> <path fill="currentColor" d="m20 10.35l-5.78-7.41A3.06 3.06 0 0 0 9.75 3L4 10.35A3.05 3.05 0 0 0 3.51 12A3.1 3.1 0 0 0 4 13.58l.06.07l5.74 7.41A3 3 0 0 0 12 22a3.06 3.06 0 0 0 2.26-1L20 13.65a3 3 0 0 0-.06-3.3Zm-1.57 2.14l-5.67 7.22a1.11 1.11 0 0 1-1.42.07l-5.69-7.31a1 1 0 0 1-.14-.47a1.1 1.1 0 0 1 .1-.45l5.67-7.22a1.11 1.11 0 0 1 1.42-.07l5.63 7.28a1 1 0 0 1 .16.54a1.1 1.1 0 0 1-.1.41Z" /> </svg> <h2 class="text-sm font-semibold text-gray-200 ml-2"> Communication Hub </h2> <div class="text-sm font-semibold text-gray-200 ml-2"> </div> </div></div> <div> <div class="block"> <nav class="flex border-b border-white/5 py-4"> <ul role="list" class="flex min-w-full gap-x-6 gap-y-3 px-2 text-sm font-semibold leading-6 text-gray-400 flex-wrap px-4"> <li class="" :class="{ 'text-yellow-500': (active_tab == 'notifications') }" > <button type="button" x-on:click="active_tab = 'notifications'" > Notifications </button> </li> <li class="" :class="{ 'text-yellow-500': (active_tab == 'messages') }" > <button type="button" x-on:click="active_tab = 'messages'" > Messages </button> </li> </ul> </nav></div> </div> <div x-show="active_tab === 'notifications'" x-cloak> <div class="overflow-y-auto"> <div class="border-b border-white/5"> <div class="px-4 my-2"> <select x-model="notification_category" x-on:change="notifications_current_page = 1; notifications = []; getNotifications()" class="text-xs rounded-md border-0 bg-gray-700 text-gray-100 px-2 py-1 pr-8 font-bold focus:ring-2 focus:ring-indigo-600 appearance-none bg-no-repeat bg-right" style="background-image: url('data:image/svg+xml;charset=US-ASCII,<svg xmlns=&quot;http://www.w3.org/2000/svg&quot; viewBox=&quot;0 0 16 16&quot; fill=&quot;%23ffffff&quot;><path fill-rule=&quot;evenodd&quot; d=&quot;M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z&quot; clip-rule=&quot;evenodd&quot;/></svg>'); background-position: right 0.5rem center; background-size: 1rem;"> <option value="ALL">All</option> <option value="SKILLS">Skills</option> <option value="TRADE">Trade</option> <option value="PET">Pet</option> <option value="GUILD">Guild</option> <option value="OTHER">Other</option> </select> </div> </div> <template x-if="!notifications.length && !is_loading"> <div class="flex items-center justify-center h-32 my-2 text-sm text-center text-gray-400"> You have no notifications </div> </template> <template x-if="notifications.length"> <div class="divide-y divide-gray-700"> <template x-for="notification in notifications" hidden> <div class="block px-4 pt-3 pb-2 text-sm text-gray-200 hover:bg-gray-700/20 relative" tabindex="-1" x-data="{ show_read_icon: true }" x-on:mouseover="show_read_icon=false"> <template x-if="notification.read === false"> <div x-init="setTimeout(() => show_read_icon = false, 5000)" x-show="show_read_icon" x-transition.opacity.duration.1000ms class="absolute bottom-0 right-0 mr-2 mb-2"><div class="h-2 w-2 bg-green-400 rounded-lg"></div></div> </template> <div x-html="notification.title" class="font-bold"></div> <div x-html="notification.message" class="whitespace-pre-line"></div> <template x-if="notification.link !== null"> <div class="block mt-1"> <template x-if="notification.link.dispatch_event"> <button type="button" class="text-yellow-400 hover:text-yellow-500 font-medium" x-on:click="$dispatch(notification.link.dispatch_event, notification.link.dispatch_payload ?? null)" x-text="notification.link.label" ></button> </template> <template x-if="!notification.link.dispatch_event"> <a :href='notification.link.url' x-text='notification.link.label' :target='notification.link.target ?? "_self"' class='text-yellow-400 hover:text-yellow-500 font-medium'></a> </template> </div> </template> <span class="block text-gray-500 text-xs mt-1" x-text="notification.created_at"></span> </div> </template> </div> </template> <template x-if="!notifications.length && is_loading"> <div class="flex justify-center py-8"> <svg class="animate-spin h-8 w-8 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"> <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle> <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path> </svg> </div> </template> <template x-if="notifications.length"> <div class="py-3 px-4 mt-2"> <button type="button" class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block w-full disabled:opacity-40" x-on:click="loadMore();" x-bind:disabled="!hasMore() || is_loading"> Load More </button> </div> </template> </div> </div> <div x-show="active_tab === 'messages'" x-cloak> <div class="overflow-y-auto"> <div class="border-b border-white/5 "> <div class="px-4 my-2 flex justify-between "> <div> <select x-model="message_filter" x-on:change="messages_current_page = 1; message_data = null; getMessages()" class="text-xs rounded-md border-0 bg-gray-700 text-gray-100 px-2 py-1 pr-8 font-bold focus:ring-2 focus:ring-indigo-600 appearance-none bg-no-repeat bg-right" style="background-image: url('data:image/svg+xml;charset=US-ASCII,<svg xmlns=&quot;http://www.w3.org/2000/svg&quot; viewBox=&quot;0 0 16 16&quot; fill=&quot;%23ffffff&quot;><path fill-rule=&quot;evenodd&quot; d=&quot;M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z&quot; clip-rule=&quot;evenodd&quot;/></svg>'); background-position: right 0.5rem center; background-size: 1rem;"> <option value="received">Received</option> <option value="sent">Sent</option> </select> </div> <div x-show="message_filter === 'received'"> <div class="inline-flex items-center text-sm leading-5 text-gray-400"> <div class="inline-flex items-center text-xs text-gray-300 font-bold rounded-md bg-gray-700 px-2 py-1 whitespace-nowrap rounded-r-none"> <span> Limit </span> </div> <div class="inline-flex items-center text-xs text-gray-400 font-semibold rounded-md rounded-l-none bg-gray-700/60 px-2 py-1 whitespace-nowrap" label="Limit" > <div> <span x-text="(message_data?.current_count || 0) + '/' + (message_data?.max_count || 0)"></span> </div> </div></div> </div> </div> </div> <template x-if="message_filter === 'received' && message_data"> <div> <template x-if="message_data.current_count >= message_data.max_count"> <div class="mx-4 my-3 p-3 bg-red-500/10 border border-red-500/20 rounded-md"> <div class="flex items-start gap-2"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5 text-red-400 flex-shrink-0 mt-0.5"> <path fill-rule="evenodd" d="M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-8-5a.75.75 0 0 1 .75.75v4.5a.75.75 0 0 1-1.5 0v-4.5A.75.75 0 0 1 10 5Zm0 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z" clip-rule="evenodd" /> </svg> <div class="text-sm"> <p class="text-red-400 font-bold">Your inbox is full!</p> <p class="text-red-400/80 text-sm mt-1 font-medium">You cannot receive new messages. Please delete some messages to make room.</p> </div> </div> </div> </template> <template x-if="message_data.current_count < message_data.max_count && message_data.current_count >= (message_data.max_count * 0.9)"> <div class="mx-4 my-3 p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-md"> <div class="flex items-start gap-2"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5 text-yellow-400 flex-shrink-0 mt-0.5"> <path fill-rule="evenodd" d="M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495ZM10 5a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5A.75.75 0 0 1 10 5Zm0 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z" clip-rule="evenodd" /> </svg> <div class="text-sm"> <p class="text-yellow-400 font-bold">Your inbox is almost full!</p> <p class="text-gray-400/80 text-sm mt-1 font-medium">Consider deleting some messages to avoid missing new ones.</p> </div> </div> </div> </template> </div> </template> <template x-if="!message_data?.messages?.length && !is_loading"> <div class="flex items-center justify-center h-32 my-2 text-sm text-center text-gray-400"> You have no messages </div> </template> <template x-if="message_data?.messages?.length"> <div class="divide-y divide-gray-700"> <template x-for="message in (message_data?.messages || [])" hidden> <div class="flex gap-3 px-4 pt-3 pb-2 text-sm text-gray-200 hover:bg-gray-700/20 relative" tabindex="-1" x-data="{ confirmDelete: false, show_read_icon: true }" x-on:mouseover="show_read_icon=false"> <template x-if="message.is_read === false && message_filter === 'received'"> <div x-show="show_read_icon" x-transition.opacity.duration.1000ms class="absolute bottom-0 right-0 mr-2 mb-2"> <div class="h-2 w-2 bg-green-400 rounded-lg"></div> </div> </template> <div class="flex-shrink-0"> <a :href="message_filter === 'received' ? message.sender?.profile_url : message.receiver?.profile_url"> <div class="relative overflow-hidden w-12 h-12 rounded-full ring-2 ring-gray-700 bg-gray-800 bg-cover" x-bind:style="(message_filter === 'received' ? message.sender?.background_url : message.receiver?.background_url) ? 'background-image: url(\'' + (message_filter === 'received' ? message.sender?.background_url : message.receiver?.background_url) + '\');' : ''"> <img :src="message_filter === 'received' ? message.sender?.avatar_url : message.receiver?.avatar_url" :alt="message_filter === 'received' ? message.sender?.name : message.receiver?.name" class="absolute top-0 left-0 h-24 w-24 -ml-6 mt-1 max-w-none"> </div> </a> </div> <div class="flex-1 min-w-0"> <div class="flex items-center justify-between mb-1"> <div> <div x-html="message_filter === 'received' ? message.sender?.name : message.receiver?.name" class="font-bold"></div> <span class="block text-gray-500" x-text="message.created_at"></span> </div> <div class="flex items-center gap-2"> <div x-show="message_filter === 'received'"> <button x-on:click="$dispatch('report', {type: 'MAILBOX', character_mailbox_id: message.id})" x-bind:disabled="is_loading" class="text-gray-300 text-xs disabled:opacity-50 disabled:cursor-not-allowed rounded-full p-1 bg-gray-700 hover:bg-gray-600 flex items-center justify-center transition-colors"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4"> <path fill-rule="evenodd" d="M6.701 2.25c.577-1 2.02-1 2.598 0l5.196 9a1.5 1.5 0 0 1-1.299 2.25H2.804a1.5 1.5 0 0 1-1.3-2.25l5.197-9ZM8 4a.75.75 0 0 1 .75.75v3a.75.75 0 1 1-1.5 0v-3A.75.75 0 0 1 8 4Zm0 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z" clip-rule="evenodd" /> </svg> </button> </div> <div class="relative" x-show="message_filter === 'received'"> <button x-on:click="confirmDelete = true" x-bind:disabled="is_loading" class="text-gray-300 text-xs disabled:opacity-50 disabled:cursor-not-allowed rounded-full p-1 bg-gray-700 hover:bg-gray-600 flex items-center justify-center transition-colors"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4"> <path d="M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z" /> </svg> </button> <div x-show="confirmDelete" x-on:click.away="confirmDelete = false" class="absolute right-0 top-0 z-10 gap-1 bg-gray-700 rounded-md px-2 py-1 shadow-lg"> <span class="text-sm text-gray-300 mr-1 font-bold block">Confirm</span> <div class="flex justify-between "> <button x-on:click="deleteMessage(message.id); confirmDelete = false" x-bind:disabled="is_loading" class="text-red-500 hover:text-red-600 text-sm font-bold disabled:opacity-50 disabled:cursor-not-allowed"> Yes </button> <button x-on:click="confirmDelete = false" x-bind:disabled="is_loading" class="text-gray-400 hover:text-gray-300 text-sm font-bold disabled:opacity-50 disabled:cursor-not-allowed"> No </button> </div> </div> </div> </div> </div> <div x-html="message.message" class="whitespace-pre-line text-sm font-medium break-words"></div> <div class="mt-1" x-show="message_filter === 'received'"> <button class="text-yellow-400 hover:text-yellow-500 font-medium text-sm flex items-center gap-1" x-on:click="$dispatch('send-mail', message_filter === 'received' ? message.sender?.id : message.receiver?.id);"> <span>Reply</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4"> <path fill-rule="evenodd" d="M12.5 9.75A2.75 2.75 0 0 0 9.75 7H4.56l2.22 2.22a.75.75 0 1 1-1.06 1.06l-3.5-3.5a.75.75 0 0 1 0-1.06l3.5-3.5a.75.75 0 0 1 1.06 1.06L4.56 5.5h5.19a4.25 4.25 0 0 1 0 8.5h-1a.75.75 0 0 1 0-1.5h1a2.75 2.75 0 0 0 2.75-2.75Z" clip-rule="evenodd" /> </svg> </button> </div> </div> </div> </template> </div> </template> <template x-if="!message_data?.messages?.length && is_loading"> <div class="flex justify-center py-8"> <svg class="animate-spin h-8 w-8 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"> <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle> <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path> </svg> </div> </template> <template x-if="message_data?.messages?.length"> <div class="py-3 px-4 mt-2"> <button type="button" class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block w-full disabled:opacity-40" x-on:click="loadMore();" x-bind:disabled="!hasMore() || is_loading"> Load More </button> </div> </template> </div> </div> <template x-if="(notifications.length || message_data?.messages?.length) && is_loading"> <div class="absolute top-0 left-0 h-full w-full text-center text-white flex items-center justify-center bg-gray-900/40 rounded-lg"> <svg class="animate-spin h-8 w-8 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"> <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle> <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path> </svg> </div> </template> </div> </div> </template> </div> </div> <div x-show="show_fade" x-transition:enter="transition ease-out" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }" class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div> </div> </div> </div> </div>
<div x-data="reportModal" x-on:report.window="handleReport($event.detail)"> <div x-data="modal('report', false, null, 1)" x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'report') })" x-on:open-modal.window="$event.detail == 'report' ? show = true : null" x-on:close-modal.window="$event.detail == 'report' ? show = false : null" x-on:close.stop="show = false" x-on:keydown.escape.window="show = false" x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()" x-on:keydown.shift.tab.prevent="prevFocusable().focus()" x-show="show" class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" style="display: none;"> <div class="flex min-h-full justify-center md:p-4 text-center items-center sm:p-0"> <div x-show="show" class="fixed inset-0 transform transition-all" x-on:click="show = false" x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms> <div class="absolute inset-0 bg-immo opacity-70"></div> </div> <div x-show="show" class="md:mb-6 bg-gray-800 border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-md sm:mx-8 md:mx-auto relative max-h-[90vh]" x-transition:enter.duration.300ms x-transition:leave.duration.200ms> <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2" x-on:click="$dispatch('close-modal', 'report');" > <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold"> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /> </svg> </button> <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]" x-ref="scrollContainer" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" @scroll="handleScroll()"> <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible"> <template x-if="content_visible"> <div x-data="{show:false}" x-init="$nextTick(() => show = true)"> <div> <div class="border-b border-white/5 "> <div class="py-3 px-3 text-left flex items-center"> <svg xmlns="http://www.w3.org/2000/svg" class="size-4 text-gray-500" viewBox="0 0 24 24"> <path fill="currentColor" d="m20 10.35l-5.78-7.41A3.06 3.06 0 0 0 9.75 3L4 10.35A3.05 3.05 0 0 0 3.51 12A3.1 3.1 0 0 0 4 13.58l.06.07l5.74 7.41A3 3 0 0 0 12 22a3.06 3.06 0 0 0 2.26-1L20 13.65a3 3 0 0 0-.06-3.3Zm-1.57 2.14l-5.67 7.22a1.11 1.11 0 0 1-1.42.07l-5.69-7.31a1 1 0 0 1-.14-.47a1.1 1.1 0 0 1 .1-.45l5.67-7.22a1.11 1.11 0 0 1 1.42-.07l5.63 7.28a1 1 0 0 1 .16.54a1.1 1.1 0 0 1-.1.41Z" /> </svg> <h2 class="text-sm font-semibold text-gray-200 ml-2"> Report </h2> <div class="text-sm font-semibold text-gray-200 ml-2"> </div> </div></div> <div class=" my-4 mx-4 text-left"> <div> <label class="block text-sm font-bold text-gray-300 mb-2"> Type of Report </label> <div> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60"> <span x-cloak x-show="type === 'CHARACTER'"> Character </span> <span x-cloak x-show="type === 'MAILBOX'"> Mail </span> <span x-cloak x-show="type === 'PROFILE_COMMENT'"> Profile Comment </span> <span x-cloak x-show="type === 'TAVERN_POST_COMMENT'"> Tavern Comment </span></span> </div> </div> <div class="mt-4"> <label class="block text-sm font-bold text-gray-300 mb-2"> Why are you reporting this? </label> <textarea x-model="reason" class="w-full bg-gray-800 rounded-lg p-3 border border-gray-700 text-sm text-gray-200 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500" rows="4" maxlength="500" placeholder="Please provide details about why you are reporting this..." ></textarea> </div> </div> <div class="px-4 py-2 flex justify-end space-x-3 bg-gray-900/40"> <button type="button" class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block" x-on:click="$dispatch('close-modal', 'report')" x-bind:disabled="is_processing"> Cancel </button> <button type="button" class="inline-block rounded px-4 py-2 bg-gradient-to-b font-bold bg-indigo-600 hover:bg-indigo-500 text-sm" x-on:click="submit()" x-bind:disabled="is_processing || !reason?.trim()"> <span x-show="!is_processing">Submit</span> <span x-show="is_processing">Submitting...</span> </button> </div> </div> </div> </template> </div> </div> <div x-show="show_fade" x-transition:enter="transition ease-out" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }" class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div> </div> </div> </div> </div>
<div x-data="modal('refer-a-friend', false, null, 1)" x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'refer-a-friend') })" x-on:open-modal.window="$event.detail == 'refer-a-friend' ? show = true : null" x-on:close-modal.window="$event.detail == 'refer-a-friend' ? show = false : null" x-on:close.stop="show = false" x-on:keydown.escape.window="show = false" x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()" x-on:keydown.shift.tab.prevent="prevFocusable().focus()" x-show="show" class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" style="display: none;"> <div class="flex min-h-full justify-center md:p-4 text-center items-center sm:p-0"> <div x-show="show" class="fixed inset-0 transform transition-all" x-on:click="show = false" x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms> <div class="absolute inset-0 bg-immo opacity-70"></div> </div> <div x-show="show" class="md:mb-6 bg-gray-800 border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-xs sm:mx-8 md:mx-auto relative max-h-[90vh]" x-transition:enter.duration.300ms x-transition:leave.duration.200ms> <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2" x-on:click="$dispatch('close-modal', 'refer-a-friend');" > <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold"> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /> </svg> </button> <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]" x-ref="scrollContainer" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" @scroll="handleScroll()"> <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible"> <template x-if="content_visible"> <div x-data="{show:false}" x-init="$nextTick(() => show = true)"> <div class="py-3 px-3 text-left flex items-center border-b border-white/5"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-4 h-4 text-gray-600"> <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17 14.75V19.25M11.25 19.25H5.78165C5.21714 19.25 4.77296 18.7817 4.88545 18.2285C5.19601 16.7012 6.21027 14 9.49996 14C10.1744 14 10.7532 14.0563 11.25 14.25M19.25 17H14.75M14.75 10.25C16.2687 10.25 17.25 9.01878 17.25 7.5C17.25 5.98122 16.2687 4.75 14.75 4.75M12.25 7.5C12.25 9.01878 11.0187 10.25 9.49996 10.25C7.98118 10.25 6.74996 9.01878 6.74996 7.5C6.74996 5.98122 7.98118 4.75 9.49996 4.75C11.0187 4.75 12.25 5.98122 12.25 7.5Z"/> </svg> <h2 class="text-sm font-semibold text-gray-200 ml-2"> Refer a Friend </h2> </div> <div class="pt-3 text-sm text-center"> <div class="mt-2 text-gray-300 mx-4 text-left"> <p> For every friend you refer, you will receive <strong><img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/token.png' class='h-4 w-4 inline-block'> 20 tokens</strong>. </p> <p class="mt-2"> Your friends will also receive <strong><img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/token.png' class='h-4 w-4 inline-block'> 20 tokens.</strong> </p> </div> <div class="mt-2 flex flex-col gap-2 items-start justify-center"> <div class="w-full"> <div> <div class="relative"> <div class="absolute inset-0 flex items-center" aria-hidden="true"> <div class="w-full border-t border-gray-700"></div> </div> <div class="relative flex justify-center"> <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">Referral Code</span> </div> </div></div> </div> <div class="mx-4 text-left"> <button x-tooltip.cursor.raw.html="<div class='text-center'><span class='font-bold'>Click to copy</span></div>" x-on:click="displayToast('Copied to clipboard.', null, null, true)" class="max-w-fit rounded-lg px-4 py-2 bg-gray-700 font-bold" @click="$clipboard(referral_code)" x-data="{ referral_code: 'IMMO659085' }"> IMMO659085 </button> </div> <div class="w-full"> <div> <div class="relative"> <div class="absolute inset-0 flex items-center" aria-hidden="true"> <div class="w-full border-t border-gray-700"></div> </div> <div class="relative flex justify-center"> <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">Invitation Link</span> </div> </div></div> </div> <div class="mx-4 mt-2 text-left"> <button x-tooltip.cursor.raw.html="<div class='text-center'><span class='font-bold'>Click to copy</span></div>" x-on:click="displayToast('Copied to clipboard.', null, null, true)" class="rounded-lg px-4 py-2 text-left bg-gray-700 font-medium w-full" @click="$clipboard(referral_code)" x-data="{ referral_code: 'https://web.idle-mmo.com?source=referral&code=IMMO659085' }"> https://web.idle-mmo.com?source=referral&ref=IMMO659085 </button> </div> </div> <hr class="border border-t border-white/5 mt-4" /> <div class="text-gray-400 mt-3 mx-4"> The rewards will be distributed when your friend has confirmed their email address. </div> <div role="none" class="py-3 mt-3 bg-gray-700/30"> <div> <div class="inline-block"> <button type="button" class="rounded bg-black/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-black/40" type="button" x-on:click="$dispatch('close-modal', 'refer-a-friend');"> Close </button> </div> </div> </div> </div> </div> </template> </div> </div> <div x-show="show_fade" x-transition:enter="transition ease-out" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }" class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div> </div> </div> </div> <div x-data="party_overview" x-on:party-overview.window="open($event.detail)" x-on:party-invites-count-updated.window="updateInvitesCount($event.detail)"> <div x-data="modal('party-overview', false, null, )" x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'party-overview') })" x-on:open-modal.window="$event.detail == 'party-overview' ? show = true : null" x-on:close-modal.window="$event.detail == 'party-overview' ? show = false : null" x-on:close.stop="show = false" x-on:keydown.escape.window="show = false" x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()" x-on:keydown.shift.tab.prevent="prevFocusable().focus()" x-show="show" class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" style="display: none;"> <div class="flex min-h-full justify-center md:p-4 text-center items-center sm:p-0"> <div x-show="show" class="fixed inset-0 transform transition-all" x-on:click="show = false" x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms> <div class="absolute inset-0 bg-immo opacity-70"></div> </div> <div x-show="show" class="md:mb-6 bg-gray-800 border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-lg sm:mx-8 md:mx-auto relative max-h-[90vh]" x-transition:enter.duration.300ms x-transition:leave.duration.200ms> <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2" x-on:click="$dispatch('close-modal', 'party-overview');" > <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold"> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /> </svg> </button> <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]" x-ref="scrollContainer" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" @scroll="handleScroll()"> <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible"> <template x-if="content_visible"> <div x-data="{show:false}" x-init="$nextTick(() => show = true)"> <div class="border-b border-white/5 "> <div class="py-3 px-3 text-left flex items-center"> <svg xmlns="http://www.w3.org/2000/svg" class="size-4 text-gray-500" viewBox="0 0 24 24"> <path fill="currentColor" d="m20 10.35l-5.78-7.41A3.06 3.06 0 0 0 9.75 3L4 10.35A3.05 3.05 0 0 0 3.51 12A3.1 3.1 0 0 0 4 13.58l.06.07l5.74 7.41A3 3 0 0 0 12 22a3.06 3.06 0 0 0 2.26-1L20 13.65a3 3 0 0 0-.06-3.3Zm-1.57 2.14l-5.67 7.22a1.11 1.11 0 0 1-1.42.07l-5.69-7.31a1 1 0 0 1-.14-.47a1.1 1.1 0 0 1 .1-.45l5.67-7.22a1.11 1.11 0 0 1 1.42-.07l5.63 7.28a1 1 0 0 1 .16.54a1.1 1.1 0 0 1-.1.41Z" /> </svg> <h2 class="text-sm font-semibold text-gray-200 ml-2"> Parties </h2> <div class="text-sm font-semibold text-gray-200 ml-2"> </div> </div></div> <div class="block"> <nav class="flex border-b border-white/5 py-4"> <ul role="list" class="flex min-w-full gap-x-6 gap-y-3 px-2 text-sm font-semibold leading-6 text-gray-400 flex-wrap px-4"> <li class="" :class="{ 'text-yellow-500': (active_tab == 'your-party') }" > <button type="button" x-on:click="active_tab = 'your-party'" > Your Party </button> </li> <li class="" :class="{ 'text-yellow-500': (active_tab == 'invites') }" > <button type="button" x-on:click="active_tab = 'invites'" > Your Invites </button> <span x-cloak x-show="pending_invites_count > 0" class="inline-flex items-center rounded-md bg-gray-700 px-2 py-0.5 text-xs font-bold text-gray-100" x-text="pending_invites_count"></span> </li> <li class="" :class="{ 'text-yellow-500': (active_tab == 'leagues') }" > <button type="button" x-on:click="active_tab = 'leagues'" > Leagues </button> </li> </ul> </nav></div> <div> <div x-show="active_tab === 'your-party'" x-cloak class="mt-4"> <div x-data="party_your_party" x-on:party-tab-changed.window="handleTabChange($event.detail)" x-on:party-invite-sent.window="handleInviteSent()" x-on:party-leave-confirmed.window="handleLeaveConfirm()" x-on:party-close-confirmed.window="handleCloseConfirm()" x-init="handleTabChange(active_tab)" > <template x-if="is_processing"> <div class="py-6 text-center text-sm text-gray-400"> <svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"> <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle> <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> </div> </template> <template x-if="!is_processing && !data?.party"> <div class="rounded-lg bg-gray-800/60 px-4 py-6 text-center"> <div class="text-sm text-gray-100 font-bold">No Party</div> <div class="text-sm text-gray-400 font-medium">You are not currently part of a party.</div> <div class="mt-2"> <button type="button" class="inline-block rounded px-4 py-2 bg-gradient-to-b font-bold bg-indigo-600 hover:bg-indigo-500 text-sm" type="button" x-on:click="$dispatch('open-modal', 'party-create')"> Create party </button> </div> </div> </template> <template x-if="!is_processing && data?.party"> <div> <div class="text-center mx-4"> <span class="font-bold text-lg text-gray-100" x-text="data.party.name"></span> </div> <template x-if="data.party.permissions?.toggle_private"> <div class="mx-4 mt-3"> <div class="flex items-center justify-between bg-gray-900/40 rounded-lg px-4 py-3 border border-gray-700/30"> <div class="flex items-center gap-2"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4 text-gray-600"> <path fill-rule="evenodd" d="M8 1a3.5 3.5 0 0 0-3.5 3.5V7A1.5 1.5 0 0 0 3 8.5v5A1.5 1.5 0 0 0 4.5 15h7a1.5 1.5 0 0 0 1.5-1.5v-5A1.5 1.5 0 0 0 11.5 7V4.5A3.5 3.5 0 0 0 8 1Zm2 6V4.5a2 2 0 1 0-4 0V7h4Z" clip-rule="evenodd" /> </svg> <span class="text-sm font-bold text-gray-300">Private Party</span> </div> <button type="button" class="relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-gray-500" x-bind:class="data.party.is_private ? 'bg-green-600' : 'bg-gray-600'" x-on:click="togglePrivacy()" x-bind:disabled="is_toggling_privacy" > <span class="inline-block h-4 w-4 transform rounded-full bg-white transition-transform" x-bind:class="data.party.is_private ? 'translate-x-6' : 'translate-x-1'" ></span> </button> </div> </div> </template> <div> <div class="relative mt-4"> <div class="absolute inset-0 flex items-center" aria-hidden="true"> <div class="w-full border-t border-gray-700"></div> </div> <div class="relative flex justify-center"> <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">Members</span> </div> </div></div> <div class="rounded-lg bg-gray-800/60 mx-4 mt-4"> <div class="text-sm"> <div class="mt-2 space-y-2"> <template x-for="member in data.party.members" :key="member.id"> <div class="w-full border border-gray-800 bg-gray-900/40 rounded-lg px-4 py-3 flex items-center gap-3 text-left"> <div class="relative flex-shrink-0"> <div class="relative overflow-hidden w-16 h-16 rounded-full ring-2 ring-gray-700 bg-gray-800 group-hover:bg-gray-700/80 bg-cover" x-bind:style="member?.background_url ? 'background-image: url(\''+member?.background_url+'\');' : ''"> <img x-bind:src="member.image_url" class="absolute top-0 left-0 h-24 w-24 -ml-4 mt-1 max-w-none"> </div> </div> <div class="flex-1"> <div class="flex items-center gap-2 mb-1"> <span class="text-sm font-semibold text-gray-100" x-text="member.name"></span> </div> <div class="flex gap-2 items-center"> <div class="inline-flex items-center text-sm leading-5 text-gray-400"> <div class="inline-flex items-center text-xs text-gray-300 font-bold rounded-md bg-gray-700 px-2 py-1 whitespace-nowrap rounded-r-none"> <span> Rank </span> </div> <div class="inline-flex items-center text-xs text-gray-400 font-semibold rounded-md rounded-l-none bg-gray-700/60 px-2 py-1 whitespace-nowrap" label="Rank" > <div> <span x-text="member.rank.name"></span> </div> </div></div> </div> </div> </div> </template> </div> </div> </div> <template x-if="data.party.permissions?.invite_create && data.party.pending_invites?.length"> <div class="mt-4 text-sm"> <div> <div class="relative"> <div class="absolute inset-0 flex items-center" aria-hidden="true"> <div class="w-full border-t border-gray-700"></div> </div> <div class="relative flex justify-center"> <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">Pending Invites</span> </div> </div></div> <div class="mt-4 space-y-2 mx-4"> <template x-for="invite in data.party.pending_invites" :key="invite.id"> <div class="w-full border border-gray-800 bg-gray-900/40 rounded-lg px-4 py-3 flex items-center gap-3 text-left"> <div class="relative flex-shrink-0"> <div class="relative overflow-hidden w-16 h-16 rounded-full ring-2 ring-gray-700 bg-gray-800 group-hover:bg-gray-700/80 bg-cover" x-bind:style="invite?.character?.background_url ? 'background-image: url(\''+invite?.character?.background_url+'\');' : ''"> <img x-bind:src="invite?.character?.image_url" class="absolute top-0 left-0 h-24 w-24 -ml-4 mt-1 max-w-none"> </div> </div> <div class="flex-1"> <div class="flex items-center gap-2 mb-1"> <span class="text-sm font-semibold text-gray-100" x-text="invite?.character?.name"></span> </div> <div class="flex gap-2 items-center"> <div class="inline-flex items-center text-sm leading-5 text-gray-400"> <div class="inline-flex items-center text-xs text-gray-300 font-bold rounded-md bg-gray-700 px-2 py-1 whitespace-nowrap rounded-r-none"> <span> Status </span> </div> <div class="inline-flex items-center text-xs text-gray-400 font-semibold rounded-md rounded-l-none bg-gray-700/60 px-2 py-1 whitespace-nowrap" label="Status" > <div> Pending </div> </div></div> </div> </div> <template x-if="data.party?.permissions?.invite_delete"> <button type="button" class="text-gray-400 transition hover:text-red-400" x-on:click="deleteInvite(invite?.id)" x-bind:disabled="is_deleting_invite" > <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4"> <path d="M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z" /> </svg> </button> </template> </div> </template> </div> </div> </template> <div class="flex flex-wrap gap-2 mt-4 px-4 py-2 justify-center bg-gray-900/40"> <template x-if="data.party.permissions?.leave"> <button type="button" class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block" type="button" x-on:click="openLeaveModal()" x-bind:disabled="is_leaving"> Leave Party </button> </template> <template x-if="data.party.permissions?.close"> <button type="button" class="rounded px-4 py-2 bg-gradient-to-b font-bold bg-red-600/80 hover:bg-red-600 text-sm" type="button" x-on:click="openCloseModal()" x-bind:disabled="is_closing"> Close Party </button> </template> <template x-if="data.party.permissions?.invite_create"> <button type="button" class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block" type="button" x-on:click="openInviteModal()"> Invite </button> </template> </div> </div> </template> </div> </div> <div x-show="active_tab === 'invites'" x-cloak class="my-4"> <div x-data="party_invites" x-on:party-tab-changed.window="handleTabChange($event.detail)"> <template x-if="is_processing"> <div class="py-6 text-center text-sm text-gray-400 mx-4"> <svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"> <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle> <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> </div> </template> <template x-if="!is_processing && (!data?.invites || data.invites.length === 0)"> <div class="rounded-lg bg-gray-800/60 px-4 py-6 text-center text-sm text-gray-300 mx-4"> <div class="text-gray-100 font-bold">No Invites</div> <div class="text-gray-400 font-medium">You do not have any pending invites.</div> </div> </template> <template x-if="!is_processing && data?.invites?.length"> <div class="space-y-2 mx-4"> <template x-for="invite in data.invites" :key="invite.id"> <div class="w-full border border-gray-800 bg-gray-900/40 rounded-lg px-4 py-3 flex items-center gap-3 text-left"> <div class="relative flex-shrink-0"> <div class="relative overflow-hidden w-16 h-16 rounded-full ring-2 ring-gray-700 bg-gray-800 group-hover:bg-gray-700/80 bg-cover" x-bind:style="invite?.party?.leader?.background_url ? 'background-image: url(\''+invite?.party?.leader?.background_url+'\');' : ''"> <img x-bind:src="invite?.party?.leader?.image_url" class="absolute top-0 left-0 h-24 w-24 -ml-4 mt-1 max-w-none"> </div> </div> <div class="flex-1"> <div class="flex items-center gap-2 mb-1"> <span class="text-sm font-semibold text-gray-100" x-text="invite.party?.name"></span> </div> <div class="flex gap-2 items-center"> <div class="inline-flex items-center text-sm leading-5 text-gray-400"> <div class="inline-flex items-center text-xs text-gray-300 font-bold rounded-md bg-gray-700 px-2 py-1 whitespace-nowrap rounded-r-none"> <span> Members </span> </div> <div class="inline-flex items-center text-xs text-gray-400 font-semibold rounded-md rounded-l-none bg-gray-700/60 px-2 py-1 whitespace-nowrap" label="Members" > <div> <span x-text="invite.party?.members_count"></span> </div> </div></div> </div> </div> <div class="flex gap-2"> <button type="button" class="inline-block rounded px-4 py-2 bg-gradient-to-b font-bold bg-indigo-600 hover:bg-indigo-500 text-sm" type="button" x-on:click="acceptInvite(invite.id)" x-bind:disabled="is_accepting || is_declining"> Accept </button> <button type="button" class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block" type="button" x-on:click="declineInvite(invite.id, invite.party?.id)" x-bind:disabled="is_accepting || is_declining"> Decline </button> </div> </div> </template> </div> </template> </div> </div> <div x-show="active_tab === 'leagues'" x-cloak class="mb-4"> <div x-data="party_leagues" x-on:party-tab-changed.window="handleTabChange($event.detail)" x-on:refresh-league-list.window="fetch()" > <div class="block"> <nav class="flex border-b border-white/5 py-4"> <ul role="list" class="flex min-w-full gap-x-6 gap-y-3 px-2 text-sm font-semibold leading-6 text-gray-400 flex-wrap px-4"> <li class="" :class="{ 'text-yellow-500': (active_tab == 'upcoming') }" > <button type="button" x-on:click="active_tab = 'upcoming'" > Upcoming </button> </li> <li class="" :class="{ 'text-yellow-500': (active_tab == 'past') }" > <button type="button" x-on:click="active_tab = 'past'" > Past </button> </li> </ul> </nav></div> <template x-if="is_processing"> <div class="py-6 text-center text-sm text-gray-400 mx-4"> <svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"> <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle> <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> </div> </template> <template x-if="!is_processing && filteredLeagues().length === 0"> <div class="rounded-lg bg-gray-800/60 px-4 py-6 text-center text-sm text-gray-300 mx-4"> <div class="text-gray-100 font-bold">No Leagues</div> <div class="text-gray-400 font-medium">Your party has not joined any leagues yet.</div> </div> </template> <template x-if="!is_processing && filteredLeagues().length > 0"> <div class="rounded-lg bg-gray-800/60 mx-4"> <div class="text-sm"> <div class="mt-2 space-y-2"> <template x-for="league in filteredLeagues()" :key="league.id"> <div class="w-full border border-gray-800 bg-gray-900/40 rounded-lg px-4 py-3 flex items-center gap-3 text-left cursor-pointer hover:bg-gray-800/60 transition-colors" x-on:click="window.dispatchEvent(new CustomEvent('show-league-details', { detail: league }))"> <div class="relative flex-shrink-0"> <img x-bind:src="league.image" x-bind:alt="league.name" class="w-16 h-16 rounded object-cover"> </div> <div class="flex-1"> <div class="flex items-center gap-2 mb-1"> <span class="text-sm font-semibold text-gray-100" x-text="league.name"></span> </div> <div class="flex gap-2 items-center flex-wrap"> <template x-if="league.status === 'ACTIVE'"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 !bg-green-700 !text-gray-100"> Active
</span> </template> <template x-if="league.status === 'UPCOMING'"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 !bg-gray-600 !text-gray-100"> Upcoming
</span> </template> <template x-if="league.status === 'ENDED'"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 !bg-red-700 !text-gray-100"> Ended
</span> </template> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60"> <span x-text="formatDateRange(league.starts_at, league.ends_at)"></span></span> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60" label="Contribution"> <span x-text="league.contribution_value.toLocaleString()"></span> <span x-cloak x-show="league.contribution_type === 'KILLS'">Kills</span> <span x-cloak x-show="league.contribution_type === 'EXPERIENCE'">Experience</span></span> </div> </div> </div> </template> </div> </div> </div> </template> </div> </div> </div> </div> </template> </div> </div> <div x-show="show_fade" x-transition:enter="transition ease-out" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }" class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div> </div> </div> </div> <div x-data="modal('party-leave-confirm', false, null, 1)" x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'party-leave-confirm') })" x-on:open-modal.window="$event.detail == 'party-leave-confirm' ? show = true : null" x-on:close-modal.window="$event.detail == 'party-leave-confirm' ? show = false : null" x-on:close.stop="show = false" x-on:keydown.escape.window="show = false" x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()" x-on:keydown.shift.tab.prevent="prevFocusable().focus()" x-show="show" class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" style="display: none;"> <div class="flex min-h-full justify-center md:p-4 text-center items-center sm:p-0"> <div x-show="show" class="fixed inset-0 transform transition-all" x-on:click="show = false" x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms> <div class="absolute inset-0 bg-immo opacity-70"></div> </div> <div x-show="show" class="md:mb-6 bg-gray-800 border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-sm sm:mx-8 md:mx-auto relative max-h-[90vh]" x-transition:enter.duration.300ms x-transition:leave.duration.200ms> <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2" x-on:click="$dispatch('close-modal', 'party-leave-confirm');" > <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold"> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /> </svg> </button> <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]" x-ref="scrollContainer" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" @scroll="handleScroll()"> <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible"> <template x-if="content_visible"> <div x-data="{show:false}" x-init="$nextTick(() => show = true)"> <div class="border-b border-white/5 "> <div class="py-3 px-3 text-left flex items-center"> <svg xmlns="http://www.w3.org/2000/svg" class="size-4 text-gray-500" viewBox="0 0 24 24"> <path fill="currentColor" d="m20 10.35l-5.78-7.41A3.06 3.06 0 0 0 9.75 3L4 10.35A3.05 3.05 0 0 0 3.51 12A3.1 3.1 0 0 0 4 13.58l.06.07l5.74 7.41A3 3 0 0 0 12 22a3.06 3.06 0 0 0 2.26-1L20 13.65a3 3 0 0 0-.06-3.3Zm-1.57 2.14l-5.67 7.22a1.11 1.11 0 0 1-1.42.07l-5.69-7.31a1 1 0 0 1-.14-.47a1.1 1.1 0 0 1 .1-.45l5.67-7.22a1.11 1.11 0 0 1 1.42-.07l5.63 7.28a1 1 0 0 1 .16.54a1.1 1.1 0 0 1-.1.41Z" /> </svg> <h2 class="text-sm font-semibold text-gray-200 ml-2"> Leave party </h2> <div class="text-sm font-semibold text-gray-200 ml-2"> </div> </div></div> <div class="mx-4 mt-4 text-left"> <p class="text-sm text-gray-300 font-medium"> Are you sure you want to leave this party? </p> </div> <div class="text-left mt-4"> <div x-data="{show: true }" class="rounded-lg mt-2 bg-gray-800 shadow-sm py-3 px-6 relative text-gray-200 bg-gray-900/40 border border-gray-700/40 mx-4" x-cloak x-show="show" > <div class="absolute top-0 left-0 -mt-2 -ml-2"> <svg class="h-6 w-6 text-gray-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"> <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path> </svg> </div> <div> <div class="md:flex md:justify-between"> <div class="text-sm w-full"> <strong>Warning!</strong> <div> Leaving the party will remove all your league progress.<br/>This also applies to leagues that have already finished but are still awaiting reward distribution. </div> </div> </div> </div> </div> </div> <div class="mt-4 rounded-b-lg bg-[#1c212c] py-2 text-center"> <div class="inline-block"> <button type="button" class="rounded bg-black/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-black/40 mr-2" type="button" x-on:click="$dispatch('close-modal', 'party-leave-confirm')"> Cancel </button> </div> <button type="button" class="inline-block rounded px-4 py-2 bg-gradient-to-b font-bold bg-indigo-600 hover:bg-indigo-500 text-sm" type="button" x-on:click="$dispatch('party-leave-confirmed')"> Leave Party </button> </div> </div> </template> </div> </div> <div x-show="show_fade" x-transition:enter="transition ease-out" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }" class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div> </div> </div> </div> <div x-data="modal('party-close-confirm', false, null, 1)" x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'party-close-confirm') })" x-on:open-modal.window="$event.detail == 'party-close-confirm' ? show = true : null" x-on:close-modal.window="$event.detail == 'party-close-confirm' ? show = false : null" x-on:close.stop="show = false" x-on:keydown.escape.window="show = false" x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()" x-on:keydown.shift.tab.prevent="prevFocusable().focus()" x-show="show" class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" style="display: none;"> <div class="flex min-h-full justify-center md:p-4 text-center items-center sm:p-0"> <div x-show="show" class="fixed inset-0 transform transition-all" x-on:click="show = false" x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms> <div class="absolute inset-0 bg-immo opacity-70"></div> </div> <div x-show="show" class="md:mb-6 bg-gray-800 border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-sm sm:mx-8 md:mx-auto relative max-h-[90vh]" x-transition:enter.duration.300ms x-transition:leave.duration.200ms> <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2" x-on:click="$dispatch('close-modal', 'party-close-confirm');" > <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold"> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /> </svg> </button> <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]" x-ref="scrollContainer" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" @scroll="handleScroll()"> <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible"> <template x-if="content_visible"> <div x-data="{show:false}" x-init="$nextTick(() => show = true)"> <div class="border-b border-white/5 "> <div class="py-3 px-3 text-left flex items-center"> <svg xmlns="http://www.w3.org/2000/svg" class="size-4 text-gray-500" viewBox="0 0 24 24"> <path fill="currentColor" d="m20 10.35l-5.78-7.41A3.06 3.06 0 0 0 9.75 3L4 10.35A3.05 3.05 0 0 0 3.51 12A3.1 3.1 0 0 0 4 13.58l.06.07l5.74 7.41A3 3 0 0 0 12 22a3.06 3.06 0 0 0 2.26-1L20 13.65a3 3 0 0 0-.06-3.3Zm-1.57 2.14l-5.67 7.22a1.11 1.11 0 0 1-1.42.07l-5.69-7.31a1 1 0 0 1-.14-.47a1.1 1.1 0 0 1 .1-.45l5.67-7.22a1.11 1.11 0 0 1 1.42-.07l5.63 7.28a1 1 0 0 1 .16.54a1.1 1.1 0 0 1-.1.41Z" /> </svg> <h2 class="text-sm font-semibold text-gray-200 ml-2"> Close Party </h2> <div class="text-sm font-semibold text-gray-200 ml-2"> </div> </div></div> <div class="mx-4 mt-4 text-left"> <p class="text-sm text-gray-300 font-medium"> Are you sure you want to close this party? </p> </div> <div class="text-left"> <div x-data="{show: true }" class="rounded-lg mt-2 bg-gray-800 shadow-sm py-3 px-6 relative text-gray-200 bg-gray-900/40 border border-gray-700/40 mx-4" x-cloak x-show="show" > <div class="absolute top-0 left-0 -mt-2 -ml-2"> <svg class="h-6 w-6 text-gray-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"> <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path> </svg> </div> <div> <div class="md:flex md:justify-between"> <div class="text-sm w-full"> <strong>Warning!</strong> <div> Closing the party will remove all league progress.<br/>This also applies to leagues that have already finished but are still awaiting reward distribution. </div> </div> </div> </div> </div> </div> <div class="mt-4 rounded-b-lg bg-[#1c212c] py-2 text-center"> <button type="button" class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block mr-2" type="button" x-on:click="$dispatch('close-modal', 'party-close-confirm')"> Cancel </button> <button type="button" class="rounded px-4 py-2 bg-gradient-to-b font-bold bg-red-600/80 hover:bg-red-600 text-sm" type="button" x-on:click="$dispatch('party-close-confirmed')"> Close Party </button> </div> </div> </template> </div> </div> <div x-show="show_fade" x-transition:enter="transition ease-out" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }" class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div> </div> </div> </div> </div><div x-data="party_create" x-on:close-modal.window="if ($event.detail === 'party-create') reset()"> <div x-data="modal('party-create', false, null, 1)" x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'party-create') })" x-on:open-modal.window="$event.detail == 'party-create' ? show = true : null" x-on:close-modal.window="$event.detail == 'party-create' ? show = false : null" x-on:close.stop="show = false" x-on:keydown.escape.window="show = false" x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()" x-on:keydown.shift.tab.prevent="prevFocusable().focus()" x-show="show" class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" style="display: none;"> <div class="flex min-h-full justify-center md:p-4 text-center items-center sm:p-0"> <div x-show="show" class="fixed inset-0 transform transition-all" x-on:click="show = false" x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms> <div class="absolute inset-0 bg-immo opacity-70"></div> </div> <div x-show="show" class="md:mb-6 bg-gray-800 border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-sm sm:mx-8 md:mx-auto relative max-h-[90vh]" x-transition:enter.duration.300ms x-transition:leave.duration.200ms> <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2" x-on:click="$dispatch('close-modal', 'party-create');" > <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold"> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /> </svg> </button> <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]" x-ref="scrollContainer" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" @scroll="handleScroll()"> <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible"> <template x-if="content_visible"> <div x-data="{show:false}" x-init="$nextTick(() => show = true)"> <div class="border-b border-white/5 "> <div class="py-3 px-3 text-left flex items-center"> <svg xmlns="http://www.w3.org/2000/svg" class="size-4 text-gray-500" viewBox="0 0 24 24"> <path fill="currentColor" d="m20 10.35l-5.78-7.41A3.06 3.06 0 0 0 9.75 3L4 10.35A3.05 3.05 0 0 0 3.51 12A3.1 3.1 0 0 0 4 13.58l.06.07l5.74 7.41A3 3 0 0 0 12 22a3.06 3.06 0 0 0 2.26-1L20 13.65a3 3 0 0 0-.06-3.3Zm-1.57 2.14l-5.67 7.22a1.11 1.11 0 0 1-1.42.07l-5.69-7.31a1 1 0 0 1-.14-.47a1.1 1.1 0 0 1 .1-.45l5.67-7.22a1.11 1.11 0 0 1 1.42-.07l5.63 7.28a1 1 0 0 1 .16.54a1.1 1.1 0 0 1-.1.41Z" /> </svg> <h2 class="text-sm font-semibold text-gray-200 ml-2"> Create a party </h2> <div class="text-sm font-semibold text-gray-200 ml-2"> </div> </div></div> <div class="mx-4 mt-4 text-left"> <label for="party-create-name" class="block text-sm font-bold text-gray-100"> Party Name </label> <div class="mt-2"> <input id="party-create-name" type="text" x-model="party_name" placeholder="Example: Guardians" class="block w-full rounded-md border-0 bg-gray-800 py-2 text-sm text-gray-200 shadow-sm ring-1 ring-inset ring-gray-700 placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-indigo-600" autocomplete="off" maxlength="60" > </div> </div> <div class="mt-4 rounded-b-lg bg-[#1c212c] py-2 text-center"> <div class="inline-block"> <button type="button" class="rounded bg-black/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-black/40 mr-2" type="button" x-on:click="$dispatch('close-modal', 'party-create')"> Close </button> </div> <button type="button" class="inline-block rounded px-4 py-2 bg-gradient-to-b font-bold bg-indigo-600 hover:bg-indigo-500 text-sm" type="button" x-bind:disabled="is_processing" x-on:click="submit()"> <span x-show="!is_processing">Create party</span> <span x-show="is_processing"><svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"> <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle> <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></span> </button> </div> </div> </template> </div> </div> <div x-show="show_fade" x-transition:enter="transition ease-out" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }" class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div> </div> </div> </div> </div><div x-data="party_invite_character" x-on:party-invite-character-open.window="handleOpen($event.detail)" x-on:party-invite-character-confirm-submit.window="handleConfirm()" x-on:party-invite-character-confirm-cancel.window="closeConfirmModal()" x-on:close-modal.window="if ($event.detail === 'party-invite-character') reset();"
> <div x-data="modal('party-invite-character', false, null, 1)" x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'party-invite-character') })" x-on:open-modal.window="$event.detail == 'party-invite-character' ? show = true : null" x-on:close-modal.window="$event.detail == 'party-invite-character' ? show = false : null" x-on:close.stop="show = false" x-on:keydown.escape.window="show = false" x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()" x-on:keydown.shift.tab.prevent="prevFocusable().focus()" x-show="show" class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" style="display: none;"> <div class="flex min-h-full justify-center md:p-4 text-center items-center sm:p-0"> <div x-show="show" class="fixed inset-0 transform transition-all" x-on:click="show = false" x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms> <div class="absolute inset-0 bg-immo opacity-70"></div> </div> <div x-show="show" class="md:mb-6 bg-gray-800 border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-md sm:mx-8 md:mx-auto relative max-h-[90vh]" x-transition:enter.duration.300ms x-transition:leave.duration.200ms> <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2" x-on:click="$dispatch('close-modal', 'party-invite-character');" > <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold"> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /> </svg> </button> <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]" x-ref="scrollContainer" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" @scroll="handleScroll()"> <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible"> <template x-if="content_visible"> <div x-data="{show:false}" x-init="$nextTick(() => show = true)"> <div class="border-b border-white/5 "> <div class="py-3 px-3 text-left flex items-center"> <svg xmlns="http://www.w3.org/2000/svg" class="size-4 text-gray-500" viewBox="0 0 24 24"> <path fill="currentColor" d="m20 10.35l-5.78-7.41A3.06 3.06 0 0 0 9.75 3L4 10.35A3.05 3.05 0 0 0 3.51 12A3.1 3.1 0 0 0 4 13.58l.06.07l5.74 7.41A3 3 0 0 0 12 22a3.06 3.06 0 0 0 2.26-1L20 13.65a3 3 0 0 0-.06-3.3Zm-1.57 2.14l-5.67 7.22a1.11 1.11 0 0 1-1.42.07l-5.69-7.31a1 1 0 0 1-.14-.47a1.1 1.1 0 0 1 .1-.45l5.67-7.22a1.11 1.11 0 0 1 1.42-.07l5.63 7.28a1 1 0 0 1 .16.54a1.1 1.1 0 0 1-.1.41Z" /> </svg> <h2 class="text-sm font-semibold text-gray-200 ml-2"> Invite Character </h2> <div class="text-sm font-semibold text-gray-200 ml-2"> </div> </div></div> <template x-if="party?.is_in_active_league"> <div class="mx-4 mt-4 bg-yellow-900/30 border border-yellow-700/50 rounded-lg p-4 text-left"> <div class="flex items-start"> <div class="flex-shrink-0"> <svg class="h-5 w-5 text-yellow-500" fill="currentColor" viewBox="0 0 20 20"> <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" /> </svg> </div> <div class="ml-3"> <h3 class="text-sm font-bold text-gray-100">Party Locked During Active League</h3> <div class="mt-1 text-sm text-gray-300 font-medium"> <p>This party is currently participating in an active league and cannot accept new members. Please wait until the league has ended or leave the league to invite new members.</p> </div> </div> </div> </div> </template> <div class="mx-4 mt-4 text-left"> <span class="block text-sm font-bold text-gray-100">Character Name</span> <div class="mt-2"> <input id="party-invite-search" type="text" x-model="search_query" x-on:input.debounce.400ms="search()" class="mx-2 block w-full rounded-md border-0 bg-gray-700/40 font-medium py-1.5 text-sm text-gray-200 placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-indigo-600 md:mx-0 sm:leading-6" placeholder="Enter at least three characters to search." autocomplete="off" > </div> </div> <div class="mx-4 my-4"> <template x-if="is_searching"> <div class="rounded-md bg-gray-900/60 px-4 py-3 text-center text-sm text-gray-400"> <svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"> <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle> <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> </div> </template> <template x-if="results?.length && !is_searching"> <div class="space-y-2"> <template x-for="character in results" :key="character?.id"> <button type="button" class="w-full rounded-md border px-3 py-3 text-left text-sm transition border-transparent bg-gray-900/40 hover:bg-gray-700/20" x-on:click="selectCharacter(character); openConfirmModal();" > <div class="flex items-center"> <div class="relative flex-shrink-0"> <div class="relative overflow-hidden w-12 h-12 rounded-full ring-2 ring-gray-700 bg-gray-800 group-hover:bg-gray-700/80 bg-cover" x-bind:style="character?.background_url ? 'background-image: url(\''+character?.background_url+'\');' : ''"> <img x-bind:src="character.image_url" class="absolute top-0 left-0 h-16 w-16 -ml-2 mt-1 max-w-none"> </div> </div> <div class="ml-3"> <div class="font-semibold text-gray-100" x-text="character?.title"></div> <div class="text-sm text-gray-400 font-medium" x-text="character?.subtitle"></div> </div> </div> </button> </template> </div> </template> <template x-if="!is_searching && results && search_query?.length >= 1 && Object.keys(results).length <= 0"> <div class="rounded-md bg-gray-900/40 px-4 py-3 text-center text-sm text-gray-400 font-medium"> No characters were found with that name. </div> </template> </div> </div> </template> </div> </div> <div x-show="show_fade" x-transition:enter="transition ease-out" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }" class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div> </div> </div> </div> <div x-data="modal('party-invite-character-confirm', false, null, 1)" x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'party-invite-character-confirm') })" x-on:open-modal.window="$event.detail == 'party-invite-character-confirm' ? show = true : null" x-on:close-modal.window="$event.detail == 'party-invite-character-confirm' ? show = false : null" x-on:close.stop="show = false" x-on:keydown.escape.window="show = false" x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()" x-on:keydown.shift.tab.prevent="prevFocusable().focus()" x-show="show" class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" style="display: none;"> <div class="flex min-h-full justify-center md:p-4 text-center items-center sm:p-0"> <div x-show="show" class="fixed inset-0 transform transition-all" x-on:click="show = false" x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms> <div class="absolute inset-0 bg-immo opacity-70"></div> </div> <div x-show="show" class="md:mb-6 bg-gray-800 border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-sm sm:mx-8 md:mx-auto relative max-h-[90vh]" x-transition:enter.duration.300ms x-transition:leave.duration.200ms> <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2" x-on:click="$dispatch('close-modal', 'party-invite-character-confirm');" > <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold"> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /> </svg> </button> <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]" x-ref="scrollContainer" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" @scroll="handleScroll()"> <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible"> <template x-if="content_visible"> <div x-data="{show:false}" x-init="$nextTick(() => show = true)"> <div class="border-b border-white/5 "> <div class="py-3 px-3 text-left flex items-center"> <svg xmlns="http://www.w3.org/2000/svg" class="size-4 text-gray-500" viewBox="0 0 24 24"> <path fill="currentColor" d="m20 10.35l-5.78-7.41A3.06 3.06 0 0 0 9.75 3L4 10.35A3.05 3.05 0 0 0 3.51 12A3.1 3.1 0 0 0 4 13.58l.06.07l5.74 7.41A3 3 0 0 0 12 22a3.06 3.06 0 0 0 2.26-1L20 13.65a3 3 0 0 0-.06-3.3Zm-1.57 2.14l-5.67 7.22a1.11 1.11 0 0 1-1.42.07l-5.69-7.31a1 1 0 0 1-.14-.47a1.1 1.1 0 0 1 .1-.45l5.67-7.22a1.11 1.11 0 0 1 1.42-.07l5.63 7.28a1 1 0 0 1 .16.54a1.1 1.1 0 0 1-.1.41Z" /> </svg> <h2 class="text-sm font-semibold text-gray-200 ml-2"> Confirm invite </h2> <div class="text-sm font-semibold text-gray-200 ml-2"> </div> </div></div> <div class="mx-4 mt-4 text-left"> <template x-if="selected"> <div> <div class="flex items-center"> <div class="relative flex-shrink-0"> <div class="relative overflow-hidden w-16 h-16 rounded-full ring-2 ring-gray-700 bg-gray-800 group-hover:bg-gray-700/80 bg-cover" x-bind:style="selected?.background_url ? 'background-image: url(\''+selected?.background_url+'\');' : ''"> <img x-bind:src="selected.image_url" class="absolute top-0 left-0 h-24 w-24 -ml-4 mt-1 max-w-none"> </div> </div> <div class="ml-3"> <div class="text-sm font-semibold text-gray-100" x-text="selected?.title"></div> <div class="text-sm text-gray-400 font-medium" x-text="selected?.subtitle"></div> </div> </div> </div> </template> </div> <div class="mt-4 rounded-b-lg bg-[#1c212c] py-2 text-center"> <div class="inline-block"> <button type="button" class="rounded bg-black/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-black/40 mr-2" type="button" x-on:click="$dispatch('party-invite-character-confirm-cancel')"> Close </button> </div> <button type="button" class="inline-block rounded px-4 py-2 bg-gradient-to-b font-bold bg-indigo-600 hover:bg-indigo-500 text-sm" type="button" x-on:click="$dispatch('party-invite-character-confirm-submit')"> Send invite </button> </div> </div> </template> </div> </div> <div x-show="show_fade" x-transition:enter="transition ease-out" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }" class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div> </div> </div> </div> </div>
<div x-on:last-action-overview.window="data = $event.detail; $dispatch('open-modal', 'last-action-overview');" x-data="{ data: null, restartAction(){ if(!this.data.restart_button) return; window.game.fetch({ endpoint: this.data.restart_button.endpoint, body: this.data.restart_button.data, on_success: function(response){ displayToast(response.message, null, null, true); ActiveAction.update(659085); this.$dispatch('close-modal', 'last-action-overview'); }.bind(this), }); }, }"> <div x-data="modal('last-action-overview', false, null, )" x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'last-action-overview') })" x-on:open-modal.window="$event.detail == 'last-action-overview' ? show = true : null" x-on:close-modal.window="$event.detail == 'last-action-overview' ? show = false : null" x-on:close.stop="show = false" x-on:keydown.escape.window="show = false" x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()" x-on:keydown.shift.tab.prevent="prevFocusable().focus()" x-show="show" class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" style="display: none;"> <div class="flex min-h-full justify-center md:p-4 text-center items-center sm:p-0"> <div x-show="show" class="fixed inset-0 transform transition-all" x-on:click="show = false" x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms> <div class="absolute inset-0 bg-immo opacity-70"></div> </div> <div x-show="show" class="md:mb-6 bg-gray-800 border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-sm sm:mx-8 md:mx-auto relative max-h-[90vh]" x-transition:enter.duration.300ms x-transition:leave.duration.200ms> <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2" x-on:click="$dispatch('close-modal', 'last-action-overview');" > <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold"> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /> </svg> </button> <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]" x-ref="scrollContainer" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" @scroll="handleScroll()"> <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible"> <template x-if="content_visible"> <div x-data="{show:false}" x-init="$nextTick(() => show = true)"> <template x-if="data !== null"> <div> <div class="border-b border-white/5"> <div class="py-3 px-3 text-left flex items-center"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4 text-gray-600"> <path d="M2 6.342a3.375 3.375 0 0 1 6-2.088 3.375 3.375 0 0 1 5.997 2.26c-.063 2.134-1.618 3.76-2.955 4.784a14.437 14.437 0 0 1-2.676 1.61c-.02.01-.038.017-.05.022l-.014.006-.004.002h-.002a.75.75 0 0 1-.592.001h-.002l-.004-.003-.015-.006a5.528 5.528 0 0 1-.232-.107 14.395 14.395 0 0 1-2.535-1.557C3.564 10.22 1.999 8.558 1.999 6.38L2 6.342Z" /> </svg> <h2 class="text-sm font-semibold text-gray-200 ml-2"> Overview </h2> </div> </div> <template x-if="data !== null"> <div> <div class="py-4"> <template x-if="data.image_url"> <div><img class="mx-auto h-24 w-24" :src="data.image_url" alt=""></div> </template> <template x-if="data?.title"> <div><span class='font-bold text-base' x-text='data.title'></span></div> </template> <template x-if="data?.badges !== null && data?.badges?.length"> <template x-for="badge in data.badges"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60" x-text="badge"> </span> </template> </template> <template x-if="data?.loot && data?.loot?.length"> <div> <div> <div class="relative my-4"> <div class="absolute inset-0 flex items-center" aria-hidden="true"> <div class="w-full border-t border-gray-700"></div> </div> <div class="relative flex justify-center"> <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">Loot</span> </div> </div></div> <template x-for="item in data.loot"> <div class=" text-sm font-medium text-gray-400"><span class="font-bold text-gray-200" x-text='item.quantity'></span> <span x-html='item.name'></span></div> </template> </div> </template> <template x-if="data?.experience && data?.experience?.length"> <div> <div> <div class="relative my-4"> <div class="absolute inset-0 flex items-center" aria-hidden="true"> <div class="w-full border-t border-gray-700"></div> </div> <div class="relative flex justify-center"> <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">Experience</span> </div> </div></div> <template x-for="experience in data.experience"> <div class=" text-sm font-medium text-gray-400"><span class="font-bold text-gray-200" x-text='experience.quantity'></span> <span x-html='experience.name'></span> EXP</div> </template> </div> </template> </div> <template x-if="data.restart_button !== null && ($store.active_action_659085?.state ?? null) === null"> <div class="text-center bg-[#1c212c] py-2"> <form x-on:submit.prevent="restartAction();is_processing=true;$dispatch('close-modal', 'last-action-overview');" x-data="{is_processing:false}"> <button type="submit" class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block disabled:opacity-40" type="submit" x-bind:disabled="is_processing"> Restart </button> </form> </div> </template> </div> </template> </div> </template> </div> </template> </div> </div> <div x-show="show_fade" x-transition:enter="transition ease-out" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }" class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div> </div> </div> </div> </div>
<div x-on:send-mail.window="setRecipientId($event.detail); $dispatch('open-modal', 'send-mail')" x-data="send_mail"> <div x-data="modal('send-mail', false, null, )" x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'send-mail') })" x-on:open-modal.window="$event.detail == 'send-mail' ? show = true : null" x-on:close-modal.window="$event.detail == 'send-mail' ? show = false : null" x-on:close.stop="show = false" x-on:keydown.escape.window="show = false" x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()" x-on:keydown.shift.tab.prevent="prevFocusable().focus()" x-show="show" class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" style="display: none;"> <div class="flex min-h-full justify-center md:p-4 text-center items-center sm:p-0"> <div x-show="show" class="fixed inset-0 transform transition-all" x-on:click="show = false" x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms> <div class="absolute inset-0 bg-immo opacity-70"></div> </div> <div x-show="show" class="md:mb-6 bg-gray-800 border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-sm sm:mx-8 md:mx-auto relative max-h-[90vh]" x-transition:enter.duration.300ms x-transition:leave.duration.200ms> <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2" x-on:click="$dispatch('close-modal', 'send-mail');" > <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold"> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /> </svg> </button> <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]" x-ref="scrollContainer" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" @scroll="handleScroll()"> <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible"> <template x-if="content_visible"> <div x-data="{show:false}" x-init="$nextTick(() => show = true)"> <div x-init="$watch('show', function(value){ if(value) calculateCost() });"> <div class="border-b border-white/5"> <div class="py-3 px-3 text-left flex items-center"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4 text-gray-600"> <path d="M2.5 3A1.5 1.5 0 0 0 1 4.5v.793c.026.009.051.02.076.032L7.674 8.51c.206.1.446.1.652 0l6.598-3.185A.755.755 0 0 1 15 5.293V4.5A1.5 1.5 0 0 0 13.5 3h-11Z" /> <path d="M15 6.954 8.978 9.86a2.25 2.25 0 0 1-1.956 0L1 6.954V11.5A1.5 1.5 0 0 0 2.5 13h11a1.5 1.5 0 0 0 1.5-1.5V6.954Z" /> </svg> <h2 class="text-sm font-semibold text-gray-200 ml-2"> Mail </h2> </div> </div> <form x-on:submit.prevent="sendMessage()"> <div class="p-4"> <div class="mb-4"> <textarea id="message" x-model="message" class="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-300 focus:outline-none focus:border-gray-600 text-sm" rows="5" maxlength="2500" :disabled="is_loading" placeholder="Type your message here..." ></textarea> <div class="flex justify-between items-center mt-1"> <span class="text-xs text-gray-500"> <span x-text="message.length"></span> / 2500 </span> </div> </div> <div> <div class="inline-flex items-center text-sm leading-5 text-gray-400"> <div class="inline-flex items-center text-xs text-gray-300 font-bold rounded-md bg-gray-700 px-2 py-1 whitespace-nowrap rounded-r-none"> <span> Cost </span> </div> <div class="inline-flex items-center text-xs text-gray-400 font-semibold rounded-md rounded-l-none bg-gray-700/60 px-2 py-1 whitespace-nowrap" label="Cost" > <div> <img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/gold_coin.png' class='h-4 w-4 inline-block'> <span x-text="information?.cost > 0 ? number_format(information?.cost) : 'Free'"></span> </div> </div></div> </div> <div class="mt-4"> <div x-data="{show: false }" class="rounded-lg mt-2 bg-gray-800 shadow-sm py-3 px-6 relative text-gray-200 text-left bg-gray-900/40" dismissal-key="message-warning" x-cloak x-show="show" x-init="if(!localStorage.getItem('quick-tip-message-warning')) show=true" > <div class="absolute top-0 left-0 -mt-2 -ml-2"> <svg class="h-6 w-6 text-gray-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"> <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path> </svg> </div> <div> <div class="md:flex md:justify-between"> <div class="text-sm w-full"> <strong>Attention!</strong> <div> Any messages sent here are subject to moderation so please follow our Code of Conduct. </div> <div> <a href="https://web.idle-mmo.com/legal/code-of-conduct?new_window=true" class="font-medium text-yellow-400" target="_blank">Read our Code of Conduct</a> </div> </div> </div> </div> <button class="absolute top-0 right-0 mt-2 mr-2" type="button" onclick="if (!window.__cfRLUnblockHandlers) return false; localStorage.setItem('quick-tip-message-warning', 'true');" x-on:click="show=false" data-cf-modified-28379d9fb3f8c28bafd7d866-=""> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4"> <path d="M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z" /> </svg> </button> </div> </div> </div> <div class="flex justify-end gap-2 bg-gray-900/40 px-4 py-3"> <button type="button" class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block px-4 py-2 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded-lg text-sm" type="button" x-on:click="$dispatch('close-modal', 'send-mail')" x-bind:disabled="is_loading"> Cancel </button> <button type="submit" class="inline-block rounded px-4 py-2 bg-gradient-to-b font-bold bg-indigo-600 hover:bg-indigo-500 text-sm px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm disabled:opacity-50 disabled:cursor-not-allowed" type="submit" x-bind:disabled="is_loading || !message.trim()"> Send </button> </div> </form> </div> </div> </template> </div> </div> <div x-show="show_fade" x-transition:enter="transition ease-out" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }" class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div> </div> </div> </div> </div>
<div x-data="league_details" x-on:league-leave-confirmed.window="handleLeaveConfirm()"> <div x-data="modal('league-details', false, null, )" x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'league-details') })" x-on:open-modal.window="$event.detail == 'league-details' ? show = true : null" x-on:close-modal.window="$event.detail == 'league-details' ? show = false : null" x-on:close.stop="show = false" x-on:keydown.escape.window="show = false" x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()" x-on:keydown.shift.tab.prevent="prevFocusable().focus()" x-show="show" class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" style="display: none;"> <div class="flex min-h-full justify-center md:p-4 text-center items-center sm:p-0"> <div x-show="show" class="fixed inset-0 transform transition-all" x-on:click="show = false" x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms> <div class="absolute inset-0 bg-immo opacity-70"></div> </div> <div x-show="show" class="md:mb-6 bg-gray-800 border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-2xl sm:mx-8 md:mx-auto relative max-h-[90vh]" x-transition:enter.duration.300ms x-transition:leave.duration.200ms> <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2" x-on:click="$dispatch('close-modal', 'league-details');" > <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold"> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /> </svg> </button> <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]" x-ref="scrollContainer" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" @scroll="handleScroll()"> <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible"> <template x-if="content_visible"> <div x-data="{show:false}" x-init="$nextTick(() => show = true)"> <div class="border-b border-white/5 "> <div class="py-3 px-3 text-left flex items-center"> <svg xmlns="http://www.w3.org/2000/svg" class="size-4 text-gray-500" viewBox="0 0 24 24"> <path fill="currentColor" d="m20 10.35l-5.78-7.41A3.06 3.06 0 0 0 9.75 3L4 10.35A3.05 3.05 0 0 0 3.51 12A3.1 3.1 0 0 0 4 13.58l.06.07l5.74 7.41A3 3 0 0 0 12 22a3.06 3.06 0 0 0 2.26-1L20 13.65a3 3 0 0 0-.06-3.3Zm-1.57 2.14l-5.67 7.22a1.11 1.11 0 0 1-1.42.07l-5.69-7.31a1 1 0 0 1-.14-.47a1.1 1.1 0 0 1 .1-.45l5.67-7.22a1.11 1.11 0 0 1 1.42-.07l5.63 7.28a1 1 0 0 1 .16.54a1.1 1.1 0 0 1-.1.41Z" /> </svg> <div class="text-sm font-semibold text-gray-200 ml-2"> <span x-text="selected_league.name"></span> </div> </div></div> <template x-if="selected_league"> <div> <div class="bg-gradient-to-br p-6 bg-gray-900/40"> <div class="flex flex-col md:flex-row items-center md:items-start gap-6"> <div class="flex-shrink-0"> <img :src="selected_league.image" :alt="selected_league.name" class="w-16 h-16"> </div> <div class="flex-1 text-center md:text-left"> <div class="flex flex-col md:flex-row items-center md:items-start gap-3 mb-3"> <h2 class="text-xl font-bold text-gray-100" x-text="selected_league.name"></h2> <template x-if="selected_league.allowable_classes !== null && selected_league.allowable_classes?.length > 0"> <span x-tooltip.html="'Restricted to: ' + selected_league.allowable_classes.map(c => c.charAt(0).toUpperCase() + c.slice(1)).join(', ')"> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="text-orange-400"> <path fill="currentColor" fill-rule="evenodd" d="M11.888 21.98q.113.04.225 0C13.084 21.65 20 19.018 20 11.253V4.304a.4.4 0 0 0-.303-.389l-7.6-1.903a.4.4 0 0 0-.194 0l-7.6 1.903A.4.4 0 0 0 4 4.304v6.948c0 7.687 6.918 10.387 7.887 10.728M13 7a1 1 0 1 0-2 0v5a1 1 0 1 0 2 0zm-1 7a1 1 0 1 0 0 2h.008a1 1 0 1 0 0-2z" clip-rule="evenodd"/> </svg> </span> </template> </div> <div class="flex flex-wrap items-center justify-center md:justify-start gap-2"> <template x-if="selected_league.status === 'ACTIVE'"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 !bg-green-600 !text-gray-100 !font-bold"> Active
</span> </template> <template x-if="selected_league.status === 'UPCOMING'"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 !bg-gray-600 !text-gray-100 !font-bold"> Upcoming
</span> </template> <template x-if="selected_league.status === 'ENDED'"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 !bg-red-600 !text-gray-100 !font-bold"> Ended
</span> </template> <template x-if="selected_league.time_remaining !== null"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60"> <span x-text="msToDaysHoursMinutesOrHoursMinutesAndSeconds(selected_league.time_remaining)"></span></span> </template> </div> </div> </div> </div> <div class="grid grid-cols-2 md:grid-cols-3 gap-3 mx-4 mt-4"> <div class="bg-gray-900/40 rounded-lg p-4 border border-gray-700/40"> <div class="text-xs text-gray-500 font-medium mb-1">Skill</div> <div class="text-sm font-semibold text-gray-100" x-text="selected_league.target_name"></div> </div> <div class="bg-gray-900/40 rounded-lg p-4 border border-gray-700/40"> <div class="text-xs text-gray-500 font-medium mb-1">Contribution Type</div> <div class="text-sm font-semibold text-gray-100" x-text="selected_league.contribution_type_name"></div> </div> <div class="bg-gray-900/40 rounded-lg p-4 border border-gray-700/40"> <div class="text-xs text-gray-500 font-medium mb-1">Party Size Limit</div> <div class="text-sm font-semibold text-gray-100" x-text="selected_league.party_size_limit"></div> </div> <div class="bg-gray-900/40 rounded-lg p-4 border border-gray-700/40"> <div class="text-xs text-gray-500 font-medium mb-1">Participants</div> <div class="text-sm font-semibold text-gray-100" x-text="selected_league.participants_count"></div> </div> <div class="bg-gray-900/40 rounded-lg p-4 border border-gray-700/40"> <div class="text-xs text-gray-500 font-medium mb-1">Starts At</div> <div class="text-sm font-semibold text-gray-100" x-text="formatDate(selected_league.starts_at)"></div> </div> <div class="bg-gray-900/40 rounded-lg p-4 border border-gray-700/40"> <div class="text-xs text-gray-500 font-medium mb-1">Ends At</div> <div class="text-sm font-semibold text-gray-100" x-text="formatDate(selected_league.ends_at)"></div> </div> </div> <template x-if="selected_league.percentage_bonus"> <div class="mx-4 text-left mt-4"> <div x-data="{show: true }" class="rounded-lg mt-2 bg-gray-800 shadow-sm py-3 px-6 relative text-gray-200 bg-gray-900/40 border border-gray-700/40" x-cloak x-show="show" > <div class="absolute top-0 left-0 -mt-2 -ml-2"> <svg class="h-6 w-6 text-gray-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"> <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path> </svg> </div> <div> <div class="md:flex md:justify-between"> <div class="text-sm w-full"> <span class="font-bold block">Bonus</span> <p class="text-sm text-gray-300 font-medium" x-text="`This league is eligible for a :percentage% shard bonus.`.replace(':percentage', selected_league.percentage_bonus)"></p> </div> </div> </div> </div> </div> </template> <template x-if="selected_league.status === 'ENDED' && !selected_league.processed_at"> <div class="mx-4 text-left"> <div x-data="{show: true }" class="rounded-lg mt-2 bg-gray-800 shadow-sm py-3 px-6 relative text-gray-200 bg-gray-900/40 border border-gray-700/40" x-cloak x-show="show" > <div class="absolute top-0 left-0 -mt-2 -ml-2"> <svg class="h-6 w-6 text-gray-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"> <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path> </svg> </div> <div> <div class="md:flex md:justify-between"> <div class="text-sm w-full"> <h3 class="text-sm font-bold text-gray-100">Processing Rewards</h3> <div class="mt-1 text-sm text-gray-400 font-medium"> <p>This league has ended and is currently being processed. Rewards will be distributed shortly.</p> </div> </div> </div> </div> </div> </div> </template> <template x-if="selected_league.allowable_classes !== null && selected_league.allowable_classes?.length > 0"> <div class="mx-4 text-left"> <div x-data="{show: true }" class="rounded-lg mt-2 bg-gray-800 shadow-sm py-3 px-6 relative text-gray-200 bg-gray-900/40 border border-gray-700/40" x-cloak x-show="show" > <div class="absolute top-0 left-0 -mt-2 -ml-2"> <svg class="h-6 w-6 text-gray-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"> <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path> </svg> </div> <div> <div class="md:flex md:justify-between"> <div class="text-sm w-full"> <h3 class="text-sm font-bold text-gray-100">Restricted</h3> <div class="mt-1 text-sm text-gray-400 font-medium"> <p>This league is restricted to the following classes:</p> <ul class="list-disc ml-4"> <template x-for="class_name in selected_league.allowable_classes" :key="class_name"> <li x-text="class_name.charAt(0).toUpperCase() + class_name.slice(1)"></li> </template> </ul> </div> </div> </div> </div> </div> </div> </template> <div class="mt-4"> <div> <div class="relative"> <div class="absolute inset-0 flex items-center" aria-hidden="true"> <div class="w-full border-t border-gray-700"></div> </div> <div class="relative flex justify-center"> <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">Leaderboard</span> </div> </div></div> </div> <div class="bg-gray-900/40 rounded-lg p-4 border border-gray-700/30 mx-4 text-left mt-4 mb-4"> <template x-if="selected_league.leaderboard.length === 0"> <div class="text-center py-6"> <svg class="w-16 h-16 mx-auto mb-3 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/> </svg> <span class="block font-bold text-sm text-gray-200">No Parties</span> <p class="text-sm text-gray-400 font-medium">No parties have joined this league yet.</p> </div> </template> <template x-if="selected_league.leaderboard.length > 0"> <div class="space-y-2"> <template x-for="entry in selected_league.leaderboard" :key="entry.rank"> <div class="cursor-pointer transition-colors duration-200 rounded-lg bg-gray-800/30 hover:bg-gray-800/50 border border-gray-700/30 p-3 relative" x-on:click="window.dispatchEvent(new CustomEvent('show-party-breakdown', { detail: { party_league_contribution_id: entry.party_league_contribution_id } }))"> <div class="flex flex-col sm:flex-row sm:items-center gap-3"> <div class="flex items-center justify-center md:justify-start gap-3"> <div class="flex-shrink-0 pl-4"> <template x-if="entry.party_members && entry.party_members.length > 0"> <div class="isolate flex -space-x-2"> <template x-for="(member, index) in entry.party_members.slice(0, 4)" :key="index"> <div class="relative inline-block h-8 w-8 rounded-full ring-2 ring-gray-700 overflow-hidden" :class="member.image_url ? 'bg-gray-700/60' : 'bg-grayNoBackdrop'" x-tooltip.html="member.name"> <template x-if="member.image_url"> <img class="h-16 -ml-4 max-w-none" :src="member.image_url" :alt="member.name"> </template> </div> </template> <template x-if="entry.party_members.length > 4"> <div class="relative flex items-center justify-center w-8 h-8 text-xs font-bold text-gray-300 bg-gray-700 rounded-full ring-2 ring-gray-700" x-text="'+' + (entry.party_members.length - 4)"></div> </template> </div> </template> </div> </div> <div class="flex-1 min-w-0 sm:order-none order-first text-center sm:text-left"> <div class="font-semibold text-gray-100 text-sm truncate" x-text="entry.party_name"></div> </div> <div class="flex items-center gap-2 flex-wrap justify-center sm:justify-start"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60"> <span class="font-bold text-gray-200 text-sm" x-text="number_format(entry.contribution_value)"></span> <span class="text-sm" x-cloak x-show="selected_league.contribution_type === 'KILLS'">Kills</span> <span class="text-sm" x-cloak x-show="selected_league.contribution_type === 'EXPERIENCE'">Experience</span></span> <template x-if="entry.shard_reward"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60"> <img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/uploaded/skins/01JVYWCX6QE35GBJQ9TV02G033.png' class='h-4 w-4 inline-block'> <span class="font-bold text-gray-200 text-sm" x-text="number_format(entry?.shard_reward) ?? 0"></span> <span x-cloak x-show="selected_league.percentage_bonus"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4 text-green-400 inline-block"> <path fill-rule="evenodd" d="M11.78 9.78a.75.75 0 0 1-1.06 0L8 7.06 5.28 9.78a.75.75 0 0 1-1.06-1.06l3.25-3.25a.75.75 0 0 1 1.06 0l3.25 3.25a.75.75 0 0 1 0 1.06Z" clip-rule="evenodd" /> </svg> </span></span> </template> </div> </div> <div class="size-8 flex items-center justify-center bg-gray-700 rounded-full text-center absolute top-0 left-0 -mt-2 -ml-3 text-gray-100 bg-gray-700"> <span class="font-bold text-sm" x-text="'#' + entry.rank"></span> </div> </div> </template> </div> </template> </div> <template x-if="selected_league.status === 'ACTIVE' || selected_league.status === 'UPCOMING'"> <div class="px-4 py-4 bg-gray-900/40"> <template x-if="!isPartyJoined()"> <div> <template x-if="!hasParty()"> <div class="text-center py-4"> <svg class="w-12 h-12 mx-auto mb-3 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/> </svg> <p class="text-sm text-gray-200 font-bold">No Party</p> <p class="text-sm text-gray-400 font-medium">You must be in a party to join</p> </div> </template> <template x-if="hasParty() && !isPartyLeader()"> <div class="text-center py-4"> <svg class="w-12 h-12 mx-auto mb-3 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/> </svg> <p class="text-sm text-gray-200 font-bold">No Party</p> <p class="text-sm text-gray-400 font-medium">Only the party leader can join</p> </div> </template> <template x-if="hasParty() && isPartyLeader()"> <div class="text-center"> <button type="button" class="inline-block rounded px-4 py-2 bg-gradient-to-b font-bold bg-indigo-600 hover:bg-indigo-500 text-sm" type="button" x-on:click="joinLeague()" x-bind:disabled="is_processing"> <span x-show="!is_processing">Join League</span> <span x-show="is_processing"><svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"> <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle> <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></span> </button> </div> </template> </div> </template> <template x-if="isPartyJoined()"> <div> <template x-if="hasParty() && isPartyLeader()"> <div class="flex items-center justify-center gap-2"> <button type="button" class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block" type="button" x-on:click="window.dispatchEvent(new CustomEvent('show-party-breakdown', { detail: { party_league_contribution_id: selected_league.viewer_party_league_contribution_id } }))"> View Progress </button> <button type="button" class="rounded px-4 py-2 bg-gradient-to-b font-bold bg-red-600/80 hover:bg-red-600 text-sm" type="button" x-on:click="openLeaveModal()" x-bind:disabled="is_processing"> <span x-show="!is_processing">Leave League</span> <span x-show="is_processing"><svg class="inline-block w-4 h-4 mr-1 text-gray-100 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"> <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle> <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></span> </button> </div> </template> <template x-if="!hasParty() || !isPartyLeader()"> <div class="flex flex-col items-center gap-3"> <div class="inline-flex items-center gap-2 px-4 py-2 bg-green-600/20 border-2 border-green-500/40 rounded-lg text-sm"> <svg class="w-5 h-5 text-green-400" fill="currentColor" viewBox="0 0 20 20"> <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/> </svg> <span class="font-bold text-green-100">Already Joined</span> </div> <button type="button" class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block" type="button" x-on:click="window.dispatchEvent(new CustomEvent('show-party-breakdown', { detail: { party_league_contribution_id: selected_league.viewer_party_league_contribution_id } }))"> View Progress </button> </div> </template> </div> </template> </div> </template> </div> </template> </div> </template> </div> </div> <div x-show="show_fade" x-transition:enter="transition ease-out" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }" class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div> </div> </div> </div> <div x-data="modal('league-leave-confirm', false, null, 1)" x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'league-leave-confirm') })" x-on:open-modal.window="$event.detail == 'league-leave-confirm' ? show = true : null" x-on:close-modal.window="$event.detail == 'league-leave-confirm' ? show = false : null" x-on:close.stop="show = false" x-on:keydown.escape.window="show = false" x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()" x-on:keydown.shift.tab.prevent="prevFocusable().focus()" x-show="show" class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" style="display: none;"> <div class="flex min-h-full justify-center md:p-4 text-center items-center sm:p-0"> <div x-show="show" class="fixed inset-0 transform transition-all" x-on:click="show = false" x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms> <div class="absolute inset-0 bg-immo opacity-70"></div> </div> <div x-show="show" class="md:mb-6 bg-gray-800 border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-sm sm:mx-8 md:mx-auto relative max-h-[90vh]" x-transition:enter.duration.300ms x-transition:leave.duration.200ms> <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2" x-on:click="$dispatch('close-modal', 'league-leave-confirm');" > <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold"> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /> </svg> </button> <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]" x-ref="scrollContainer" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" @scroll="handleScroll()"> <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible"> <template x-if="content_visible"> <div x-data="{show:false}" x-init="$nextTick(() => show = true)"> <div class="border-b border-white/5 "> <div class="py-3 px-3 text-left flex items-center"> <svg xmlns="http://www.w3.org/2000/svg" class="size-4 text-gray-500" viewBox="0 0 24 24"> <path fill="currentColor" d="m20 10.35l-5.78-7.41A3.06 3.06 0 0 0 9.75 3L4 10.35A3.05 3.05 0 0 0 3.51 12A3.1 3.1 0 0 0 4 13.58l.06.07l5.74 7.41A3 3 0 0 0 12 22a3.06 3.06 0 0 0 2.26-1L20 13.65a3 3 0 0 0-.06-3.3Zm-1.57 2.14l-5.67 7.22a1.11 1.11 0 0 1-1.42.07l-5.69-7.31a1 1 0 0 1-.14-.47a1.1 1.1 0 0 1 .1-.45l5.67-7.22a1.11 1.11 0 0 1 1.42-.07l5.63 7.28a1 1 0 0 1 .16.54a1.1 1.1 0 0 1-.1.41Z" /> </svg> <h2 class="text-sm font-semibold text-gray-200 ml-2"> Leave League </h2> <div class="text-sm font-semibold text-gray-200 ml-2"> </div> </div></div> <div class="mx-4 mt-4 text-left"> <p class="text-sm text-gray-300 font-medium"> Are you sure you want to withdraw your party from this league? </p> </div> <div class="mx-4 text-left mt-4"> <div x-data="{show: true }" class="rounded-lg mt-2 bg-gray-800 shadow-sm py-3 px-6 relative text-gray-200 bg-gray-900/40" x-cloak x-show="show" > <div class="absolute top-0 left-0 -mt-2 -ml-2"> <svg class="h-6 w-6 text-gray-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"> <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path> </svg> </div> <div> <div class="md:flex md:justify-between"> <div class="text-sm w-full"> <strong>Warning!</strong> Leaving the league will remove all progress. This cannot be recovered. </div> </div> </div> </div> </div> <div class="mt-4 rounded-b-lg bg-[#1c212c] py-2 text-center"> <button type="button" class="rounded bg-white/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-white/20 inline-block mr-2" type="button" x-on:click="$dispatch('close-modal', 'league-leave-confirm')"> Cancel </button> <button type="button" class="rounded px-4 py-2 bg-gradient-to-b font-bold bg-red-600/80 hover:bg-red-600 text-sm" type="button" x-on:click="$dispatch('league-leave-confirmed')"> Leave League </button> </div> </div> </template> </div> </div> <div x-show="show_fade" x-transition:enter="transition ease-out" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }" class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div> </div> </div> </div> </div><div x-data="party_breakdown"> <div x-data="modal('party-breakdown', false, null, )" x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'party-breakdown') })" x-on:open-modal.window="$event.detail == 'party-breakdown' ? show = true : null" x-on:close-modal.window="$event.detail == 'party-breakdown' ? show = false : null" x-on:close.stop="show = false" x-on:keydown.escape.window="show = false" x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()" x-on:keydown.shift.tab.prevent="prevFocusable().focus()" x-show="show" class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" style="display: none;"> <div class="flex min-h-full justify-center md:p-4 text-center items-center sm:p-0"> <div x-show="show" class="fixed inset-0 transform transition-all" x-on:click="show = false" x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms> <div class="absolute inset-0 bg-immo opacity-70"></div> </div> <div x-show="show" class="md:mb-6 bg-gray-800 border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-lg sm:mx-8 md:mx-auto relative max-h-[90vh]" x-transition:enter.duration.300ms x-transition:leave.duration.200ms> <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2" x-on:click="$dispatch('close-modal', 'party-breakdown');" > <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold"> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /> </svg> </button> <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]" x-ref="scrollContainer" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" @scroll="handleScroll()"> <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible"> <template x-if="content_visible"> <div x-data="{show:false}" x-init="$nextTick(() => show = true)"> <div class="border-b border-white/5 "> <div class="py-3 px-3 text-left flex items-center"> <svg xmlns="http://www.w3.org/2000/svg" class="size-4 text-gray-500" viewBox="0 0 24 24"> <path fill="currentColor" d="m20 10.35l-5.78-7.41A3.06 3.06 0 0 0 9.75 3L4 10.35A3.05 3.05 0 0 0 3.51 12A3.1 3.1 0 0 0 4 13.58l.06.07l5.74 7.41A3 3 0 0 0 12 22a3.06 3.06 0 0 0 2.26-1L20 13.65a3 3 0 0 0-.06-3.3Zm-1.57 2.14l-5.67 7.22a1.11 1.11 0 0 1-1.42.07l-5.69-7.31a1 1 0 0 1-.14-.47a1.1 1.1 0 0 1 .1-.45l5.67-7.22a1.11 1.11 0 0 1 1.42-.07l5.63 7.28a1 1 0 0 1 .16.54a1.1 1.1 0 0 1-.1.41Z" /> </svg> <div class="text-sm font-semibold text-gray-200 ml-2"> <span x-text="data?.party_name"></span> </div> </div></div> <template x-if="data"> <div> <div class="bg-gradient-to-br p-6 bg-gray-900/40"> <div class="text-center"> <div class="flex items-center justify-center gap-3 mb-3"> <h2 class="text-xl font-bold text-gray-100" x-text="data.party_name"></h2> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60 text-xs"> <span x-text="'#' + data.party_rank"></span></span> </div> <p class="text-sm text-gray-400 font-medium" x-text="data.league_name"></p> </div> </div> <div class="grid grid-cols-2 gap-3 mx-4 mt-4"> <div class="bg-gray-900/40 rounded-lg p-4"> <div class="text-xs text-gray-500 font-medium mb-1">Party Rank</div> <div class="text-sm font-semibold text-gray-100" x-text="'#' + data.party_rank"></div> </div> <div class="bg-gray-900/40 rounded-lg p-4"> <div class="text-xs text-gray-500 font-medium mb-1">Total Contribution</div> <div class="text-sm font-semibold text-gray-100" x-text="number_format(data?.total_contribution ?? 0)"></div> </div> </div> <template x-if="data.shard_reward"> <div x-data="{show: true }" class="rounded-lg mt-2 bg-gray-800 shadow-sm py-3 px-6 relative text-gray-200 mx-4 !bg-gray-900/40 text-left" x-cloak x-show="show" > <div class="absolute top-0 left-0 -mt-2 -ml-2"> <svg class="h-6 w-6 text-gray-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"> <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path> </svg> </div> <div> <div class="md:flex md:justify-between"> <div class="text-sm w-full"> <h3 class="text-sm font-bold text-gray-200">Reward</h3> <div class="mt-1 text-sm text-gray-300 font-medium"> Each party member will receive <img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/uploaded/skins/01JVYWCX6QE35GBJQ9TV02G033.png' class='h-4 w-4 inline-block'> <span class='font-bold' x-text='number_format(data?.shard_reward ?? 0)'></span> shards when the league ends. </div> </div> </div> </div> </div> </template> <template x-if="!data.shard_reward"> <div class="bg-gray-800/40 border border-gray-700/50 rounded-lg p-4 mx-4 mt-4"> <div class="text-center"> <p class="text-sm text-gray-400">This party is not currently in a reward position.</p> </div> </div> </template> <div class="mt-4"> <div> <div class="relative"> <div class="absolute inset-0 flex items-center" aria-hidden="true"> <div class="w-full border-t border-gray-700"></div> </div> <div class="relative flex justify-center"> <span class="px-2 text-xs font-bold text-gray-500 uppercase bg-gray-800">Character Contributions</span> </div> </div></div> </div> <div class="bg-gray-900/40 rounded-lg p-4 border border-gray-700/30 mx-4 mt-4 text-left mb-4"> <template x-if="data.character_contributions.length === 0"> <div class="text-center py-12"> <svg class="w-16 h-16 mx-auto mb-3 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/> </svg> <span class="block font-bold">No Contributions</span> <p class="text-sm text-gray-400 font-medium">No individual contributions recorded yet.</p> </div> </template> <template x-if="data.character_contributions.length > 0"> <div class="space-y-2"> <template x-for="entry in data.character_contributions" :key="entry.rank"> <div class="cursor-default transition-colors duration-200 rounded-lg bg-gray-800/30 hover:bg-gray-800/50 border border-gray-700/30 p-3"> <div class="flex items-center gap-3"> <div class="flex-shrink-0 w-8 text-center"> <span class="font-bold text-sm" x-text="'#' + entry.rank"></span> </div> <template x-if="entry.is_hidden"> <div class="flex-1 min-w-0 truncate flex items-center gap-2"> <div class="w-6 h-6 rounded-full bg-grayNoBackdrop flex-shrink-0"></div> <div class="font-semibold text-gray-400 text-sm truncate" x-text="entry.character_name"></div> </div> </template> <template x-if="!entry.is_hidden"> <div class="flex-1 min-w-0 truncate"> <div class="font-semibold text-gray-100 text-sm truncate" x-html="entry.formatted_character_name"></div> </div> </template> <div class="flex-shrink-0"> <span class="rounded-md px-2 py-1 text-xs font-semibold text-gray-400 bg-gray-700/60"> <span class="font-bold text-gray-200 text-sm" x-text="number_format(entry.contribution_value ?? 0)"></span></span> </div> </div> </div> </template> </div> </template> </div> </div> </template> </div> </template> </div> </div> <div x-show="show_fade" x-transition:enter="transition ease-out" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }" class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div> </div> </div> </div> </div>
<div
                x-data="modal('logout', false, null, 1)"
                x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'logout') })"
                x-on:open-modal.window="$event.detail == 'logout' ? show = true : null"
                x-on:close-modal.window="$event.detail == 'logout' ? show = false : null"
                x-on:close.stop="show = false"
                x-on:keydown.escape.window="show = false"
                x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()"
                x-on:keydown.shift.tab.prevent="prevFocusable().focus()"
                x-show="show"
                class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50"
                x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                style="display: none;">
                <div class="flex min-h-full  justify-center md:p-4 text-center items-center sm:p-0">
                    <div
                        x-show="show"
                        class="fixed inset-0 transform transition-all"
                         x-on:click="show = false"                         x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms>
                        <div class="absolute inset-0 bg-immo opacity-70"></div>
                    </div>
                    <div
                        x-show="show"
                        class="md:mb-6  bg-gray-800  border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-sm sm:mx-8 md:mx-auto relative max-h-[90vh]"
                        x-transition:enter.duration.300ms x-transition:leave.duration.200ms>
                                                                                    <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2"
                                        x-on:click="$dispatch('close-modal', 'logout');"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                                    </svg>
                                </button>
                                                                            <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]"
                             x-ref="scrollContainer"
                             x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                             @scroll="handleScroll()">
                            <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible">
                                <template x-if="content_visible">
                                    
                                    <div x-data="{show:false}" x-init="$nextTick(() => show = true)">
                                        <div class="border-b border-white/5 ">
    <div class="py-3 px-3 text-left flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="size-4 text-gray-500" viewBox="0 0 24 24">
                <path fill="currentColor" d="m20 10.35l-5.78-7.41A3.06 3.06 0 0 0 9.75 3L4 10.35A3.05 3.05 0 0 0 3.51 12A3.1 3.1 0 0 0 4 13.58l.06.07l5.74 7.41A3 3 0 0 0 12 22a3.06 3.06 0 0 0 2.26-1L20 13.65a3 3 0 0 0-.06-3.3Zm-1.57 2.14l-5.67 7.22a1.11 1.11 0 0 1-1.42.07l-5.69-7.31a1 1 0 0 1-.14-.47a1.1 1.1 0 0 1 .1-.45l5.67-7.22a1.11 1.11 0 0 1 1.42-.07l5.63 7.28a1 1 0 0 1 .16.54a1.1 1.1 0 0 1-.1.41Z" />
            </svg>
                                    <div class="text-sm font-semibold text-gray-200 ml-2">
                Logout
            </div>
            </div>
</div>
    <div class="pt-3 text-sm text-center bg-gray-700/30">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-12 h-12 mx-auto text-red-500">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
        </svg>
        <div class="font-bold text-gray-100">You have not linked up an email address.</div>
        <div class="mt-2 text-gray-300"> If you log out, <strong>you will not be able to log back in.</strong></div>
        <div class="mt-4">
            <button type="button" 

                 
                class="inline-block rounded px-4 py-2 bg-gradient-to-b font-bold bg-indigo-600 hover:bg-indigo-500 text-sm" type="button">
            Link Email Address
        </button>
        </div>
                <form method="POST" action="https://web.idle-mmo.com/logout" role="none" class="py-3 mt-3 bg-gray-700/30">
            <input type="hidden" name="_token" value="XyMoBec0vexU3Uc6FRmgCq1T9viaXxZJLP7cxHcI" autocomplete="off">            <div>
                <button type="submit" 
                 
                class="rounded px-4 py-2 bg-gradient-to-b font-bold bg-red-600/80 hover:bg-red-600 text-sm" type="submit">
            Log out
        </button>
                <div class="inline-block">
            <button type="button" 
                 
                class="rounded bg-black/10 px-2 py-2 text-sm font-semibold text-white shadow-sm hover:bg-black/40" type="button" x-on:click="$dispatch('close-modal','logout');">
            Close
        </button>
    </div>            </div>
        </form>
    </div>
                                    </div>
                                </template>
                            </div>
                        </div>
                        
                        <div x-show="show_fade"
                             x-transition:enter="transition ease-out"
                             x-transition:enter-start="opacity-0"
                             x-transition:enter-end="opacity-100"
                             x-transition:leave="transition ease-in"
                             x-transition:leave-start="opacity-100"
                             x-transition:leave-end="opacity-0"
                             :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }"
                             class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div>
                    </div>
                </div>
            </div>

            <div x-data="wikiModal" x-on:open-wiki.window="openWiki($event.detail)"> <div x-data="modal('show-wiki', false, null, 1)" x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'show-wiki') })" x-on:open-modal.window="$event.detail == 'show-wiki' ? show = true : null" x-on:close-modal.window="$event.detail == 'show-wiki' ? show = false : null" x-on:close.stop="show = false" x-on:keydown.escape.window="show = false" x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()" x-on:keydown.shift.tab.prevent="prevFocusable().focus()" x-show="show" class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" style="display: none;"> <div class="flex min-h-full justify-center md:p-4 text-center items-center sm:p-0"> <div x-show="show" class="fixed inset-0 transform transition-all" x-on:click="show = false" x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms> <div class="absolute inset-0 bg-immo opacity-70"></div> </div> <div x-show="show" class="md:mb-6 bg-gray-800 border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-2xl sm:mx-8 md:mx-auto relative max-h-[90vh]" x-transition:enter.duration.300ms x-transition:leave.duration.200ms> <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2" x-on:click="$dispatch('close-modal', 'show-wiki');" > <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold"> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /> </svg> </button> <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]" x-ref="scrollContainer" x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }" @scroll="handleScroll()"> <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible"> <template x-if="content_visible"> <div x-data="{show:false}" x-init="$nextTick(() => show = true)"> <div class="flex flex-col h-[46rem] max-h-[calc(100vh-4rem)]"> <div class="border-b border-white/5 "> <div class="py-3 px-3 text-left flex items-center"> <svg xmlns="http://www.w3.org/2000/svg" class="size-4 text-gray-500" viewBox="0 0 24 24"> <path fill="currentColor" d="m20 10.35l-5.78-7.41A3.06 3.06 0 0 0 9.75 3L4 10.35A3.05 3.05 0 0 0 3.51 12A3.1 3.1 0 0 0 4 13.58l.06.07l5.74 7.41A3 3 0 0 0 12 22a3.06 3.06 0 0 0 2.26-1L20 13.65a3 3 0 0 0-.06-3.3Zm-1.57 2.14l-5.67 7.22a1.11 1.11 0 0 1-1.42.07l-5.69-7.31a1 1 0 0 1-.14-.47a1.1 1.1 0 0 1 .1-.45l5.67-7.22a1.11 1.11 0 0 1 1.42-.07l5.63 7.28a1 1 0 0 1 .16.54a1.1 1.1 0 0 1-.1.41Z" /> </svg> <h2 class="text-sm font-semibold text-gray-200 ml-2"> Wiki </h2> <div class="text-sm font-semibold text-gray-200 ml-2"> </div> </div></div> <div class="flex-1 min-h-0"> <template x-if="wiki_url"> <iframe class="w-full h-full" :src="wiki_url" title="Wiki" loading="lazy" referrerpolicy="no-referrer" ></iframe> </template> </div> <div class="py-2 border-t border-white/5 w-full"> <a :href="wiki_url || 'https://wiki.idle-mmo.com'" target="_blank"> <button type="button" class="rounded bg-white/5 border border-gray-700/40 px-2 py-1 text-sm font-semibold text-white shadow-sm hover:bg-white/10 inline-block inline-flex items-center gap-1"> Open Wiki <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4"> <path fill-rule="evenodd" d="M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd" /> </svg> </button> </a> </div> </div> </div> </template> </div> </div> <div x-show="show_fade" x-transition:enter="transition ease-out" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }" class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div> </div> </div> </div> </div>



<div>
    <div
                x-data="modal('tokens-purchase', false, null, )"
                x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'tokens-purchase') })"
                x-on:open-modal.window="$event.detail == 'tokens-purchase' ? show = true : null"
                x-on:close-modal.window="$event.detail == 'tokens-purchase' ? show = false : null"
                x-on:close.stop="show = false"
                x-on:keydown.escape.window="show = false"
                x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()"
                x-on:keydown.shift.tab.prevent="prevFocusable().focus()"
                x-show="show"
                class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50"
                x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                style="display: none;">
                <div class="flex min-h-full  justify-center md:p-4 text-center items-center sm:p-0">
                    <div
                        x-show="show"
                        class="fixed inset-0 transform transition-all"
                         x-on:click="show = false"                         x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms>
                        <div class="absolute inset-0 bg-immo opacity-70"></div>
                    </div>
                    <div
                        x-show="show"
                        class="md:mb-6  bg-gray-800  border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-2xl sm:mx-8 md:mx-auto relative max-h-[90vh]"
                        x-transition:enter.duration.300ms x-transition:leave.duration.200ms>
                                                                                    <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2"
                                        x-on:click="$dispatch('close-modal', 'tokens-purchase');"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                                    </svg>
                                </button>
                                                                            <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]"
                             x-ref="scrollContainer"
                             x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                             @scroll="handleScroll()">
                            <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible">
                                <template x-if="content_visible">
                                    
                                    <div x-data="{show:false}" x-init="$nextTick(() => show = true)">
                                        <template x-if="show === true">
            <div class="px-8 pt-6">
                <div x-data="promoCodes" 
     x-init="loadPromoCodes('WEB_APP')" 
     x-show="promo_codes.length > 0" x-cloak>
    <div 
    x-data="{show: true }"
    class="rounded-lg mt-2 bg-grayNoBackdrop border border-gray-700/40 shadow-sm py-3 px-6 relative text-gray-200"
    x-cloak 
    x-show="show"
        
>
        <div>
      <div class="md:flex md:justify-between">
        <div class="text-sm w-full">
          <div class="flex flex-wrap items-center text-left gap-2 justify-start">
            <div class="flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6 shrink-0">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z" />
                </svg>

                <div class="text-sm text-blue-100 ml-4"><strong>Promo Codes</strong><br/> Don't miss out! We have promo codes available.</div>
            </div>

            <button type="button" 
                 
                class="rounded bg-white/5 border border-gray-700/40 px-2 py-1 text-sm font-semibold text-white shadow-sm hover:bg-white/10 inline-block ml-auto px-3 py-1 text-white rounded transition-colors duration-200" x-on:click="openModal()">
            View Codes
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4 inline-block">
                    <path fill-rule="evenodd" d="M6.22 4.22a.75.75 0 0 1 1.06 0l3.25 3.25a.75.75 0 0 1 0 1.06l-3.25 3.25a.75.75 0 0 1-1.06-1.06L8.94 8 6.22 5.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
                </svg>
        </button>
        </div>
        </div>
      </div>
    </div>
    </div>
  
    
            <div
                x-data="modal('promo-codes', false, null, )"
                x-init="$watch('show', (value) => { if(value === false) $dispatch('modal-closed', 'promo-codes') })"
                x-on:open-modal.window="$event.detail == 'promo-codes' ? show = true : null"
                x-on:close-modal.window="$event.detail == 'promo-codes' ? show = false : null"
                x-on:close.stop="show = false"
                x-on:keydown.escape.window="show = false"
                x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()"
                x-on:keydown.shift.tab.prevent="prevFocusable().focus()"
                x-show="show"
                class="fixed inset-0 overflow-y-auto px-4 md:py-6 sm:px-0 z-50"
                x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                style="display: none;">
                <div class="flex min-h-full  justify-center md:p-4 text-center items-center sm:p-0">
                    <div
                        x-show="show"
                        class="fixed inset-0 transform transition-all"
                         x-on:click="show = false"                         x-transition:enter.opacity.duration.300ms x-transition:leave.opacity.duration.200ms>
                        <div class="absolute inset-0 bg-immo opacity-70"></div>
                    </div>
                    <div
                        x-show="show"
                        class="md:mb-6  bg-gray-800  border border-gray-700/40 rounded-lg overflow-hidden shadow-xl transform transition-all w-full sm:max-w-sm sm:mx-8 md:mx-auto relative max-h-[90vh]"
                        x-transition:enter.duration.300ms x-transition:leave.duration.200ms>
                                                                                    <button type="button" class="absolute top-0 right-0 rounded-full bg-gray-700 hover:bg-gray-700/40 hover:text-gray-200 p-1 z-20 mt-2 mr-2"
                                        x-on:click="$dispatch('close-modal', 'promo-codes');"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="w-4 h-4 font-bold">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                                    </svg>
                                </button>
                                                                            <div class="overflow-x-hidden overflow-y-auto max-h-[90vh]"
                             x-ref="scrollContainer"
                             x-bind:class="{ 'modal-scroll': navigator.userAgent.includes('Android') }"
                             @scroll="handleScroll()">
                            <div x-data="{content_visible: false}" x-init="$watch('show', function(value){ if(value) {content_visible = true;} else {setTimeout(() => content_visible = false, 300); }})" x-show="content_visible">
                                <template x-if="content_visible">
                                    
                                    <div x-data="{show:false}" x-init="$nextTick(() => show = true)">
                                        <div class="border-b border-white/5 ">
    <div class="py-3 px-3 text-left flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="size-4 text-gray-500" viewBox="0 0 24 24">
                <path fill="currentColor" d="m20 10.35l-5.78-7.41A3.06 3.06 0 0 0 9.75 3L4 10.35A3.05 3.05 0 0 0 3.51 12A3.1 3.1 0 0 0 4 13.58l.06.07l5.74 7.41A3 3 0 0 0 12 22a3.06 3.06 0 0 0 2.26-1L20 13.65a3 3 0 0 0-.06-3.3Zm-1.57 2.14l-5.67 7.22a1.11 1.11 0 0 1-1.42.07l-5.69-7.31a1 1 0 0 1-.14-.47a1.1 1.1 0 0 1 .1-.45l5.67-7.22a1.11 1.11 0 0 1 1.42-.07l5.63 7.28a1 1 0 0 1 .16.54a1.1 1.1 0 0 1-.1.41Z" />
            </svg>
                            <h2 class="text-sm font-semibold text-gray-200 ml-2">
                Promo Codes
            </h2>
                            <div class="text-sm font-semibold text-gray-200 ml-2">
                
            </div>
            </div>
</div>

    <div class="px-4 pb-4 bg-gray-800 text-gray-100 rounded-lg shadow-xl"> 


        <div x-show="loading" class="text-center px-8 py-2 text-gray-400"> 
            <svg class="animate-spin h-6 w-6 text-gray-400 mx-auto mb-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            Loading...
        </div>

        <div x-show="!loading && promo_codes.length === 0" class="text-center py-8 text-gray-400"> 
            <svg class="w-12 h-12 mx-auto mb-3 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> 
            <p class="text-lg font-medium">No promo codes are currently available.</p>
        </div>

        <div x-show="!loading && promo_codes.length > 0" class="space-y-6">
            <template x-for="promoCode in promo_codes" :key="promoCode.code">
                <div class="bg-gray-700/40 rounded-lg p-5">
                    
                    <div class="relative inline-flex items-center mb-4">
                        <div class="bg-gray-600 text-gray-50 font-mono text-lg font-bold px-4 py-2 rounded-md border border-dashed border-gray-500 pr-10">
                            <span x-text="promoCode.code"></span>
                        </div>
                        <button type="button" 

                 
                class="inline-block rounded px-4 py-2 bg-gradient-to-b font-bold bg-indigo-600 hover:bg-indigo-500 text-sm !px-1 !py-1 absolute right-1 text-sm bg-yellow-600 hover:bg-yellow-700 text-white rounded-md transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-opacity-50" x-data="{ copied: false }" x-on:click="copyToClipboard(promoCode.code);
                                copied = true;
                                setTimeout(() => { copied = false }, 2000);" x-bind:class="{ 'bg-green-600 hover:bg-green-600': copied }" aria-label="Copy promo code">
            <span x-show="!copied">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                                    <path fill-rule="evenodd" d="M11.986 3H12a2 2 0 0 1 2 2v6a2 2 0 0 1-1.5 1.937V7A2.5 2.5 0 0 0 10 4.5H4.063A2 2 0 0 1 6 3h.014A2.25 2.25 0 0 1 8.25 1h1.5a2.25 2.25 0 0 1 2.236 2ZM10.5 4v-.75a.75.75 0 0 0-.75-.75h-1.5a.75.75 0 0 0-.75.75V4h3Z" clip-rule="evenodd" />
                                    <path fill-rule="evenodd" d="M3 6a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1H3Zm1.75 2.5a.75.75 0 0 0 0 1.5h3.5a.75.75 0 0 0 0-1.5h-3.5ZM4 11.75a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 0 1.5h-3.5a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd" />
                                </svg>
                            </span>
                            <span x-show="copied">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                            </span>
        </button>
                    </div>

                    
                    <div>
                        <p class="text-sm text-gray-200 font-bold mb-2" x-text="promoCode.description"></p>
                        <p x-show="promoCode.expires_at" class="text-xs text-gray-400 font-medium">
                            Expires: <span x-text="new Date(promoCode.expires_at).toLocaleDateString()"></span>
                        </p>
                    </div>
                </div>
            </template>
        </div>

        <div class="mt-8"> 
            <button
                x-on:click="$dispatch('close')"
                class="w-full px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white text-base font-medium rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50" 
            >
                Close
            </button>
        </div>
    </div>
                                    </div>
                                </template>
                            </div>
                        </div>
                        
                        <div x-show="show_fade"
                             x-transition:enter="transition ease-out"
                             x-transition:enter-start="opacity-0"
                             x-transition:enter-end="opacity-100"
                             x-transition:leave="transition ease-in"
                             x-transition:leave-start="opacity-100"
                             x-transition:leave-end="opacity-0"
                             :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }"
                             class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div>
                    </div>
                </div>
            </div>

                </div>
            </div>
        </template>
        
        <div class="isolate mx-8 mt-10 grid max-w-md grid-cols-1 gap-8  lg:max-w-none lg:grid-cols-2">
            <div class="rounded-3xl p-8 xl:p-10 ring-1 ring-white/10">
                <img src="https://cdn.idle-mmo.com/global/token.png" class="w-24 mx-auto">
                <div class="flex items-center gap-x-4 justify-center">
                    <h3 id="tier-freelancer" class="text-lg font-semibold leading-8 text-white  whitespace-nowrap"><img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/token.png' class='h-4 w-4 inline-block'> 250 Token Pack</h3>
                </div>
                <p class="mt-2 flex items-baseline justify-center gap-x-1">
                    <span class="text-xl md:text-4xl font-bold tracking-tight text-white">US$6.99</span>
                </p>
                <form action="https://web.idle-mmo.com/payments/stripe/checkout/250-tokens" method="POST" class="w-full" x-data="{
                quantity: 1,
                checkQuantity(){            
                    if(this.quantity < 0)
                        this.quantity = 0;

                    if(this.quantity > 50)
                        this.quantity = 50;
                        
                    if(this.quantity > this.max_quantity)
                        this.quantity = this.max_quantity;
                },
              }">
                    <div class="flex mt-4 rounded-md shadow-sm  ">
                        <div class="relative flex items-stretch flex-grow focus-within:z-10">
                            <input type="number" name="quantity" x-on:keyup="checkQuantity();" x-on:change="checkQuantity()" x-model="quantity" :value="quantity" id="quantity" class="bg-gray-900/40 block w-full rounded-none rounded-l-md border-0 py-1.5 text-gray-100  placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6" placeholder="Quantity...">
                        </div>
                        <button type="button" x-on:click="quantity--;checkQuantity();" class="relative -ml-px inline-flex items-center border-l border-gray-800/30 gap-x-1.5 px-3 py-2 text-sm font-semibold text-gray-100 bg-gray-700 hover:bg-gray-700/80">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12h-15"></path>
                            </svg>
                        </button>
                        <button type="button" x-on:click="quantity++;checkQuantity();" class="relative -ml-px inline-flex items-center gap-x-1.5 border-l border-gray-800/30 rounded-r-md px-3 py-2 text-sm font-semibold text-gray-100 bg-gray-700 hover:bg-gray-700/80">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"></path>
                            </svg>
                        </button>
                    </div>
                    <input type="hidden" name="_token" value="XyMoBec0vexU3Uc6FRmgCq1T9viaXxZJLP7cxHcI" autocomplete="off">                    
                                            <button type="submit" class=" mt-2 w-full block rounded-md py-2 px-3 text-center text-sm font-semibold leading-6 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 bg-white/10 text-white hover:bg-white/20 focus-visible:outline-white">
                            Purchase
                        </button>
                                        
                                                            <p class="text-sm text-gray-400 mt-4">The tokens will be placed in your inventory upon purchase.</p>
                </form>
            </div>
            <div class="rounded-3xl p-8 bg-white/5 ring-2 ring-yellow-600 relative ">
                <p class="rounded-full bg-yellow-500 px-2.5 py-1 text-xs font-semibold leading-5 text-white absolute top-0 right-0 -mt-3">Most popular</p>

                <img src="https://cdn.idle-mmo.com/global/token.png" class="w-24 mx-auto">

                <div class="flex items-center justify-center gap-x-4">
                    <h3 id="tier-startup" class="text-lg font-semibold leading-8 text-white whitespace-nowrap"><img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/token.png' class='h-4 w-4 inline-block'> 1,000 Token Pack</h3>
                </div>
                <p class="mt-2 flex items-baseline justify-center gap-x-1">
                    <span class="text-xl md:text-4xl font-bold tracking-tight text-white">US$25.99</span>
                </p>
                <form action="https://web.idle-mmo.com/payments/stripe/checkout/1000-tokens"  method="POST" class="w-full"  x-data="{
            quantity: 1,
            checkQuantity(){            
                if(this.quantity < 0)
                    this.quantity = 0;
                    
                if(this.quantity > 50)
                    this.quantity = 50;

                if(this.quantity > this.max_quantity)
                    this.quantity = this.max_quantity;
            },
          }">
                    <div class="flex mt-4 rounded-md shadow-sm ">
                        <div class="relative flex items-stretch flex-grow focus-within:z-10">
                            <input type="number" name="quantity" x-on:keyup="checkQuantity();" x-on:change="checkQuantity()" x-model="quantity" :value="quantity" id="quantity" class="bg-gray-900/40 block w-full rounded-none rounded-l-md border-0 py-1.5 text-gray-100  placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6" placeholder="Quantity...">
                        </div>
                        <button type="button" x-on:click="quantity--;checkQuantity();" class="relative -ml-px inline-flex items-center border-l border-gray-800/30 gap-x-1.5 px-3 py-2 text-sm font-semibold text-gray-100 bg-gray-700 hover:bg-gray-700/80">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12h-15"></path>
                            </svg>
                        </button>
                        <button type="button" x-on:click="quantity++;checkQuantity();" class="relative -ml-px inline-flex items-center gap-x-1.5 border-l border-gray-800/30 rounded-r-md px-3 py-2 text-sm font-semibold text-gray-100 bg-gray-700 hover:bg-gray-700/80">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"></path>
                            </svg>
                        </button>
                    </div>
                    <input type="hidden" name="_token" value="XyMoBec0vexU3Uc6FRmgCq1T9viaXxZJLP7cxHcI" autocomplete="off">                                            <button type="submit" aria-describedby="tier-startup" class="mt-2 w-full block rounded-md py-2 px-3 text-center text-sm font-semibold leading-6 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 bg-indigo-500 text-white shadow-sm hover:bg-indigo-400 focus-visible:outline-indigo-500">
                            Purchase
                        </button>
                                                                                <p class="text-sm text-gray-400 mt-4">The tokens will be placed in your inventory upon purchase.</p>
                </form>
            </div>
            <div class="rounded-3xl p-8 xl:p-10 ring-1 ring-white/10">
                <img src="https://cdn.idle-mmo.com/global/token.png" class="w-24 mx-auto">
                <div class="flex items-center gap-x-4 justify-center">
                    <h3 id="tier-freelancer" class="text-lg font-semibold leading-8 text-white  whitespace-nowrap"><img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/token.png' class='h-4 w-4 inline-block'> 500 Token Pack</h3>
                </div>
                <p class="mt-2 flex items-baseline justify-center gap-x-1">
                    <span class="text-xl md:text-4xl font-bold tracking-tight text-white">US$13.99</span>
                </p>
                <form action="https://web.idle-mmo.com/payments/stripe/checkout/500-tokens"  method="POST" class="w-full" x-data="{
            quantity: 1,
            checkQuantity(){            
                if(this.quantity < 0)
                    this.quantity = 0;

                if(this.quantity > 50)
                    this.quantity = 50;
                    
                if(this.quantity > this.max_quantity)
                    this.quantity = this.max_quantity;
            },
          }">
                    <div class="flex mt-4 rounded-md shadow-sm  ">
                        <div class="relative flex items-stretch flex-grow focus-within:z-10">
                            <input type="number" name="quantity" x-on:keyup="checkQuantity();" x-on:change="checkQuantity()" x-model="quantity" :value="quantity" id="quantity" class="bg-gray-900/40 block w-full rounded-none rounded-l-md border-0 py-1.5 text-gray-100  placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6" placeholder="Quantity...">
                        </div>
                        <button type="button" x-on:click="quantity--;checkQuantity();" class="relative -ml-px inline-flex items-center border-l border-gray-800/30 gap-x-1.5 px-3 py-2 text-sm font-semibold text-gray-100 bg-gray-700 hover:bg-gray-700/80">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12h-15"></path>
                            </svg>
                        </button>
                        <button type="button" x-on:click="quantity++;checkQuantity();" class="relative -ml-px inline-flex items-center gap-x-1.5 border-l border-gray-800/30 rounded-r-md px-3 py-2 text-sm font-semibold text-gray-100 bg-gray-700 hover:bg-gray-700/80">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"></path>
                            </svg>
                        </button>
                    </div>
                    <input type="hidden" name="_token" value="XyMoBec0vexU3Uc6FRmgCq1T9viaXxZJLP7cxHcI" autocomplete="off">                    
                                            <button type="submit" class=" mt-2 w-full block rounded-md py-2 px-3 text-center text-sm font-semibold leading-6 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 bg-white/10 text-white hover:bg-white/20 focus-visible:outline-white">
                            Purchase
                        </button>
                                        
                                                            <p class="text-sm text-gray-400 mt-4">The tokens will be placed in your inventory upon purchase.</p>
                </form>
            </div>
            <div class="rounded-3xl p-8 xl:p-10 ring-1 ring-white/10">
                <img src="https://cdn.idle-mmo.com/global/token.png" class="w-24 mx-auto">
                <div class="flex items-center gap-x-4 justify-center">
                    <h3 id="tier-freelancer" class="text-lg font-semibold leading-8 text-white  whitespace-nowrap"><img src='https://cdn.idle-mmo.com/cdn-cgi/image/width=20,height=20,format=auto/global/token.png' class='h-4 w-4 inline-block'> 2,500 Token Pack</h3>
                </div>
                <p class="mt-2 flex items-baseline justify-center gap-x-1">
                    <span class="text-xl md:text-4xl font-bold tracking-tight text-white">US$64.99</span>
                </p>
                <form action="https://web.idle-mmo.com/payments/stripe/checkout/2500-tokens"  method="POST" class="w-full" x-data="{
            quantity: 1,
            checkQuantity(){            
                if(this.quantity < 0)
                    this.quantity = 0;

                if(this.quantity > 50)
                    this.quantity = 50;
                    
                if(this.quantity > this.max_quantity)
                    this.quantity = this.max_quantity;
            },
          }">
                    <div class="flex mt-4 rounded-md shadow-sm  ">
                        <div class="relative flex items-stretch flex-grow focus-within:z-10">
                            <input type="number" name="quantity" x-on:keyup="checkQuantity();" x-on:change="checkQuantity()" x-model="quantity" :value="quantity" id="quantity" class="bg-gray-900/40 block w-full rounded-none rounded-l-md border-0 py-1.5 text-gray-100  placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6" placeholder="Quantity...">
                        </div>
                        <button type="button" x-on:click="quantity--;checkQuantity();" class="relative -ml-px inline-flex items-center border-l border-gray-800/30 gap-x-1.5 px-3 py-2 text-sm font-semibold text-gray-100 bg-gray-700 hover:bg-gray-700/80">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12h-15"></path>
                            </svg>
                        </button>
                        <button type="button" x-on:click="quantity++;checkQuantity();" class="relative -ml-px inline-flex items-center gap-x-1.5 border-l border-gray-800/30 rounded-r-md px-3 py-2 text-sm font-semibold text-gray-100 bg-gray-700 hover:bg-gray-700/80">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"></path>
                            </svg>
                        </button>
                    </div>
                    <input type="hidden" name="_token" value="XyMoBec0vexU3Uc6FRmgCq1T9viaXxZJLP7cxHcI" autocomplete="off">                    
                                            <button type="submit" class=" mt-2 w-full block rounded-md py-2 px-3 text-center text-sm font-semibold leading-6 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 bg-white/10 text-white hover:bg-white/20 focus-visible:outline-white">
                            Purchase
                        </button>
                                        
                                                            <p class="text-sm text-gray-400 mt-4">The tokens will be placed in your inventory upon purchase.</p>
                </form>
            </div>
        </div>
        

        <div class="rounded-lg bg-gray-900/40 p-4  my-6 mx-4">
            <div class="flex">
                <div class="flex-shrink-0">
                    <svg class="h-5 w-5 text-white-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z" clip-rule="evenodd" />
                    </svg>
                </div>
                <div class="ml-3 flex-1 md:flex md:justify-between">
                    <p class="text-sm text-white-300">A token pack is an item that can be sold or traded. The tokens will be bound to your character upon use of the item.</p>
                </div>
            </div>
        </div>
                                    </div>
                                </template>
                            </div>
                        </div>
                        
                        <div x-show="show_fade"
                             x-transition:enter="transition ease-out"
                             x-transition:enter-start="opacity-0"
                             x-transition:enter-end="opacity-100"
                             x-transition:leave="transition ease-in"
                             x-transition:leave-start="opacity-100"
                             x-transition:leave-end="opacity-0"
                             :class="{ 'duration-300': allow_fade_transition, 'duration-0': !allow_fade_transition }"
                             class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none z-10"></div>
                    </div>
                </div>
            </div>

            </div>

        
        <script type="28379d9fb3f8c28bafd7d866-text/javascript">
    window.addEventListener('alpine:init', function() {
        let game_data = [];
                    game_data.push({"daily_reward.get.endpoint":"https:\/\/web.idle-mmo.com\/api\/daily-reward\/data?expires=1769114238\u0026signature=4bc90ce5e688e176b17c19e21d1cd9c8f19aff9b88c293c88ada9cd00c58f5a5","daily_reward.redeem.endpoint":"https:\/\/web.idle-mmo.com\/api\/daily-reward\/redeem?expires=1769114238\u0026signature=44e7fc231e75382caeacf19acf1d79c5b7d8b1742de25f19fb29bad7c3b7089e","daily_reward.recover.endpoint":"https:\/\/web.idle-mmo.com\/api\/daily-reward\/recover-streak?expires=1769114238\u0026signature=78aab3e9b212f2ad9303f767ae4f9c1e8083e638ef41ecb0e95c89ab9e31b70f","settings.user.update.endpoint":"https:\/\/web.idle-mmo.com\/api\/settings\/user\/update?expires=1769114238\u0026signature=aeb2900a428e0311b08fdac701e20a22871ceb422aa4241033f8ca0357a78265"});
                game_data.push({"character.metrics.endpoint":"https:\/\/web.idle-mmo.com\/api\/character\/metrics?expires=1769114238\u0026signature=f6ff48edc10a4ea2e6662e75f51eb22ff12817df84ee164a422e1bda0d872995"});
                game_data.push({"character.interactions.endpoint":"https:\/\/web.idle-mmo.com\/api\/character\/interactions?expires=1769114238\u0026signature=e8f45e3c76a1cf20f74bd40434bd9e285b1d455dd6502d107d1cd338d72a1966","character.interactions.types":[{"value":"WAVE","label":"Wave"},{"value":"SNOWBALL","label":"Snowball"}]});
                game_data.push({"search.endpoint":"https:\/\/web.idle-mmo.com\/api\/search\/global?expires=1769114238\u0026signature=82b810cc190750f6b3ee56759460a3e9b8f90b5e410af129effa519f79645bb1"});
                game_data.push({"characters.all.endpoint":"https:\/\/web.idle-mmo.com\/api\/characters\/all?expires=1769114238\u0026signature=b8dcf38e5348e2d57cfb682593bcbdb9cb02399298fb391d9e4262c380c80560"});
                game_data.push({"map.main.endpoint":"https:\/\/web.idle-mmo.com\/api\/locations\/all?expires=1769114238\u0026signature=e6479a8e9f25d44fee1d26261e797e344c59b6ee8d94a1110334816a1bd421bf"});
                game_data.push({"quick_view.location.endpoint":"https:\/\/web.idle-mmo.com\/api\/quick-view\/location?expires=1769114238\u0026signature=dba0c9fe4cf54a7400e61c007680a9e82b27a8f52a35169564fde35d52639007","locations.travel.endpoint":"https:\/\/web.idle-mmo.com\/api\/locations\/travel?expires=1769114238\u0026signature=b66cefd2669c55d33b52209aeeb2bb13da50b7f7fabc1ae9520b69499720643b"});
                game_data.push({"quick_view.enemy.endpoint":"https:\/\/web.idle-mmo.com\/api\/quick-view\/enemy?expires=1769114238\u0026signature=9ac4dfc2735e205d4aceccd92d33017f3dd2df385f93d20b6d8ae420444238a5"});
                game_data.push({"quick_view.food.items.endpoint":"https:\/\/web.idle-mmo.com\/api\/quick-view\/food-items?expires=1769114238\u0026signature=724d5a374d84d15717b6110f8acbe52203d004c81b0c01226e2a4469bfe0e42d","quick_view.food.feed.endpoint":"https:\/\/web.idle-mmo.com\/api\/quick-action\/feed?expires=1769114238\u0026signature=79731960f6dfed51f715b229cb90957d9b424f429e8d7abe7b92c61e9f110f08"});
                game_data.push({"quick_view.dungeon.endpoint":"https:\/\/web.idle-mmo.com\/api\/quick-view\/dungeon?expires=1769114238\u0026signature=5701d46070992d022cea0ca313e693ca072efada2f5d2fc7fb077058dff13fc6"});
                game_data.push({"quick_view.world_boss.endpoint":"https:\/\/web.idle-mmo.com\/api\/quick-view\/world-boss?expires=1769114238\u0026signature=ddb35e3f31e5fc2f9dd40136c2149db18f8f882219132fe65b4fb261725c7763"});
                game_data.push({"shrine.progress.endpoint":"https:\/\/web.idle-mmo.com\/api\/shrine\/progress?expires=1769114238\u0026signature=846091487d44b9b2311fdf4ad2f8fd67ed70b594d9c5e1da5ed762108f2404c1","shrine.contribute.endpoint":"https:\/\/web.idle-mmo.com\/api\/shrine\/contribute?expires=1769114238\u0026signature=bf7a5f09953f0d7e7360118d4125d5d3d9de0cd44f622d70ddc91d549710806d","shrine.activate.endpoint":"https:\/\/web.idle-mmo.com\/api\/shrine\/activate?expires=1769114238\u0026signature=23f7c5f86db1539ff206a97a1cba9a6e2096e58c330fb29c2f27c742b101ae30"});
                game_data.push({"shooting_star.status.endpoint":"https:\/\/web.idle-mmo.com\/api\/shooting-star\/information?expires=1769114238\u0026signature=5e4a187eb05a3940dc2159dbb35d4fe9c976b7454fe1e6a2a184d33248d352c5","shooting_star.apply.endpoint":"https:\/\/web.idle-mmo.com\/api\/shooting-star\/apply-effects?expires=1769114238\u0026signature=347304d224008577bcaa095da306e6d8511d3026b816ea1a93fb9272006cf4cd"});
                game_data.push({"character.notifications.endpoint":"https:\/\/web.idle-mmo.com\/api\/character\/notifications?expires=1769114238\u0026signature=c51a2b1e3428ad42a2482ecad124e11b233d1fc8ee39385f957dae4fc6b7c822","mailbox.get.endpoint":"https:\/\/web.idle-mmo.com\/api\/mailbox\/get?expires=1769114238\u0026signature=a7fb105c8fd4e0e2df33350399dd34a426efac7054c70b90924474c2862bb9e8","mailbox.delete.endpoint":"https:\/\/web.idle-mmo.com\/api\/mailbox\/delete?expires=1769114238\u0026signature=1aaad18cb8f51cb3db46e56cbeb4044aad3a6f495587933961d89c854ecd27f8"});
                game_data.push({"report.create.endpoint":"https:\/\/web.idle-mmo.com\/api\/create?expires=1769114238\u0026signature=b7a58ef29e68afd955047079dbb172479a4759f16403a6fdc5acf9216fd8ec62"});
                game_data.push({"party.character.id":659085,"party.id":null,"party.endpoints.get":"https:\/\/web.idle-mmo.com\/api\/party\/get?expires=1769114238\u0026signature=3931a60a17cbb2c48dc499ce0201858df8be6c480d0a7f84c89642d219cf8f89","party.endpoints.invites":"https:\/\/web.idle-mmo.com\/api\/party\/invites?expires=1769114238\u0026signature=af33f3d0fceb8adc97d414d22577ae9d5107e6179b6a7078c56d24b2768dc47a","party.endpoints.leagues":"https:\/\/web.idle-mmo.com\/api\/party\/leagues?expires=1769114238\u0026signature=6c96c05f3eeab468d31f79bc4742152a8df82fcddf8be0dea1699aede29c3eee","party.endpoints.create":"https:\/\/web.idle-mmo.com\/api\/party\/create?expires=1769114238\u0026signature=bd75373c513cb08a9694babb068de1c62d5f8a71d1fe54b152ac8caa8fc5c52f","party.endpoints.close":"https:\/\/web.idle-mmo.com\/api\/party\/close?expires=1769114238\u0026signature=d463d30bad47e786e4df71b5ed10cd27a8ef6fc32106f6766d2fec68d66d9f84","party.endpoints.leave":"https:\/\/web.idle-mmo.com\/api\/party\/leave?expires=1769114238\u0026signature=8ee655580af3db8165d6ab737504ce305b643f4122a3b4f59da01ddd5c71bb6c","party.endpoints.join":"https:\/\/web.idle-mmo.com\/api\/party\/join?expires=1769114238\u0026signature=b8f78a5ef0723ec33de8c7b21dc7c0d9061ea034aa8d58cd27a0999d6cd21f5c","party.endpoints.toggle_privacy":"https:\/\/web.idle-mmo.com\/api\/party\/toggle-privacy?expires=1769114238\u0026signature=8a9630817b9d52898c457785f6b9c5ac9934bac3999d4e2bb0b388630451c969","party.endpoints.invite.create":"https:\/\/web.idle-mmo.com\/api\/party\/invite\/create?expires=1769114238\u0026signature=c6f93738f0f7364a0bbeee5a95b4587c6b25f9de01bb15932566e0643d53cb59","party.endpoints.invite.accept":"https:\/\/web.idle-mmo.com\/api\/party\/invite\/accept?expires=1769114238\u0026signature=ff622977e2af4a25904cd410445eed8a3a4eaff49efa0e7727ad1e686a9f15fd","party.endpoints.invite.delete":"https:\/\/web.idle-mmo.com\/api\/party\/invite\/delete?expires=1769114238\u0026signature=7787312dbe8fc0f9bcf03b5325b75bd3b47b69e5eb0b333f76f31f4f58f7887e"});
                game_data.push({"mailbox.send.endpoint":"https:\/\/web.idle-mmo.com\/api\/mailbox\/send?expires=1769114238\u0026signature=70c959e97f5c93c6e84054f19bb154c39966b97b0db7005587cb02f801bc98fe","mailbox.information.send.endpoint":"https:\/\/web.idle-mmo.com\/api\/mailbox\/information\/send?expires=1769114238\u0026signature=498009b9fd55006bb1cc3a91cf943ec1c480ac44d7e9e812b269d7b72a59b391"});
                game_data.push({"league.list.endpoint":"https:\/\/web.idle-mmo.com\/api\/league\/list?expires=1769114238\u0026signature=04abaf8d3e7a89289a700983c46a7361e064e8fe14cc041521b50db4e0141bfc","league.view.endpoint":"https:\/\/web.idle-mmo.com\/api\/league\/view?expires=1769114238\u0026signature=0599c3e7eb25624da3ff45eaf9c13de5878aa4ee2ee2b454c97e3543b02fb1dc","league.join.endpoint":"https:\/\/web.idle-mmo.com\/api\/league\/join?expires=1769114238\u0026signature=887b14df1f0664e15cc58839e68e447614fc4367a28d39057b692285e12d82da","league.leave.endpoint":"https:\/\/web.idle-mmo.com\/api\/league\/leave?expires=1769114238\u0026signature=5d95b127273d3687dedf2c7777fc8c7915d7752783117395585b5b27c614c01b","league.party_breakdown.endpoint":"https:\/\/web.idle-mmo.com\/api\/league\/party-breakdown?expires=1769114238\u0026signature=31dbfbc5316033a34ce59171382f13714ac9472e9ba6ceda6d3fc7b920c43d95","character.party_id":null,"character.is_party_leader":false});
                game_data.push({"trade.index.endpoint":"https:\/\/web.idle-mmo.com\/api\/trades?expires=1769114238\u0026signature=9346f18fa2aba724dbdd67d921975d6859752b4a08f58e0f7b07d50c0a7e7226","trade.get.endpoint":"https:\/\/web.idle-mmo.com\/api\/trades\/trade\/get?expires=1769114238\u0026signature=2fc63a7f35bd26c6f5f4ab11a49a92e5a2ce1309ea1eccd38c523a20d06495a9","trade.create.endpoint":"https:\/\/web.idle-mmo.com\/api\/trades\/create?expires=1769114238\u0026signature=f139c2a8c0ee55e7baf6907228585b753e90d2360f38c2fc37512672059af221","trade.inventory.endpoint":"https:\/\/web.idle-mmo.com\/api\/item-storage\/inventory?expires=1769114238\u0026signature=3d1e9c37df98228dfed244ee479269cb9403ff1f3fc2b848ea626ce00bde7064","trade.item.add.endpoint":"https:\/\/web.idle-mmo.com\/api\/trades\/trade\/add\/item?expires=1769114238\u0026signature=dccec54052ccb91927eb3f85d1479195e7eaa6871348cd3346781fb50b6f8f49","trade.item.remove.endpoint":"https:\/\/web.idle-mmo.com\/api\/trades\/trade\/remove\/item?expires=1769114238\u0026signature=f0cdc849ba8c2fdeb697e2e64efa977531a590523064cc6fa0d5796f2fbff5cb","trade.gold.update.endpoint":"https:\/\/web.idle-mmo.com\/api\/trades\/trade\/gold\/update?expires=1769114238\u0026signature=e8f4dcb297bd554786f30fdc5a661041e13b209b29d51eedfcec250966b0f9e2","trade.pet.add.endpoint":"https:\/\/web.idle-mmo.com\/api\/trades\/trade\/add\/pet?expires=1769114238\u0026signature=eb1e1170a15034b579ed57f88414032cba5be857d1858f5a740578cfaacd4228","trade.pet.remove.endpoint":"https:\/\/web.idle-mmo.com\/api\/trades\/trade\/remove\/pet?expires=1769114238\u0026signature=dc142d82a568e0729c99a640bbd5399f8fd25c427e3efb138e7db4977b980ad0","trade.accept.endpoint":"https:\/\/web.idle-mmo.com\/api\/trades\/trade\/accept?expires=1769114238\u0026signature=fcc4f333b03a6419edbf3a2643470646c16c1a96195f79c236963e3b3874645c","trade.unaccept.endpoint":"https:\/\/web.idle-mmo.com\/api\/trades\/trade\/unaccept?expires=1769114238\u0026signature=f1e4f03d2cb60ae16cd501da8aedd194132abd34037dd2cf5e0a8b95fa846c8f","trade.cancel.endpoint":"https:\/\/web.idle-mmo.com\/api\/trades\/trade\/cancel?expires=1769114238\u0026signature=14b385aca71f6a79d22d00b45d8c3c432ff3485dcc05aea448be1880a77809d7","pets.inventory.endpoint":"https:\/\/web.idle-mmo.com\/api\/pets\/inventory?expires=1769114238\u0026signature=bd9eb45a58f74b270783bace31572b05852c6cde4da59c666e5e2054422303b5"});
                game_data.push({"payments.apple.process.endpoint":"https:\/\/web.idle-mmo.com\/api\/payments\/apple\/process?expires=1769114238\u0026signature=4dd1185d45f29856973b9413e01a2ad4a9f0ae32c20f779b6a0a09f7c133dbbf","payments.google.process.endpoint":"https:\/\/web.idle-mmo.com\/api\/payments\/google\/process?expires=1769114238\u0026signature=d7350841eb39f545b8f19d180f93f2fc95ba724f75dc7521a85b836771baac2d"});
                game_data.push({"charts.activity.endpoint":"https:\/\/web.idle-mmo.com\/api\/character\/graph\/activity?expires=1769114238\u0026signature=fbace3714b75091e0571d08164f50b371e1fdb7c7e7fc02bb34db702a88d842c","charts.activity.character_id":659085,"charts.activity.filters":{"7":"7 Days","14":"14 Days","30":"30 Days","90":"3 Months","365":"12 Months","0":"All Time"},"charts.activity.label":"Minutes","charts.experience.endpoint":"https:\/\/web.idle-mmo.com\/api\/character\/graph\/experience?expires=1769114238\u0026signature=487ba4b6c5667946f615403038480119fa5b657ae698d66b6f00730a9ebf8da9","charts.experience.character_id":659085,"charts.experience.filters":null,"charts.experience.labels":null});
                game_data.push({"profile.comments.character_id":"v5g4z1dQnVMOlQqy32jp","profile.comments.endpoints.index":"https:\/\/web.idle-mmo.com\/api\/character\/profile-comments?expires=1769114238\u0026signature=cfb7086bc3935b9156acc1a2a849196bef5f5e78fccc4b0edfec04542b1e53d8","profile.comments.endpoints.store":"https:\/\/web.idle-mmo.com\/api\/character\/profile-comments\/create?expires=1769114238\u0026signature=66b936af0826e475571de4ed39ea52fe8becf0512c04abc0ebfce8f62784b344","profile.comments.endpoints.destroy":"https:\/\/web.idle-mmo.com\/api\/character\/profile-comments\/delete?expires=1769114238\u0026signature=e2ee66192a492ab42db149f913d674b78b7719f2fcf969423a45b3be287fd8c2"});
                game_data.push({"promotion.codes.endpoint":"https:\/\/web.idle-mmo.com\/api\/promo-codes?expires=1769114238\u0026signature=db30b3859378dfe1590884b811e22d554e7896384bd803fcb1222c0be12313a0"});
            game_data.forEach((item) => {
            Object.entries(item).forEach(([key, value]) => {
                setGameData(key, value);
            });
        });
        setGameData("onesignal.app_id", "d1693272-b753-4468-b32e-08bf57af236e");
        setGameData("onesignal.external_user_id", "519351-jlPA8v9NMOgynLEyMe2O");
    });
</script>



    <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer type="28379d9fb3f8c28bafd7d866-text/javascript"></script>

    <!-- Cloudflare Web Analytics -->
    <script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "8fdcb248ba174bca8ed87825c79a4e5d"}' type="28379d9fb3f8c28bafd7d866-text/javascript"></script>
    <!-- End Cloudflare Web Analytics -->






<script type="28379d9fb3f8c28bafd7d866-text/javascript">
    window.user_settings = {"email_marketing":{"key":"email_marketing","value":"0"},"email_reminders":{"key":"email_reminders","value":"0"},"show_alt_characters":{"key":"show_alt_characters","value":"0"},"show_hashed_identifiers":{"key":"show_hashed_identifiers","value":"0"},"accessibility_menu_position":{"key":"accessibility_menu_position","value":"top-left"},"accessibility_menu_auto_scroll":{"key":"accessibility_menu_auto_scroll","value":"1"},"auto_redeem_daily_reward":{"key":"auto_redeem_daily_reward","value":"0"},"push_notifications":{"key":"push_notifications","value":"1"},"push_notification_completed_action":{"key":"push_notification_completed_action","value":"1"},"email_important_announcements":{"key":"email_important_announcements","value":"1"},"push_notification_new_mail":{"key":"push_notification_new_mail","value":"1"},"push_notification_shrine_activation":{"key":"push_notification_shrine_activation","value":"1"},"push_notification_action_reminder":{"key":"push_notification_action_reminder","value":"1"},"push_notification_finished_travel":{"key":"push_notification_finished_travel","value":"1"},"push_notification_finished_world_boss":{"key":"push_notification_finished_world_boss","value":"1"},"audio_action_pop":{"key":"audio_action_pop","value":"1"},"show_all_dungeons":{"key":"show_all_dungeons","value":"0"},"show_all_world_bosses":{"key":"show_all_world_bosses","value":"0"},"css_animations":{"key":"css_animations","value":"1"},"show_true_drop_rates":{"key":"show_true_drop_rates","value":"0"},"quick_view_world_boss":{"key":"quick_view_world_boss","value":"0"},"hide_recent_loot":{"key":"hide_recent_loot","value":"0"},"hide_loot_announcements":{"key":"hide_loot_announcements","value":"0"},"show_action_on_menu":{"key":"show_action_on_menu","value":"0"},"2fa:email":{"key":"2fa:email","value":"1"}};
    window.current_character = {"id":659085,"name":"SVNCRY","formatted_name":"\u003Cdiv class=\u0027inline-block inline-flex gap-1 items-center\u0027\u003E\n                    \u003Cspan class=\u0027\u0027 \u003ESVNCRY\u003C\/span\u003E\n                    \n                    \n                \u003C\/div\u003E","avatar_url":"https:\/\/cdn.idle-mmo.com\/cdn-cgi\/image\/width=250,height=250,format=auto\/uploaded\/skins\/V19VbFlUBjD4NKqMe1ycSjEmMggIMr-metaVmFlbGxhIChyZXBsYWNlIHRoZSBvbGQgb25lKS5wbmc=-.png","background_url":"https:\/\/cdn.idle-mmo.com\/cdn-cgi\/image\/width=500,height=500,format=auto\/skins\/backgrounds\/default.jpg","profile_url":"https:\/\/web.idle-mmo.com\/@SVNCRY?same_window=true","combat_level":1,"total_level":40,"unread_notification_count":0,"unread_mail_count":0,"gold":100,"tokens":15,"health":65,"max_health":65,"health_percentage":100,"shards":0,"location_id":1,"is_pending_party_invite":false};
</script>


    
        
            </main>
</div>
<script type="28379d9fb3f8c28bafd7d866-text/javascript">
    document.addEventListener('DOMContentLoaded', () => {
        requestAnimationFrame(() => {
            const root = document.getElementById('background-pattern-root');
            if (!root) return;

            const template = document.getElementById('background-pattern-template');
            if (!template) return;

            const svg = template.content.firstElementChild.cloneNode(true);
            if (!svg) return;

            root.appendChild(svg);

            requestAnimationFrame(() => svg.classList.add('background-pattern--visible'));
        });
    });
</script>
<script src="/cdn-cgi/scripts/7d0fa10a/cloudflare-static/rocket-loader.min.js" data-cf-settings="28379d9fb3f8c28bafd7d866-|49" defer></script></body>
</html>
